(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1850],{86456:($n,qt,e)=>{"use strict";e.d(qt,{r:()=>Le});var o=e(53907),m=e(30705),p=e(57032),z=e(56563),B=e(2784),i=e(77277),$=e(49558),Qe=e(73557),Ne=e(39857),a=e(43642),xe=e(80079),Te=e(90941),ie=e(32915),G=e(40562),Ge=e(21853),ge=e(60744),be=e(66569),re=e(30254),Oe=e(13384),I=e(15933),c=e(58838),R=e(86737),_=e(4989),b=e(44407),N=e(18628),_e=e(84219),fe=e(98685),ve=e(39781),Y=e(39412),v=e(78258),ee=e(73689),oe=e(12536),Rt=e(19219),T=e(41547),sn=e(32442),me=e(93606),Zt=e(3493),yt=e(81887),mt=e(68542),It=e(87561);const We=P=>(...W)=>{const J=W.length===0?[1]:W,it=(ut,Et)=>typeof ut=="string"?ut:Et*ut;return J.map(ut=>{const Et=it(ut,P);return typeof Et=="number"?`${Et}px`:Et}).join(" ")};function Pt(P,W){if(!W||typeof W=="string")return;const J=typeof W=="function"?W(P):W;if(J)return{"@global":J}}function ot(P,W){if(!(!W||typeof W=="string")){if(typeof W=="object"){const J={...P},it=P.spacing(1);return typeof it=="number"&&(J.spacing=We(it)),Object.fromEntries(Object.entries(W).map(([ut,Et])=>typeof Et=="function"?[ut,Et({theme:J})]:[ut,Et]))}return W}}const zt=/^&.Mui-([\w-]+)$/;function Tt(P){let W=P;if(!P||typeof P!="object")return W;for(const J of Object.keys(P)){const it=P[J];if(!(!it||typeof it!="object"))for(const ut of Object.keys(it)){const Et=ut,Jt=Et.match(zt);if(Jt){const[,mn]=Jt,{[Et]:An,...vn}=it;An&&(W={...W,[J]:vn,[mn]:An})}}}return W}function Ft(P,W={}){const J={},it={};for(const ut of Object.keys(W)){const Et=W[ut];Et&&("styleOverrides"in Et&&(ut==="MuiCssBaseline"?J[ut]=Pt(P,Et.styleOverrides):J[ut]=Tt(ot(P,Et.styleOverrides))),"defaultProps"in Et&&(it[ut]=Et.defaultProps))}return{overrides:J,props:it}}const ct={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},ht={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function $t(P){var W;const{colors:J,shape:it,options:ut}=P,Jt=`linear-gradient(90deg, ${(J.length===1?[J[0],J[0]]:J).join(", ")})`,mn=`${it},  ${Jt}`,An=(W=ut==null?void 0:ut.fontColor)!=null?W:"#FFFFFF";return{colors:J,shape:it,backgroundImage:mn,fontColor:An}}const an={home:$t({colors:ht.teal,shape:ct.wave}),documentation:$t({colors:ht.pinkSea,shape:ct.wave2}),tool:$t({colors:ht.purpleSky,shape:ct.round}),service:$t({colors:ht.marineBlue,shape:ct.wave}),website:$t({colors:ht.veryBlue,shape:ct.wave}),library:$t({colors:ht.rubyRed,shape:ct.wave}),other:$t({colors:ht.darkGrey,shape:ct.wave}),app:$t({colors:ht.toastyOrange,shape:ct.wave}),apis:$t({colors:ht.teal,shape:ct.wave2}),card:$t({colors:ht.greens,shape:ct.wave})},St=16,Gt='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',D="home";function U(P){const{palette:W,htmlFontSize:J=St,fontFamily:it=Gt,defaultPageTheme:ut=D,pageTheme:Et=an,typography:Jt}=P;if(!Et[ut])throw new Error(`${ut} is not defined in pageTheme.`);const mn={htmlFontSize:J,fontFamily:it,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};return{palette:W,typography:Jt!=null?Jt:mn,page:Et[ut],getPageTheme:({themeId:An})=>{var vn;return(vn=Et[An])!=null?vn:Et[ut]}}}const O={MuiCssBaseline:{styleOverrides:P=>({html:{height:"100%",fontFamily:P.typography.fontFamily},body:{height:"100%",fontFamily:P.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:P})=>({"&:nth-of-type(odd)":{backgroundColor:P.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:P})=>({"&:nth-of-type(odd)":{backgroundColor:P.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:P})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:P.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:P})=>({padding:P.spacing(1.5,2,1.5,2.5)}),head:({theme:P})=>({wordBreak:"break-word",overflow:"hidden",color:P.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:P})=>({color:P.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,sn._j)(P.palette.link,.3),background:(0,sn.$n)(P.palette.link,.95)},[P.breakpoints.up("md")]:{minWidth:120,fontSize:P.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:P})=>({color:P.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:P})=>({marginRight:P.spacing(1),marginBottom:P.spacing(1)}),label:({theme:P})=>({lineHeight:P.spacing(2.5),fontWeight:P.typography.fontWeightMedium,fontSize:P.spacing(1.75)}),labelSmall:({theme:P})=>({fontSize:P.spacing(1.5)}),deleteIcon:({theme:P})=>({width:P.spacing(3),height:P.spacing(3),margin:P.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:P})=>({width:P.spacing(2),height:P.spacing(2),margin:P.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}},MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}}};var M=(P,W,J)=>{if(!W.has(P))throw TypeError("Cannot "+J)},ne=(P,W,J)=>(M(P,W,"read from private field"),J?J.call(P):W.get(P)),he=(P,W,J)=>{if(W.has(P))throw TypeError("Cannot add the same private member more than once");W instanceof WeakSet?W.add(P):W.set(P,J)},ze=(P,W,J,it)=>(M(P,W,"write to private field"),it?it.call(P,J):W.set(P,J),J),Ct;class Ye{constructor(W,J){he(this,Ct,new Map),ze(this,Ct,new Map),W&&ne(this,Ct).set("v4",W),J&&ne(this,Ct).set("v5",J)}getTheme(W){return ne(this,Ct).get(W)}}Ct=new WeakMap;function Mt(P){const W=U(P),J={...O,...P.components},it=(0,me.Z)({...W,components:J}),ut=Ft(it,J),Et={...(0,ee.Z)(W),...ut};return new Ye(Et,it)}function rn(P){const W=adaptV4Theme(P),J=createTheme$2(P);return new Ye(J,W)}const Wt={light:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},dark:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}},ft={light:Mt({palette:Wt.light}),dark:Mt({palette:Wt.dark})};mt.Z.configure(P=>`v5-${P}`);const we=(0,oe.Z)({productionPrefix:"jss4-"});function rt(P){const{children:W,theme:J,noCssBaseline:it=!1}=P,ut=J.getTheme("v4"),Et=J.getTheme("v5");let Jt;it||(Jt=B.createElement(It.ZP,null));let mn=B.createElement(B.Fragment,null,Jt,W);return ut&&(mn=B.createElement(Rt.ZP,{generateClassName:we},B.createElement(T.Z,{theme:ut},mn))),Et&&(mn=B.createElement(Zt.Z,{injectFirst:!0},B.createElement(yt.Z,{theme:Et},mn))),mn}function xt(P){var W,J,it,ut;return{props:{MuiGrid:(J=(W=O)==null?void 0:W.MuiGrid)==null?void 0:J.defaultProps,MuiSwitch:(ut=(it=O)==null?void 0:it.MuiSwitch)==null?void 0:ut.defaultProps},...U(P)}}function kt(P){return Ft(P,O).overrides}function le(P){const W=xt(P),J=(0,ee.Z)(W),it=kt(J);return{...J,overrides:it}}const Ue=le({palette:Wt.light}),Lt=le({palette:Wt.dark});var Yt=e(98192),se=e(15222);const Ze=[(0,m.ni)({api:p.q,deps:{configApi:p.p},factory:({configApi:P})=>o.pM.compile(`${P.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,m.ni)({api:p.l,deps:{},factory:()=>new o.CX}),(0,m.ni)({api:p.a,deps:{},factory:()=>new o.gN}),(0,m.ni)({api:p.r,deps:{alertApi:p.l},factory:({alertApi:P})=>{const W=new o.KN(P,new o.gr);return o.Jv.forward(W,{hidden:!1}),W}}),(0,m.ni)({api:p.x,deps:{errorApi:p.r},factory:({errorApi:P})=>o.CJ.create({errorApi:P})}),(0,m.ni)({api:p.s,deps:{configApi:p.p,identityApi:p.t,discoveryApi:p.q},factory:({configApi:P,identityApi:W,discoveryApi:J})=>(0,o.jJ)({middleware:[o.II.resolvePluginProtocol({discoveryApi:J}),o.II.injectIdentityAuth({identityApi:W,config:P})]})}),(0,m.ni)({api:p.v,deps:{},factory:()=>new o.YM}),(0,m.ni)({api:p.g,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:P,oauthRequestApi:W,configApi:J})=>o.eE.create({configApi:J,discoveryApi:P,oauthRequestApi:W,environment:J.getOptionalString("auth.environment")})}),(0,m.ni)({api:p.m,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:P,oauthRequestApi:W,configApi:J})=>o._i.create({configApi:J,discoveryApi:P,oauthRequestApi:W,environment:J.getOptionalString("auth.environment")})}),(0,m.ni)({api:p.d,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:P,oauthRequestApi:W,configApi:J})=>o.Td.create({configApi:J,discoveryApi:P,oauthRequestApi:W,defaultScopes:["read:user"],environment:J.getOptionalString("auth.environment")})}),(0,m.ni)({api:p.o,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:P,oauthRequestApi:W,configApi:J})=>o.sn.create({configApi:J,discoveryApi:P,oauthRequestApi:W,environment:J.getOptionalString("auth.environment")})}),(0,m.ni)({api:p.e,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:P,oauthRequestApi:W,configApi:J})=>o.aq.create({configApi:J,discoveryApi:P,oauthRequestApi:W,environment:J.getOptionalString("auth.environment")})}),(0,m.ni)({api:p.h,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:P,oauthRequestApi:W,configApi:J})=>o.$_.create({configApi:J,discoveryApi:P,oauthRequestApi:W,environment:J.getOptionalString("auth.environment")})}),(0,m.ni)({api:p.i,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:P,oauthRequestApi:W,configApi:J})=>o.xP.create({configApi:J,discoveryApi:P,oauthRequestApi:W,defaultScopes:["team"],environment:J.getOptionalString("auth.environment")})}),(0,m.ni)({api:p.j,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:P,oauthRequestApi:W,configApi:J})=>o.C4.create({configApi:J,discoveryApi:P,oauthRequestApi:W,defaultScopes:["REPO_READ"]})}),(0,m.ni)({api:p.k,deps:{discoveryApi:p.q,oauthRequestApi:p.v,configApi:p.p},factory:({discoveryApi:P,oauthRequestApi:W,configApi:J})=>o.uC.create({configApi:J,discoveryApi:P,oauthRequestApi:W,environment:J.getOptionalString("auth.environment")})}),(0,m.ni)({api:z.RV,deps:{discovery:p.q,identity:p.t,config:p.p},factory:({config:P,discovery:W,identity:J})=>z.iM.create({config:P,discovery:W,identity:J})})];function pe({children:P}){return(0,Qe.GV)()?B.createElement(B.Fragment,null,P):B.createElement(Qe.VA,null,P)}const Me=()=>B.createElement($.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}),nt=({step:P,error:W})=>{let J="";return P==="load-config"?J=`The configuration failed to load, someone should have a look at this error: ${W.message}`:P==="load-chunk"&&(J=`Lazy loaded chunk failed to load, try to reload the page: ${W.message}`),B.createElement(pe,null,B.createElement($.mf,{status:"501",statusMessage:J}))},pt=({error:P,resetError:W,plugin:J})=>B.createElement($.yu,{title:`Error in ${J==null?void 0:J.getId()}`,defaultExpanded:!0,error:P},B.createElement(i.Z,{variant:"outlined",onClick:W},"Retry")),Bt={Progress:$.Ex,Router:Ne.VK,NotFoundErrorPage:Me,BootErrorPage:nt,ErrorBoundaryFallback:pt},tn={brokenImage:xe.Z,catalog:N.Z,scaffolder:ie.Z,techdocs:G.Z,search:Ge.Z,chat:ge.Z,dashboard:be.Z,docs:re.Z,email:Oe.Z,github:c.Z,group:_e.Z,help:R.Z,"kind:api":I.Z,"kind:component":b.Z,"kind:domain":a.Z,"kind:group":_e.Z,"kind:location":_.Z,"kind:system":Te.Z,"kind:user":fe.Z,"kind:resource":Y.Z,"kind:template":v.Z,user:fe.Z,warning:ve.Z},Ce=[{id:"light",title:"Light Theme",variant:"light",icon:B.createElement(se.Z,null),Provider:({children:P})=>B.createElement(rt,{theme:ft.light,children:P})},{id:"dark",title:"Dark Theme",variant:"dark",icon:B.createElement(Yt.Z,null),Provider:({children:P})=>B.createElement(rt,{theme:ft.dark,children:P})}];function Le(P){var W,J,it,ut;return(0,o.bg)({...P,apis:(W=P==null?void 0:P.apis)!=null?W:[],bindRoutes:P==null?void 0:P.bindRoutes,components:{...Bt,...P==null?void 0:P.components},configLoader:P==null?void 0:P.configLoader,defaultApis:Ze,icons:{...tn,...P==null?void 0:P.icons},plugins:(J=P==null?void 0:P.plugins)!=null?J:[],featureFlags:(it=P==null?void 0:P.featureFlags)!=null?it:[],themes:(ut=P==null?void 0:P.themes)!=null?ut:Ce})}},88285:($n,qt,e)=>{"use strict";e.d(qt,{MS:()=>be,mk:()=>re,n3:()=>$});var o=e(34520),m=e(32272),p=e(96279),z=e.n(p),B=e(23587),i=e.n(B);const $=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");function Qe(Oe){return!Oe.cursor}const Ne="catalog";var a=Object.defineProperty,xe=(Oe,I,c)=>I in Oe?a(Oe,I,{enumerable:!0,configurable:!0,writable:!0,value:c}):Oe[I]=c,Te=(Oe,I,c)=>(xe(Oe,typeof I!="symbol"?I+"":I,c),c);class ie{constructor(I){Te(this,"discoveryApi"),Te(this,"fetchApi"),this.discoveryApi=I.discoveryApi,this.fetchApi=I.fetchApi||{fetch:z()}}async analyzeLocation(I,c){const R=await this.discoveryApi.getBaseUrl(Ne),_="/analyze-location",b=B.parse(_).expand({});return await this.fetchApi.fetch(`${R}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"POST",body:JSON.stringify(I.body)})}async createLocation(I,c){const R=await this.discoveryApi.getBaseUrl(Ne),_="/locations{?dryRun}",b=B.parse(_).expand({...I.query});return await this.fetchApi.fetch(`${R}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"POST",body:JSON.stringify(I.body)})}async deleteEntityByUid(I,c){const R=await this.discoveryApi.getBaseUrl(Ne),_="/entities/by-uid/{uid}",b=B.parse(_).expand({uid:I.path.uid});return await this.fetchApi.fetch(`${R}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"DELETE"})}async deleteLocation(I,c){const R=await this.discoveryApi.getBaseUrl(Ne),_="/locations/{id}",b=B.parse(_).expand({id:I.path.id});return await this.fetchApi.fetch(`${R}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"DELETE"})}async getEntities(I,c){const R=await this.discoveryApi.getBaseUrl(Ne),_="/entities{?fields,limit,filter*,offset,after,order*}",b=B.parse(_).expand({...I.query});return await this.fetchApi.fetch(`${R}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getEntitiesByQuery(I,c){const R=await this.discoveryApi.getBaseUrl(Ne),_="/entities/by-query{?fields,limit,orderField*,cursor,filter*,fullTextFilterTerm,fullTextFilterFields}",b=B.parse(_).expand({...I.query});return await this.fetchApi.fetch(`${R}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getEntitiesByRefs(I,c){const R=await this.discoveryApi.getBaseUrl(Ne),_="/entities/by-refs",b=B.parse(_).expand({});return await this.fetchApi.fetch(`${R}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"POST",body:JSON.stringify(I.body)})}async getEntityAncestryByName(I,c){const R=await this.discoveryApi.getBaseUrl(Ne),_="/entities/by-name/{kind}/{namespace}/{name}/ancestry",b=B.parse(_).expand({kind:I.path.kind,namespace:I.path.namespace,name:I.path.name});return await this.fetchApi.fetch(`${R}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getEntityByName(I,c){const R=await this.discoveryApi.getBaseUrl(Ne),_="/entities/by-name/{kind}/{namespace}/{name}",b=B.parse(_).expand({kind:I.path.kind,namespace:I.path.namespace,name:I.path.name});return await this.fetchApi.fetch(`${R}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getEntityByUid(I,c){const R=await this.discoveryApi.getBaseUrl(Ne),_="/entities/by-uid/{uid}",b=B.parse(_).expand({uid:I.path.uid});return await this.fetchApi.fetch(`${R}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getEntityFacets(I,c){const R=await this.discoveryApi.getBaseUrl(Ne),_="/entity-facets{?facet*,filter*}",b=B.parse(_).expand({...I.query});return await this.fetchApi.fetch(`${R}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getLocation(I,c){const R=await this.discoveryApi.getBaseUrl(Ne),_="/locations/{id}",b=B.parse(_).expand({id:I.path.id});return await this.fetchApi.fetch(`${R}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getLocations(I,c){const R=await this.discoveryApi.getBaseUrl(Ne),_="/locations",b=B.parse(_).expand({});return await this.fetchApi.fetch(`${R}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async refreshEntity(I,c){const R=await this.discoveryApi.getBaseUrl(Ne),_="/refresh",b=B.parse(_).expand({});return await this.fetchApi.fetch(`${R}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"POST",body:JSON.stringify(I.body)})}async validateEntity(I,c){const R=await this.discoveryApi.getBaseUrl(Ne),_="/validate-entity",b=B.parse(_).expand({});return await this.fetchApi.fetch(`${R}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"POST",body:JSON.stringify(I.body)})}}var G=Object.defineProperty,Ge=(Oe,I,c)=>I in Oe?G(Oe,I,{enumerable:!0,configurable:!0,writable:!0,value:c}):Oe[I]=c,ge=(Oe,I,c)=>(Ge(Oe,typeof I!="symbol"?I+"":I,c),c);class be{constructor(I){ge(this,"apiClient"),this.apiClient=new ie(I)}async getEntityAncestors(I,c){return await this.requestRequired(await this.apiClient.getEntityAncestryByName({path:(0,o.of)(I.entityRef)},c))}async getLocationById(I,c){return await this.requestOptional(await this.apiClient.getLocation({path:{id:I}},c))}async getEntities(I,c){const{filter:R=[],fields:_=[],order:b,offset:N,limit:_e,after:fe}=I!=null?I:{},ve=[];if(b)for(const ee of[b].flat())ee&&ve.push(`${ee.order}:${ee.field}`);const Y=await this.requestRequired(await this.apiClient.getEntities({query:{fields:_,limit:_e,filter:this.getFilterValue(R),offset:N,after:fe,order:b?ve:void 0}},c)),v=(ee,oe)=>{var Rt,T;if(((Rt=ee.metadata)==null?void 0:Rt.name)===void 0||ee.kind===void 0||((T=oe.metadata)==null?void 0:T.name)===void 0||oe.kind===void 0)return 0;const sn=(0,o.eE)(ee),me=(0,o.eE)(oe);return sn<me?-1:sn>me?1:0};return{items:Y.sort(v)}}async getEntitiesByRefs(I,c){const R=await this.apiClient.getEntitiesByRefs({body:I},c);if(!R.ok)throw await m.VL.fromResponse(R);const{items:_}=await R.json();return{items:_.map(b=>b!=null?b:void 0)}}async queryEntities(I={},c){var R,_;const b={};if(Qe(I)){const{fields:N=[],filter:_e,limit:fe,orderFields:ve,fullTextFilter:Y}=I;b.filter=this.getFilterValue(_e),fe!==void 0&&(b.limit=fe),ve!==void 0&&(b.orderField=(Array.isArray(ve)?ve:[ve]).map(({field:ee,order:oe})=>`${ee},${oe}`)),N.length&&(b.fields=N);const v=(R=Y==null?void 0:Y.term)==null?void 0:R.trim();v&&(b.fullTextFilterTerm=v),(_=Y==null?void 0:Y.fields)!=null&&_.length&&(b.fullTextFilterFields=Y.fields)}else{const{fields:N=[],limit:_e,cursor:fe}=I;b.cursor=fe,_e!==void 0&&(b.limit=_e),N.length&&(b.fields=N)}return this.apiClient.getEntitiesByQuery({query:b},c).then(N=>N.json())}async getEntityByRef(I,c){return this.requestOptional(await this.apiClient.getEntityByName({path:(0,o.of)(I)},c))}async getEntityByName(I,c){const{kind:R,namespace:_="default",name:b}=I;return this.requestOptional(await this.apiClient.getEntityByName({path:{kind:R,namespace:_,name:b}},c))}async refreshEntity(I,c){const R=await this.apiClient.refreshEntity({body:{entityRef:I}},c);if(R.status!==200)throw new Error(await R.text())}async getEntityFacets(I,c){const{filter:R=[],facets:_}=I;return await this.requestOptional(await this.apiClient.getEntityFacets({query:{facet:_,filter:this.getFilterValue(R)}},c))}async addLocation(I,c){const{type:R="url",target:_,dryRun:b}=I,N=await this.apiClient.createLocation({body:{type:R,target:_},query:{dryRun:b?"true":void 0}},c);if(N.status!==201)throw new Error(await N.text());const{location:_e,entities:fe,exists:ve}=await N.json();if(!_e)throw new Error(`Location wasn't added: ${_}`);return{location:_e,entities:fe,exists:ve}}async getLocationByRef(I,c){return(await this.requestRequired(await this.apiClient.getLocations({},c))).map(_=>_.data).find(_=>I===(0,o.NZ)(_))}async removeLocationById(I,c){await this.requestIgnored(await this.apiClient.deleteLocation({path:{id:I}},c))}async removeEntityByUid(I,c){await this.requestIgnored(await this.apiClient.deleteEntityByUid({path:{uid:I}},c))}async validateEntity(I,c,R){const _=await this.apiClient.validateEntity({body:{entity:I,location:c}},R);if(_.ok)return{valid:!0};if(_.status!==400)throw await m.VL.fromResponse(_);const{errors:b=[]}=await _.json();return{valid:!1,errors:b}}async requestIgnored(I){if(!I.ok)throw await m.VL.fromResponse(I)}async requestRequired(I){if(!I.ok)throw await m.VL.fromResponse(I);return I.json()}async requestOptional(I){if(!I.ok){if(I.status===404)return;throw await m.VL.fromResponse(I)}return await I.json()}getFilterValue(I=[]){const c=[];for(const R of[I].flat()){const _=[];for(const[b,N]of Object.entries(R))for(const _e of[N].flat())_e===$?_.push(b):typeof _e=="string"&&_.push(`${b}=${_e}`);_.length&&c.push(_.join(","))}return c}}const re="backstage.io/catalog-processing"},34520:($n,qt,e)=>{"use strict";e.d(qt,{$1:()=>st,CV:()=>Fa,Dg:()=>k,In:()=>pe,KS:()=>dn,M6:()=>da,M_:()=>Q,NZ:()=>or,Ou:()=>nr,P1:()=>qa,S4:()=>de,Tf:()=>Ge,X9:()=>j,Zj:()=>te,_b:()=>He,aS:()=>un,cz:()=>wt,eE:()=>_e,hr:()=>At,iB:()=>b,l2:()=>G,nP:()=>ke,of:()=>N,q1:()=>er,w$:()=>Je,wI:()=>Lt,wP:()=>qe,y$:()=>se,zG:()=>ie});var o=e(76635),m=e.n(o),p=e(27991),z=e.n(p);function B(Fe){return Fe.kind.toLocaleUpperCase("en-US")==="API"}function i(Fe){return Fe.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function $(Fe){return Fe.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function Qe(Fe){return Fe.kind.toLocaleUpperCase("en-US")==="GROUP"}function Ne(Fe){return Fe.kind.toLocaleUpperCase("en-US")==="LOCATION"}function a(Fe){return Fe.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function xe(Fe){return Fe.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function Te(Fe){return Fe.kind.toLocaleUpperCase("en-US")==="USER"}const ie="default",G="backstage.io/view-url",Ge="backstage.io/edit-url",ge="kubernetes.io/api-server",be="kubernetes.io/api-server-certificate-authority",re="kubernetes.io/auth-provider";var Oe=Object.defineProperty,I=(Fe,q,at)=>q in Fe?Oe(Fe,q,{enumerable:!0,configurable:!0,writable:!0,value:at}):Fe[q]=at,c=(Fe,q,at)=>(I(Fe,typeof q!="symbol"?q+"":q,at),at);class R{constructor(q=ie){c(this,"namespace"),this.namespace=q}async enforce(q){return q.metadata.namespace?q:lodash.merge({metadata:{namespace:this.namespace}},q)}}function _(Fe){let q=Fe.indexOf(":");const at=Fe.indexOf("/");at!==-1&&at<q&&(q=-1);const bn=q===-1?void 0:Fe.slice(0,q),Ln=at===-1?void 0:Fe.slice(q+1,at),qn=Fe.slice(Math.max(q+1,at+1));if(bn===""||Ln===""||qn==="")throw new TypeError(`Entity reference "${Fe}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:bn,namespace:Ln,name:qn}}function b(Fe){return{kind:Fe.kind,namespace:Fe.metadata.namespace||ie,name:Fe.metadata.name}}function N(Fe,q){var at,bn,Ln,qn;if(!Fe)throw new Error("Entity reference must not be empty");const ha=q==null?void 0:q.defaultKind,Ua=(q==null?void 0:q.defaultNamespace)||ie;let Ka,va,xa;if(typeof Fe=="string"){const Ia=_(Fe);Ka=(at=Ia.kind)!=null?at:ha,va=(bn=Ia.namespace)!=null?bn:Ua,xa=Ia.name}else Ka=(Ln=Fe.kind)!=null?Ln:ha,va=(qn=Fe.namespace)!=null?qn:Ua,xa=Fe.name;if(Ka)if(va){if(!xa){const Ia=JSON.stringify(Fe);throw new Error(`Entity reference ${Ia} had missing or empty name`)}}else{const Ia=JSON.stringify(Fe);throw new Error(`Entity reference ${Ia} had missing or empty namespace`)}else{const Ia=JSON.stringify(Fe);throw new Error(`Entity reference ${Ia} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:Ka,namespace:va,name:xa}}function _e(Fe){var q,at;let bn,Ln,qn;return"metadata"in Fe?(bn=Fe.kind,Ln=(q=Fe.metadata.namespace)!=null?q:ie,qn=Fe.metadata.name):(bn=Fe.kind,Ln=(at=Fe.namespace)!=null?at:ie,qn=Fe.name),`${bn.toLocaleLowerCase("en-US")}:${Ln.toLocaleLowerCase("en-US")}/${qn.toLocaleLowerCase("en-US")}`}var fe=Object.defineProperty,ve=(Fe,q,at)=>q in Fe?fe(Fe,q,{enumerable:!0,configurable:!0,writable:!0,value:at}):Fe[q]=at,Y=(Fe,q,at)=>(ve(Fe,typeof q!="symbol"?q+"":q,at),at);class v{constructor(q){Y(this,"parentRef");const{kind:at,namespace:bn,name:Ln}=N(q,{defaultKind:"Group",defaultNamespace:ie});if(at.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=_e({kind:at,namespace:bn,name:Ln})}async enforce(q){if(q.kind!=="Group")return q;const at=q;return at.spec.parent||_e(at)!==this.parentRef&&(at.spec.parent=this.parentRef),at}}class ee{static isValidPrefixAndOrSuffix(q,at,bn,Ln){if(typeof q!="string")return!1;const qn=q.split(at);return qn.length===1?Ln(qn[0]):qn.length===2?bn(qn[0])&&Ln(qn[1]):!1}static isJsonSafe(q){try{return m().isEqual(q,JSON.parse(JSON.stringify(q)))}catch{return!1}}static isValidDnsSubdomain(q){return typeof q=="string"&&q.length>=1&&q.length<=253&&q.split(".").every(ee.isValidDnsLabel)}static isValidDnsLabel(q){return typeof q=="string"&&q.length>=1&&q.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(q)}static isValidTag(q){return typeof q=="string"&&q.length>=1&&q.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(q)}static isValidUrl(q){if(typeof q!="string")return!1;try{return new URL(q),!0}catch{return!1}}static isValidString(q){var at;return typeof q=="string"&&((at=q==null?void 0:q.trim())==null?void 0:at.length)>=1}static isNonEmptyString(q){var at;return typeof q=="string"&&((at=q==null?void 0:q.trim())==null?void 0:at.length)>=1}}var oe="http://json-schema.org/draft-07/schema",Rt="EntityEnvelope",T="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",sn=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],me="object",Zt=["apiVersion","kind","metadata"],yt=!0,mt={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},It={$schema:oe,$id:Rt,description:T,examples:sn,type:me,required:Zt,additionalProperties:yt,properties:mt},We="http://json-schema.org/draft-07/schema",Pt="Entity",ot="The parts of the format that's common to all versions/kinds of entity.",zt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],Tt="object",Ft=["apiVersion","kind","metadata"],ct=!1,ht={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},$t={$schema:We,$id:Pt,description:ot,examples:zt,type:Tt,required:Ft,additionalProperties:ct,properties:ht},an="http://json-schema.org/draft-07/schema",St="EntityMeta",Gt="Metadata fields common to all versions/kinds of entity.",D=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],U="object",O=["name"],M=!0,ne={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},he={$schema:an,$id:St,description:Gt,examples:D,type:U,required:O,additionalProperties:M,properties:ne},ze="http://json-schema.org/draft-07/schema",Ct="common",Ye="object",Mt="Common definitions to import from other schemas",rn={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","targetRef"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference",deprecated:!0},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},Wt={$schema:ze,$id:Ct,type:Ye,description:Mt,definitions:rn};const ft=new Map,we=[It,$t,he,Wt];function rt(Fe){if(!(Fe!=null&&Fe.length))throw new TypeError("Unknown error");const q=Fe[0];throw new TypeError(`${q.instancePath||"<root>"} ${q.message}${q.params?` - ${Object.entries(q.params).map(([at,bn])=>`${at}: ${bn}`).join(", ")}`:""}`)}function xt(Fe,q={}){var at;const bn=(at=q==null?void 0:q.disableCache)!=null?at:!1,Ln=bn?"":JSON.stringify(Fe);if(!bn){const Ka=ft.get(Ln);if(Ka)return Ka}const qn=kt(Fe),ha=new(z())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});qn.length&&ha.addSchema(qn,void 0,void 0,!0);const Ua=ha.compile(Fe);return bn||ft.set(Ln,Ua),Ua}function kt(Fe){if(typeof Fe!="object")return[];const q=new Set;Fe.$id&&q.add(Fe.$id);const at=new Array,bn=[Fe];for(;bn.length;){const Ln=bn.pop();for(const qn of le(Ln))if(!q.has(qn)){q.add(qn);const ha=we.find(Ua=>Ua.$id===qn);ha&&(at.push(ha),bn.push(ha))}}return at}function*le(Fe){const q=[Fe];for(;q.length;){const at=q.pop();if(typeof at=="object"&&at)for(const[bn,Ln]of Object.entries(at))bn==="$ref"&&typeof Ln=="string"?yield Ln.split("#")[0]:q.push(Ln)}}function Ue(Fe){const q=xt(Fe||It);return at=>{if(q(at)===!0)return at;throw rt(q.errors)}}function Lt(Fe){const q=xt(Fe);return at=>{var bn;if(q(at)===!0)return at;const qn=(bn=q.errors)==null?void 0:bn.filter(ha=>["/kind","/apiVersion"].includes(ha.instancePath));if(qn!=null&&qn.length&&qn.every(ha=>ha.keyword==="enum"))return!1;throw rt(q.errors)}}function Yt(Fe){const q=xt(Fe||$t);return at=>{if(q(at)===!0)return at;throw rt(q.errors)}}class se{static isValidApiVersion(q){return ee.isValidPrefixAndOrSuffix(q,"/",ee.isValidDnsSubdomain,at=>at.length>=1&&at.length<=63&&/^[a-z0-9A-Z]+$/.test(at))}static isValidKind(q){return typeof q=="string"&&q.length>=1&&q.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(q)}static isValidObjectName(q){return typeof q=="string"&&q.length>=1&&q.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(q)}static isValidNamespace(q){return ee.isValidDnsLabel(q)}static isValidLabelKey(q){return ee.isValidPrefixAndOrSuffix(q,"/",ee.isValidDnsSubdomain,se.isValidObjectName)}static isValidLabelValue(q){return q===""||se.isValidObjectName(q)}static isValidAnnotationKey(q){return ee.isValidPrefixAndOrSuffix(q,"/",ee.isValidDnsSubdomain,se.isValidObjectName)}static isValidAnnotationValue(q){return typeof q=="string"}}const Ze={isValidApiVersion:se.isValidApiVersion,isValidKind:se.isValidKind,isValidEntityName:se.isValidObjectName,isValidNamespace:se.isValidNamespace,isValidLabelKey:se.isValidLabelKey,isValidLabelValue:se.isValidLabelValue,isValidAnnotationKey:se.isValidAnnotationKey,isValidAnnotationValue:se.isValidAnnotationValue,isValidTag:Fe=>typeof Fe=="string"&&Fe.length>=1&&Fe.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(Fe)};function pe(Fe={}){return{...Ze,...Fe}}var Me=Object.defineProperty,nt=(Fe,q,at)=>q in Fe?Me(Fe,q,{enumerable:!0,configurable:!0,writable:!0,value:at}):Fe[q]=at,pt=(Fe,q,at)=>(nt(Fe,typeof q!="symbol"?q+"":q,at),at);class Bt{constructor(q=pe()){pt(this,"validators"),this.validators=q}async enforce(q){var at,bn,Ln,qn,ha,Ua,Ka;function va(g,l,y){if(l==null)throw new Error(`${g} must have a value`);let K;try{K=y(l)}catch(Re){throw new Error(`${g} could not be validated, ${Re}`)}if(!K){let Re;switch(y.name){case"isValidLabelValue":case"isValidObjectName":Re="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":Re="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":Re="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":Re="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":Re="a string";break;case"isValidKind":Re="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":Re="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":Re="a non empty string";break;default:Re=void 0;break}const lt=Re?` expected ${Re} but found "${l}".`:"";throw new Error(`"${g}" is not valid;${lt} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function xa(g,l,y){return l===void 0||va(g,l,y)}va("apiVersion",q.apiVersion,this.validators.isValidApiVersion),va("kind",q.kind,this.validators.isValidKind),va("metadata.name",q.metadata.name,this.validators.isValidEntityName),xa("metadata.namespace",q.metadata.namespace,this.validators.isValidNamespace);for(const[g,l]of Object.entries((at=q.metadata.labels)!=null?at:[]))va(`labels.${g}`,g,this.validators.isValidLabelKey),va(`labels.${g}`,l,this.validators.isValidLabelValue);for(const[g,l]of Object.entries((bn=q.metadata.annotations)!=null?bn:[]))va(`annotations.${g}`,g,this.validators.isValidAnnotationKey),va(`annotations.${g}`,l,this.validators.isValidAnnotationValue);const Ia=(Ln=q.metadata.tags)!=null?Ln:[];for(let g=0;g<Ia.length;++g)va(`tags.${g}`,Ia[g],this.validators.isValidTag);const Ya=(qn=q.metadata.links)!=null?qn:[];for(let g=0;g<Ya.length;++g)va(`links.${g}.url`,(ha=Ya[g])==null?void 0:ha.url,ee.isValidUrl),xa(`links.${g}.title`,(Ua=Ya[g])==null?void 0:Ua.title,ee.isNonEmptyString),xa(`links.${g}.icon`,(Ka=Ya[g])==null?void 0:Ka.icon,se.isValidObjectName);return q}}var tn=Object.defineProperty,Ce=(Fe,q,at)=>q in Fe?tn(Fe,q,{enumerable:!0,configurable:!0,writable:!0,value:at}):Fe[q]=at,Le=(Fe,q,at)=>(Ce(Fe,typeof q!="symbol"?q+"":q,at),at);const P=null;class W{constructor(q=P){Le(this,"knownFields"),this.knownFields=q}async enforce(q){for(const at of Object.keys(q))if(!this.knownFields.includes(at))throw new Error(`Unknown field ${at}`);return q}}var J=Object.defineProperty,it=(Fe,q,at)=>q in Fe?J(Fe,q,{enumerable:!0,configurable:!0,writable:!0,value:at}):Fe[q]=at,ut=(Fe,q,at)=>(it(Fe,typeof q!="symbol"?q+"":q,at),at);class Et{constructor(){ut(this,"validate")}async enforce(q){if(!this.validate){const Ln=new Ajv({allowUnionTypes:!0});this.validate=Ln.addSchema([Wt,he],void 0,void 0,!0).compile($t)}if(this.validate(q)===!0)return q;const[bn]=this.validate.errors||[];throw bn?new Error(`Malformed envelope, ${bn.instancePath||"<root>"} ${bn.message}`):new Error("Malformed envelope, Unknown error")}}class Jt{constructor(q){this.policies=q}async enforce(q){let at=q;for(const bn of this.policies){const Ln=await bn.enforce(at);if(!Ln)throw new Error(`Policy ${bn.constructor.name} did not return a result`);at=Ln}return at}}class mn{constructor(q){this.policies=q}async enforce(q){for(const at of this.policies){const bn=await at.enforce(q);if(bn)return bn}throw new Error("The entity did not match any known policy")}}const An={allOf(Fe){return new Jt(Fe)},oneOf(Fe){return new mn(Fe)}};var vn="http://json-schema.org/draft-07/schema",Vn="ApiV1alpha1",Mn="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",Zn=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],A=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],F={$schema:vn,$id:Vn,description:Mn,examples:Zn,allOf:A};function Pe(Fe){let q;return{async check(at){return q||(q=Lt(Fe)),q(at)===at}}}const gt=Pe(F);var Ot="http://json-schema.org/draft-07/schema",Vt="ComponentV1alpha1",ae='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',Ae=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],je=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],Ht={$schema:Ot,$id:Vt,description:ae,examples:Ae,allOf:je};const nn=Pe(Ht);var ln="http://json-schema.org/draft-07/schema",on="DomainV1alpha1",In="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",Bn=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],Hn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],ra={$schema:ln,$id:on,description:In,examples:Bn,allOf:Hn};const yn=Pe(ra);var na="http://json-schema.org/draft-07/schema",ia="GroupV1alpha1",oa="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",ua=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],Pa=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],Qn={$schema:na,$id:ia,description:oa,examples:ua,allOf:Pa};const Ea=Pe(Qn);var X="http://json-schema.org/draft-07/schema",Be="LocationV1alpha1",et="A location is a marker that references other places to look for catalog data.",vt=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],Se=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],H={$schema:X,$id:Be,description:et,examples:vt,allOf:Se};const Ee=Pe(H),de="ownedBy",st="ownerOf",k="consumesApi",j="apiConsumedBy",Q="providesApi",te="apiProvidedBy",ke="dependsOn",Je="dependencyOf",He="parentOf",qe="childOf",At="memberOf",dn="hasMember",wt="partOf",un="hasPart";var hn="http://json-schema.org/draft-07/schema",En="ResourceV1alpha1",kn="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",wn=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],xn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],Rn={$schema:hn,$id:En,description:kn,examples:wn,allOf:xn};const On=Pe(Rn);var pn="http://json-schema.org/draft-07/schema",_n="SystemV1alpha1",aa="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",sa=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],Aa=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],Sa={$schema:pn,$id:_n,description:aa,examples:sa,allOf:Aa};const ka=Pe(Sa);var Wa="http://json-schema.org/draft-07/schema",Ba="UserV1alpha1",Ra="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",ja=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],Na=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],Va={$schema:Wa,$id:Ba,description:Ra,examples:ja,allOf:Na};const ur=Pe(Va),qa="backstage.io/managed-by-location",er="backstage.io/managed-by-origin-location",da="backstage.io/source-location",tr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function nr(Fe){if(typeof Fe!="string")throw new TypeError(`Unable to parse location ref '${Fe}', unexpected argument ${typeof Fe}`);const q=Fe.indexOf(":");if(q<0)throw new TypeError(`Unable to parse location ref '${Fe}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const at=Fe.substring(0,q).trim(),bn=Fe.substring(q+1).trim();if(!at||!bn)throw new TypeError(`Unable to parse location ref '${Fe}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(at==="http"||at==="https")throw new TypeError(`Invalid location ref '${Fe}', please prefix it with 'url:', e.g. 'url:${Fe}'`);if(tr.test(bn))throw new TypeError(`Invalid location ref '${Fe}', target is a javascript: URL`);return{type:at,target:bn}}function or(Fe){const{type:q,target:at}=Fe;if(q){if(!at)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(tr.test(at))throw new TypeError(`Invalid location ref '${q}:${at}', target is a javascript: URL`);return`${q}:${at}`}function Fa(Fe){var q,at,bn,Ln,qn;const ha=(qn=(at=(q=Fe.metadata)==null?void 0:q.annotations)==null?void 0:at[da])!=null?qn:(Ln=(bn=Fe.metadata)==null?void 0:bn.annotations)==null?void 0:Ln[qa];if(!ha)throw new Error(`Entity '${_e(Fe)}' is missing location`);return nr(ha)}},53907:($n,qt,e)=>{"use strict";e.d(qt,{CX:()=>Pa,WY:()=>at,uC:()=>na,xP:()=>Bn,C4:()=>ra,KN:()=>st,gr:()=>te,II:()=>Rn,wQ:()=>bo,Td:()=>it,aq:()=>Et,eE:()=>An,_i:()=>je,gN:()=>Ea,YM:()=>Ba,sn:()=>Zn,$_:()=>on,Jv:()=>ke,pM:()=>Ee,CJ:()=>qa,jJ:()=>wt,bg:()=>Uo});var o=e(2784),m=e(13980),p=e.n(m),z=e(18473),B=e(82394),i=e.n(B),$=e(57032),Qe=e(30705),Ne=e(30195),a=e(9850),xe=e.n(a),Te=e(12782),ie=e.n(Te);const G=null;function Ge(d,n){let s,f=!1;const w={};try{s=n!=null&&n.key?d.getConfig(n.key):d;for(const ye of G){const Xe=s.getOptionalNumber(ye);Xe!==void 0&&(w[ye]=Xe,f=!0)}}catch(ye){throw new InputError(`Failed to read duration from config, ${ye}`)}try{if(!f){const Xe=G.map(tt=>`'${tt}'`).join(", ");throw new Error(`Needs one or more of ${Xe}`)}const ye=s.keys().filter(Xe=>!G.includes(Xe));if(ye.length){const Xe=ye.length===1?"property":"properties",tt=ye.map(Qt=>`'${Qt}'`).join(", "),Ut=G.map(Qt=>`'${Qt}'`).join(", ");throw new Error(`Unknown ${Xe} ${tt}; expected one or more of ${Ut}`)}}catch(ye){let Xe="Failed to read duration from config";throw n!=null&&n.key&&(Xe+=` at '${n.key}'`),new InputError(`${Xe}, ${ye}`)}return w}var ge=Object.defineProperty,be=(d,n,s)=>n in d?ge(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,re=(d,n,s)=>(be(d,typeof n!="symbol"?n+"":n,s),s);const Oe=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function I(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function c(d){if(d===null)return"null";if(Array.isArray(d))return"array";const n=typeof d;return n==="number"&&isNaN(d)?"nan":n==="string"&&d===""?"empty-string":n}const R={type(d,n,s,f){return`Invalid type in config for key '${d}' in '${n}', got ${s}, wanted ${f}`},missing(d){return`Missing required config value at '${d}'`},convert(d,n,s){return`Unable to convert config value for key '${d}' in '${n}' to a ${s}`}};class _{constructor(n,s="mock-config",f,w=""){this.data=n,this.context=s,this.fallback=f,this.prefix=w,re(this,"filteredKeys"),re(this,"notifiedFilteredKeys",new Set)}static fromConfigs(n){return n.length===0?new _(void 0):n.reduce((s,{data:f,context:w,filteredKeys:ye,deprecatedKeys:Xe})=>{const tt=new _(f,w,s);if(tt.filteredKeys=ye,Xe)for(const{key:Ut,description:Qt}of Xe)console.warn(`The configuration key '${Ut}' of ${w} is deprecated and may be removed soon. ${Qt||""}`);return tt},void 0)}has(n){var s,f;return this.readValue(n)!==void 0?!0:(f=(s=this.fallback)==null?void 0:s.has(n))!=null?f:!1}keys(){var n,s;const f=this.data?Object.keys(this.data):[],w=(s=(n=this.fallback)==null?void 0:n.keys())!=null?s:[];return[...new Set([...f,...w])]}get(n){const s=this.getOptional(n);if(s===void 0)throw new Error(R.missing(this.fullKey(n!=null?n:"")));return s}getOptional(n){var s,f;const w=xe()(this.readValue(n)),ye=(s=this.fallback)==null?void 0:s.getOptional(n);return w===void 0?ye:ye===void 0?w:ie()({},{value:ye},{value:w},(Xe,tt)=>!I(tt)||!I(Xe)?tt:void 0).value}getConfig(n){const s=this.getOptionalConfig(n);if(s===void 0)throw new Error(R.missing(this.fullKey(n)));return s}getOptionalConfig(n){var s;const f=this.readValue(n),w=(s=this.fallback)==null?void 0:s.getOptionalConfig(n);if(I(f))return this.copy(f,n,w);if(f!==void 0)throw new TypeError(R.type(this.fullKey(n),this.context,c(f),"object"));return w}getConfigArray(n){const s=this.getOptionalConfigArray(n);if(s===void 0)throw new Error(R.missing(this.fullKey(n)));return s}getOptionalConfigArray(n){var s;const f=this.readConfigValue(n,w=>{if(!Array.isArray(w))return{expected:"object-array"};for(const[ye,Xe]of w.entries())if(!I(Xe))return{expected:"object-array",value:Xe,key:`${n}[${ye}]`};return!0});if(f)return f.map((w,ye)=>this.copy(w,`${n}[${ye}]`))}getNumber(n){const s=this.getOptionalNumber(n);if(s===void 0)throw new Error(R.missing(this.fullKey(n)));return s}getOptionalNumber(n){const s=this.readConfigValue(n,w=>typeof w=="number"||typeof w=="string"||{expected:"number"});if(typeof s=="number"||s===void 0)return s;const f=Number(s);if(!Number.isFinite(f))throw new Error(R.convert(this.fullKey(n),this.context,"number"));return f}getBoolean(n){const s=this.getOptionalBoolean(n);if(s===void 0)throw new Error(R.missing(this.fullKey(n)));return s}getOptionalBoolean(n){const s=this.readConfigValue(n,w=>typeof w=="boolean"||typeof w=="number"||typeof w=="string"||{expected:"boolean"});if(typeof s=="boolean"||s===void 0)return s;const f=String(s).trim();if(/^(?:y|yes|true|1|on)$/i.test(f))return!0;if(/^(?:n|no|false|0|off)$/i.test(f))return!1;throw new Error(R.convert(this.fullKey(n),this.context,"boolean"))}getString(n){const s=this.getOptionalString(n);if(s===void 0)throw new Error(R.missing(this.fullKey(n)));return s}getOptionalString(n){return this.readConfigValue(n,s=>typeof s=="string"&&s!==""||{expected:"string"})}getStringArray(n){const s=this.getOptionalStringArray(n);if(s===void 0)throw new Error(R.missing(this.fullKey(n)));return s}getOptionalStringArray(n){return this.readConfigValue(n,s=>{if(!Array.isArray(s))return{expected:"string-array"};for(const[f,w]of s.entries())if(typeof w!="string"||w==="")return{expected:"string-array",value:w,key:`${n}[${f}]`};return!0})}fullKey(n){return`${this.prefix}${this.prefix?".":""}${n}`}copy(n,s,f){const w=new _(n,this.context,f,this.fullKey(s));return w.filteredKeys=this.filteredKeys,w}readConfigValue(n,s){var f,w;const ye=this.readValue(n);if(ye===void 0)return(w=this.fallback)==null?void 0:w.readConfigValue(n,s);const Xe=s(ye);if(Xe!==!0){const{key:tt=n,value:Ut=ye,expected:Qt}=Xe;throw new TypeError(R.type(this.fullKey(tt),this.context,c(Ut),Qt))}return ye}readValue(n){const s=n?n.split("."):[];for(const w of s)if(!Oe.test(w))throw new TypeError(`Invalid config key '${n}'`);if(this.data===void 0)return;let f=this.data;for(const[w,ye]of s.entries())if(I(f))f=f[ye];else if(f!==void 0){const Xe=this.fullKey(s.slice(0,w).join("."));throw new TypeError(R.type(Xe,this.context,c(f),"object"))}return f}}var b=e(73557),N=e(16060),_e=e(64279),fe=e(83487),ve=e(34519),Y=e.n(ve),v=e(72164),ee=e(24991),oe=Object.defineProperty,Rt=(d,n,s)=>n in d?oe(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,T=(d,n,s)=>(Rt(d,typeof n!="symbol"?n+"":n,s),s);class sn{constructor(...n){T(this,"holders"),this.holders=n}get(n){for(const s of this.holders){const f=s.get(n);if(f)return f}}}const me=(0,z.CT)("api-context"),Zt=d=>{var n;const{apis:s,children:f}=d,w=(n=(0,o.useContext)(me))==null?void 0:n.atVersion(1),ye=w?new sn(s,w):s;return o.createElement(me.Provider,{value:(0,z.EI)({1:ye}),children:f})};Zt.propTypes={apis:p().shape({get:p().func.isRequired}).isRequired,children:p().node};var yt=Object.defineProperty,mt=(d,n,s)=>n in d?yt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,It=(d,n,s)=>(mt(d,typeof n!="symbol"?n+"":n,s),s);class We{constructor(n){this.factories=n,It(this,"apis",new Map)}static validateFactories(n,s){for(const f of s){const w=[f],ye=new Set;for(;w.length;){const Xe=w.shift(),tt=n.get(Xe);if(tt)for(const Ut of Object.values(tt.deps)){if(Ut.id===f.id)throw new Error(`Circular dependency of api factory for ${f}`);ye.has(Ut)||(ye.add(Ut),w.push(Ut))}}}}get(n){return this.load(n)}load(n,s=[]){const f=this.apis.get(n.id);if(f)return f;const w=this.factories.get(n);if(!w)return;if(s.includes(w.api))throw new Error(`Circular dependency of api factory for ${w.api}`);const ye=this.loadDeps(n,w.deps,[...s,w.api]),Xe=w.factory(ye);return this.apis.set(n.id,Xe),Xe}loadDeps(n,s,f){const w={};for(const ye in s)if(s.hasOwnProperty(ye)){const Xe=s[ye],tt=this.load(Xe,f);if(!tt)throw new Error(`No API factory available for dependency ${Xe} of dependent ${n}`);w[ye]=tt}return w}}var Pt=Object.defineProperty,ot=(d,n,s)=>n in d?Pt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,zt=(d,n,s)=>(ot(d,typeof n!="symbol"?n+"":n,s),s),Tt=(d=>(d[d.default=10]="default",d[d.app=50]="app",d[d.static=100]="static",d))(Tt||{});class Ft{constructor(){zt(this,"factories",new Map)}register(n,s){const f=Tt[n],w=this.factories.get(s.api.id);return w&&w.priority>=f?!1:(this.factories.set(s.api.id,{priority:f,factory:s}),!0)}get(n){const s=this.factories.get(n.id);if(s)return s.factory}getAllApis(){const n=new Set;for(const{factory:s}of this.factories.values())n.add(s.api);return n}}function ct(d){return new Promise((n,s)=>{const f=d.width||500,w=d.height||700,ye=window.screen.width/2-f/2,Xe=window.screen.height/2-w/2,tt=window.open(d.url,d.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${f},height=${w},top=${Xe},left=${ye}`);let Ut="";if(!tt||typeof tt.closed=="undefined"||tt.closed){const Tn=new Error("Failed to open auth popup.");Tn.name="PopupRejectedError",s(Tn);return}const Qt=Tn=>{if(Tn.source!==tt||Tn.origin!==d.origin)return;const{data:ca}=Tn;if(ca.type==="config_info"){Ut=ca.targetOrigin;return}if(ca.type!=="authorization_response")return;const ta=ca;if("error"in ta){const la=new Error(ta.error.message);la.name=ta.error.name,s(la)}else n(ta.response);Nn()},jn=setInterval(()=>{if(tt.closed){const Tn=`Login failed, ${Ut&&Ut!==window.location.origin?`Incorrect app origin, expected ${Ut}`:"popup was closed"}`,ca=new Error(Tn);ca.name="PopupClosedError",s(ca),Nn()}},100);function Nn(){window.removeEventListener("message",Qt),clearInterval(jn)}window.addEventListener("message",Qt)})}var ht=Object.defineProperty,$t=(d,n,s)=>n in d?ht(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,an=(d,n,s)=>($t(d,typeof n!="symbol"?n+"":n,s),s);let St=!1;function Gt(d){return[...d].join(" ")}class D{constructor(n){an(this,"discoveryApi"),an(this,"environment"),an(this,"provider"),an(this,"joinScopesFunc"),an(this,"authRequester"),an(this,"sessionTransform"),an(this,"enableExperimentalRedirectFlow"),an(this,"popupOptions");var s;const{configApi:f,discoveryApi:w,environment:ye,provider:Xe,joinScopes:tt=Gt,oauthRequestApi:Ut,sessionTransform:Qt=Nn=>Nn,popupOptions:jn}=n;!St&&!f&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),St=!0),this.enableExperimentalRedirectFlow=f&&(s=f.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?s:!1,this.authRequester=Ut.createAuthRequester({provider:Xe,onAuthRequest:async Nn=>this.enableExperimentalRedirectFlow?this.executeRedirect(Nn):this.showPopup(Nn)}),this.discoveryApi=w,this.environment=ye,this.provider=Xe,this.joinScopesFunc=tt,this.sessionTransform=Qt,this.popupOptions=jn}async createSession(n){return n.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(n.scopes):this.showPopup(n.scopes):this.authRequester(n.scopes)}async refreshSession(n){const s=await fetch(await this.buildUrl("/refresh",{optional:!0,...n&&{scope:this.joinScopesFunc(n)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(w=>{throw new Error(`Auth refresh request failed, ${w}`)});if(!s.ok){const w=new Error(`Auth refresh request failed, ${s.statusText}`);throw w.status=s.status,w}const f=await s.json();if(f.error){const w=new Error(f.error.message);throw f.error.name&&(w.name=f.error.name),w}return await this.sessionTransform(f)}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(s=>{throw new Error(`Logout request failed, ${s}`)});if(!n.ok){const s=new Error(`Logout request failed, ${n.statusText}`);throw s.status=n.status,s}}async showPopup(n){var s,f,w,ye,Xe,tt,Ut,Qt;const jn=this.joinScopesFunc(n),Nn=await this.buildUrl("/start",{scope:jn,origin:window.location.origin,flow:"popup"}),Tn=(f=(s=this.popupOptions)==null?void 0:s.size)!=null&&f.fullscreen?window.screen.width:((ye=(w=this.popupOptions)==null?void 0:w.size)==null?void 0:ye.width)||450,ca=(tt=(Xe=this.popupOptions)==null?void 0:Xe.size)!=null&&tt.fullscreen?window.screen.height:((Qt=(Ut=this.popupOptions)==null?void 0:Ut.size)==null?void 0:Qt.height)||730,ta=await ct({url:Nn,name:`${this.provider.title} Login`,origin:new URL(Nn).origin,width:Tn,height:ca});return await this.sessionTransform(ta)}async executeRedirect(n){const s=this.joinScopesFunc(n);return window.location.href=await this.buildUrl("/start",{scope:s,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(n,s){const f=await this.discoveryApi.getBaseUrl("auth"),w=this.buildQueryString({...s,env:this.environment});return`${f}/${this.provider.id}${n}${w}`}buildQueryString(n){if(!n)return"";const s=Object.entries(n).map(([f,w])=>{if(typeof w=="string")return`${encodeURIComponent(f)}=${encodeURIComponent(w)}`;if(w)return encodeURIComponent(f)}).filter(Boolean).join("&");return s?`?${s}`:""}}var U=Object.defineProperty,O=(d,n,s)=>n in d?U(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,M=(d,n,s)=>(O(d,typeof n!="symbol"?n+"":n,s),s);class ne{constructor(n){M(this,"discoveryApi"),M(this,"environment"),M(this,"provider");const{discoveryApi:s,environment:f,provider:w}=n;this.discoveryApi=s,this.environment=f,this.provider=w}async createSession(){const n=await this.buildUrl("/start"),s=await ct({url:n,name:`${this.provider.title} Login`,origin:new URL(n).origin,width:450,height:730});return{...s,id:s.profile.email}}async refreshSession(){}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(s=>{throw new Error(`Logout request failed, ${s}`)});if(!n.ok){const s=new Error(`Logout request failed, ${n.statusText}`);throw s.status=n.status,s}}async buildUrl(n){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${n}?env=${this.environment}`}}function he(d,n){for(const s of n)if(!d.has(s))return!1;return!0}class ze{constructor(n){this.options=n}sessionExistsAndHasScope(n,s){if(!n)return!1;if(!s||this.options.sessionScopes===void 0)return!0;const f=this.options.sessionScopes(n);return he(f,s)}getExtendedScope(n,s){const f=new Set(this.options.defaultScopes);if(n&&this.options.sessionScopes!==void 0){const w=this.options.sessionScopes(n);for(const ye of w)f.add(ye)}if(s)for(const w of s)f.add(w);return f}}var Ct=Object.defineProperty,Ye=(d,n,s)=>n in d?Ct(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Mt=(d,n,s)=>(Ye(d,typeof n!="symbol"?n+"":n,s),s);class rn{constructor(){Mt(this,"isClosed",!1),Mt(this,"terminatingError"),Mt(this,"observable",new(i())(n=>this.isClosed?(this.terminatingError?n.error(this.terminatingError):n.complete(),()=>{}):(this.subscribers.add(n),()=>{this.subscribers.delete(n)}))),Mt(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(s=>s.next(n))}error(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(s=>s.error(n))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,s,f){const w=typeof n=="function"?{next:n,error:s,complete:f}:n;return this.observable.subscribe(w)}}class Wt{constructor(n){Mt(this,"isClosed"),Mt(this,"currentValue"),Mt(this,"terminatingError"),Mt(this,"observable"),Mt(this,"subscribers",new Set),this.isClosed=!1,this.currentValue=n,this.terminatingError=void 0,this.observable=new(i())(s=>this.isClosed?(this.terminatingError?s.error(this.terminatingError):s.complete(),()=>{}):(s.next(this.currentValue),this.subscribers.add(s),()=>{this.subscribers.delete(s)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=n,this.subscribers.forEach(s=>s.next(n))}error(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(s=>s.error(n))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,s,f){const w=typeof n=="function"?{next:n,error:s,complete:f}:n;return this.observable.subscribe(w)}}var ft=Object.defineProperty,we=(d,n,s)=>n in d?ft(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,rt=(d,n,s)=>(we(d,typeof n!="symbol"?n+"":n,s),s);class xt{constructor(){rt(this,"subject",new Wt($.S.SignedOut)),rt(this,"signedIn",!1)}setIsSignedIn(n){this.signedIn!==n&&(this.signedIn=n,this.subject.next(this.signedIn?$.S.SignedIn:$.S.SignedOut))}sessionState$(){return this.subject}}var kt=Object.defineProperty,le=(d,n,s)=>n in d?kt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Ue=(d,n,s)=>(le(d,typeof n!="symbol"?n+"":n,s),s);class Lt{constructor(n){Ue(this,"connector"),Ue(this,"helper"),Ue(this,"sessionScopesFunc"),Ue(this,"sessionShouldRefreshFunc"),Ue(this,"stateTracker",new xt),Ue(this,"refreshPromise"),Ue(this,"currentSession");const{connector:s,defaultScopes:f=new Set,sessionScopes:w,sessionShouldRefresh:ye}=n;this.connector=s,this.sessionScopesFunc=w,this.sessionShouldRefreshFunc=ye,this.helper=new ze({sessionScopes:w,defaultScopes:f})}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const f=await this.collapsedSessionRefresh(n.scopes),w=this.sessionScopesFunc(this.currentSession),ye=this.sessionScopesFunc(f);return he(ye,w)&&(this.currentSession=f),f}catch(f){if(n.optional)return;throw f}}if(!this.currentSession&&!n.instantPopup)try{const s=await this.collapsedSessionRefresh(n.scopes);return this.currentSession=s,this.getSession(n)}catch{}if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(n){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(this.helper.getExtendedScope(this.currentSession,n));try{const s=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),s}finally{delete this.refreshPromise}}}var Yt=Object.defineProperty,se=(d,n,s)=>n in d?Yt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Ze=(d,n,s)=>(se(d,typeof n!="symbol"?n+"":n,s),s);class pe{constructor(n){Ze(this,"connector"),Ze(this,"helper"),Ze(this,"stateTracker",new xt),Ze(this,"currentSession");const{connector:s,defaultScopes:f=new Set,sessionScopes:w}=n;this.connector=s,this.helper=new ze({sessionScopes:w,defaultScopes:f})}setSession(n){this.currentSession=n,this.stateTracker.setIsSignedIn(Boolean(n))}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes))return this.currentSession;if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}var Me=Object.defineProperty,nt=(d,n,s)=>n in d?Me(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,pt=(d,n,s)=>(nt(d,typeof n!="symbol"?n+"":n,s),s);class Bt{constructor(n){pt(this,"manager"),pt(this,"storageKey"),pt(this,"schema"),pt(this,"sessionShouldRefreshFunc"),pt(this,"helper");const{manager:s,storageKey:f,schema:w,sessionScopes:ye,sessionShouldRefresh:Xe=()=>!1}=n;this.manager=s,this.storageKey=f,this.schema=w,this.sessionShouldRefreshFunc=Xe,this.helper=new ze({sessionScopes:ye,defaultScopes:new Set})}setSession(n){this.manager.setSession(n),this.saveSession(n)}async getSession(n){const{scopes:s}=n,f=this.loadSession();if(this.helper.sessionExistsAndHasScope(f,s)&&!this.sessionShouldRefreshFunc(f))return this.manager.setSession(f),f;const w=await this.manager.getSession(n);return this.saveSession(w),w}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const n=localStorage.getItem(this.storageKey);if(n){const s=JSON.parse(n,(f,w)=>(w==null?void 0:w.__type)==="Set"?new Set(w.__value):w);try{return this.schema.parse(s)}catch(f){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${f}`),f}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(n){if(n===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(n)}catch(s){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${s}`);return}localStorage.setItem(this.storageKey,JSON.stringify(n,(s,f)=>f instanceof Set?{__type:"Set",__value:Array.from(f)}:f))}}var tn=Object.defineProperty,Ce=(d,n,s)=>n in d?tn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Le=(d,n,s)=>(Ce(d,typeof n!="symbol"?n+"":n,s),s);const P={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class W{constructor(n){Le(this,"sessionManager"),Le(this,"scopeTransform"),this.sessionManager=n.sessionManager,this.scopeTransform=n.scopeTransform}static create(n){const{configApi:s,discoveryApi:f,environment:w="development",provider:ye=P,oauthRequestApi:Xe,defaultScopes:tt=[],scopeTransform:Ut=Tn=>Tn,popupOptions:Qt}=n,jn=new D({configApi:s,discoveryApi:f,environment:w,provider:ye,oauthRequestApi:Xe,sessionTransform({backstageIdentity:Tn,...ca}){var ta;const la={...ca,providerInfo:{idToken:ca.providerInfo.idToken,accessToken:ca.providerInfo.accessToken,scopes:W.normalizeScopes(Ut,ca.providerInfo.scope),expiresAt:ca.providerInfo.expiresInSeconds?new Date(Date.now()+ca.providerInfo.expiresInSeconds*1e3):void 0}};if(Tn){const Ga=(ta=Tn.expiresInSeconds)!=null?ta:ca.providerInfo.expiresInSeconds;la.backstageIdentity={token:Tn.token,identity:Tn.identity,expiresAt:Ga?new Date(Date.now()+Ga*1e3):void 0}}return la},popupOptions:Qt}),Nn=new Lt({connector:jn,defaultScopes:new Set(tt),sessionScopes:Tn=>Tn.providerInfo.scopes,sessionShouldRefresh:Tn=>{var ca,ta;let la=1/0;return(ca=Tn.providerInfo)!=null&&ca.expiresAt&&(la=Math.min(la,(Tn.providerInfo.expiresAt.getTime()-Date.now())/1e3)),(ta=Tn.backstageIdentity)!=null&&ta.expiresAt&&(la=Math.min(la,(Tn.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),la<60*5}});return new W({sessionManager:Nn,scopeTransform:Ut})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(n,s){var f;const w=W.normalizeScopes(this.scopeTransform,n),ye=await this.sessionManager.getSession({...s,scopes:w});return(f=ye==null?void 0:ye.providerInfo.accessToken)!=null?f:""}async getIdToken(n={}){var s;const f=await this.sessionManager.getSession({...n,scopes:new Set(["openid"])});return(s=f==null?void 0:f.providerInfo.idToken)!=null?s:""}async getBackstageIdentity(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.backstageIdentity}async getProfile(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.profile}static normalizeScopes(n,s){if(!s)return new Set;const f=Array.isArray(s)?s:s.split(/[\s|,]/).filter(Boolean);return new Set(n(f))}}const J={id:"github",title:"GitHub",icon:()=>null};class it{static create(n){const{configApi:s,discoveryApi:f,environment:w="development",provider:ye=J,oauthRequestApi:Xe,defaultScopes:tt=["read:user"]}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:Xe,provider:ye,environment:w,defaultScopes:tt})}}const ut={id:"gitlab",title:"GitLab",icon:()=>null};class Et{static create(n){const{configApi:s,discoveryApi:f,environment:w="development",provider:ye=ut,oauthRequestApi:Xe,defaultScopes:tt=["read_user"]}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:Xe,provider:ye,environment:w,defaultScopes:tt})}}const Jt={id:"google",title:"Google",icon:()=>null},mn="https://www.googleapis.com/auth/";class An{static create(n){const{configApi:s,discoveryApi:f,oauthRequestApi:w,environment:ye="development",provider:Xe=Jt,defaultScopes:tt=["openid",`${mn}userinfo.email`,`${mn}userinfo.profile`]}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:w,provider:Xe,environment:ye,defaultScopes:tt,scopeTransform(Ut){return Ut.map(Qt=>Qt==="openid"?Qt:Qt==="profile"||Qt==="email"?`${mn}userinfo.${Qt}`:Qt.startsWith(mn)?Qt:`${mn}${Qt}`)}})}}const vn={id:"okta",title:"Okta",icon:()=>null},Vn=new Set(["openid","profile","email","phone","address","groups","offline_access"]),Mn="okta.";class Zn{static create(n){const{configApi:s,discoveryApi:f,environment:w="development",provider:ye=vn,oauthRequestApi:Xe,defaultScopes:tt=["openid","email","profile","offline_access"]}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:Xe,provider:ye,environment:w,defaultScopes:tt,scopeTransform(Ut){return Ut.map(Qt=>Vn.has(Qt)||Qt.startsWith(Mn)?Qt:`${Mn}${Qt}`)}})}}const A=Ne.z.object({profile:Ne.z.object({email:Ne.z.string().optional(),displayName:Ne.z.string().optional(),picture:Ne.z.string().optional()}),backstageIdentity:Ne.z.object({token:Ne.z.string(),identity:Ne.z.object({type:Ne.z.literal("user"),userEntityRef:Ne.z.string(),ownershipEntityRefs:Ne.z.array(Ne.z.string())})})}),F={id:"saml",title:"SAML",icon:()=>null};class Pe{constructor(n){this.sessionManager=n}static create(n){const{discoveryApi:s,environment:f="development",provider:w=F}=n,ye=new ne({discoveryApi:s,environment:f,provider:w}),Xe=new pe({connector:ye}),tt=new Bt({manager:Xe,storageKey:`${w.id}Session`,schema:A});return new Pe(tt)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.backstageIdentity}async getProfile(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.profile}}var gt=Object.defineProperty,Ot=(d,n,s)=>n in d?gt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Vt=(d,n,s)=>(Ot(d,typeof n!="symbol"?n+"":n,s),s);const ae={id:"microsoft",title:"Microsoft",icon:()=>null},Ae=class Tr{constructor(n){Vt(this,"oauth2"),Vt(this,"configApi"),Vt(this,"environment"),Vt(this,"provider"),Vt(this,"oauthRequestApi"),Vt(this,"discoveryApi"),Vt(this,"scopeTransform");const{configApi:s,environment:f="development",provider:w=ae,oauthRequestApi:ye,discoveryApi:Xe,defaultScopes:tt=["openid","offline_access","profile","email","User.Read"],scopeTransform:Ut=Qt=>Qt.concat("offline_access")}=n;this.configApi=s,this.environment=f,this.provider=w,this.oauthRequestApi=ye,this.discoveryApi=Xe,this.scopeTransform=Ut,this.oauth2={[Tr.MicrosoftGraphID]:W.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:tt})}}static create(n){return new Tr(n)}microsoftGraph(){return this.oauth2[Tr.MicrosoftGraphID]}static resourceForScopes(n){var s;const f=[...new Set(n.split(" ").map(Tr.resourceForScope).filter(ye=>ye!=="openid"))];if(f.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${f.join(", ")}. Access tokens can only have a single audience.`));const w=(s=f[0])!=null?s:Tr.MicrosoftGraphID;return Promise.resolve(w)}static resourceForScope(n){var s;const f=(s=n.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))==null?void 0:s.groups;if(f){const{resourceURI:w}=f;return w.replace(/^api:\/\//,"")}switch(n){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return Tr.MicrosoftGraphID}}async getAccessToken(n,s){const f=n===void 0?Tr.MicrosoftGraphID:await Tr.resourceForScopes(Array.isArray(n)?n.join(" "):n);return f in this.oauth2||(this.oauth2[f]=W.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[f].getAccessToken(n,s)}getIdToken(n){return this.microsoftGraph().getIdToken(n)}getProfile(n){return this.microsoftGraph().getProfile(n)}getBackstageIdentity(n){return this.microsoftGraph().getBackstageIdentity(n)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};Vt(Ae,"MicrosoftGraphID","00000003-0000-0000-c000-000000000000");let je=Ae;const Ht={id:"onelogin",title:"onelogin",icon:()=>null},nn=new Set(["openid","profile","email","phone","address","groups","offline_access"]),ln="onelogin.";class on{static create(n){const{configApi:s,discoveryApi:f,environment:w="development",provider:ye=Ht,oauthRequestApi:Xe}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:Xe,provider:ye,environment:w,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(tt){return tt.map(Ut=>nn.has(Ut)||Ut.startsWith(ln)?Ut:`${ln}${Ut}`)}})}}const In={id:"bitbucket",title:"Bitbucket",icon:()=>null};class Bn{static create(n){const{configApi:s,discoveryApi:f,environment:w="development",provider:ye=In,oauthRequestApi:Xe,defaultScopes:tt=["team"]}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:Xe,provider:ye,environment:w,defaultScopes:tt})}}const Hn={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class ra{static create(n){const{configApi:s,discoveryApi:f,environment:w="development",provider:ye=Hn,oauthRequestApi:Xe,defaultScopes:tt=["PROJECT_ADMIN"]}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:Xe,provider:ye,environment:w,defaultScopes:tt})}}const yn={id:"atlassian",title:"Atlassian",icon:()=>null};class na{static create(n){const{configApi:s,discoveryApi:f,environment:w="development",provider:ye=yn,oauthRequestApi:Xe}=n;return W.create({configApi:s,discoveryApi:f,oauthRequestApi:Xe,provider:ye,environment:w})}}var ia=Object.defineProperty,oa=(d,n,s)=>n in d?ia(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,ua=(d,n,s)=>(oa(d,typeof n!="symbol"?n+"":n,s),s);class Pa{constructor(){ua(this,"subject",new rn)}post(n){this.subject.next(n)}alert$(){return this.subject}}class Qn{constructor(n){this.actualApis=n}static fromApis(n){return new Qn(n)}captureEvent(n){this.actualApis.forEach(s=>{try{s.captureEvent(n)}catch{}})}}class Ea{captureEvent(n){}}var X=Object.defineProperty,Be=(d,n,s)=>n in d?X(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,et=(d,n,s)=>(Be(d,typeof n!="symbol"?n+"":n,s),s);const vt="theme";class Se{constructor(n){this.themes=n,et(this,"activeThemeId"),et(this,"subject",new Wt(void 0))}static createWithStorage(n){var s;const f=new Se(n);if(!window.localStorage)return f;const w=(s=window.localStorage.getItem(vt))!=null?s:void 0;return f.setActiveThemeId(w),f.activeThemeId$().subscribe(ye=>{ye?window.localStorage.setItem(vt,ye):window.localStorage.removeItem(vt)}),window.addEventListener("storage",ye=>{var Xe;if(ye.key===vt){const tt=(Xe=localStorage.getItem(vt))!=null?Xe:void 0;f.setActiveThemeId(tt)}}),f}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(n){this.activeThemeId=n,this.subject.next(n)}}const H="Invalid discovery URL pattern,";class Ee{constructor(n){this.parts=n}static compile(n){const s=n.split(/\{\{\s*pluginId\s*\}\}/),f=s.join("pluginId");let w;try{w=new URL(f)}catch{throw new Error(`${H} URL '${f}' is invalid`)}if(w.hash)throw new Error(`${H} URL must not have a hash`);if(w.search)throw new Error(`${H} URL must not have a query`);if(f.endsWith("/"))throw new Error(`${H} URL must not end with a slash`);return new Ee(s)}async getBaseUrl(n){return this.parts.join(encodeURIComponent(n))}}class de{constructor(n,s){this.endpoints=n,this.defaultEndpoint=s}static fromConfig(n,s){var f,w;const ye=(f=s==null?void 0:s.pathPattern)!=null?f:"/api/{{ pluginId }}",Xe=n.getString("backend.baseUrl"),tt=(w=n.getOptionalConfigArray("discovery.endpoints"))==null?void 0:w.flatMap(Ut=>{const Qt=typeof Ut.get("target")=="object"?Ut.getString("target.external"):Ut.getString("target"),jn=Ee.compile(Qt);return Ut.getStringArray("plugins").map(Nn=>[Nn,jn])});return new de(new Map(tt),Ee.compile(`${Xe}${ye}`))}async getBaseUrl(n){const s=this.endpoints.get(n);return s?s.getBaseUrl(n):this.defaultEndpoint.getBaseUrl(n)}}class st{constructor(n,s){this.alertApi=n,this.errorApi=s}post(n,s){return s!=null&&s.hidden||this.alertApi.post({message:n.message,severity:"error"}),this.errorApi.post(n,s)}error$(){return this.errorApi.error$()}}var k=Object.defineProperty,j=(d,n,s)=>n in d?k(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Q=(d,n,s)=>(j(d,typeof n!="symbol"?n+"":n,s),s);class te{constructor(){Q(this,"subject",new rn)}post(n,s){this.subject.next({error:n,context:s})}error$(){return this.subject}}class ke{static forward(n,s){window.addEventListener("unhandledrejection",f=>{n.post(f.reason,s)})}}var Je=Object.defineProperty,He=(d,n,s)=>n in d?Je(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,qe=(d,n,s)=>(He(d,typeof n!="symbol"?n+"":n,s),s);function At(d){if(d.length<3)throw new Error(`The '${d}' feature flag must have a minimum length of three characters.`);if(d.length>150)throw new Error(`The '${d}' feature flag must not exceed 150 characters.`);if(!d.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${d}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class dn{constructor(){qe(this,"registeredFeatureFlags",[]),qe(this,"flags")}registerFlag(n){At(n.name),this.registeredFeatureFlags.push(n)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(n){return this.flags||(this.flags=this.load()),this.flags.get(n)===$.F.Active}save(n){this.flags||(this.flags=this.load()),n.merge||this.flags.clear();for(const[f,w]of Object.entries(n.states))this.flags.set(f,w);const s=Array.from(this.flags.entries()).filter(([,f])=>f===$.F.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(s)))}load(){try{const n=window.localStorage.getItem("featureFlags");if(!n)return new Map;const s=JSON.parse(n);if(typeof s!="object"||s===null||Array.isArray(s))return new Map;const f=Object.entries(s).filter(([w,ye])=>(At(w),ye===$.F.Active));return new Map(f)}catch{return new Map}}}function wt(d){var n;let s=d.baseImplementation||e.g.fetch;const f=[(n=d.middleware)!=null?n:[]].flat().reverse();for(const w of f)s=w.apply(s);return{fetch:s}}class un{constructor(n,s,f,w){this.identityApi=n,this.allowUrl=s,this.headerName=f,this.headerValue=w}static create(n){var s,f;const w=hn(n),ye=((s=n.header)==null?void 0:s.name)||"authorization",Xe=((f=n.header)==null?void 0:f.value)||(tt=>`Bearer ${tt}`);return new un(n.identityApi,w,ye,Xe)}apply(n){return async(s,f)=>{const w=new Request(s,f),{token:ye}=await this.identityApi.getCredentials();return w.headers.get(this.headerName)||typeof ye!="string"||!ye||!this.allowUrl(w.url)?n(s,f):(w.headers.set(this.headerName,this.headerValue(ye)),n(w))}}}function hn(d){return d.allowUrl?d.allowUrl:d.urlPrefixAllowlist?En(d.urlPrefixAllowlist):d.config?En([d.config.getString("backend.baseUrl")]):()=>!1}function En(d){const n=d.map(s=>s.replace(/\/$/,""));return s=>n.some(f=>s===f||s.startsWith(`${f}/`))}function kn(d,n){return!n||n==="/"?d:`${d.replace(/\/$/,"")}/${n.replace(/^\//,"")}`}class wn{constructor(n){this.discoveryApi=n}apply(n){return async(s,f)=>{const w=new Request(s,f),ye="plugin://";if(!w.url.startsWith(ye))return n(s,f);const{hostname:Xe,pathname:tt,search:Ut,hash:Qt,username:jn,password:Nn}=new URL(`http://${w.url.substring(ye.length)}`);let Tn=await this.discoveryApi.getBaseUrl(Xe);if(jn||Nn){const ta=new URL(Tn),la=`${jn}${Nn?`:${Nn}`:""}@`;Tn=`${ta.protocol}//${la}${ta.host}${ta.pathname}`}const ca=`${kn(Tn,tt)}${Ut}${Qt}`;return n(ca,typeof s=="string"||xn(s)?f:s)}}}function xn(d){return typeof d=="object"&&(d==null?void 0:d.constructor)===URL}class Rn{static resolvePluginProtocol(n){return new wn(n.discoveryApi)}static injectIdentityAuth(n){return un.create(n)}constructor(){}}var On=Object.defineProperty,pn=(d,n,s)=>n in d?On(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,_n=(d,n,s)=>(pn(d,typeof n!="symbol"?n+"":n,s),s);function aa(d,n){for(const s of n)if(!d.has(s))return!1;return!0}function sa(d,...n){const s=new Set(d);for(const f of n)for(const w of f)s.add(w);return s}class Aa{constructor(){_n(this,"requests",[]),_n(this,"subject",new Wt(this.getCurrentPending()))}request(n){return new Promise((s,f)=>{this.requests.push({scopes:n,resolve:s,reject:f}),this.subject.next(this.getCurrentPending())})}resolve(n,s){this.requests=this.requests.filter(f=>aa(n,f.scopes)?(f.resolve(s),!1):!0),this.subject.next(this.getCurrentPending())}reject(n){this.requests.forEach(s=>s.reject(n)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const n=this.requests.length===0?void 0:this.requests.slice(1).reduce((s,f)=>sa(s,f.scopes),this.requests[0].scopes);return{scopes:n,resolve:s=>{n&&this.resolve(n,s)},reject:s=>{n&&this.reject(s)}}}}var Sa=Object.defineProperty,ka=(d,n,s)=>n in d?Sa(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Wa=(d,n,s)=>(ka(d,typeof n!="symbol"?n+"":n,s),s);class Ba{constructor(){Wa(this,"subject",new Wt([])),Wa(this,"currentRequests",[]),Wa(this,"handlerCount",0)}createAuthRequester(n){const s=new Aa,f=this.handlerCount;return this.handlerCount++,s.pending().subscribe({next:w=>{const ye=this.currentRequests.slice(),Xe=this.makeAuthRequest(w,n);Xe?ye[f]=Xe:delete ye[f],this.currentRequests=ye,this.subject.next(ye.filter(Boolean))}}),w=>s.request(w)}makeAuthRequest(n,s){const{scopes:f}=n;if(f)return{provider:s.provider,trigger:async()=>{const w=await s.onAuthRequest(f);n.resolve(w)},reject:()=>{const w=new Error("Login failed, rejected by user");w.name="RejectedError",n.reject(w)}}}authRequest$(){return this.subject}}var Ra=Object.defineProperty,ja=(d,n,s)=>n in d?Ra(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Na=(d,n,s)=>(ja(d,typeof n!="symbol"?n+"":n,s),s);const Va=new Map,ur=class eo{constructor(n,s){this.namespace=n,this.errorApi=s,Na(this,"subscribers",new Set),Na(this,"observable",new(i())(f=>(this.subscribers.add(f),()=>{this.subscribers.delete(f)})))}static create(n){var s;return new eo((s=n.namespace)!=null?s:"",n.errorApi)}static addStorageEventListener(){window.addEventListener("storage",n=>{var s;for(const[f,w]of Va.entries())(s=n.key)!=null&&s.startsWith(f)&&w.handleStorageChange(n.key)})}get(n){return this.snapshot(n).value}snapshot(n){let s,f="absent";try{const w=localStorage.getItem(this.getKeyName(n));w&&(s=JSON.parse(w,(ye,Xe)=>(typeof Xe=="object"&&Xe!==null&&Object.freeze(Xe),Xe)),f="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${n}`))}return{key:n,value:s,presence:f}}forBucket(n){const s=`${this.namespace}/${n}`;return Va.has(s)||Va.set(s,new eo(s,this.errorApi)),Va.get(s)}async set(n,s){localStorage.setItem(this.getKeyName(n),JSON.stringify(s)),this.notifyChanges(n)}async remove(n){localStorage.removeItem(this.getKeyName(n)),this.notifyChanges(n)}observe$(n){return eo.hasSubscribed||(eo.addStorageEventListener(),eo.hasSubscribed=!0),this.observable.filter(({key:s})=>s===n)}handleStorageChange(n){if(!(n!=null&&n.startsWith(this.namespace)))return;const s=n==null?void 0:n.slice(`${this.namespace}/`.length);s.includes("/")||this.notifyChanges(decodeURIComponent(s))}getKeyName(n){return`${this.namespace}/${encodeURIComponent(n)}`}notifyChanges(n){const s=this.snapshot(n);for(const f of this.subscribers)f.next(s)}};Na(ur,"hasSubscribed",!1);let qa=ur;const er=(0,o.createContext)(void 0);function da(){const[d]=(0,b.is)(o.createElement(b.AW,{index:!0,element:o.createElement("div",null)}));return!d.index}const tr=(d,n)=>{try{const s=(0,N.fp)(n,{pathname:d}),f=s==null?void 0:s.filter(Ut=>{var Qt;return((Qt=Ut==null?void 0:Ut.route.routeRefs)==null?void 0:Qt.size)>0}).pop(),w=f==null?void 0:f.route;if(!w||w.path===""&&d!=="/")return;let ye;w.routeRefs.size===1&&(ye=w.routeRefs.values().next().value);let Xe;w.plugins.size===1&&(Xe=w.plugins.values().next().value);const tt=Object.entries((f==null?void 0:f.params)||{}).reduce((Ut,[Qt,jn])=>(jn!==void 0&&Qt!=="*"&&(Ut[Qt]=jn),Ut),{});return{extension:"App",pluginId:(Xe==null?void 0:Xe.getId())||"root",...ye?{routeRef:ye.id}:{},_routeNodeType:w.element,params:tt}}catch{return}},nr=({pathname:d,search:n,hash:s,attributes:f})=>{const w=(0,Qe.z$)();return(0,o.useEffect)(()=>{w.captureEvent("navigate",`${d}${n}${s}`,{attributes:f})},[w,d,n,s,f]),null},or=({routeObjects:d})=>{const{pathname:n,search:s,hash:f}=(0,b.TH)(),{params:w,...ye}=tr(n,d)||{params:{}};return o.createElement(Qe.fC,{attributes:ye},o.createElement(nr,{pathname:n,search:s,hash:f,attributes:w}))};function Fa(d){return da()?Fe(d):""}function Fe(d){var n;let{pathname:s}=new URL((n=d.getOptionalString("app.baseUrl"))!=null?n:"/","http://sample.dev");return s=s.replace(/\/*$/,""),s}function q({component:d,appIdentityProxy:n,children:s}){const[f,w]=(0,o.useState)(),ye=(0,$.u)($.p),Xe=Fe(ye);return f?(n.setTarget(f,{signOutTargetUrl:Xe||"/"}),o.createElement(o.Fragment,null,s)):o.createElement(d,{onSignInSuccess:w})}function at(d){const{Router:n,SignInPage:s}=(0,Qe.qD)().getComponents(),f=(0,$.u)($.p),w=Fe(f),ye=`${w}/*`,Xe=(0,o.useContext)(er);if(!Xe)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:tt,appIdentityProxy:Ut}=Xe;return s?da()?o.createElement(n,null,o.createElement(or,{routeObjects:tt}),o.createElement(q,{component:s,appIdentityProxy:Ut},o.createElement(b.Z5,null,o.createElement(b.AW,{path:ye,element:o.createElement(o.Fragment,null,d.children)})))):o.createElement(n,{basename:w},o.createElement(or,{routeObjects:tt}),o.createElement(q,{component:s,appIdentityProxy:Ut},d.children)):(Ut.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:w||"/"}),da()?o.createElement(n,null,o.createElement(or,{routeObjects:tt}),o.createElement(b.Z5,null,o.createElement(b.AW,{path:ye,element:o.createElement(o.Fragment,null,d.children)}))):o.createElement(n,{basename:w},o.createElement(or,{routeObjects:tt}),d.children))}(0,Qe.R5)(at,"core.type","AppRouter");function bn(d){const n={};for(const f in d.collectors)d.collectors.hasOwnProperty(f)&&(n[f]=d.collectors[f]());const s=[{node:o.Children.toArray(d.root),parent:void 0,contexts:{}}];for(;s.length!==0;){const{node:f,parent:w,contexts:ye}=s.shift();o.Children.forEach(f,Xe=>{if(!(0,o.isValidElement)(Xe))return;const tt={};for(const Ut in n)if(n.hasOwnProperty(Ut)){const Qt=n[Ut];tt[Ut]=Qt.visit(Qt.accumulator,Xe,w,ye[Ut])}for(const Ut of d.discoverers){const Qt=Ut(Xe);Qt&&s.push({node:Qt,parent:Xe,contexts:tt})}})}return Object.fromEntries(Object.entries(n).map(([f,w])=>[f,w.accumulator]))}function Ln(d,n){return()=>({accumulator:d(),visit:n})}function qn(d){var n;return(n=d.props)==null?void 0:n.children}function ha(d){var n,s,f;if((n=d.props)!=null&&n.path&&((s=d.props)!=null&&s.element))return(f=d.props)==null?void 0:f.element}const Ua=Ln(()=>new Set,(d,n)=>{const s=(0,Qe.IY)(n,"core.plugin");s&&d.add(s)}),Ka=d=>{const{children:n}=d,s=(0,$.u)($.f),f="with"in d?s.isActive(d.with):!s.isActive(d.without);return o.createElement(o.Fragment,null,f?n:null)};(0,Qe.R5)(Ka,"core.featureFlagged",!0);const va={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function xa(d){var n,s;const f=d;return f!=null&&f.type?(s=(n=f.type.displayName)!=null?n:f.type.name)!=null?s:String(f.type):String(f)}const Ia=d=>{const n=new Set;return d&&n.add(d),n};function Ya(d,n=new Array){return o.Children.forEach(d,s=>{if(!(0,o.isValidElement)(s))return;const f=(0,Qe.IY)(s,"core.mountPoint");if(f){const w=(0,Qe.IY)(s,"core.plugin");n.push({routeRef:f,plugin:w})}Ya(s.props.children,n)}),n}const g=Ln(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,n,s,f)=>{var w,ye,Xe,tt,Ut,Qt,jn;if(f!=null&&f.isElementAncestor)return f;if((s==null?void 0:s.props.element)===n)return{...f,isElementAncestor:!0};const Nn=(w=n.props)==null?void 0:w.path,Tn=(0,Qe.IY)(n,"core.mountPoint");if(Tn&&Nn)throw new Error(`Path property may not be set directly on a routable extension "${xa(n)}"`);const ca=(Xe=(ye=f==null?void 0:f.obj)==null?void 0:ye.children)!=null?Xe:d.objects;if(Nn!==void 0){if(typeof Nn!="string")throw new Error(`Element path must be a string at "${xa(n)}"`);const ta=Nn.startsWith("/")?Nn.slice(1):Nn,la=n.props.element;if((0,Qe.IY)(n,"core.gatherMountPoints")){if(la)throw new Error(`Mount point gatherers may not have an element prop "${xa(n)}"`);const Ga={path:ta,element:"gathered",routeRefs:new Set,caseSensitive:Boolean((tt=n.props)==null?void 0:tt.caseSensitive),children:[va],plugins:new Set};return ca.push(Ga),{obj:Ga,gatherPath:ta,routeRef:f==null?void 0:f.routeRef,gatherRouteRef:f==null?void 0:f.routeRef}}if(la){const[Ga,...pa]=Ya(la);if(pa.length>0)throw new Error(`Route element with path "${Nn}" may not contain multiple routable extensions`);if(!Ga)return f;const{routeRef:sr,plugin:Lr}=Ga,Co={path:ta,element:"mounted",routeRefs:new Set([sr]),caseSensitive:Boolean((Ut=n.props)==null?void 0:Ut.caseSensitive),children:[va],plugins:Ia(Lr)};return ca.push(Co),d.paths.set(sr,ta),d.parents.set(sr,f==null?void 0:f.routeRef),{obj:Co,routeRef:sr!=null?sr:f==null?void 0:f.routeRef,gatherPath:ta,gatherRouteRef:f==null?void 0:f.gatherRouteRef}}}if(Tn){if((f==null?void 0:f.gatherPath)===void 0)throw new Error(`Routable extension "${xa(n)}" with mount point "${Tn}" must be assigned a path`);(Qt=f==null?void 0:f.obj)==null||Qt.routeRefs.add(Tn);const ta=(0,Qe.IY)(n,"core.plugin");return ta&&((jn=f==null?void 0:f.obj)==null||jn.plugins.add(ta)),d.paths.set(Tn,f.gatherPath),d.parents.set(Tn,f==null?void 0:f.gatherRouteRef),{...f,routeRef:Tn}}return f}),l=Ln(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,n,s,f)=>{var w,ye,Xe,tt,Ut;if((s==null?void 0:s.props.element)===n)return f;let Qt=f==null?void 0:f.obj,jn=f==null?void 0:f.routeRef,Nn=f==null?void 0:f.sticky;const Tn=(w=n.props)==null?void 0:w.path,ca=(ye=Qt==null?void 0:Qt.children)!=null?ye:d.objects,ta=Boolean((Xe=n.props)==null?void 0:Xe.caseSensitive);let la=f==null?void 0:f.path;if((0,Qe.IY)(n,"core.gatherMountPoints")){if(!Tn)throw new Error("Mount point gatherer must have a path");la=Tn}const Ga=(tt=n.props)==null?void 0:tt.element;let pa=(0,Qe.IY)(n,"core.mountPoint");if(!pa&&(0,o.isValidElement)(Ga)&&(pa=(0,Qe.IY)(Ga,"core.mountPoint")),pa){let Lr=Tn;if(la&&(Lr?la=void 0:Lr=la),!Lr)throw new Error("Mounted routable extension must have a path");d.paths.set(pa,Lr),jn&&Nn?(d.parents.set(pa,jn),Tn&&(jn=pa,Nn=!1)):(d.parents.set(pa,jn),jn=pa),Tn?(Qt={caseSensitive:ta,path:Tn,element:"mounted",routeRefs:new Set([pa]),children:[va],plugins:Ia((0,Qe.IY)(n.props.element,"core.plugin"))},ca.push(Qt)):Qt==null||Qt.routeRefs.add(pa)}if((0,Qe.IY)(n,"core.gatherMountPoints")&&(Nn=!0),(0,Qe.IY)(n,"core.gatherMountPoints")){if(!Tn)throw new Error("Mount point gatherer must have a path");pa||(Qt={caseSensitive:ta,path:Tn,element:"gathered",routeRefs:new Set,children:[va],plugins:((Ut=f==null?void 0:f.obj)==null?void 0:Ut.plugins)||new Set},ca.push(Qt))}return{obj:Qt,path:la,routeRef:jn,sticky:Nn}}),y=Ln(()=>new Set,(d,n)=>{if(n.type===Ka){const s=n.props;d.add("with"in s?s.with:s.without)}}),K=(0,z.uW)("route-ref-type",()=>Symbol("route-ref-type"));function Re(d){return d[K]==="absolute"}function lt(d){return d[K]==="sub"}function Dt(d){return d[K]==="external"}function Xt(...d){const n=d.join("/").replace(/\/\/+/g,"/");return n!=="/"&&n.endsWith("/")?n.slice(0,-1):n}function Sn(d,n,s){let f,w="";if(Re(d))f=d;else if(lt(d))f=d.parent,w=d.path;else if(Dt(d)){const tt=s.get(d);if(!tt)return[void 0,""];if(Re(tt))f=tt;else if(lt(tt))f=tt.parent,w=tt.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${tt}`)}else throw d[K]?new Error(`Unknown or invalid route ref type, ${d[K]}`):new Error(`Unknown object passed to useRouteRef, got ${d}`);if(!f)return[void 0,""];const ye=n.get(f);if(ye===void 0)return[void 0,""];const Xe=Xt(ye,w);return[f,Xe]}function Fn(d,n,s,f,w){var ye;const Xe=(ye=(0,N.fp)(w,n))!=null?ye:[],tt=Array();let Ut=-1;for(let Nn=d;Nn&&(Ut=Xe.findIndex(Tn=>Tn.route.routeRefs.has(Nn)),Ut===-1);Nn=f.get(Nn))tt.unshift(Nn);tt.length===0&&(Ut-=1);const Qt=Ut===-1?"":Xe[Ut].pathname,jn=tt.slice(0,-1).map(Nn=>{const Tn=s.get(Nn);if(Tn===void 0)throw new Error(`No path for ${Nn}`);if(Tn.includes(":"))throw new Error(`Cannot route to ${d} with parent ${Nn} as it has parameters`);return Tn});return`${Xt(Qt,...jn)}/`}class Kn{constructor(n,s,f,w,ye){this.routePaths=n,this.routeParents=s,this.routeObjects=f,this.routeBindings=w,this.appBasePath=ye}resolve(n,s){const[f,w]=Sn(n,this.routePaths,this.routeBindings);if(!f)return;let ye;typeof s=="string"?ye=this.trimPath(s):s.pathname?ye={...s,pathname:this.trimPath(s.pathname)}:ye=s;const Xe=this.appBasePath+Fn(f,ye,this.routePaths,this.routeParents,this.routeObjects);return(...[Ut])=>{const Qt=Ut&&Y()(Ut,jn=>typeof jn=="string"?jn.replaceAll(/[&?#;\/]/g,Nn=>encodeURIComponent(Nn)):jn);return Xt(Xe,(0,N.Gn)(w,Qt))}}trimPath(n){return n&&(n.startsWith(this.appBasePath)?n.slice(this.appBasePath.length):n)}}const Oa=(0,z.CT)("routing-context"),za=({routePaths:d,routeParents:n,routeObjects:s,routeBindings:f,basePath:w="",children:ye})=>{const Xe=new Kn(d,n,s,f,w),tt=(0,z.EI)({1:Xe});return o.createElement(Oa.Provider,{value:tt},ye)};function ir(d,n){const s=new Set(n.values());s.delete(void 0);for(const f of n.keys()){if(s.has(f))continue;let w=f,ye="";for(;w;){const tt=d.get(w);if(tt===void 0)throw new Error(`No path for ${w}`);ye=Xt(tt,ye),w=n.get(w)}const Xe=ye.match(/:(\w+)/g);if(Xe){for(let tt=0;tt<Xe.length;tt++)for(let Ut=tt+1;Ut<Xe.length;Ut++)if(Xe[Ut]===Xe[tt])throw new Error(`Parameter ${Xe[Ut]} is duplicated in path ${ye}`)}}}function ar(d,n){for(const s of n)if(s.externalRoutes){for(const[f,w]of Object.entries(s.externalRoutes))if(!w.optional&&!d.has(w))throw new Error(`External route '${f}' of the '${s.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const to=(0,z.CT)("app-context"),no=({appContext:d,children:n})=>{const s=(0,z.EI)({1:d});return o.createElement(to.Provider,{value:s,children:n})};var Wr=Object.defineProperty,ao=(d,n,s)=>n in d?Wr(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Ir=(d,n,s)=>(ao(d,typeof n!="symbol"?n+"":n,s),s);function ro(d){return new Error(`Tried to access IdentityApi ${d} before app was loaded`)}function $r(d){console.warn(`WARNING: Call to ${d} is deprecated and will break in the future`)}class Zr{constructor(){Ir(this,"target"),Ir(this,"waitForTarget"),Ir(this,"resolveTarget",()=>{}),Ir(this,"signOutTargetUrl","/"),this.waitForTarget=new Promise(n=>{this.resolveTarget=n})}setTarget(n,s){this.target=n,this.signOutTargetUrl=s.signOutTargetUrl,this.resolveTarget(n)}getUserId(){if(!this.target)throw ro("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return $r("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw ro("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return $r("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(n=>n.getProfileInfo())}async getBackstageIdentity(){const n=await this.waitForTarget.then(s=>s.getBackstageIdentity());return n.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${n.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),n}async getCredentials(){return this.waitForTarget.then(n=>n.getCredentials())}async getIdToken(){return this.waitForTarget.then(n=>{if(!n.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return $r("getIdToken"),n.getIdToken()})}async signOut(){await this.waitForTarget.then(n=>n.signOut()),window.location.href=this.signOutTargetUrl}}function rr(d,n,s){if(d!==void 0){const w=s.find(ye=>ye.id===d);if(w)return w}if(n){const w=s.find(ye=>ye.variant==="dark");if(w)return w}const f=s.find(w=>w.variant==="light");return f||s[0]}const Cr=()=>{const d=(0,o.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[n,s]=(0,o.useState)(d.matches);return(0,o.useEffect)(()=>{const f=w=>{s(w.matches)};return d.addListener(f),()=>{d.removeListener(f)}},[d]),n};function kr({children:d}){const n=(0,$.u)($.n),s=(0,v.Z)(n.activeThemeId$(),n.getActiveThemeId()),f=Boolean(window.matchMedia)?Cr():!1,w=rr(s,f,n.getInstalledThemes());if(!w)throw new Error("App has no themes");return o.createElement(w.Provider,{children:d})}const Dr=async()=>Nr();function Nr(d=/*__APP_INJECTED_CONFIG_MARKER__*/"[{\"context\":\"app\",\"deprecatedKeys\":[],\"data\":{\"app\":{\"title\":\"Scaffolded Backstage App\",\"baseUrl\":\"http://127.0.0.1:3000\"},\"organization\":{\"name\":\"My Company\"},\"backend\":{\"baseUrl\":\"http://localhost:7007\"},\"permission\":{\"enabled\":true},\"integrations\":{\"github\":[{\"host\":\"github.com\"}],\"azure\":[{\"host\":\"dev.azure.com\"}]},\"techdocs\":{\"builder\":\"local\"},\"auth\":{\"environment\":\"development\",\"providers\":{\"github\":{},\"bitbucket\":{},\"microsoft\":{}}},\"catalog\":{\"import\":{\"entityFilename\":\"catalog-info.yaml\",\"pullRequestBranchName\":\"backstage-integration\"}}}}]"/*__INJECTED_END__*/){const n=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"https://localhost:3000"},organization:{name:"My Company"},backend:{baseUrl:"https://localhost:7007"},integrations:{github:[{host:"github.com"}]},techdocs:{builder:"local"},auth:{environment:"development",providers:{github:{},bitbucket:{}}},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}}];if(!n)throw new Error("No static configuration provided");if(!Array.isArray(n))throw new Error("Static configuration has invalid format");const s=n.slice();if(d!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const w=JSON.parse(d);Array.isArray(w)?s.push(...w):s.push({data:w,context:"env"})}catch(w){throw new Error(`Failed to load runtime configuration, ${w}`)}const f=window.__APP_CONFIG__;return f&&s.push({context:"window",data:f}),s}var Fr=Object.defineProperty,oo=(d,n,s)=>n in d?Fr(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,io=(d,n,s)=>(oo(d,typeof n!="symbol"?n+"":n,s),s);class so{constructor(){io(this,"apis",[])}add(n,s){return this.apis.push([n.id,s]),s}build(){return new yr(new Map(this.apis))}}class yr{constructor(n){this.apis=n}static builder(){return new so}static from(n){return new yr(new Map(n.map(([s,f])=>[s.id,f])))}static with(n,s){return new yr(new Map([[n.id,s]]))}with(n,s){return new yr(new Map([...this.apis,[n.id,s]]))}get(n){return this.apis.get(n.id)}}function Kr(d){const n=new Map;return d&&d({bind:(f,w)=>{for(const[ye,Xe]of Object.entries(w)){const tt=f[ye];if(!tt)throw new Error(`Key ${ye} is not an existing external route`);if(!Xe&&!tt.optional)throw new Error(`External route ${ye} is required but was undefined`);Xe&&n.set(tt,Xe)}}}),n}var zr=(d,n,s)=>{if(!n.has(d))throw TypeError("Cannot "+s)},cr=(d,n,s)=>(zr(d,n,"read from private field"),s?s.call(d):n.get(d)),dr=(d,n,s)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,s)},Mr=(d,n,s,f)=>(zr(d,n,"write to private field"),f?f.call(d,s):n.set(d,s),s),_r,mr,Pr;const Ar="language",Ja="en",lo=class Jo{constructor(n,s){dr(this,_r,void 0),dr(this,mr,void 0),dr(this,Pr,void 0),Mr(this,_r,n),Mr(this,mr,s),Mr(this,Pr,new Wt({language:cr(this,mr)}))}static create(n){var s,f;const w=(s=n==null?void 0:n.availableLanguages)!=null?s:[Ja];if(w.length!==new Set(w).size)throw new Error(`Supported languages may not contain duplicates, got '${w.join("', '")}'`);if(!w.includes(Ja))throw new Error(`Supported languages must include '${Ja}'`);const ye=(f=n==null?void 0:n.defaultLanguage)!=null?f:Ja;if(!w.includes(ye))throw new Error(`Initial language must be one of the supported languages, got '${ye}'`);return new Jo(w,ye)}static createWithStorage(n){const s=Jo.create(n);if(!window.localStorage)return s;const f=window.localStorage.getItem(Ar),{languages:w}=s.getAvailableLanguages();return f&&w.includes(f)&&s.setLanguage(f),s.language$().subscribe(({language:ye})=>{ye!==window.localStorage.getItem(Ar)&&window.localStorage.setItem(Ar,ye)}),window.addEventListener("storage",ye=>{var Xe;if(ye.key===Ar){const tt=(Xe=localStorage.getItem(Ar))!=null?Xe:void 0;tt&&s.setLanguage(tt)}}),s}getAvailableLanguages(){return{languages:cr(this,_r).slice()}}setLanguage(n){const s=n!=null?n:Ja;if(s!==cr(this,mr)){if(s&&!cr(this,_r).includes(s))throw new Error(`Failed to change language to '${s}', available languages are '${cr(this,_r).join("', '")}'`);Mr(this,mr,s),cr(this,Pr).next({language:s})}}getLanguage(){return{language:cr(this,mr)}}language$(){return cr(this,Pr)}};_r=new WeakMap,mr=new WeakMap,Pr=new WeakMap;let co=lo;function uo(d){const n=d;if(n.$$type!=="@backstage/TranslationResource")throw new Error(`Invalid translation resource, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation resource, bad version '${n.version}'`);return n}function Gr(d){const n=d;if(n.$$type!=="@backstage/TranslationRef")throw new Error(`Invalid translation ref, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation ref, bad version '${n.version}'`);return n}var mo=(d,n,s)=>{if(!n.has(d))throw TypeError("Cannot "+s)},h=(d,n,s)=>(mo(d,n,"read from private field"),s?s.call(d):n.get(d)),S=(d,n,s)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,s)},x=(d,n,s,f)=>(mo(d,n,"write to private field"),f?f.call(d,s):n.set(d,s),s),Z=(d,n,s)=>(mo(d,n,"access private method"),s),ue,$e,Ke,Ve,_t,Kt,Nt,cn,Pn,fn,Dn,Xn,Cn,ea,ma,Gn;function zn(d){return Object.fromEntries(Object.entries(d).filter(n=>n[1]!==null))}class Wn{constructor(n){this.onLoad=n,S(this,Ve),S(this,ue,new Set),S(this,$e,new Map),S(this,Ke,new Map)}addTranslationResource(n){const s=uo(n);for(const f of s.resources){const w=Z(this,Ve,_t).call(this,f.language,s.id);h(this,Ke).has(w)||h(this,Ke).set(w,f.loader)}}needsLoading(n,s){const f=Z(this,Ve,_t).call(this,n,s);return h(this,Ke).get(f)?!h(this,ue).has(f):!1}async load(n,s){const f=Z(this,Ve,_t).call(this,n,s),w=h(this,Ke).get(f);if(!w||h(this,ue).has(f))return;const ye=h(this,$e).get(f);if(ye){await ye;return}const Xe=w().then(tt=>{this.onLoad({language:n,namespace:s,messages:tt.messages}),h(this,ue).add(f)},tt=>{throw h(this,ue).add(f),tt});h(this,$e).set(f,Xe),await Xe}}ue=new WeakMap,$e=new WeakMap,Ke=new WeakMap,Ve=new WeakSet,_t=function(d,n){return`${d}/${n}`};const ya=class zi{constructor(n,s,f){S(this,Dn),S(this,Cn),S(this,ma),S(this,Kt,void 0),S(this,Nt,void 0),S(this,cn,void 0),S(this,Pn,new Set),S(this,fn,new Set),x(this,Kt,n),x(this,Nt,s),x(this,cn,f)}static create(n){const{languages:s}=n.languageApi.getAvailableLanguages(),f=(0,ee.Fs)({fallbackLng:Ja,supportedLngs:s,interpolation:{escapeValue:!1},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(f.init(),!f.isInitialized)throw new Error("i18next was unexpectedly not initialized");const{language:w}=n.languageApi.getLanguage();w!==Ja&&f.changeLanguage(w);const ye=new Wn(Ut=>{f.addResourceBundle(Ut.language,Ut.namespace,zn(Ut.messages),!1,!0)}),Xe=(n==null?void 0:n.resources)||[];for(let Ut=Xe.length-1;Ut>=0;Ut--){const Qt=Xe[Ut];Qt.$$type==="@backstage/TranslationResource"?ye.addTranslationResource(Qt):Qt.$$type==="@backstage/TranslationMessages"&&f.addResourceBundle(Ja,Qt.id,zn(Qt.messages),!0,!1)}const tt=new zi(f,ye,n.languageApi.getLanguage().language);return n.languageApi.language$().subscribe(({language:Ut})=>{var Qt;Z(Qt=tt,Dn,Xn).call(Qt,Ut)}),tt}getTranslation(n){const s=Gr(n);return Z(this,ma,Gn).call(this,s),Z(this,Cn,ea).call(this,s)}translation$(n){const s=Gr(n);return Z(this,ma,Gn).call(this,s),new(i())(f=>{let w={};const ye=()=>{w={};const tt=w;h(this,Nt).load(h(this,cn),s.id).then(()=>{if(tt===w){const Ut=Z(this,Cn,ea).call(this,s);Ut.ready&&f.next(Ut)}},Ut=>{tt===w&&f.error(Array.isArray(Ut)?Ut[0]:Ut)})},Xe=()=>{const tt=Z(this,Cn,ea).call(this,s);tt.ready?f.next(tt):ye()};return h(this,Nt).needsLoading(h(this,cn),s.id)&&ye(),h(this,fn).add(Xe),()=>{h(this,fn).delete(Xe)}})}};Kt=new WeakMap,Nt=new WeakMap,cn=new WeakMap,Pn=new WeakMap,fn=new WeakMap,Dn=new WeakSet,Xn=function(d){h(this,cn)!==d&&(x(this,cn,d),h(this,Kt).changeLanguage(d),h(this,fn).forEach(n=>n()))},Cn=new WeakSet,ea=function(d){return h(this,Nt).needsLoading(h(this,cn),d.id)?{ready:!1}:{ready:!0,t:h(this,Kt).getFixedT(null,d.id)}},ma=new WeakSet,Gn=function(d){if(h(this,Pn).has(d.id))return;h(this,Pn).add(d.id);const n=d.getDefaultMessages();h(this,Kt).addResourceBundle(Ja,d.id,n,!0,!1);const s=d.getDefaultResource();s&&h(this,Nt).addTranslationResource(s)};let _a=ya;function ba(d){const n=new URL(d);return n.protocol=document.location.protocol,n.hostname=document.location.hostname,n.port=document.location.port,n.toString().replace(/\/$/,"")}function fa(d){const n=_.fromConfigs(d),s=n.getOptionalString("app.baseUrl"),f=n.getOptionalString("backend.baseUrl");let w=d,ye,Xe;if(s&&f){const tt=new URL(s).origin,Ut=new URL(f).origin;if(tt===Ut){const Qt=ba(f);f!==Qt&&(ye=Qt)}}if(s){const tt=ba(s);s!==tt&&(Xe=tt)}return(Xe||ye)&&(w=w.concat({data:{app:Xe&&{baseUrl:Xe},backend:ye&&{baseUrl:ye}},context:"relative-resolver"})),w}var wa=Object.defineProperty,xr=(d,n,s)=>n in d?wa(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Da=(d,n,s)=>(xr(d,typeof n!="symbol"?n+"":n,s),s),Sr=(d,n,s)=>{if(!n.has(d))throw TypeError("Cannot "+s)},Lo=(d,n,s)=>(Sr(d,n,"read from private field"),s?s.call(d):n.get(d)),vo=(d,n,s)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,s)},yo=(d,n,s,f)=>(Sr(d,n,"write to private field"),f?f.call(d,s):n.set(d,s),s),jr;function Bo(d,n,s){var f;const w=Boolean(d),ye=(0,_e.default)(d||(()=>Promise.resolve([])));let Xe;if(w&&ye.loading){const{Progress:Qt}=n;Xe=o.createElement(Qt,null)}else if(ye.error){const{BootErrorPage:Qt}=n;Xe=o.createElement(Qt,{step:"load-config",error:ye.error})}const{ThemeProvider:tt=kr}=n;return Xe?{node:o.createElement(Zt,{apis:yr.with($.n,s)},o.createElement(tt,null,Xe))}:{api:_.fromConfigs((f=ye.value)!=null&&f.length?fa(ye.value):[])}}class Qo{constructor(n){this.app=n}getPlugins(){return this.app.getPlugins()}getSystemIcon(n){return this.app.getSystemIcon(n)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class qo{constructor(n){Da(this,"apiHolder"),Da(this,"configApi"),Da(this,"apis"),Da(this,"icons"),Da(this,"plugins"),Da(this,"featureFlags"),Da(this,"components"),Da(this,"themes"),Da(this,"configLoader"),Da(this,"defaultApis"),Da(this,"bindRoutes"),Da(this,"appLanguageApi"),Da(this,"translationResources"),Da(this,"appIdentityProxy",new Zr),Da(this,"apiFactoryRegistry"),vo(this,jr,!1);var s,f,w,ye,Xe,tt,Ut,Qt,jn;this.apis=(s=n.apis)!=null?s:[],this.icons=n.icons,this.plugins=new Set((f=n.plugins)!=null?f:[]),this.featureFlags=(w=n.featureFlags)!=null?w:[],this.components=n.components,this.themes=n.themes,this.configLoader=(ye=n.configLoader)!=null?ye:Dr,this.defaultApis=(Xe=n.defaultApis)!=null?Xe:[],this.bindRoutes=n.bindRoutes,this.apiFactoryRegistry=new Ft,this.appLanguageApi=co.createWithStorage({defaultLanguage:(tt=n.__experimentalTranslations)==null?void 0:tt.defaultLanguage,availableLanguages:(Ut=n.__experimentalTranslations)==null?void 0:Ut.availableLanguages}),this.translationResources=(jn=(Qt=n.__experimentalTranslations)==null?void 0:Qt.resources)!=null?jn:[]}getPlugins(){return Array.from(this.plugins)}getSystemIcon(n){return this.icons[n]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(n){const s=this.getProvider();return()=>o.createElement(s,null,n)}getProvider(){if(Lo(this,jr))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");yo(this,jr,!0);const n=new Qo(this);let s=!1;return({children:w})=>{const ye=(0,o.useRef)(!0),Xe=(0,o.useMemo)(()=>Se.createWithStorage(this.themes),[]),{routing:tt,featureFlags:Ut,routeBindings:Qt}=(0,o.useMemo)(()=>{const ta=da();ta&&console.warn(`
DEPRECATION WARNING: React Router Beta is deprecated and support for it will be removed in a future release.
                     Please migrate to use React Router v6 stable.
                     See https://backstage.io/docs/tutorials/react-router-stable-migration
`);const la=bn({root:w,discoverers:[qn,ha],collectors:{routing:ta?l:g,collectedPlugins:Ua,featureFlags:y}});return la.collectedPlugins.forEach(Ga=>this.plugins.add(Ga)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...la,routeBindings:Kr(this.bindRoutes)}},[w]);s||(s=!0,ir(tt.paths,tt.parents),ar(Qt,this.plugins));const jn=Bo(this.configLoader,this.components,Xe),Nn="api"in jn;if(Nn){const{api:ta}=jn;this.configApi=ta}if("node"in jn)return jn.node;if(Nn&&ye.current){ye.current=!1;const ta=this.getApiHolder().get($.f);if(ta){for(const pa of this.featureFlags)ta.registerFlag({...pa,pluginId:""});for(const pa of this.plugins.values())if("getFeatureFlags"in pa)for(const sr of pa.getFeatureFlags())ta.registerFlag({name:sr.name,pluginId:pa.getId()});else for(const sr of pa.output())sr.type==="feature-flag"&&ta.registerFlag({name:sr.name,pluginId:pa.getId()});const la=ta.getRegisteredFlags(),Ga=new Set(la.map(pa=>pa.name));for(const pa of Ut)Ga.has(pa)||ta.registerFlag({name:pa,pluginId:""})}}const{ThemeProvider:Tn=kr,Progress:ca}=this.components;return o.createElement(Zt,{apis:this.getApiHolder()},o.createElement(no,{appContext:n},o.createElement(Tn,null,o.createElement(za,{routePaths:tt.paths,routeParents:tt.parents,routeObjects:tt.objects,routeBindings:Qt,basePath:Fa(jn.api)},o.createElement(er.Provider,{value:{routeObjects:tt.objects,appIdentityProxy:this.appIdentityProxy}},o.createElement(o.Suspense,{fallback:o.createElement(ca,null)},w))))))}}getRouter(){return at}getApiHolder(){if(this.apiHolder){for(const n of this.plugins)for(const s of n.getApis())this.apiFactoryRegistry.get(s.api)||this.apiFactoryRegistry.register("default",s);return We.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:$.n,deps:{},factory:()=>Se.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:$.p,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:$.t,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("static",{api:fe.IB,deps:{},factory:()=>this.appLanguageApi}),this.apiFactoryRegistry.register("default",{api:fe.op,deps:{languageApi:fe.IB},factory:({languageApi:n})=>_a.create({languageApi:n,resources:this.translationResources})}),this.apiFactoryRegistry.register("default",{api:$.f,deps:{},factory:()=>new dn});for(const n of this.defaultApis)this.apiFactoryRegistry.register("default",n);for(const n of this.plugins)for(const s of n.getApis())if(!this.apiFactoryRegistry.register("default",s))throw new Error(`Plugin ${n.getId()} tried to register duplicate or forbidden API factory for ${s.api}`);for(const n of this.apis)if(!this.apiFactoryRegistry.register("app",n))throw new Error(`Duplicate or forbidden API factory for ${n.api} in app`);return We.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new We(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(n){const s=new Set;for(const f of n){const w=f.getId();if(s.has(w))throw new Error(`Duplicate plugin found '${w}'`);s.add(w)}}}jr=new WeakMap;function Uo(d){return new qo(d)}let _o=!1;const bo=d=>{const n=(0,Qe.qD)(),{NotFoundErrorPage:s}=n.getComponents(),f=(0,o.useMemo)(()=>da(),[]),ye=[...(0,Qe.vJ)(d.children,Xe=>Xe.getElements().flatMap(tt=>{var Ut;let Qt=tt.props.path;if(Qt==="")return[];Qt=(Ut=Qt==null?void 0:Qt.replace(/\/\*$/,""))!=null?Ut:"/";let jn=f?tt:tt.props.element;return!f&&!jn&&(jn=tt,_o||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),_o=!0)),[{path:Qt,element:jn,children:tt.props.children?[{path:Qt==="/"?"/":"*",element:tt.props.children}]:void 0}]}).sort((tt,Ut)=>Ut.path.localeCompare(tt.path)).map(tt=>({...tt,path:tt.path==="/"?"/":`${tt.path}/*`}))),{path:"*",element:o.createElement(s,null)}];return(0,b.V$)(ye)};(0,Qe.R5)(bo,"core.type","FlatRoutes")},49558:($n,qt,e)=>{"use strict";e.d(qt,{in:()=>hn,qE:()=>ka,Oo:()=>Ei,hB:()=>uc,db:()=>ds,Oi:()=>Fe,VY:()=>Ao,yW:()=>fi,bj:()=>Fa,XF:()=>q,mn:()=>lt,NX:()=>at,SX:()=>Xt,zG:()=>ms,ub:()=>Oa,mf:()=>Ks,yu:()=>dr,fy:()=>ps,h4:()=>To,M6:()=>Z,i9:()=>xl,aR:()=>li,rJ:()=>Sr,Oh:()=>Zl,hu:()=>Zi,Fw:()=>Pn,rU:()=>da,Qj:()=>nr,nU:()=>Dn,SA:()=>kr,J3:()=>ma,Or:()=>zn,T3:()=>Io,g9:()=>Wl,Ex:()=>Wn,Gk:()=>_r,tn:()=>ci,Ph:()=>f,YE:()=>ol,v7:()=>Ui,Hz:()=>No,R6:()=>Bi,tR:()=>al,oz:()=>bl,BV:()=>yl,k2:()=>xi,BT:()=>ll,FW:()=>oc,dh:()=>ji,vK:()=>sr,Kq:()=>Ga,wA:()=>Lr,VC:()=>Co,Pd:()=>pa,xT:()=>ss,uw:()=>Ss,qt:()=>ys,oZ:()=>lc,iA:()=>hi,tB:()=>gs,GB:()=>Kr,sidebarConfig:()=>Rr,r0:()=>Fo,mZ:()=>po,Pf:()=>Ro});var o=e(57032),m=e(30705),p=e(61837),z=e(37265),B=e(90436),i=e(87685),$=e(99688),Qe=e(19928),Ne=e.n(Qe),a=e(2784),xe=e(27429),Te=e(77277),ie=e(8629),G=e(49429),Ge=e(38724),ge=e(79249),be=e(43434),re=e(79692),Oe=e(60364),I=e(41128),c=e(15459),R=e(12420),_=e(76600),b=e(41547),N=e(86689),_e=e(12524),fe=e.n(_e),ve=e(76635),Y=e(73557),v=e(39857),ee=e(16060),oe=e(95544),Rt=e(56553),T=e(26639),sn=e(39595),me=e(80030),Zt=e(19353),yt=e(95074),mt=e(41156),It=e(88188),We=e(13725),Pt=e(11105),ot=e(97963),zt=e(46506),Tt=e.n(zt),Ft=e(54073),ct=e.n(Ft),ht=e(10368),$t=e(76985),an=e(39829),St=e(19574),Gt=e.n(St),D=e(72164),U=e(93657),O=e(60905);const M=e.p+"static/missingAnnotation.67f79e98..svg",ne=e.p+"static/noInformation.4b426325..svg",he=e.p+"static/createComponent.975d1e1e..svg",ze=e.p+"static/noBuild.1715fa71..svg";var Ct=e(11776),Ye=e(38402),Mt=e(49378),rn=e(27616),Wt=e(8284),ft=e(70660),we=e(91750),rt=e(38016),xt=e(32407),kt=e(28156),le=e(85256),Ue=e(28316),Lt=e(35292),Yt=e(48049),se=e(51209),Ze=e(3806),pe=e(32272),Me=e(15277),nt=e.n(Me),pt=e(58985),Bt=e(89586),tn=e(67358),Ce=e(94339),Le=e(14503),P=e(24579),W=e(32552),J=e(27597),it=e(35585),ut=e(21324),Et=e(7089),Jt=e(42494),mn=e(74603),An=e(56939),vn=e(12231),Vn=e(73698),Mn=e(72379),Zn=e(74600),A=e.n(Zn),F=e(37390),Pe=e(97485),gt=e(15584),Ot=e(89571),Vt=e(86136),ae=e(50758),Ae=e(79784),je=e(19126),Ht=e.n(je),nn=e(80079),ln=e(18671),on=e(6487),In=e(99152),Bn=e(67222),Hn=e(21070),ra=e(90324),yn=e(98281),na=e(33375),ia=e(44233),oa=e(27604),ua=e(36444),Pa=e(37971),Qn=e(59709),Ea=e(17373),X=e(3702),Be=e(93111),et=e(4614),vt=e(44311);const Se=e.p+"static/mic-drop.fe3ef4d0..svg";var H=e(16173),Ee=e(50023),de=e(4190),st=e(44882),k=e(18473),j=e(57998),Q=e(83543),te=e(59797),ke=e(26739),Je=e(86619),He=e(98989),qe=e(30195),At=e(63955),dn=e(74828),wt=e(45455),un=e.n(wt);function hn(t){const[r,u]=(0,a.useState)([]),E=(0,o.u)(o.l),{anchorOrigin:C={vertical:"top",horizontal:"center"},transientTimeoutMs:L}=t,V=L!=null?L:5e3;(0,a.useEffect)(()=>{const De=E.alert$().subscribe(dt=>u(bt=>bt.concat(dt)));return()=>{De.unsubscribe()}},[E]);const[ce]=r;if((0,a.useEffect)(()=>{if(ce&&ce.display==="transient"){const De=setTimeout(()=>{u(dt=>{const bt=dt.filter(en=>en!==ce);return bt.length===dt.length?dt:bt})},V);return()=>clearTimeout(De)}},[ce,V]),r.length===0)return null;const Ie=()=>{u(De=>De.filter(dt=>dt!==ce))};return a.createElement(z.Z,{open:!0,anchorOrigin:C},a.createElement($.Z,{action:a.createElement(p.Z,{color:"inherit",size:"small",onClick:Ie,"data-testid":"error-button-close"},a.createElement(i.Z,null)),severity:ce.severity},a.createElement(B.Z,{component:"span"},String(ce.message),r.length>1&&a.createElement("em",null,` (${r.length-1} older ${Ne()("message",r.length-1)})`))))}const En="@backstage/autologout:lastSeenOnline",kn=({enableEffect:t,autologoutIsEnabled:r,idleTimeoutSeconds:u,lastSeenOnlineStore:E,identityApi:C})=>{useEffect(()=>{if(r&&t){const L=E.get();if(L){const ce=Math.ceil(new Date().getTime()/1e3),Ie=Math.ceil(L.getTime()/1e3);ce-Ie>u&&C.signOut()}E.save(new Date)}else E.delete()},[r,t,C,u,E])},wn=t=>{const{idleTimer:r,setOpen:u,open:E,promptTimeoutMillis:C,remainingTime:L,setRemainingTime:V}=t;useEffect(()=>{const dt=setInterval(()=>{V(Math.ceil(r.getRemainingTime()))},500);return()=>{clearInterval(dt)}},[r,V]);const ce=()=>{u(!1),r.activate()},De=Math.max(L-C/1e3,0)>1?"seconds":"second";return React.createElement(Dialog,{open:E,"data-testid":"inactivity-prompt-dialog"},React.createElement(DialogTitle,null,"Logging out due to inactivity"),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,"You are about to be disconnected in"," ",React.createElement("b",null,Math.ceil(L/1e3)," ",De),". Are you still there?")),React.createElement(DialogActions,null,React.createElement(Button$1,{onClick:ce,color:"secondary",variant:"contained",size:"small"},"Yes! Don't log me out")))};class xn{constructor(r){this.key=r}save(r){localStorage.setItem(this.key,r.toJSON())}delete(){localStorage.removeItem(this.key)}get(){const r=localStorage.getItem(this.key);return r!==null?new Date(Date.parse(r)):null}}const Rn=({idleTimeoutMinutes:t,events:r,useWorkerTimers:u,logoutIfDisconnected:E,promptBeforeIdleSeconds:C,promptOpen:L,setPromptOpen:V,remainingTimeCountdown:ce,setRemainingTimeCountdown:Ie,identityApi:De,lastSeenOnlineStore:dt})=>{const bt=C*1e3,en=bt>0,jt=async()=>{V(!0),Ie(bt)},gn=()=>{V(!1),Ie(0),De.signOut()},Un=()=>{V(!1),Ie(0)},Yn=($a,Xa)=>{dt.save(new Date)},ga=useIdleTimer({timeout:t*60*1e3,events:r,crossTab:!0,name:"autologout-timer",timers:u?workerTimers:void 0,onIdle:gn,onActive:en?Un:void 0,onAction:E?Yn:void 0,onPrompt:en?jt:void 0,promptBeforeIdle:en?bt:void 0,syncTimers:1e3});return React.createElement(React.Fragment,null,en&&React.createElement(wn,{idleTimer:ga,open:L,setOpen:V,remainingTime:ce,setRemainingTime:Ie,promptTimeoutMillis:bt}))},On={enabled:!0,idleTimeoutMinutes:.5,promptBeforeIdleSeconds:10,useWorkerTimers:!0,logoutIfDisconnected:!0},pn=null,_n=(t,r)=>{var u,E,C,L,V,ce,Ie,De,dt,bt;return{enabled:(E=(u=t.getOptionalBoolean("auth.autologout.enabled"))!=null?u:r.enabled)!=null?E:On.enabled,idleTimeoutMinutes:(L=(C=t.getOptionalNumber("auth.autologout.idleTimeoutMinutes"))!=null?C:r.idleTimeoutMinutes)!=null?L:On.idleTimeoutMinutes,promptBeforeIdleSeconds:(ce=(V=t.getOptionalNumber("auth.autologout.promptBeforeIdleSeconds"))!=null?V:r.promptBeforeIdleSeconds)!=null?ce:On.promptBeforeIdleSeconds,useWorkerTimers:(De=(Ie=t.getOptionalBoolean("auth.autologout.useWorkerTimers"))!=null?Ie:r.useWorkerTimers)!=null?De:On.useWorkerTimers,logoutIfDisconnected:(bt=(dt=t.getOptionalBoolean("auth.autologout.logoutIfDisconnected"))!=null?dt:r.logoutIfDisconnected)!=null?bt:On.logoutIfDisconnected}},aa=t=>{const r=useApi(identityApiRef),u=useApi(configApiRef),[E,C]=useState(!1);useEffect(()=>{async function Un(Yn){(await Yn.getCredentials()).token?C(!0):C(!1)}Un(r)},[r]);const{enabled:L,idleTimeoutMinutes:V,promptBeforeIdleSeconds:ce,logoutIfDisconnected:Ie,useWorkerTimers:De}=useMemo(()=>_n(u,t),[u,t]);useEffect(()=>{if(V<.5)throw new Error("\u274C idleTimeoutMinutes property should be >= 0.5 minutes (30 seconds).");if(ce<0)throw new Error("\u274C promptBeforeIdleSeconds property should be >= 0 seconds. Set to 0 to disable the prompt.");if(V*60<=ce)throw new Error("\u274C promptBeforeIdleSeconds should be smaller than idleTimeoutMinutes")},[V,ce]);const dt=useMemo(()=>new xn(En),[]),[bt,en]=useState(!1),[jt,gn]=useState(0);return kn({enableEffect:Ie,autologoutIsEnabled:L&&E,idleTimeoutSeconds:V*60,lastSeenOnlineStore:dt,identityApi:r}),!L||!E?null:React.createElement(Rn,{idleTimeoutMinutes:V,promptBeforeIdleSeconds:ce,useWorkerTimers:De,events:pn,logoutIfDisconnected:Ie,promptOpen:bt,setPromptOpen:en,remainingTimeCountdown:jt,setRemainingTimeCountdown:gn,identityApi:r,lastSeenOnlineStore:dt})};function sa(t){let r=0;for(let E=0;E<t.length;E++)r=t.charCodeAt(E)+((r<<5)-r);let u="#";for(let E=0;E<3;E++){const C=r>>E*8&255;u+=`00${C.toString(16)}`.slice(-2)}return u}function Aa(t){var r;const u=t.trim().split(" "),E=(r=u[0])!=null?r:"",C=u.length>1?u[u.length-1]:"";return E&&C?`${E.charAt(0)}${C.charAt(0)}`:E.charAt(0)}const Sa=(0,re.Z)(t=>({avatar:{width:"4rem",height:"4rem",color:t.palette.common.white},avatarText:{fontWeight:t.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function ka(t){const{displayName:r,picture:u,customStyles:E}=t,C=Sa();let L={...E};const V={fontFamily:L.fontFamily,fontSize:L.fontSize,fontWeight:L.fontWeight};return u||(L={backgroundColor:sa(r||""),...E}),a.createElement(be.Z,{alt:r,src:u,className:C.avatar,style:L},r&&a.createElement(B.Z,{variant:"h6",component:"span",className:C.avatarText,style:V},Aa(r)))}function Wa(){const[t]=(0,Y.is)(a.createElement(Y.AW,{index:!0,element:a.createElement("div",null)}));return!t.index}const Ba=(0,re.Z)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",userSelect:"none",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),Ra=t=>/^([a-z+.-]+):/.test(t),ja=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Na=window.open;if(Na&&!Na.__backstage){const t=function(...u){const E=String(u[0]);if(ja.test(E))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return Na.apply(this,u)};t.__backstage=!0,window.open=t}const Va=()=>{try{return(0,o.u)(o.p).getOptionalString("app.baseUrl")}catch{return}},ur=()=>{var t;const r="http://sample.dev",u=(t=Va())!=null?t:"/",{pathname:E}=new URL(u,r);return(0,ve.trimEnd)(E,"/")},qa=t=>{let r=String(t);const u=ur(),E=Ra(r),C=r.startsWith(u);return!E&&!C&&(r=u.concat(r)),r},er=t=>{var r;return t instanceof Array?t.map(er).join(" ").trim():typeof t=="object"&&t?er((r=t==null?void 0:t.props)==null?void 0:r.children):["string","number"].includes(typeof t)?String(t):""},da=a.forwardRef(({onClick:t,noTrack:r,...u},E)=>{const C=Ba(),L=(0,m.z$)(),V=Wa()?qa(u.to):u.to,ce=er(u.children)||V,Ie=Ra(V),De=Ie&&!!/^https?:/.exec(V);if(ja.test(V))throw new Error("Link component rejected javascript: URL as a security precaution");const dt=bt=>{t==null||t(bt),r||L.captureEvent("click",ce,{attributes:{to:V}})};return Ie?a.createElement(N.Z,{...De?{target:"_blank",rel:"noopener"}:{},...u,...u["aria-label"]?{"aria-label":`${u["aria-label"]}, Opens in a new window`}:{},ref:E,href:V,onClick:dt,className:fe()(C.externalLink,u.className)},u.children,a.createElement(B.Z,{component:"span",className:C.visuallyHidden},", Opens in a new window")):a.createElement(N.Z,{...u,ref:E,component:v.rU,to:V,onClick:dt})}),tr=a.forwardRef((t,r)=>a.createElement(da,{ref:r,...t,color:"initial"})),nr=a.forwardRef((t,r)=>a.createElement(Te.Z,{ref:r,component:tr,...t})),or=null;function Fa(t){const{text:r,tooltipDelay:u=1e3,tooltipText:E="Text copied to clipboard","aria-label":C="Copy text"}=t,L=(0,o.u)(o.r),[V,ce]=(0,a.useState)(!1),[{error:Ie},De]=(0,yt.Z)();(0,a.useEffect)(()=>{Ie&&L.post(Ie)},[Ie,L]);const dt=bt=>{bt.stopPropagation(),ce(!0),De(r)};return a.createElement(a.Fragment,null,a.createElement(me.ZP,{id:"copy-test-tooltip",title:E,placement:"top",leaveDelay:u,onClose:()=>ce(!1),open:V},a.createElement(p.Z,{onClick:dt,"aria-label":C},a.createElement(Zt.Z,null))))}function Fe(t){const{text:r,language:u,showLineNumbers:E=!1,highlightedNumbers:C,customStyle:L,showCopyCodeButton:V=!1}=t,ce=(0,Oe.Z)(),Ie=ce.palette.type==="dark"?T.Z:sn.Z,De=ce.palette.type==="dark"?"#256bf3":"#e6ffed";return a.createElement(oe.Z,{position:"relative"},a.createElement(Rt.Z,{customStyle:L,language:u,style:Ie,showLineNumbers:E,wrapLines:!0,lineNumberStyle:{color:ce.palette.textVerySubtle},lineProps:dt=>C!=null&&C.includes(dt)?{style:{backgroundColor:De}}:{}},r),V&&a.createElement(oe.Z,{position:"absolute",top:0,right:0},a.createElement(Fa,{text:r})))}function q(t){const{title:r,to:u}=t,E=(0,mt.Z)(C=>C.breakpoints.down("xs"));return u?E?a.createElement(p.Z,{component:v.rU,color:"primary",title:r,size:"small",to:u},a.createElement(It.Z,null)):a.createElement(Te.Z,{component:v.rU,variant:"contained",color:"primary",to:u},r):null}var at;(t=>{(r=>{r.TOP_BOTTOM="TB",r.BOTTOM_TOP="BT",r.LEFT_RIGHT="LR",r.RIGHT_LEFT="RL"})(t.Direction||(t.Direction={})),(r=>{r.UP_LEFT="UL",r.UP_RIGHT="UR",r.DOWN_LEFT="DL",r.DOWN_RIGHT="DR"})(t.Alignment||(t.Alignment={})),(r=>{r.NETWORK_SIMPLEX="network-simplex",r.TIGHT_TREE="tight-tree",r.LONGEST_PATH="longest-path"})(t.Ranker||(t.Ranker={})),(r=>{r.LEFT="l",r.RIGHT="r",r.CENTER="c"})(t.LabelPosition||(t.LabelPosition={}))})(at||(at={}));const bn=(0,re.Z)(t=>({node:{fill:t.palette.primary.light,stroke:t.palette.primary.light},text:{fill:t.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function Ln({node:{id:t}}){const r=bn(),[u,E]=a.useState(0),[C,L]=a.useState(0),V=a.useRef(null);a.useLayoutEffect(()=>{if(V.current){let{height:dt,width:bt}=V.current.getBBox();dt=Math.round(dt),bt=Math.round(bt),(dt!==C||bt!==u)&&(E(bt),L(dt))}},[u,C]);const ce=10,Ie=u+ce*2,De=C+ce*2;return a.createElement("g",null,a.createElement("rect",{className:r.node,width:Ie,height:De,rx:10}),a.createElement("text",{ref:V,className:r.text,y:De/2,x:Ie/2,textAnchor:"middle",alignmentBaseline:"middle"},t))}const qn="arrow-marker",ha="node",Ua="edge",Ka="label",va=(0,ht.Z)(t=>({node:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),xa=t=>a.createElement(Ln,{...t});function Ia({render:t=xa,setNode:r,node:u}){const{width:E,height:C,x:L=0,y:V=0}=u,ce=u,Ie=va(),De=a.useRef(null);return a.useLayoutEffect(()=>{if(De.current){let{height:dt,width:bt}=De.current.getBBox();dt=Math.round(dt),bt=Math.round(bt),(dt!==C||bt!==E)&&r(u.id,{...u,height:dt,width:bt})}},[u,E,C,r]),a.createElement("g",{ref:De,"data-testid":ha,className:Ie.node,transform:`translate(${L-E/2},${V-C/2})`},t({node:ce}))}const Ya=(0,ht.Z)(t=>({text:{fill:t.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function g({edge:{label:t}}){const r=Ya();return a.createElement("text",{className:r.text,textAnchor:"middle"},t)}const l=(0,ht.Z)(t=>({path:{strokeWidth:1,stroke:t.palette.textSubtle,fill:"none",transition:`${t.transitions.duration.shortest}ms`},label:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),y=t=>a.createElement(g,{...t});function K({render:t=y,setEdge:r,id:u,edge:E,curve:C}){const{x:L=0,y:V=0,width:ce,height:Ie,points:De}=E,dt=E,bt=l(),en=a.useRef(null);a.useLayoutEffect(()=>{if(en.current){let{height:Un,width:Yn}=en.current.getBBox();Un=Math.round(Un),Yn=Math.round(Yn),(Un!==Ie||Yn!==ce)&&r(u,{...E,height:Un,width:Yn})}},[E,Ie,ce,r,u]);let jt="";const gn=a.useMemo(()=>$t.Z().x(Un=>Un.x).y(Un=>Un.y).curve(an[C]),[C]);if(De){const Un=De.filter(Yn=>Gt()(Yn.x)&&Gt()(Yn.y));jt=gn(Un)||""}return a.createElement(a.Fragment,null,jt&&a.createElement("path",{"data-testid":Ua,className:bt.path,d:jt}),dt.label?a.createElement("g",{ref:en,"data-testid":Ka,className:bt.label,transform:`translate(${L},${V})`},t({edge:dt})):null)}const Re="workspace";function lt(t){var r,u;const{edges:E,nodes:C,renderNode:L,direction:V=at.Direction.TOP_BOTTOM,align:ce,nodeMargin:Ie=50,edgeMargin:De=10,rankMargin:dt=50,paddingX:bt=0,paddingY:en=0,acyclicer:jt,ranker:gn=at.Ranker.NETWORK_SIMPLEX,labelPosition:Un=at.LabelPosition.RIGHT,labelOffset:Yn=10,edgeRanks:ga=1,edgeWeight:$a=1,renderLabel:Xa,defs:Jn,zoom:Ta="enabled",curve:Za="curveMonotoneX",fit:Qa="grow",...br}=t,Yr=(0,ot.Z)(),[gr,Jr]=a.useState(100),[Xr,Mo]=a.useState(100),Ca=a.useRef(new(Tt()).graphlib.Graph),[Qr,hr]=a.useState(((r=Ca.current.graph())==null?void 0:r.width)||0),[Or,go]=a.useState(((u=Ca.current.graph())==null?void 0:u.height)||0),[ho,Br]=a.useState([]),[Ur,Yo]=a.useState([]),fo=Math.max(Qr,gr),qr=Math.max(Or,Xr),dc=Math.min(Or,Xr),mc=Qa==="grow"?qr:dc,pc=a.useMemo(()=>ct()(La=>{if(!La)return;const Ha=Pt.Z(La),Ma=Pt.Z(La.getElementById(Re));function fr(){Ha.call(We.sP().scaleExtent([1,1/0]).on("zoom",wr=>{wr.transform.x=Math.min(0,Math.max(wr.transform.x,fo-fo*wr.transform.k)),wr.transform.y=Math.min(0,Math.max(wr.transform.y,qr-qr*wr.transform.k)),Ma.attr("transform",wr.transform)}))}Ta==="enabled"?fr():Ta==="enable-on-click"&&Ha.on("click",()=>fr());const{width:Er,height:xo}=La.getBoundingClientRect();gr!==Er&&Jr(Er),Xr!==xo&&Mo(xo)},100),[Xr,gr,fo,qr,Ta]),Ki=a.useCallback(()=>{const La=Ca.current.nodes(),Ha=Ca.current.edges();La.forEach(Ma=>{C.some(Er=>Er.id===Ma)||Ca.current.removeNode(Ma)}),Ha.forEach(Ma=>{E.some(Er=>Er.from===Ma.v&&Er.to===Ma.w)||Ca.current.removeEdge(Ma.v,Ma.w)}),C.forEach(Ma=>{const fr=Ca.current.nodes().find(Er=>Ma.id===Er);if(fr&&Ca.current.node(fr)){const{width:Er,height:xo,x:wr,y:fc}=Ca.current.node(fr);Ca.current.setNode(fr,{...Ma,width:Er,height:xo,x:wr,y:fc})}else Ca.current.setNode(Ma.id,{...Ma,width:0,height:0})}),E.forEach(Ma=>{Ca.current.setEdge(Ma.from,Ma.to,{...Ma,label:Ma.label,width:0,height:0,labelpos:Un,labeloffset:Yn,weight:$a,minlen:ga})})},[E,C,Un,Yn,$a,ga]),Eo=a.useMemo(()=>ct()(()=>{Tt().layout(Ca.current);const{height:La,width:Ha}=Ca.current.graph(),Ma=Math.max(0,La||0),fr=Math.max(0,Ha||0);hr(fr),go(Ma),Br(Ca.current.nodes()),Yo(Ca.current.edges())},250,{leading:!0}),[]);a.useEffect(()=>(Ca.current.setGraph({rankdir:V,align:ce,nodesep:Ie,edgesep:De,ranksep:dt,marginx:bt,marginy:en,acyclicer:jt,ranker:gn}),Ki(),Eo(),Eo.cancel),[jt,ce,V,De,bt,en,Ie,dt,gn,Ki,Eo]);function gc(La,Ha){return Ca.current.setNode(La,Ha),Eo(),Ca.current}function hc(La,Ha){return Ca.current.setEdge(La,Ha),Eo(),Ca.current}return a.createElement("svg",{ref:pc,...br,width:"100%",height:mc,viewBox:`0 0 ${fo} ${qr}`},a.createElement("defs",null,a.createElement("marker",{id:qn,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},a.createElement("path",{fill:Yr.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Jn),a.createElement("g",{id:Re},a.createElement("svg",{width:Qr,height:Or,y:qr/2-Or/2,x:fo/2-Qr/2,viewBox:`0 0 ${Qr} ${Or}`},Ur.map(La=>{const Ha=Ca.current.edge(La);return Ha?a.createElement(K,{key:`${La.v}-${La.w}`,id:La,setEdge:hc,render:Xa,edge:Ha,curve:Za}):null}),ho.map(La=>{const Ha=Ca.current.node(La);return Ha?a.createElement(Ia,{key:La,setNode:gc,render:L,node:Ha}):null}))))}const Dt=(0,re.Z)(t=>{var r,u;return{root:{padding:t.spacing(0),marginBottom:t.spacing(0),marginTop:t.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:t.spacing(6),marginTop:-t.spacing(3),zIndex:"unset"},icon:{fontSize:t.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:t.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:t.palette.banner.link}},button:{color:(r=t.palette.banner.closeButtonColor)!=null?r:"inherit"},info:{backgroundColor:t.palette.banner.info},error:{backgroundColor:t.palette.banner.error},warning:{backgroundColor:(u=t.palette.banner.warning)!=null?u:t.palette.banner.error}}},{name:"BackstageDismissableBanner"}),Xt=t=>{var r;const{variant:u,message:E,id:C,fixed:L=!1}=t,V=Dt(),Ie=(0,o.u)(o.x).forBucket("notifications"),De=(r=Ie.snapshot("dismissedBanners").value)!=null?r:[],[dt,bt]=(0,a.useState)(new Set(De)),en=(0,D.Z)(Ie.observe$("dismissedBanners"));(0,a.useEffect)(()=>{var gn;if(en!=null&&en.value){const Un=(gn=en==null?void 0:en.value)!=null?gn:[];bt(new Set(Un))}},[en==null?void 0:en.value]);const jt=()=>{Ie.set("dismissedBanners",[...dt,C])};return a.createElement(z.Z,{anchorOrigin:L?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!dt.has(C),classes:{root:fe()(V.root,!L&&V.topPosition)}},a.createElement(U.Z,{classes:{root:fe()(V.content,V[u]),message:V.message},message:E,action:[a.createElement(p.Z,{key:"dismiss",title:"Permanently dismiss this message",className:V.button,onClick:jt},a.createElement(i.Z,{className:V.icon}))]}))},Sn=(0,re.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),Fn=({missing:t})=>{const r=Sn();switch(t){case"field":return a.createElement("img",{src:M,className:r.generalImg,alt:"annotation is missing"});case"info":return a.createElement("img",{src:ne,alt:"no Information",className:r.generalImg});case"content":return a.createElement("img",{src:he,alt:"create Component",className:r.generalImg});case"data":return a.createElement("img",{src:ze,alt:"no Build",className:r.generalImg});default:return null}},Kn=(0,re.Z)(t=>({root:{backgroundColor:t.palette.background.default,padding:t.spacing(2,0,0,0)},action:{marginTop:t.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function Oa(t){const{title:r,description:u,missing:E,action:C}=t,L=Kn();return a.createElement(O.Z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:L.root,spacing:2},a.createElement(O.Z,{item:!0,xs:12,md:6},a.createElement(O.Z,{container:!0,direction:"column"},a.createElement(O.Z,{item:!0,xs:!0},a.createElement(B.Z,{variant:"h5"},r)),a.createElement(O.Z,{item:!0,xs:!0},a.createElement(B.Z,{variant:"body1"},u)),a.createElement(O.Z,{item:!0,xs:!0,className:L.action},C))),a.createElement(O.Z,{item:!0,xs:12,md:6,className:L.imageContainer},typeof E=="string"?a.createElement(Fn,{missing:E}):E.customImage))}const za=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,ir=/^.*ANNOTATION.*$/m,ar=za.match(ir)[0],to=za.split(`
`).findIndex(t=>ir.test(t)),no=(0,re.Z)(t=>({code:{borderRadius:6,margin:t.spacing(2,0),background:t.palette.type==="dark"?"#444":t.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function Wr(t){return Array.from(Array(t+1).keys(),r=>r+to)}function ao(t){const r=t.map(u=>ar.replace("ANNOTATION",u)).join(`
`);return za.replace(ar,r)}function Ir(t){const r=t.length<=1;return React.createElement(React.Fragment,null,"The ",r?"annotation":"annotations"," ",t.map(u=>React.createElement("code",null,u)).reduce((u,E)=>React.createElement(React.Fragment,null,u,", ",E))," ",r?"is":"are"," missing. You need to add the"," ",r?"annotation":"annotations"," to your component if you want to enable this tool.")}function ro(t){const{annotation:r,readMoreUrl:u}=t,E=Array.isArray(r)?r:[r],C=u||"https://backstage.io/docs/features/software-catalog/well-known-annotations",L=no();return React.createElement(Oa,{missing:"field",title:"Missing Annotation",description:Ir(E),action:React.createElement(React.Fragment,null,React.createElement(Typography,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),React.createElement(Box,{className:L.code},React.createElement(Fe,{text:ao(E),language:"yaml",showLineNumbers:!0,highlightedNumbers:Wr(E.length),customStyle:{background:"inherit",fontSize:"115%"}})),React.createElement(Button$1,{color:"primary",component:da,to:C},"Read more"))})}const $r=(0,re.Z)(t=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${t.palette.border}`},"& th, & td":{border:`1px solid ${t.palette.border}`,padding:t.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:t.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:t.palette.background.paper},"& tr":{backgroundColor:t.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:t.palette.background.default},"& a":{color:t.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),Zr=(t,r)=>r?typeof r=="string"?t+r:a.Children.toArray(r.props.children).reduce(Zr,t):t,rr=({level:t,children:r})=>{const C=a.Children.toArray(r).reduce(Zr,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return a.createElement(`h${t}`,{id:C},r)},Cr={code:({inline:t,className:r,children:u,...E})=>{const C=String(u).replace(/\n+$/,""),L=/language-(\w+)/.exec(r||"");return!t&&L?a.createElement(Fe,{language:L[1],text:C}):a.createElement("code",{className:r,...E},u)},h1:rr,h2:rr,h3:rr,h4:rr,h5:rr,h6:rr};function kr(t){const{content:r,dialect:u="gfm",linkTarget:E,transformLinkUri:C,transformImageUri:L,className:V}=t,ce=$r();return a.createElement(xt.D,{remarkPlugins:u==="gfm"?[kt.Z]:[],className:`${ce.markdown} ${V}`,children:r,components:Cr,linkTarget:E,transformLinkUri:C,transformImageUri:L})}const Dr=(t,r)=>(r.palette.type==="light"?I._j:I.$n)(r.palette[t].light,.6),Nr=(t,r)=>(r.palette.type==="light"?I.$n:I._j)(r.palette[t].light,.9),Fr=(0,re.Z)(t=>({root:{marginRight:t.spacing(1),fill:({severity:r})=>Dr(r,t)}})),oo=({severity:t})=>{const r=Fr({severity:t});return a.createElement(we.Z,{classes:r})},io=({severity:t})=>{const r=Fr({severity:t});return a.createElement(rt.Z,{classes:r})},so=(0,re.Z)(t=>({panel:{backgroundColor:({severity:r})=>Nr(r,t),color:({severity:r})=>Dr(r,t),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:r})=>Dr(r,t),fontWeight:t.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:r})=>Dr(r,t),backgroundColor:({severity:r})=>Nr(r,t)},details:{width:"100%",display:"block",color:t.palette.textContrast,backgroundColor:t.palette.background.default,border:`1px solid ${t.palette.border}`,padding:t.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),yr=t=>t.charAt(0).toLocaleUpperCase("en-US")+t.slice(1);function Kr(t){const{severity:r="warning",title:u,titleFormat:E,message:C,children:L,defaultExpanded:V}=t,ce=so({severity:r}),Ie=yr(r)+(u?`: ${u}`:"");return a.createElement(rn.Z,{defaultExpanded:V!=null?V:!1,className:ce.panel,role:"alert"},a.createElement(Wt.Z,{expandIcon:a.createElement(io,{severity:r}),className:ce.summary},a.createElement(oo,{severity:r}),a.createElement(B.Z,{className:ce.summaryText,variant:"subtitle1"},E==="markdown"?a.createElement(kr,{content:Ie,className:ce.markdownContent}):Ie)),(C||L)&&a.createElement(ft.Z,null,a.createElement(O.Z,{container:!0},C&&a.createElement(O.Z,{item:!0,xs:12},a.createElement(B.Z,{className:ce.message,variant:"body1"},C)),L&&a.createElement(O.Z,{item:!0,xs:12,className:ce.details},L))))}const zr=(0,re.Z)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageErrorPanel"}),cr=({error:t,message:r,stack:u,children:E})=>{const C=zr();return a.createElement(Ct.Z,{dense:!0},a.createElement(Ye.Z,{alignItems:"flex-start"},a.createElement(Mt.Z,{classes:{secondary:C.text},primary:"Error",secondary:t}),a.createElement(Fa,{text:t})),a.createElement(Ye.Z,{alignItems:"flex-start"},a.createElement(Mt.Z,{classes:{secondary:C.text},primary:"Message",secondary:r}),a.createElement(Fa,{text:r})),u&&a.createElement(Ye.Z,{alignItems:"flex-start"},a.createElement(Mt.Z,{classes:{secondary:C.text},primary:"Stack Trace",secondary:u}),a.createElement(Fa,{text:u})),E)};function dr(t){const{title:r,error:u,defaultExpanded:E,titleFormat:C,children:L}=t;return a.createElement(Kr,{severity:"error",title:r!=null?r:u.message,defaultExpanded:E,titleFormat:C},a.createElement(cr,{error:u.name,message:u.message,stack:u.stack,children:L}))}const Mr=(0,re.Z)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function _r(t){var r;const{title:u,error:E,defaultExpanded:C}=t,L=Mr();if(E.name!=="ResponseError")return a.createElement(dr,{title:u!=null?u:E.message,defaultExpanded:C,error:E});const{body:V,cause:ce}=E,{request:Ie,response:De}=V,dt=`${De.statusCode}: ${ce.name}`,bt=Ie&&`${Ie.method} ${Ie.url}`,en=ce.message.replace(/\\n/g,`
`),jt=(r=ce.stack)==null?void 0:r.replace(/\\n/g,`
`),gn=JSON.stringify(V,void 0,2);return a.createElement(dr,{title:u!=null?u:E.message,defaultExpanded:C,error:{name:dt,message:en,stack:jt}},bt&&a.createElement(Ye.Z,{alignItems:"flex-start"},a.createElement(Mt.Z,{classes:{secondary:L.text},primary:"Request",secondary:Ie?`${bt}`:void 0}),a.createElement(Fa,{text:bt})),a.createElement(a.Fragment,null,a.createElement(le.Z,{component:"li",className:L.divider}),a.createElement(Ye.Z,{alignItems:"flex-start"},a.createElement(Mt.Z,{classes:{secondary:L.text},primary:"Full Error as JSON"})),a.createElement(Fe,{language:"json",text:gn,showCopyCodeButton:!0})))}function mr(t){const r=document.createElement("div");return r.setAttribute("id",t),r}function Pr(t){document.body.insertBefore(t,document.body.lastElementChild.nextElementSibling)}function Ar(t){const r=useRef(null);useEffect(function(){const C=document.querySelector(`#${t}`),L=C||mr(t);return C||Pr(L),L.appendChild(r.current),function(){r.current.remove(),L.childNodes.length===-1&&L.remove()}},[t]);function u(){return r.current||(r.current=document.createElement("div")),r.current}return u()}const Ja="core.calloutSeen";function lo(){const[t,r]=useState(()=>{const E=localStorage.getItem(Ja);return E?JSON.parse(E):{}}),u=useCallback((E,C)=>{const L=localStorage.getItem(Ja),ce={...L?JSON.parse(L):{},[E]:C};r(ce),localStorage.setItem(Ja,JSON.stringify(ce))},[]);return{states:t,setState:u}}function co(t){const{states:r,setState:u}=lo(),E=useCallback(()=>{u(t,!0)},[u,t]);return{seen:r[t]===!0,markSeen:E}}function uo(t){const{seen:r,markSeen:u}=co(t);return{show:r===!1,hide:u}}const Gr=(0,re.Z)(t=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${t.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:t.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function mo(t){const{featureId:r,title:u,description:E,children:C}=t,{show:L,hide:V}=uo(r),ce=Ar("core.callout"),Ie=useRef(null),[De,dt]=useState(),bt=Gr(),en=useCallback(()=>{if(Ie.current){const jt=Ie.current.getBoundingClientRect(),gn=Math.max(jt.width,jt.height),Un=800,Yn=jt.x-(gn-jt.width)/2-Un,ga=jt.y-(gn-jt.height)/2-Un,$a=gn+2*Un,Xa=450,Jn=jt.x+jt.width/2-Xa,Ta=jt.y-(gn-jt.height)/2+gn+20;dt({dotLeft:Yn,dotTop:ga,dotSize:$a,borderWidth:Un,textTop:Ta,textLeft:Jn,textWidth:Xa})}},[]);return useEffect(()=>(window.addEventListener("resize",en),window.addEventListener("scroll",en),()=>{window.removeEventListener("resize",en),window.removeEventListener("scroll",en)}),[en]),useLayoutEffect(en,[Ie.current,en]),L?React.createElement(React.Fragment,null,React.createElement(Box,{className:bt.featureWrapper,ref:Ie},C),createPortal(React.createElement(Box,{className:bt.backdrop},React.createElement(ClickAwayListener,{onClickAway:V},React.createElement(React.Fragment,null,React.createElement(Box,{className:bt.dot,"data-testid":"dot",style:{left:De==null?void 0:De.dotLeft,top:De==null?void 0:De.dotTop,width:De==null?void 0:De.dotSize,height:De==null?void 0:De.dotSize,borderWidth:De==null?void 0:De.borderWidth},onClick:V,onKeyDown:V,role:"button",tabIndex:0},React.createElement(Box,{className:bt.pulseCircle})),React.createElement(Box,{className:bt.text,"data-testid":"text",style:{left:De==null?void 0:De.textLeft,top:De==null?void 0:De.textTop,width:De==null?void 0:De.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},u),React.createElement(Typography,null,E))))),ce)):React.createElement(React.Fragment,null,C)}const h=(0,re.Z)(t=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:t.palette.text.secondary,cursor:"default"},primary:{color:t.palette.primary.main},secondary:{color:t.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function S({color:t="primary",disabled:r=!1,href:u="#",icon:E=a.createElement(Lt.Z,null),label:C,onClick:L,title:V}){const ce=h();return r?a.createElement(oe.Z,{title:V,className:fe()(ce.link,ce.disabled)},E,a.createElement(B.Z,{variant:"caption",component:"span",className:ce.label},C)):a.createElement(da,{title:V,className:fe()(ce.link,ce[t]),to:u,onClick:L},E,a.createElement(B.Z,{variant:"caption",component:"span",className:ce.label},C))}const x=(0,re.Z)(t=>({links:{margin:t.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:t.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function Z(t){const{links:r}=t,u=x();return a.createElement("nav",{className:u.links},r.map((E,C)=>a.createElement(S,{key:C+1,...E})))}const ue=t=>{const r=t==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${r}) 0%,
    hsla(0, 0%, ${r}, 0.987) 8.1%,
    hsla(0, 0%, ${r}, 0.951) 15.5%,
    hsla(0, 0%, ${r}, 0.896) 22.5%,
    hsla(0, 0%, ${r}, 0.825) 29%,
    hsla(0, 0%, ${r}, 0.741) 35.3%,
    hsla(0, 0%, ${r}, 0.648) 41.2%,
    hsla(0, 0%, ${r}, 0.55) 47.1%,
    hsla(0, 0%, ${r}, 0.45) 52.9%,
    hsla(0, 0%, ${r}, 0.352) 58.8%,
    hsla(0, 0%, ${r}, 0.259) 64.7%,
    hsla(0, 0%, ${r}, 0.175) 71%,
    hsla(0, 0%, ${r}, 0.104) 77.5%,
    hsla(0, 0%, ${r}, 0.049) 84.5%,
    hsla(0, 0%, ${r}, 0.013) 91.9%,
    hsla(0, 0%, ${r}, 0) 100%
  `},$e=100,Ke=10,Ve=(0,re.Z)(t=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:$e,height:`calc(100% + ${Ke}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-Ke,background:`linear-gradient(90deg, ${ue(t.palette.type)})`},fadeRight:{right:-Ke,background:`linear-gradient(270deg, ${ue(t.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-t.spacing(2)},buttonRight:{right:-t.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function _t(t){const[[r,u],E]=React.useState([0,0]);return React.useLayoutEffect(()=>{const C=t.current;if(!C){E([0,0]);return}const L=()=>{const V=C.scrollLeft,ce=C.scrollWidth-C.offsetWidth-C.scrollLeft;E([V,ce])};return L(),C.addEventListener("scroll",L),window.addEventListener("resize",L),()=>{C.removeEventListener("scroll",L),window.removeEventListener("resize",L)}},[t]),[r,u]}function Kt(t,r,u){const[E,C]=React.useState(0);return React.useLayoutEffect(()=>{if(E===0)return;const L=window.performance.now(),V=requestAnimationFrame(ce=>{if(!t.current)return;const Ie=ce-L,De=Math.abs(E)*Ie/r,bt=Math.max(u,De)*Math.sign(E);t.current.scrollBy({left:bt});const en=E-bt;Math.sign(E)!==Math.sign(en)?C(0):C(en)});return()=>cancelAnimationFrame(V)},[t,E,r,u]),C}function Nt(t){const{scrollStep:r=100,scrollSpeed:u=50,minScrollDistance:E=5,children:C,...L}=t,V=Ve(t),ce=React.useRef(),[Ie,De]=_t(ce),dt=Kt(ce,u,E),bt=en=>{ce.current&&dt(en?r:-r)};return React.createElement(Box,{...L,className:V.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:V.container,ref:ce},C),React.createElement(Box,{className:classNames(V.fade,V.fadeLeft,{[V.fadeHidden]:Ie===0})}),React.createElement(Box,{className:classNames(V.fade,V.fadeRight,{[V.fadeHidden]:De===0})}),Ie>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>bt(!1),className:classNames(V.button,V.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),De>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>bt(!0),className:classNames(V.button,V.buttonRight,{})},React.createElement(ChevronRight,null)))}const cn=(0,re.Z)(t=>({alpha:{color:t.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function Pn(t){const r=cn(t),{shorthand:u,alpha:E}=t;return u?a.createElement(B.Z,{component:"span",className:r[E?"alpha":"beta"],style:{fontSize:"120%"}},E?a.createElement(a.Fragment,null,"\u03B1"):a.createElement(a.Fragment,null,"\u03B2")):a.createElement(B.Z,{component:"span",className:r[E?"alpha":"beta"]},E?"Alpha":"Beta")}const fn=(0,a.lazy)(()=>e.e(9697).then(e.bind(e,69697)).then(t=>({default:t.RealLogViewer})));function Dn(t){const{Progress:r}=(0,m.qD)().getComponents();return a.createElement(a.Suspense,{fallback:a.createElement(r,null)},a.createElement(fn,{...t}))}const Xn=(0,re.Z)(t=>({root:{paddingLeft:t.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Cn=({request:t,busy:r,setBusy:u})=>{const E=Xn(),[C,L]=(0,a.useState)(),V=async()=>{u(!0);try{await t.trigger()}catch(Ie){L((0,pe.VZ)(Ie)?Ie.message:"An unspecified error occurred")}finally{u(!1)}},ce=t.provider.icon;return a.createElement(Ye.Z,{disabled:r,classes:{root:E.root}},a.createElement(Ze.Z,null,a.createElement(ce,{fontSize:"large"})),a.createElement(Mt.Z,{primary:t.provider.title,secondary:C&&a.createElement(B.Z,{color:"error"},C)}),a.createElement(Te.Z,{color:"primary",variant:"contained",onClick:V},"Log in"))},ea=(0,re.Z)(t=>({dialog:{paddingTop:t.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:t.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:t.spacing(2,0)}}),{name:"OAuthRequestDialog"});function ma(t){var r;const u=ea(),[E,C]=(0,a.useState)(!1),L=(0,o.u)(o.v),ce=(r=(0,o.u)(o.p).getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?r:!1,Ie=(0,D.Z)((0,a.useMemo)(()=>L.authRequest$(),[L]),[]),De=()=>{Ie.forEach(dt=>dt.reject())};return a.createElement(ie.Z,{open:Boolean(Ie.length),fullWidth:!0,maxWidth:"xs",classes:{paper:u.dialog},"aria-labelledby":"oauth-req-dialog-title"},a.createElement("main",null,a.createElement(ge.Z,{classes:{root:u.title},id:"oauth-req-dialog-title"},a.createElement(B.Z,{className:u.titleHeading,variant:"h1",variantMapping:{h1:"span"}},"Login Required"),ce?a.createElement(B.Z,null,"This will trigger a http redirect to OAuth Login."):null),a.createElement(Ge.Z,{dividers:!0,classes:{root:u.contentList}},a.createElement(Ct.Z,null,Ie.map(dt=>a.createElement(Cn,{key:dt.provider.title,request:dt,busy:E,setBusy:C}))))),a.createElement(G.Z,{classes:{root:u.actionButtons}},a.createElement(Te.Z,{onClick:De},"Reject All")))}const Gn=(0,re.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function zn(t){var r;const[u,E]=(0,a.useState)(!1),C=(0,pt.t)(),L=Gn(),V=ce=>{C()&&E(ce)};return a.createElement(me.ZP,{title:(r=t.title)!=null?r:t.text||"",placement:t.placement,disableHoverListener:!u},a.createElement(nt(),{text:t.text,line:t.line,onToggled:V,containerClassName:L.container}))}function Wn(t){const r=(0,Oe.Z)(),[u,E]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const C=setTimeout(()=>E(!0),r.transitions.duration.short);return()=>clearTimeout(C)},[r.transitions.duration.short]),u?a.createElement(tn.Z,{...t,"data-testid":"progress"}):a.createElement(oe.Z,{display:"none"})}const ya=(0,re.Z)(t=>({root:{maxWidth:"fit-content",padding:t.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:t.palette.textSubtle},arrow:{color:t.palette.textSubtle}}),{name:"BackstageBottomLink"});function _a(t){const{link:r,title:u,onClick:E}=t,C=ya();return a.createElement(oe.Z,null,a.createElement(le.Z,null),a.createElement(da,{to:r,onClick:E,underline:"none"},a.createElement(oe.Z,{display:"flex",alignItems:"center",className:C.root},a.createElement(oe.Z,{className:C.boxTitle,fontWeight:"fontWeightBold",m:1},a.createElement(B.Z,null,a.createElement("strong",null,u))),a.createElement(J.Z,{className:C.arrow}))))}const ba=t=>{const{slackChannel:r}=t;if(r){if(typeof r=="string")return a.createElement(B.Z,null,"Please contact ",r," for help.");if(!r.href)return a.createElement(B.Z,null,"Please contact ",r.name," for help.")}else return null;return a.createElement(nr,{to:r.href,variant:"contained"},r.name)},fa=class extends a.Component{constructor(r){super(r),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(r,u){console.error(`ErrorBoundary, error: ${r}, info: ${u}`),this.setState({error:r,errorInfo:u})}render(){const{slackChannel:r,children:u}=this.props,{error:E}=this.state;return E?a.createElement(dr,{title:"Something Went Wrong",error:E},a.createElement(ba,{slackChannel:r})):u}},wa=(0,re.Z)(t=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:t.spacing(2,2,2,2.5)},headerTitle:{fontWeight:t.typography.fontWeightBold},headerSubheader:{paddingTop:t.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),xr=(0,c.Z)(t=>({root:{display:"inline-block",padding:t.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(Le.Z),Da={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function Sr(t){const{title:r,subheader:u,divider:E=!0,deepLink:C,slackChannel:L,errorBoundaryProps:V,variant:ce,children:Ie,headerStyle:De,headerProps:dt,icon:bt,action:en,actionsClassName:jt,actions:gn,cardClassName:Un,actionsTopRight:Yn,className:ga,noPadding:$a,titleTypographyProps:Xa}=t,Jn=wa();let Ta={},Za={};ce&&ce.split(/[\s]+/g).forEach(gr=>{Ta={...Ta,...Da.card[gr]},Za={...Za,...Da.cardContent[gr]}});const Qa=()=>!u&&!bt?null:a.createElement("div",{className:Jn.headerSubheader,"data-testid":"info-card-subheader"},u&&a.createElement("div",{className:Jn.subheader},u),bt),br=V||(L?{slackChannel:L}:{});return a.createElement(Ce.Z,{style:Ta,className:ga},a.createElement(fa,{...br},r&&a.createElement(W.Z,{classes:{root:Jn.header,title:Jn.headerTitle,subheader:Jn.headerSubheader,avatar:Jn.headerAvatar,action:Jn.headerAction,content:Jn.headerContent},title:r,subheader:Qa(),action:en,style:{...De},titleTypographyProps:Xa,...dt}),Yn&&a.createElement(xr,null,Yn),E&&a.createElement(le.Z,null),a.createElement(P.Z,{className:fe()(Un,{[Jn.noPadding]:$a}),style:Za},Ie),gn&&a.createElement(Le.Z,{className:jt},gn),C&&a.createElement(_a,{...C})))}const Lo=(0,re.Z)(t=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:t.typography.pxToRem(45),fontWeight:t.typography.fontWeightBold,color:t.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),vo={fractional:!0,inverse:!1,unit:"%",max:100},yo=({palette:t,value:r,inverse:u,max:E})=>{if(isNaN(r))return"#ddd";const C=E||vo.max,L=u?C-r:r;return L<C/3?t.status.error:L<C*(2/3)?t.status.warning:t.status.ok};function jr(t){const[r,u]=useState(null),{getColor:E=yo}=t,C=Lo(t),{palette:L}=useTheme(),{value:V,fractional:ce,inverse:Ie,unit:De,max:dt,description:bt}={...vo,...t},en=ce?Math.round(V*dt):V,jt=dt!==100?Math.round(V):en,[gn,Un]=useState(!1);return useEffect(()=>{const Yn=r,ga=()=>Un(!0),$a=()=>Un(!1);return Yn&&bt?(Yn.addEventListener("mouseenter",ga),Yn.addEventListener("mouseleave",$a),()=>{Yn.removeEventListener("mouseenter",ga),Yn.removeEventListener("mouseleave",$a)}):()=>{Un(!1)}},[bt,r]),React.createElement(Box,{ref:u,className:C.root},React.createElement(Circle,{strokeLinecap:"butt",percent:en,strokeWidth:12,trailWidth:12,strokeColor:E({palette:L,value:jt,inverse:Ie,max:dt}),className:C.circle}),bt&&gn?React.createElement(Box,{className:C.description},bt):React.createElement(Box,{className:C.overlay},isNaN(V)?"N/A":`${jt}${De}`))}const Bo=(0,re.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function Qo(t){const r=Bo(t),{title:u,subheader:E,progress:C,inverse:L,deepLink:V,description:ce,icon:Ie,variant:De,getColor:dt}=t,bt={inverse:L,description:ce,getColor:dt,value:C};return React.createElement(Box,{className:r.root},React.createElement(Sr,{title:u,subheader:E,deepLink:V,variant:De,icon:Ie},React.createElement(jr,{...bt})))}function qo(t){const{value:r,getColor:u=yo,width:E="thick"}=t,{palette:C}=useTheme();if(isNaN(r))return null;let L=Math.round(r*100*100)/100;L>100&&(L=100);const V=E==="thick"?4:1,ce=u({palette:C,value:L,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${L}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:L,strokeWidth:V,trailWidth:V,strokeColor:ce})))}const Uo=(0,re.Z)(t=>(0,R.Z)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),_o=()=>{const t=Uo();return a.createElement(Mn.Z,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},bo=(0,re.Z)(t=>(0,R.Z)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),d=()=>{const t=bo();return a.createElement(Mn.Z,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},n=(0,c.Z)(t=>(0,R.Z)({root:{"label + &":{marginTop:t.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:t.palette.primary.main}},input:{borderRadius:t.shape.borderRadius,position:"relative",backgroundColor:t.palette.background.paper,border:"1px solid #ced4da",fontSize:t.typography.body1.fontSize,padding:t.spacing(1.25,3.25,1.25,1.5),transition:t.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:t.palette.background.paper,borderRadius:t.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(mn.Z),s=(0,re.Z)(t=>(0,R.Z)({formControl:{margin:t.spacing(1,0),maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function f(t){const{multiple:r,items:u,label:E,placeholder:C,selected:L,onChange:V,triggerReset:ce,native:Ie=!1,disabled:De=!1,margin:dt}=t,bt=s(),[en,jt]=(0,a.useState)(L||(r?[]:"")),[gn,Un]=(0,a.useState)(!1);(0,a.useEffect)(()=>{jt(r?[]:"")},[ce,r]),(0,a.useEffect)(()=>{jt(L||(r?[]:""))},[L,r]);const Yn=Jn=>{jt(Jn.target.value),V(Jn.target.value)},ga=Jn=>{if(De){Jn.preventDefault();return}Un(Ta=>r&&!(Jn.target instanceof HTMLElement)?!0:!Ta)},$a=()=>{Un(!1)},Xa=Jn=>()=>{const Ta=en.filter(Za=>Za!==Jn);jt(Ta),V(Ta)};return a.createElement(oe.Z,{className:bt.root},a.createElement(Jt.Z,{className:bt.formControl},a.createElement(An.Z,{className:bt.formLabel},E),a.createElement(Vn.Z,{"aria-label":E,value:en,native:Ie,disabled:De,"data-testid":"select",displayEmpty:!0,multiple:r,margin:dt,onChange:Yn,open:gn,onOpen:ga,onClose:$a,input:a.createElement(n,null),label:E,renderValue:Jn=>{var Ta;return r&&en.length!==0?a.createElement(oe.Z,{className:bt.chips},Jn.map(Za=>{const Qa=u.find(br=>br.value===Za);return Qa?a.createElement(Et.Z,{key:Qa==null?void 0:Qa.value,label:Qa==null?void 0:Qa.label,clickable:!0,onDelete:Xa(Za),className:bt.chip}):!1})):a.createElement(B.Z,null,en.length===0?C||"":(Ta=u.find(Za=>Za.value===Jn))==null?void 0:Ta.label)},IconComponent:()=>gn?a.createElement(d,null):a.createElement(_o,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},C&&!r&&a.createElement(vn.Z,{value:[]},C),Ie?u&&u.map(Jn=>a.createElement("option",{value:Jn.value,key:Jn.value},Jn.label)):u&&u.map(Jn=>a.createElement(vn.Z,{key:Jn.value,value:Jn.value},r&&a.createElement(ut.Z,{color:"primary",checked:en.includes(Jn.value)||!1,className:bt.checkbox}),Jn.label)))))}const w=()=>{},ye=a.createContext({stepperLength:0,stepIndex:0,setStepIndex:w,stepHistory:[],setStepHistory:w,onStepChange:w});function Xe(t){const{children:r,elevated:u,onStepChange:E,activeStep:C=0}=t,[L,V]=useState(C),[ce,Ie]=useState([0]);useEffect(()=>{V(C)},[C]);const De=[];let dt;return Children.forEach(r,bt=>{isValidElement(bt)&&(bt.props.end?dt=bt:De.push(bt))}),React.createElement(React.Fragment,null,React.createElement(ye.Provider,{value:{stepIndex:L,setStepIndex:V,stepHistory:ce,setStepHistory:Ie,onStepChange:E,stepperLength:Children.count(r)}},React.createElement(MuiStepper,{activeStep:L,orientation:"vertical",elevation:u?2:0},De)),L>=Children.count(r)-1&&dt)}const tt=(0,re.Z)(t=>({root:{marginTop:t.spacing(3),"& button":{marginRight:t.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),Ut=({text:t,handleClick:r})=>React.createElement(Button$1,{onClick:r},t||"Reset"),Qt=({text:t,handleClick:r,disabled:u,last:E,stepIndex:C})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:u,"data-testid":`nextButton-${C}`,onClick:r},t||(E?"Finish":"Next")),jn=({text:t,handleClick:r,disabled:u,stepIndex:E})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:u,"data-testid":`skipButton-${E}`,onClick:r},t||"Skip"),Nn=({text:t,handleClick:r,disabled:u,stepIndex:E})=>React.createElement(Button$1,{onClick:r,"data-testid":`backButton-${E}`,disabled:u},t||"Back"),Tn=({actions:t={},children:r})=>{const u=tt(),{stepperLength:E,stepIndex:C,setStepIndex:L,stepHistory:V,setStepHistory:ce,onStepChange:Ie}=useContext(ye),De=(jt,gn)=>{gn&&gn(),Ie&&Ie(C,jt),L(jt)},dt=()=>{const jt=t.nextStep?t.nextStep(C,E-1):C+1;De(jt,t.onNext),ce([...V,jt])},bt=()=>{V.pop(),De(V[V.length-1],t.onBack),ce([...V])},en=()=>{De(0,t.onRestart),ce([0])};return React.createElement(Box,{className:u.root},[void 0,!0].includes(t.showBack)&&C!==0&&React.createElement(Nn,{text:t.backText,handleClick:bt,disabled:C===0,stepIndex:C}),t.showSkip&&React.createElement(jn,{text:t.skipText,handleClick:dt,disabled:!!E&&C>=E||!!t.canSkip&&!t.canSkip(),stepIndex:C}),[void 0,!0].includes(t.showNext)&&React.createElement(Qt,{text:t.nextText,handleClick:dt,disabled:!!E&&C>=E||!!t.canNext&&!t.canNext(),stepIndex:C}),t.showRestart&&C!==0&&React.createElement(Ut,{text:t.restartText,handleClick:en,stepIndex:C}),r)},ca=(0,re.Z)(t=>({end:{padding:t.spacing(3)}}),{name:"SimpleStepperStep"});function ta(t){const{title:r,children:u,end:E,actions:C,...L}=t,V=ca();return E?React.createElement(Box,{className:V.end},React.createElement(Typography,{variant:"h6"},r),u,React.createElement(Tn,{actions:{...C||{},showNext:!1}})):React.createElement(MuiStep,{...L},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},r)),React.createElement(StepContent,null,u,React.createElement(Tn,{actions:C})))}const la=(0,re.Z)(t=>({status:{fontWeight:t.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:t.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:t.palette.status.ok}},warning:{"&::before":{backgroundColor:t.palette.status.warning}},error:{"&::before":{backgroundColor:t.palette.status.error}},pending:{"&::before":{backgroundColor:t.palette.status.pending}},running:{"&::before":{backgroundColor:t.palette.status.running}},aborted:{"&::before":{backgroundColor:t.palette.status.aborted}}}),{name:"BackstageStatus"});function Ga(t){const r=la(t);return a.createElement(B.Z,{component:"span",className:fe()(r.status,r.ok),"aria-label":"Status ok","aria-hidden":"true",...t})}function pa(t){const r=la(t);return a.createElement(B.Z,{component:"span",className:fe()(r.status,r.warning),"aria-label":"Status warning","aria-hidden":"true",...t})}function sr(t){const r=la(t);return a.createElement(B.Z,{component:"span",className:fe()(r.status,r.error),"aria-label":"Status error","aria-hidden":"true",...t})}function Lr(t){const r=la(t);return a.createElement(B.Z,{component:"span",className:fe()(r.status,r.pending),"aria-label":"Status pending","aria-hidden":"true",...t})}function Co(t){const r=la(t);return a.createElement(B.Z,{component:"span",className:fe()(r.status,r.running),"aria-label":"Status running","aria-hidden":"true",...t})}function ji(t){const r=la(t);return a.createElement(B.Z,{component:"span",className:fe()(r.status,r.aborted),"aria-label":"Status aborted","aria-hidden":"true",...t})}const Vi=t=>(0,R.Z)({root:{fontWeight:t.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:t.spacing(4),border:"0",verticalAlign:"top"}}),Hi={root:{border:"0",verticalAlign:"top"}},Yi=t=>(0,R.Z)({root:{margin:t.spacing(0,0,-1,0)}}),Ji=t=>(0,R.Z)({root:{padding:t.spacing(0,0,1,0)},random:{}}),Xi=(0,c.Z)(Vi,{name:"BackstageMetadataTableTitleCell"})(gt.Z),Qi=(0,c.Z)(Hi,{name:"BackstageMetadataTableCell"})(gt.Z),qi=({dense:t,children:r})=>a.createElement(F.Z,{size:t?"small":"medium"},a.createElement(Pe.Z,null,r)),es=({title:t,children:r,...u})=>a.createElement(Ot.Z,null,t&&a.createElement(Xi,null,t),a.createElement(Qi,{colSpan:t?1:2,...u},r)),ei=(0,c.Z)(Yi,{name:"BackstageMetadataTableList"})(({classes:t,children:r})=>a.createElement(Ct.Z,{disablePadding:!0,className:t.root},r)),ti=(0,c.Z)(Ji,{name:"BackstageMetadataTableListItem"})(({classes:t,children:r})=>a.createElement(Ye.Z,{className:t.root},r)),ni=(0,R.Z)({root:{margin:"0 0",listStyleType:"none"}}),ts=t=>(0,R.Z)({root:{...ni.root,paddingLeft:t.spacing(1)}}),ai=(0,c.Z)(ni,{name:"BackstageStructuredMetadataTableList"})(({classes:t,children:r})=>a.createElement(ei,{classes:t},r)),ri=(0,c.Z)(ts,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:t,children:r})=>a.createElement(ei,{classes:t},r));function ns(t,r,u){const E=t.map((C,L)=>a.createElement(ti,{key:L},$o(C,r,u)));return u?a.createElement(ri,null,E):a.createElement(ai,null,E)}function as(t,r,u){const E=Object.keys(t).map(C=>{const L=$o(t[C],r,!0);return a.createElement(ti,{key:C},a.createElement(B.Z,{variant:"body2",component:"span"},`${r.titleFormat(C)}: `),L)});return u?a.createElement(ri,null,E):a.createElement(ai,null,E)}function $o(t,r,u){return a.isValidElement(t)?a.createElement(a.Fragment,null,t):t!==null&&typeof t=="object"&&!Array.isArray(t)?as(t,r,u):Array.isArray(t)?ns(t,r,u):typeof t=="boolean"?a.createElement(a.Fragment,null,t?"\u2705":"\u274C"):a.createElement(B.Z,{variant:"body2",component:"span"},t)}const rs=({value:t,options:r})=>a.createElement(a.Fragment,null,$o(t,r,!1)),os=({title:t,value:r,options:u})=>a.createElement(es,{title:u.titleFormat(t)},a.createElement(rs,{value:r,options:u}));function is(t,r){return Object.keys(t).map(u=>a.createElement(os,{key:u,title:u,value:t[u],options:r}))}function ss(t){const{metadata:r,dense:u=!0,options:E={}}=t,C=is(r,{titleFormat:A(),...E});return a.createElement(qi,{dense:u},C)}function ls(t){return qs.stringify(t,{strictNullHandling:!0})}function oi(t){return qs.parse(t,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function ii(t,r){return oi(t)[r]}function cs(t,r,u){const E={...oi(t),[r]:u};return ls(E)}function Ec(t,r=250){const[u,E]=useSearchParams(),C=u.toString(),[L,V]=useState(ii(C,t));return useEffect(()=>{const ce=ii(C,t);V(Ie=>isEqual(ce,Ie)?Ie:ce)},[C,V,t]),useDebouncedEffect(()=>{const ce=cs(C,t,L);C!==ce&&E(ce,{replace:!0})},[E,L,C,t],r),[L,V]}const us={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function si(){const r=(0,o.b)().get(o.p),u=r==null?void 0:r.getOptionalConfig("app.support");return u?{url:u.getString("url"),items:u.getConfigArray("items").flatMap(E=>{var C;return{title:E.getString("title"),icon:E.getOptionalString("icon"),links:((C=E.getOptionalConfigArray("links"))!=null?C:[]).flatMap(L=>({url:L.getString("url"),title:L.getString("title")}))}})}:us}function pr(t,r){const E=(0,m.qD)().getSystemIcon(t);return E?a.createElement(E,{...r}):a.createElement(nn.Z,{...r})}function vc(t){return pr("brokenImage",t)}function ds(t){return pr("catalog",t)}function yc(t){return pr("chat",t)}function _c(t){return pr("dashboard",t)}function ms(t){return pr("docs",t)}function bc(t){return pr("email",t)}function ps(t){return pr("github",t)}function Cc(t){return pr("group",t)}function Po(t){return pr("help",t)}function gs(t){return pr("user",t)}function Pc(t){return pr("warning",t)}const hs=(0,re.Z)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),fs=({icon:t})=>{var r;const u=(0,m.qD)(),E=t&&(r=u.getSystemIcon(t))!=null?r:Po;return a.createElement(E,null)},Es=({link:t})=>{var r;return a.createElement(da,{to:t.url},(r=t.title)!=null?r:t.url)},vs=({item:t})=>{var r;return a.createElement(vn.Z,null,a.createElement(Vt.Z,null,a.createElement(fs,{icon:t.icon})),a.createElement(Mt.Z,{primary:t.title,secondary:(r=t.links)==null?void 0:r.reduce((u,E,C)=>[...u,C>0&&a.createElement("br",{key:C}),a.createElement(Es,{link:E,key:E.url})],[])}))};function ys(t){const{title:r,items:u,children:E}=t,{items:C}=si(),[L,V]=(0,a.useState)(!1),[ce,Ie]=(0,a.useState)(null),De=hs(),dt=(0,mt.Z)(jt=>jt.breakpoints.down("sm")),bt=jt=>{Ie(jt.currentTarget),V(!0)},en=()=>{V(!1)};return a.createElement(a.Fragment,null,a.createElement(oe.Z,{display:"flex",ml:1},dt?a.createElement(p.Z,{color:"primary",size:"small",onClick:bt,"data-testid":"support-button","aria-label":"Support"},a.createElement(Po,null)):a.createElement(Te.Z,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:bt,startIcon:a.createElement(Po,null)},"Support")),a.createElement(Ae.ZP,{"data-testid":"support-button-popover",open:L,anchorEl:ce,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:en},a.createElement(ae.Z,{className:De.popoverList,autoFocusItem:Boolean(ce)},r&&a.createElement(vn.Z,{alignItems:"flex-start",className:De.menuItem},a.createElement(B.Z,{variant:"subtitle1"},r)),a.Children.map(E,(jt,gn)=>a.createElement(vn.Z,{alignItems:"flex-start",key:`child-${gn}`,className:De.menuItem},jt)),(u!=null?u:C).map((jt,gn)=>a.createElement(vs,{item:jt,key:`item-${gn}`}))),a.createElement(G.Z,null,a.createElement(Te.Z,{color:"primary",onClick:en,"aria-label":"Close"},"Close"))))}const _s=(0,re.Z)(t=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:t.spacing(3),paddingBottom:t.spacing(3),paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function Ao(t){const{className:r,stretch:u,noPadding:E,children:C,...L}=t,V=_s();return a.createElement("article",{...L,className:fe()(V.root,r,{[V.stretch]:u,[V.noPadding]:E})},C)}const bs=(0,re.Z)(t=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:t.palette.background.paper,paddingLeft:t.spacing(3),minWidth:0},defaultTab:{...t.typography.caption,padding:t.spacing(3,3),textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,color:t.palette.text.secondary},selected:{color:t.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:t.palette.background.default,color:t.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function li(t){const{tabs:r,onChange:u,selectedIndex:E}=t,[C,L]=(0,a.useState)(E!=null?E:0),V=bs(),ce=(0,a.useCallback)((Ie,De)=>{E===void 0&&L(De),u&&u(De)},[E,u]);return(0,a.useEffect)(()=>{E!==void 0&&L(E)},[E]),a.createElement(oe.Z,{className:V.tabsWrapper},a.createElement(In.Z,{indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:ce,value:C},r.map((Ie,De)=>a.createElement(on.Z,{...Ie.tabProps,"data-testid":`header-tab-${De}`,label:Ie.label,key:Ie.id,value:De,className:V.defaultTab,classes:{selected:V.selected,root:V.tabRoot}}))))}function Cs(t){var r,u,E,C,L;const V=(0,Y.UO)(),Ie=t.map(({path:jt,children:gn})=>({caseSensitive:!1,path:`${jt}/*`,element:gn})).sort((jt,gn)=>gn.path.replace(/\/\*$/,"").localeCompare(jt.path.replace(/\/\*$/,""))),De=(u=(0,Y.V$)(Ie))!=null?u:(r=t[0])==null?void 0:r.children;let dt=(E=V["*"])!=null?E:"";dt.startsWith("/")||(dt=`/${dt}`);const[bt]=(C=(0,ee.fp)(Ie,dt))!=null?C:[],en=bt?t.findIndex(jt=>`${jt.path}/*`===bt.route.path):0;return{index:en===-1?0:en,element:De,route:(L=t[en])!=null?L:t[0]}}function ci(t){const{routes:r}=t,u=(0,Y.s0)(),{index:E,route:C,element:L}=Cs(r),V=(0,a.useMemo)(()=>r.map(Ie=>({id:Ie.path,label:Ie.title,tabProps:Ie.tabProps})),[r]),ce=Ie=>{let{path:De}=r[Ie];De=De.replace(/\/\*$/,""),De=De.replace(/^\//,""),u(De)};return a.createElement(a.Fragment,null,a.createElement(li,{tabs:V,selectedIndex:E,onChange:ce}),a.createElement(Ao,null,a.createElement(ln.q,{title:C==null?void 0:C.title}),L))}const Zo=()=>null;(0,m.R5)(Zo,"core.gatherMountPoints",!0);function ui(t){const r=a.createElement(Zo,{path:"",title:""},a.createElement("div",null)).type;return a.Children.toArray(t).flatMap(u=>{if(!(0,a.isValidElement)(u))return[];if(u.type===a.Fragment)return ui(u.props.children);if(u.type!==r)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:E,title:C,children:L,tabProps:V}=u.props;return[{path:E,title:C,children:L,tabProps:V}]})}function Ps(t){const r=ui(t.children);return a.createElement(ci,{routes:r})}Ps.Route=Zo;const As=(0,re.Z)(t=>({value:{marginBottom:t.spacing(.75)},subvalue:{color:t.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function Ss(t){const{value:r,subvalue:u}=t,E=As();return a.createElement(a.Fragment,null,a.createElement(oe.Z,{className:E.value},r),a.createElement(oe.Z,{className:E.subvalue},u))}const Rs=(0,re.Z)(t=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:t.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:t.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${t.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:t.spacing(2)}}}),{name:"BackstageTableFilters"}),Os=t=>{var r;const u=Rs(),{onChangeFilters:E}=t,[C,L]=(0,a.useState)({...t.selectedFilters}),[V,ce]=(0,a.useState)(!1),Ie=()=>{L({}),ce(De=>!De)};return(0,a.useEffect)(()=>{E(C)},[C,E]),a.createElement(oe.Z,{className:u.root},a.createElement(oe.Z,{className:u.header},a.createElement(oe.Z,{className:u.value},"Filters"),a.createElement(Te.Z,{color:"primary",onClick:Ie},"Clear all")),a.createElement(oe.Z,{className:u.filters},((r=t.filters)==null?void 0:r.length)&&t.filters.map(De=>a.createElement(f,{triggerReset:V,key:De.element.label,...De.element,selected:C[De.element.label],onChange:dt=>L({...C,[De.element.label]:dt})}))))};function ws(t){return a.createElement("tbody",{"data-testid":"loading-indicator"},a.createElement("tr",null,a.createElement("td",{colSpan:t.colSpan},a.createElement(oe.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"15rem"}},a.createElement(et.Z,{size:"5rem"})))))}const di={Add:(0,a.forwardRef)((t,r)=>a.createElement(Hn.Z,{...t,ref:r})),Check:(0,a.forwardRef)((t,r)=>a.createElement(yn.Z,{...t,ref:r})),Clear:(0,a.forwardRef)((t,r)=>a.createElement(na.Z,{...t,ref:r})),Delete:(0,a.forwardRef)((t,r)=>a.createElement(ia.Z,{...t,ref:r})),DetailPanel:(0,a.forwardRef)((t,r)=>a.createElement(se.Z,{...t,ref:r})),Edit:(0,a.forwardRef)((t,r)=>a.createElement(oa.Z,{...t,ref:r})),Export:(0,a.forwardRef)((t,r)=>a.createElement(X.Z,{...t,ref:r})),Filter:(0,a.forwardRef)((t,r)=>a.createElement(ua.Z,{...t,ref:r})),FirstPage:(0,a.forwardRef)((t,r)=>a.createElement(Pa.Z,{...t,ref:r})),LastPage:(0,a.forwardRef)((t,r)=>a.createElement(Qn.Z,{...t,ref:r})),NextPage:(0,a.forwardRef)((t,r)=>a.createElement(se.Z,{...t,ref:r})),PreviousPage:(0,a.forwardRef)((t,r)=>a.createElement(Yt.Z,{...t,ref:r})),ResetSearch:(0,a.forwardRef)((t,r)=>a.createElement(na.Z,{...t,ref:r})),Search:(0,a.forwardRef)((t,r)=>a.createElement(ua.Z,{...t,ref:r})),SortArrow:(0,a.forwardRef)((t,r)=>a.createElement(ra.Z,{...t,ref:r})),ThirdStateCheck:(0,a.forwardRef)((t,r)=>a.createElement(Ea.Z,{...t,ref:r})),ViewColumn:(0,a.forwardRef)((t,r)=>a.createElement(Be.Z,{...t,ref:r}))};function mi(t,r){const u=r.split(".");let E=t[u[0]];for(let C=1;C<u.length;++C){if(E===void 0)return E;const L=u[C];E=E[L]}return E}const Ts=(0,c.Z)(t=>({header:{padding:t.spacing(1,2,1,2.5),borderTop:`1px solid ${t.palette.grey.A100}`,borderBottom:`1px solid ${t.palette.grey.A100}`,fontWeight:t.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(Bn.W$),pi=(0,c.Z)(t=>({root:{padding:t.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:t.typography.fontWeightBold}},searchField:{paddingRight:t.spacing(2)}}),{name:"BackstageTableToolbar"})(Bn.UW),Is=(0,re.Z)(t=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:t.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),Ds=(0,re.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Ms(t,r){return t.map(u=>{var E;const C=(E=u.headerStyle)!=null?E:{};let L=u.cellStyle||{};if(u.highlight)if(C.color=r.palette.textContrast,typeof L=="object")L.fontWeight=r.typography.fontWeightBold;else{const V=L;L=(ce,Ie,De)=>({...V(ce,Ie,De),fontWeight:r.typography.fontWeightBold})}return{...u,headerStyle:C,cellStyle:L}})}function xs(t,r){return(0,ve.transform)(t,(u,E,C)=>{(0,ve.isEqual)(E,r[C])||(u[C]=E)})}const gi={search:"",filtersOpen:!1,filters:{}};function Ls(t){const{toolbarRef:r,setSearch:u,hasFilters:E,selectedFiltersLength:C,toggleFilters:L}=t,V=Is(),ce=(0,a.useCallback)(Ie=>{t.onSearchChanged(Ie),u(Ie)},[t,u]);return E?a.createElement(oe.Z,{className:V.root},a.createElement(oe.Z,{className:V.root},a.createElement(p.Z,{onClick:L,"aria-label":"filter list"},a.createElement(ua.Z,null)),a.createElement(B.Z,{className:V.title},"Filters (",C,")")),a.createElement(pi,{...t,ref:r,onSearchChanged:ce})):a.createElement(pi,{...t,ref:r,onSearchChanged:ce})}function hi(t){const{data:r,columns:u,emptyContent:E,options:C,title:L,subtitle:V,localization:ce,filters:Ie,initialState:De,onStateChange:dt,components:bt,isLoading:en,...jt}=t,gn=Ds(),Un=(0,Oe.Z)(),Yn={...gi,...De},[ga,$a]=(0,a.useState)(Yn.filtersOpen),Xa=(0,a.useCallback)(()=>$a(hr=>!hr),[$a]),[Jn,Ta]=(0,a.useState)(Yn.filters),[Za,Qa]=(0,a.useState)(Yn.search);(0,a.useEffect)(()=>{if(dt){const hr=xs({search:Za,filtersOpen:ga,filters:Jn},gi);dt(hr)}},[Za,ga,Jn,dt]);const br=(0,a.useCallback)(hr=>{var Or;return(Or=u.find(go=>go.title===hr))==null?void 0:Or.field},[u]),Yr=(0,a.useMemo)(()=>{if(typeof r=="function"||!Jn)return r;const hr=Object.values(Jn);return r&&hr.flat().length?r.filter(go=>!!Object.entries(Jn).filter(([,ho])=>!!ho.length).every(([ho,Br])=>{const Ur=mi(go,br(ho));return Array.isArray(Ur)&&Array.isArray(Br)?Ur.some(Yo=>Br.includes(Yo)):Array.isArray(Ur)?Ur.includes(Br):Array.isArray(Br)?Br.includes(Ur):Ur===Br})):r},[r,Jn,br]),gr=Object.values(Jn).flat().length,Jr=!!(Ie!=null&&Ie.length),Xr=(0,a.useCallback)(hr=>a.createElement(Ls,{setSearch:Qa,hasFilters:Jr,selectedFiltersLength:gr,toggleFilters:Xa,...hr}),[Xa,Jr,gr,Qa]),Mo=typeof r!="function"&&r.length===0,Ca=u.length,Qr=(0,a.useMemo)(()=>Bs({hasNoRows:Mo,emptyContent:E,columnCount:Ca,loading:en}),[Mo,E,Ca,en]);return a.createElement(oe.Z,{className:gn.root},ga&&r&&typeof r!="function"&&(Ie==null?void 0:Ie.length)&&a.createElement(Os,{filters:Us(Ie,r,u),selectedFilters:Jn,onChangeFilters:Ta}),a.createElement(Bn.ZP,{components:{Header:Ts,Body:Qr,Toolbar:Xr,...bt},options:{headerStyle:{textTransform:"uppercase"},...C},columns:Ms(u,Un),icons:di,title:a.createElement(a.Fragment,null,a.createElement(B.Z,{variant:"h5",component:"h2"},L),V&&a.createElement(B.Z,{color:"textSecondary",variant:"body1"},V)),data:Yr,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"},...ce},...jt}))}hi.icons=Object.freeze(di);function Bs({columnCount:t,emptyContent:r,hasNoRows:u,loading:E}){return C=>E?a.createElement(ws,{colSpan:t}):r&&u?a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{colSpan:t},r))):a.createElement(Bn.os,{...C})}function Us(t,r,u){const E=L=>{const V=new Set,ce=Ie=>{Ie!=null&&V.add(Ie)};return r&&r.forEach(Ie=>{var De;const dt=mi(Ie,(De=u.find(bt=>bt.title===L))==null?void 0:De.field);Array.isArray(dt)?dt.forEach(ce):ce(dt)}),V},C=L=>({placeholder:"All results",label:L.column,multiple:L.type==="multiple-select",items:[...E(L.column)].sort().map(V=>({label:V,value:V}))});return t.map(L=>({type:L.type,element:C(L)}))}function $s(t,r){const u=t[t.length-1];if(u)return u>=.9?r.palette.status.ok:u>=.5?r.palette.status.warning:r.palette.status.error}function Ac(t){var r;const u=useTheme();return t.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...t},t.title&&React.createElement("title",null,t.title),React.createElement(SparklinesLine,{color:(r=t.color)!=null?r:$s(t.data,u)})):null}const Zs=t=>(0,re.Z)(r=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:r.spacing(2),textAlign:t.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:r.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),ks=({title:t="Unknown page",className:r})=>a.createElement(B.Z,{variant:"h4",component:"h2",className:r,"data-testid":"header-title"},t);function fi(t){const{description:r,title:u,titleComponent:E=void 0,children:C,textAlign:L="left"}=t,V=Zs({textAlign:L})(),ce=E||a.createElement(ks,{title:u,className:V.title});return a.createElement(a.Fragment,null,a.createElement(ln.q,{title:u}),a.createElement(oe.Z,{className:V.container},a.createElement(oe.Z,{className:V.leftItemsBox},ce,r&&a.createElement(B.Z,{className:V.description,variant:"body2"},r)),a.createElement(oe.Z,{className:V.rightItemsBox},C)))}const Ws=(0,re.Z)(t=>({micDrop:{maxWidth:"60%",bottom:t.spacing(2),right:t.spacing(2),[t.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:t.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),Ns=()=>{const t=Ws();return a.createElement("img",{src:Se,className:t.micDrop,alt:"Girl dropping mic from her hands"})},Fs=(0,re.Z)(t=>({container:{padding:t.spacing(8),[t.breakpoints.down("xs")]:{padding:t.spacing(2)}},title:{paddingBottom:t.spacing(5),[t.breakpoints.down("xs")]:{paddingBottom:t.spacing(4),fontSize:t.typography.h3.fontSize}},subtitle:{color:t.palette.textSubtle}}),{name:"BackstageErrorPage"});function Ks(t){const{status:r,statusMessage:u,additionalInfo:E,supportUrl:C}=t,L=Fs(),V=(0,Y.s0)(),ce=si();return a.createElement(O.Z,{container:!0,spacing:0,className:L.container},a.createElement(O.Z,{item:!0,xs:12,sm:8,md:4},a.createElement(B.Z,{"data-testid":"error",variant:"body1",className:L.subtitle},"ERROR ",r,": ",u),a.createElement(B.Z,{variant:"body1",className:L.subtitle},E),a.createElement(B.Z,{variant:"h2",className:L.title},"Looks like someone dropped the mic!"),a.createElement(B.Z,{variant:"h6"},a.createElement(da,{to:"#","data-testid":"go-back-link",onClick:()=>V(-1)},"Go back"),"... or please"," ",a.createElement(da,{to:C||ce.url},"contact support")," if you think this is a bug.")),a.createElement(Ns,null))}const zs=(0,c.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(B.Z),ko=(0,c.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(oe.Z);function Ei(t){const{children:r,...u}=t,[E,C]=a.useState(null),L=a.Children.toArray(r),[V,ce,...Ie]=L,De=Ie.length?Ie.pop():L[L.length-1],dt=L.length>3,bt=gn=>{C(gn.currentTarget)},en=()=>{C(null)},jt=Boolean(E);return a.createElement(a.Fragment,null,a.createElement(H.Z,{"aria-label":"breadcrumb",...u},L.length>1&&a.createElement(ko,{clone:!0},V),L.length>2&&a.createElement(ko,{clone:!0},ce),dt&&a.createElement(zs,{onClick:bt},"..."),a.createElement(oe.Z,{style:{fontStyle:"italic"}},De)),a.createElement(Ae.ZP,{open:jt,anchorEl:E,onClose:en,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},a.createElement(Ct.Z,null,Ie.map((gn,Un)=>a.createElement(Ye.Z,{key:Un,button:!0},a.createElement(ko,{clone:!0},gn))))))}const So=72,vi=24,yi=18,Rr={drawerWidthClosed:So,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:So,iconSize:So-vi*2,iconPadding:vi,selectedIndicatorWidth:3,userBadgePadding:yi,userBadgeDiameter:So-yi*2,mobileSidebarHeight:56},Gs=t=>({...Rr,...t,iconContainerWidth:Rr.drawerWidthClosed,iconSize:Rr.drawerWidthClosed-Rr.iconPadding*2,userBadgeDiameter:Rr.drawerWidthClosed-Rr.userBadgePadding*2}),_i={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:Rr.defaultOpenDelayMs+200},js=t=>({..._i,...t}),Vs="@backstage/core/sidebar-intro-dismissed",lr=(0,a.createContext)({sidebarConfig:Rr,submenuConfig:_i}),Wo=(0,a.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),bi={isOpen:!1,setOpen:()=>{}},Ci=(0,a.createContext)(bi),Pi=(0,k.CT)("sidebar-open-state-context");function Ai(t){const{children:r,value:u}=t;return a.createElement(Ci.Provider,{value:u},a.createElement(Pi.Provider,{value:(0,k.EI)({1:u})},r))}const po=()=>{const t=(0,a.useContext)(Pi),r=(0,a.useContext)(Ci);if(t===void 0)return r||bi;const u=t.atVersion(1);if(u===void 0)throw new Error("No context found for version 1.");return u},Si=(0,a.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),Ri={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},Oi=(0,a.createContext)(Ri),wi=(0,k.CT)("sidebar-pin-state-context");function Hs(t){const{children:r,value:u}=t;return a.createElement(Oi.Provider,{value:u},a.createElement(wi.Provider,{value:(0,k.EI)({1:u})},r))}const Ro=()=>{const t=(0,a.useContext)(wi),r=(0,a.useContext)(Oi);if(t===void 0)return r||Ri;const u=t.atVersion(1);if(u===void 0)throw new Error("No context found for version 1.");return u},Ys=(0,re.Z)(t=>({root:{flexGrow:0,margin:t.spacing(0,2),color:t.palette.navigation.color},selected:r=>({color:`${t.palette.navigation.selectedColor}!important`,borderTop:`solid ${r.sidebarConfig.selectedIndicatorWidth}px ${t.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),Js=t=>{const{to:r,label:u,icon:E,value:C}=t,{sidebarConfig:L}=(0,a.useContext)(lr),V=Ys({sidebarConfig:L}),ce=(0,Y.TH)(),{selectedMenuItemIndex:Ie,setSelectedMenuItemIndex:De}=(0,a.useContext)(Si),dt=(en,jt)=>{De(jt===Ie?-1:jt)},bt=C===Ie&&Ie>=0||C!==Ie&&!(Ie>=0)&&r===ce.pathname;return a.createElement(j.Z,{"aria-label":u,label:u,icon:E,component:da,to:r||ce.pathname,onChange:dt,value:C,selected:bt,classes:V})},No=t=>{const{children:r,to:u,label:E,icon:C,value:L}=t,{isMobile:V}=Ro();return V?a.createElement(Js,{to:u,label:E,icon:C,value:L}):a.createElement(a.Fragment,null,r)},Ti=(0,re.Z)(t=>({root:{position:"fixed",backgroundColor:t.palette.navigation.background,color:t.palette.navigation.color,bottom:0,left:0,right:0,zIndex:t.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:r=>({background:t.palette.navigation.background,width:"100%",bottom:`${r.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${r.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:t.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:t.spacing(2,3)},overlayHeaderClose:{color:t.palette.navigation.color},marginMobileSidebar:r=>({marginBottom:`${r.sidebarConfig.mobileSidebarHeight}px`})})),Xs=t=>(0,ve.orderBy)(t,({props:{priority:r}})=>Number.isInteger(r)?r:-1,"desc"),Qs=a.createElement(No).type,el=({children:t,label:r="Menu",open:u,onClose:E})=>{const{sidebarConfig:C}=(0,a.useContext)(lr),L=Ti({sidebarConfig:C});return a.createElement(de.ZP,{anchor:"bottom",open:u,onClose:E,ModalProps:{BackdropProps:{classes:{root:L.marginMobileSidebar}}},classes:{root:L.marginMobileSidebar,paperAnchorBottom:L.overlay}},a.createElement(oe.Z,{className:L.overlayHeader},a.createElement(B.Z,{variant:"h3"},r),a.createElement(p.Z,{onClick:E,classes:{root:L.overlayHeaderClose}},a.createElement(i.Z,null))),a.createElement(oe.Z,{component:"nav"},t))},tl=t=>{const{sidebarConfig:r}=(0,a.useContext)(lr),{children:u}=t,E=Ti({sidebarConfig:r}),C=(0,Y.TH)(),[L,V]=(0,a.useState)(-1);(0,a.useEffect)(()=>{V(-1)},[C.pathname]);let ce=(0,m.vJ)(u,De=>De.getElements().filter(dt=>dt.type===Qs));if(u)ce.length?ce=Xs(ce):ce.push(a.createElement(No,{key:"default_menu",icon:a.createElement(st.Z,null)},u));else return null;const Ie=L>=0&&!ce[L].props.to;return a.createElement(Ai,{value:{isOpen:!0,setOpen:()=>{}}},a.createElement(Si.Provider,{value:{selectedMenuItemIndex:L,setSelectedMenuItemIndex:V}},a.createElement(el,{label:ce[L]&&ce[L].props.label,open:Ie,onClose:()=>V(-1)},ce[L]&&ce[L].props.children),a.createElement(Ee.Z,{className:E.root,"data-testid":"mobile-sidebar-root",component:"nav"},ce)))},Ii={getSidebarPinState(){let t;try{t=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!t},setSidebarPinState(t){return window.localStorage.setItem("sidebarPinState",JSON.stringify(t))}},nl=(0,re.Z)(t=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[t.breakpoints.up("sm")]:{paddingLeft:r=>r.isPinned?r.sidebarConfig.drawerWidthOpen:r.sidebarConfig.drawerWidthClosed},[t.breakpoints.down("xs")]:{paddingBottom:r=>r.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),Di=(0,a.createContext)({content:{contentRef:void 0}});function al(t){const[r,u]=(0,a.useState)(()=>Ii.getSidebarPinState()),{sidebarConfig:E}=(0,a.useContext)(lr),C=(0,a.useRef)(null),L=(0,a.useMemo)(()=>({content:{contentRef:C}}),[C]);(0,a.useEffect)(()=>{Ii.setSidebarPinState(r)},[r]);const V=(0,mt.Z)(De=>De.breakpoints.down("xs"),{noSsr:!0}),ce=()=>u(!r),Ie=nl({isPinned:r,sidebarConfig:E});return a.createElement(Hs,{value:{isPinned:r,toggleSidebarPinState:ce,isMobile:V}},a.createElement(Di.Provider,{value:L},a.createElement(oe.Z,{className:Ie.root},t.children)))}function Fo(){const{content:t}=(0,a.useContext)(Di);return{focusContent:(0,a.useCallback)(()=>{var u,E;(E=(u=t==null?void 0:t.contentRef)==null?void 0:u.current)==null||E.focus()},[t]),contentRef:t==null?void 0:t.contentRef}}const Mi=(0,re.Z)(t=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:t.zIndex.appBar,background:t.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:r=>({width:r.sidebarConfig.drawerWidthClosed}),drawerOpen:r=>({width:r.sidebarConfig.drawerWidthOpen,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),rl=t=>{const{sidebarConfig:r}=(0,a.useContext)(lr),{openDelayMs:u=r.defaultOpenDelayMs,closeDelayMs:E=r.defaultCloseDelayMs,disableExpandOnHover:C,children:L}=t,V=Mi({sidebarConfig:r}),ce=(0,mt.Z)(ga=>ga.breakpoints.down("md"),{noSsr:!0}),[Ie,De]=(0,a.useState)(0),dt=(0,a.useRef)(),{isPinned:bt,toggleSidebarPinState:en}=Ro(),jt=()=>{bt||C||(dt.current&&(clearTimeout(dt.current),dt.current=void 0),Ie!==2&&!ce&&(dt.current=window.setTimeout(()=>{dt.current=void 0,De(2)},u),De(1)))},gn=()=>{bt||C||(dt.current&&(clearTimeout(dt.current),dt.current=void 0),Ie===1?De(0):Ie===2&&(dt.current=window.setTimeout(()=>{dt.current=void 0,De(0)},E)))},Un=Ie===2&&!ce||bt,Yn=ga=>{ga?(De(2),en()):(De(0),en())};return a.createElement("nav",{style:{},"aria-label":"sidebar nav"},a.createElement(il,null),a.createElement(Ai,{value:{isOpen:Un,setOpen:Yn}},a.createElement(oe.Z,{className:V.root,"data-testid":"sidebar-root",onMouseEnter:C?()=>{}:jt,onFocus:C?()=>{}:jt,onMouseLeave:C?()=>{}:gn,onBlur:C?()=>{}:gn},a.createElement(oe.Z,{className:fe()(V.drawer,V.drawerWidth,{[V.drawerOpen]:Un})},L))))},ol=t=>{var r,u;const E=Gs((r=t.sidebarOptions)!=null?r:{}),C=js((u=t.submenuOptions)!=null?u:{}),{children:L,disableExpandOnHover:V,openDelayMs:ce,closeDelayMs:Ie}=t,{isMobile:De}=Ro();return De?a.createElement(tl,null,L):a.createElement(lr.Provider,{value:{sidebarConfig:E,submenuConfig:C}},a.createElement(rl,{openDelayMs:ce,closeDelayMs:Ie,disableExpandOnHover:V},L))};function il(){const{sidebarConfig:t}=(0,a.useContext)(lr),{focusContent:r,contentRef:u}=Fo(),E=Mi({sidebarConfig:t});return u!=null&&u.current?a.createElement(Te.Z,{onClick:r,variant:"contained",className:fe()(E.visuallyHidden)},"Skip to content"):null}function Oo(t,r,u=!1){const E=new URLSearchParams(r.search).toString(),C=Ht().parse(E),L=new URLSearchParams(t.search).toString(),V=Ht().parse(L),ce=u?ve.isEqual:ve.isMatch;return(0,ve.isEqual)(r.pathname,t.pathname)&&ce(V,C)}const sl=(0,re.Z)(t=>{var r,u;return{item:{height:48,width:"100%","&:hover":{background:((r=t.palette.navigation.navItem)==null?void 0:r.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:t.palette.navigation.color,padding:t.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:t.palette.common.white},label:{margin:t.spacing(1.75),marginLeft:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((u=t.palette.navigation.navItem)==null?void 0:u.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor}},textContent:{color:t.palette.navigation.color,paddingLeft:t.spacing(4),paddingRight:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),ll=t=>{const{title:r,subtitle:u,to:E,icon:C,dropdownItems:L,exact:V}=t,ce=sl(),{setIsHoveredOn:Ie}=(0,a.useContext)(Wo),De=()=>{Ie(!1)},dt=(0,Y.WU)(E!=null?E:""),bt=(0,Y.TH)();let en=Oo(bt,dt,V);const[jt,gn]=(0,a.useState)(!1),Un=()=>{gn(!jt)};return L!==void 0?(L.some(Yn=>{const ga=(0,ee.i3)(Yn.to);return en=Oo(bt,ga,V),en}),a.createElement(oe.Z,{className:ce.itemContainer},a.createElement(me.ZP,{title:r,enterDelay:500,enterNextDelay:500},a.createElement(Te.Z,{role:"button",onClick:Un,onTouchStart:Yn=>Yn.stopPropagation(),className:fe()(ce.item,en?ce.selected:void 0)},C&&a.createElement(C,{fontSize:"small"}),a.createElement(B.Z,{variant:"subtitle1",component:"span",className:ce.label},r,a.createElement("br",null),u&&a.createElement(B.Z,{variant:"caption",component:"span",className:ce.subtitle},u)),jt?a.createElement(te.Z,{className:ce.dropdownArrow}):a.createElement(Q.Z,{className:ce.dropdownArrow}))),L&&jt&&a.createElement(oe.Z,{className:ce.dropdown},L.map((Yn,ga)=>a.createElement(me.ZP,{key:ga,title:Yn.title,enterDelay:500,enterNextDelay:500},a.createElement(da,{to:Yn.to,underline:"none",className:ce.dropdownItem,onClick:De,onTouchStart:$a=>$a.stopPropagation()},a.createElement(B.Z,{component:"span",className:ce.textContent},Yn.title))))))):a.createElement(oe.Z,{className:ce.itemContainer},a.createElement(me.ZP,{title:r,enterDelay:500,enterNextDelay:500},a.createElement(da,{to:E,underline:"none",className:fe()(ce.item,en?ce.selected:void 0),onClick:De,onTouchStart:Yn=>Yn.stopPropagation()},C&&a.createElement(C,{fontSize:"small"}),a.createElement(B.Z,{variant:"subtitle1",component:"span",className:ce.label},r,a.createElement("br",null),u&&a.createElement(B.Z,{variant:"caption",component:"span",className:ce.subtitle},u)))))},cl=(0,re.Z)(t=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:t.spacing(7)+1},drawer:r=>{var u,E;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[t.breakpoints.up("sm")]:{marginLeft:r.left,transition:t.transitions.create("margin-left",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(E=(u=t.palette.navigation.submenu)==null?void 0:u.background)!=null?E:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:r.submenuConfig.drawerWidthClosed,transitionDelay:`${r.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:r=>({width:r.submenuConfig.drawerWidthOpen,[t.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:t.spacing(3),left:0,top:0}}),title:{fontSize:t.typography.h5.fontSize,fontWeight:t.typography.fontWeightMedium,color:t.palette.common.white,padding:t.spacing(2.5),[t.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),xi=t=>{const{isOpen:r}=po(),{sidebarConfig:u,submenuConfig:E}=(0,a.useContext)(lr),C=r?u.drawerWidthOpen:u.drawerWidthClosed,L=cl({left:C,submenuConfig:E}),{isHoveredOn:V}=(0,a.useContext)(Wo),[ce,Ie]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{Ie(V)},[V]),a.createElement(oe.Z,{className:fe()(L.drawer,{[L.drawerOpen]:ce})},a.createElement(B.Z,{variant:"h5",component:"span",className:L.title},t.title),t.children)},ul=(0,re.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),dl=()=>{const t=ul();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},ml=(0,re.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),pl=()=>{const t=ml();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},gl=t=>(0,re.Z)(r=>{var u,E,C,L;return{root:{color:r.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:t.drawerWidthClosed,justifyContent:"center"},open:{[r.breakpoints.up("sm")]:{width:t.drawerWidthOpen}},highlightable:{"&:hover":{background:(E=(u=r.palette.navigation.navItem)==null?void 0:u.hoverBackground)!=null?E:"#404040"}},highlighted:{background:(L=(C=r.palette.navigation.navItem)==null?void 0:C.hoverBackground)!=null?L:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:t.iconContainerWidth,marginRight:-r.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:r.typography.fontWeightBold,fontSize:r.typography.fontSize},searchFieldHTMLInput:{padding:r.spacing(2,0,2)},searchContainer:{width:t.drawerWidthOpen-t.iconContainerWidth},secondaryAction:{width:r.spacing(6),textAlign:"center",marginRight:r.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:r.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${t.selectedIndicatorWidth}px ${r.palette.navigation.indicator}`,color:r.palette.navigation.selectedColor},"&$closed":{width:t.drawerWidthClosed},"& $closedItemIcon":{paddingRight:t.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-t.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function wo(t){return(0,a.useMemo)(()=>gl(t),[t])()}const hl=(t,r)=>(0,m.vJ)(t.props.children,u=>{let E=!1;return u.getElements().forEach(({props:{to:C,dropdownItems:L}})=>{if(!E){if(L!=null&&L.length){L.forEach(({to:V})=>E=E||Oo(r,(0,ee.i3)(V)));return}C&&(E=Oo(r,(0,ee.i3)(C)))}}),E},[r.pathname]);function Ko(t){return t.to===void 0}const fl=a.createElement(xi).type,El=a.forwardRef(function({to:r,end:u,style:E,className:C,activeStyle:L,caseSensitive:V,activeClassName:ce="active","aria-current":Ie="page",...De},dt){let{pathname:bt}=(0,Y.TH)(),{pathname:en}=(0,Y.WU)(r);V||(bt=bt.toLocaleLowerCase("en-US"),en=en.toLocaleLowerCase("en-US"));let jt=bt===en;!jt&&!u&&(jt=bt.startsWith(`${en}/`));const gn=jt?Ie:void 0;return a.createElement(v.rU,{...De,to:r,ref:dt,"aria-current":gn,style:{...E,...jt?L:void 0},className:fe()([typeof C!="function"?C:void 0,jt?ce:void 0])})}),Li=(0,a.forwardRef)((t,r)=>{const{icon:u,text:E,hasNotifications:C=!1,hasSubmenu:L=!1,disableHighlight:V=!1,onClick:ce,noTrack:Ie,children:De,className:dt,...bt}=t,{sidebarConfig:en}=(0,a.useContext)(lr),jt=wo(en),{isOpen:gn}=po(),Un=!gn&&L?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},Yn=a.createElement(oe.Z,{style:Un},a.createElement(u,{fontSize:"small"}),!gn&&L?a.createElement(He.Z,{fontSize:"small"}):a.createElement(a.Fragment,null)),ga=a.createElement(ke.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!C,className:fe()({[jt.closedItemIcon]:!gn})},Yn),$a=a.createElement(a.Fragment,null,a.createElement(oe.Z,{"data-testid":"login-button",className:jt.iconContainer},ga),E&&a.createElement(B.Z,{variant:"subtitle2",component:"span",className:jt.label},E),a.createElement("div",{className:jt.secondaryAction},De)),Xa=gn?$a:ga,Jn={onClick:ce,className:fe()(dt,jt.root,gn?jt.open:jt.closed,Ko(t)&&jt.buttonItem,{[jt.highlightable]:!V})},Ta=(0,m.z$)(),{pathname:Za}=(0,Y.WU)(!Ko(t)&&t.to?t.to:""),Qa=(0,a.useCallback)(br=>{if(!Ie){const Yr="click",gr=E!=null?E:"Sidebar Item",Jr=Za?{attributes:{to:Za}}:void 0;Ta.captureEvent(Yr,gr,Jr)}ce==null||ce(br)},[Ta,E,Za,Ie,ce]);return Ko(t)?a.createElement(Te.Z,{role:"button","aria-label":E,...Jn,ref:r,onClick:Qa},Xa):a.createElement(El,{...Jn,activeClassName:jt.selected,to:t.to?t.to:"",ref:r,"aria-label":E||t.to,...bt,onClick:Qa},Xa)}),vl=({children:t,...r})=>{const{sidebarConfig:u}=(0,a.useContext)(lr),E=wo(u),[C,L]=(0,a.useState)(!1),V=(0,Y.TH)(),ce=hl(t,V),Ie=(0,mt.Z)(en=>en.breakpoints.down("sm")),De=()=>{L(!0)},dt=()=>{L(!1)},bt=()=>Ie?C?a.createElement(te.Z,{fontSize:"small",className:E.submenuArrow}):a.createElement(Q.Z,{fontSize:"small",className:E.submenuArrow}):!C&&a.createElement(He.Z,{fontSize:"small",className:E.submenuArrow});return a.createElement(Wo.Provider,{value:{isHoveredOn:C,setIsHoveredOn:L}},a.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:dt,onTouchStart:C?dt:De,onMouseEnter:De,className:fe()(C&&E.highlighted)},a.createElement(Li,{hasSubmenu:!0,className:ce?E.selected:"",...r},bt()),C&&t))},Bi=(0,a.forwardRef)((t,r)=>{const[u]=(0,m.vJ)(t.children,E=>E.getElements().filter(C=>C.type===fl));return u?a.createElement(vl,{...t},u):a.createElement(Li,{...t,ref:r})});function Sc(t){const{sidebarConfig:r}=useContext(lr),[u,E]=useState(""),C=wo(r),L=t.icon?t.icon:SearchIcon,V=()=>{t.onSearch(u),E("")},ce=bt=>{bt.key==="Enter"&&(bt.preventDefault(),V())},Ie=bt=>{E(bt.target.value)},De=bt=>{bt.preventDefault(),bt.stopPropagation()},dt=bt=>{V(),bt.preventDefault()};return React.createElement(Box,{className:C.searchRoot},React.createElement(Bi,{icon:L,to:t.to,onClick:dt,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:u,onClick:De,onChange:Ie,onKeyDown:ce,className:C.searchContainer,InputProps:{disableUnderline:!0,className:C.searchField},inputProps:{className:C.searchFieldHTMLInput}})))}const yl=(0,_.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),Rc=(0,_.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),Ui=(0,_.Z)("hr")(({theme:t})=>({height:1,width:"100%",background:"#383838",border:"none",margin:t.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),_l=t=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:t.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:t.palette.text.secondary,borderRadius:"5px"}}),bl=(0,_.Z)("div")(({theme:t})=>{const r=_l(t);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":r,"&:hover":r}}),Oc=()=>{const{sidebarConfig:t}=useContext(lr),r=wo(t),{isOpen:u,setOpen:E}=po();if(useMediaQuery(V=>V.breakpoints.down("md"),{noSsr:!0}))return null;const L=()=>{E(!u)};return React.createElement(Button$1,{role:"button",onClick:L,className:r.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:r.arrows},u?React.createElement(dl,null):React.createElement(pl,null)))},Cl=(0,re.Z)(t=>({introCard:r=>({color:"#b5b5b5",fontSize:12,width:r.sidebarConfig.drawerWidthOpen,marginTop:t.spacing(2.25),marginBottom:t.spacing(1.5),paddingLeft:r.sidebarConfig.iconPadding,paddingRight:r.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:t.spacing(1.5)},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:t.spacing(.5),"&:hover":{color:t.palette.linkHover,transition:t.transitions.create("color",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:t.spacing(1.5)}}),{name:"BackstageSidebarIntro"});function Pl(t){const{sidebarConfig:r}=useContext(lr),u=Cl({sidebarConfig:r}),{text:E,onClose:C}=t,L=()=>C();return React.createElement(Box,{className:u.introCard},React.createElement(Typography,{variant:"subtitle2"},E),React.createElement(Box,{className:u.introDismiss},React.createElement(IconButton,{onClick:L,className:u.introDismissLink},React.createElement(CloseIcon,{className:u.introDismissIcon}),React.createElement(Typography,{component:"span",className:u.introDismissText},"Dismiss"))))}const $i=t=>{const{text:r,onDismiss:u}=t,[E,C]=useState(!1),L=()=>{C(!0)};return React.createElement(Collapse,{in:!E,onExited:u},React.createElement(Pl,{text:r,onClose:L}))},Al=null,Sl="And your recently viewed plugins will pop up here!";function wc(t){const{isOpen:r}=po(),u={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},{value:E,set:C}=useLocalStorageValue(Vs),{starredItemsDismissed:L,recentlyViewedItemsDismissed:V}=E!=null?E:{},ce=()=>{C(De=>({...u,...De,starredItemsDismissed:!0}))},Ie=()=>{C(De=>({...u,...De,recentlyViewedItemsDismissed:!0}))};return r?React.createElement(React.Fragment,null,!L&&React.createElement(React.Fragment,null,React.createElement($i,{text:Al,onDismiss:ce}),React.createElement(Ui,null)),!V&&React.createElement($i,{text:Sl,onDismiss:Ie})):null}const Rl=(0,re.Z)(t=>({header:{gridArea:"pageHeader",padding:t.spacing(3),width:"100%",boxShadow:t.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:t.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[t.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:t.page.fontColor,wordBreak:"break-word",fontSize:t.typography.h3.fontSize,marginBottom:0},subtitle:{color:t.page.fontColor,opacity:.8,display:"inline-block",marginTop:t.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:t.spacing(1),color:t.page.fontColor},breadcrumb:{color:t.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-t.spacing(.3),marginBottom:t.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-t.spacing(.3),marginBottom:t.spacing(.3)}}),{name:"BackstageHeader"}),Ol=({type:t,typeLink:r,classes:u,pageTitle:E})=>t?r?a.createElement(Ei,{className:u.breadcrumb},a.createElement(da,{to:r},t),a.createElement(B.Z,null,E)):a.createElement(B.Z,{className:u.type},t):null,wl=({pageTitle:t,classes:r,tooltip:u})=>{const{contentRef:E}=Fo(),C=a.createElement(B.Z,{ref:E,tabIndex:-1,className:r.title,variant:"h1"},t);return u?a.createElement(me.ZP,{title:u,placement:"top-start"},C):C},Tl=({classes:t,subtitle:r})=>r?typeof r!="string"?a.createElement(a.Fragment,null,r):a.createElement(B.Z,{className:t.subtitle,variant:"subtitle2",component:"span"},r):null;function To(t){const{children:r,pageTitleOverride:u,style:E,subtitle:C,title:L,tooltip:V,type:ce,typeLink:Ie}=t,De=Rl(),bt=(0,o.u)(o.p).getOptionalString("app.title")||"Backstage",en=u||L,jt=L||u,gn=`${en} | %s | ${bt}`,Un=`${en} | ${bt}`;return a.createElement(a.Fragment,null,a.createElement(ln.q,{titleTemplate:gn,defaultTitle:Un}),a.createElement("header",{style:E,className:De.header},a.createElement(oe.Z,{className:De.leftItemsBox},a.createElement(Ol,{classes:De,type:ce,typeLink:Ie,pageTitle:jt}),a.createElement(wl,{classes:De,pageTitle:jt,tooltip:V}),a.createElement(Tl,{classes:De,subtitle:C})),a.createElement(O.Z,{container:!0,className:De.rightItemsBox,spacing:4},r)))}const Il=({label:t,secondaryLabel:r,icon:u,disabled:E=!1,onClick:C})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:E,button:!0,onClick:L=>{C&&C(L)}},u&&React.createElement(ListItemIcon,null,u),React.createElement(ListItemText,{primary:t,secondary:r})));function Tc(t){const{palette:{common:{white:r}}}=useTheme(),{actionItems:u}=t,[E,C]=React.useState(!1),L=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>C(!0),"data-testid":"header-action-menu",ref:L,style:{color:r,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:E,anchorEl:L.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>C(!1)},React.createElement(List,null,u.map((V,ce)=>React.createElement(Il,{key:`header-action-menu-${ce}`,...V})))))}const Dl=(0,re.Z)(t=>({root:{textAlign:"left"},label:{color:t.page.fontColor,fontWeight:t.typography.fontWeightBold,letterSpacing:0,fontSize:t.typography.fontSize,marginBottom:t.spacing(1)/2,lineHeight:1},value:{color:(0,I.Fq)(t.page.fontColor,.8),fontSize:t.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),Ml=({value:t,className:r,typographyRootComponent:u})=>a.createElement(B.Z,{component:u!=null?u:typeof t=="string"?"p":"span",className:r},t);function xl(t){const{label:r,value:u,url:E,contentTypograpyRootComponent:C}=t,L=Dl(),V=a.createElement(Ml,{className:L.value,value:u||"<Unknown>",typographyRootComponent:C});return a.createElement(O.Z,{item:!0},a.createElement(B.Z,{component:"span",className:L.root},a.createElement(B.Z,{className:L.label},r),E?a.createElement(da,{to:E},V):V))}const Ll=t=>(0,R.Z)({root:{color:t.palette.common.white,padding:t.spacing(2,2,3),backgroundImage:t.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),Bl=(0,re.Z)(Ll,{name:"BackstageItemCardHeader"});function Zi(t){const{title:r,subtitle:u,children:E}=t,C=Bl(t);return a.createElement(oe.Z,{className:C.root},u&&a.createElement(B.Z,{variant:"subtitle2",component:"h3"},u),r&&a.createElement(B.Z,{variant:"h6",component:"h4"},r),E)}function Ic(t){const{description:r,tags:u,title:E,type:C,subtitle:L,label:V,onClick:ce,href:Ie}=t;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(Zi,{title:E,subtitle:L||C})),React.createElement(CardContent,null,u!=null&&u.length?React.createElement(Box,null,u.map((De,dt)=>React.createElement(Chip,{size:"small",label:De,key:dt}))):null,r),React.createElement(CardActions,null,!Ie&&React.createElement(nr,{to:"#",onClick:ce,color:"primary"},V),Ie&&React.createElement(nr,{to:Ie,color:"primary"},V)))}const Ul=t=>(0,R.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:t.spacing(2)}}),$l=(0,re.Z)(Ul,{name:"BackstageItemCardGrid"});function Zl(t){const{children:r,...u}=t,E=$l(u);return a.createElement(oe.Z,{className:E.root,...u},r)}const kl=(0,re.Z)(t=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[t.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function Io(t){const{themeId:r,children:u}=t,E=kl();return a.createElement(b.Z,{theme:C=>({...C,page:C.getPageTheme({themeId:r})})},a.createElement("main",{className:E.root},u))}function Wl(t){const{themeId:r,children:u,...E}=t;return a.createElement(Io,{themeId:r},a.createElement(To,{...E}),u)}const Nl=qe.z.object({providerInfo:qe.z.object({}).catchall(qe.z.unknown()).optional(),profile:qe.z.object({email:qe.z.string().optional(),displayName:qe.z.string().optional(),picture:qe.z.string().optional()}),backstageIdentity:qe.z.object({token:qe.z.string(),identity:qe.z.object({type:qe.z.literal("user"),userEntityRef:qe.z.string(),ownershipEntityRefs:qe.z.array(qe.z.string())})})});var Fl=Object.defineProperty,Kl=(t,r,u)=>r in t?Fl(t,r,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[r]=u,zo=(t,r,u)=>(Kl(t,typeof r!="symbol"?r+"":r,u),u);const ki={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function zl(t){const r=new Date(Date.now()+ki.defaultTokenExpiryMillis);if(!t)return r;const[u,E,C]=t.split("."),L=JSON.parse(window.atob(E));return typeof L.exp!="number"?r:new Date(L.exp*1e3-ki.tokenExpiryMarginMillis)}class Gl{constructor(r){zo(this,"options"),zo(this,"abortController"),zo(this,"state"),this.options=r,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:r}=this.getSessionSync(),u=r.identity.userEntityRef,E=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(u);if(!E)throw new TypeError(`Invalid user entity reference "${u}"`);return E[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const r=this.state.type==="active"?this.state.session:void 0,u=this.fetchSession().then(E=>(this.state={type:"active",session:E,expiresAt:zl(E.backstageIdentity.token)},E),E=>{throw this.state={type:"failed",error:E},E});return this.state={type:"fetching",promise:u,previous:r},u}async fetchSession(){const r=await this.options.discoveryApi.getBaseUrl("auth"),u=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,E=new Headers(u);E.set("X-Requested-With","XMLHttpRequest");const C=await fetch(`${r}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:E,credentials:"include"});if(!C.ok)throw await ResponseError.fromResponse(C);return Nl.parse(await C.json())}}const Dc=t=>{const r=useApi(discoveryApiRef),[{status:u,error:E},{execute:C}]=useAsync(async()=>{const L=new Gl({provider:t.provider,discoveryApi:r,headers:t.headers});await L.start(),t.onSignInSuccess(L)});return useMountEffect(C),u==="loading"?React.createElement(Wn,null):E?React.createElement(dr,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:E}):null};class Go{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const r="user:default/guest";return{type:"user",userEntityRef:r,ownershipEntityRefs:[r]}}async getCredentials(){return{}}async signOut(){}}function jl(t){const[r,u,E]=t.split(".");return JSON.parse(window.atob(u))}class jo{constructor(r){this.result=r}getUserId(){return this.result.userId}static fromResult(r){return new jo(r)}async getIdToken(){var r,u;return(u=(r=this.result).getIdToken)==null?void 0:u.call(r)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const r=await this.getIdToken();if(!r){const C=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:C,ownershipEntityRefs:[C]}}const{sub:u,ent:E}=jl(r);return{type:"user",userEntityRef:u,ownershipEntityRefs:E!=null?E:[]}}async getCredentials(){var r,u;return{token:await((u=(r=this.result).getIdToken)==null?void 0:u.call(r))}}async signOut(){var r,u;return(u=(r=this.result).signOut)==null?void 0:u.call(r)}}var Vl=Object.defineProperty,Hl=(t,r,u)=>r in t?Vl(t,r,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[r]=u,Yl=(t,r,u)=>(Hl(t,typeof r!="symbol"?r+"":r,u),u);class Vr{constructor(r,u,E){this.identity=r,this.authApi=u,this.profile=E,Yl(this,"profilePromise")}static createGuest(){return new Go}static fromLegacy(r){return jo.fromResult(r)}static create(r){return new Vr(r.identity,r.authApi,r.profile)}getUserId(){const r=this.identity.userEntityRef,u=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(r);if(!u)throw new TypeError(`Invalid user entity reference "${r}"`);return u[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(r){throw this.profilePromise=void 0,r}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const Vo=(0,re.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),Do=({children:t})=>{const r=Vo();return a.createElement(O.Z,{component:"li",item:!0,classes:r},t)},Jl={Component:({config:t,onSignInStarted:r,onSignInSuccess:u,onSignInFailure:E})=>{const{apiRef:C,title:L,message:V}=t,ce=(0,o.u)(C),Ie=(0,o.u)(o.r),De=async()=>{try{r();const dt=await ce.getBackstageIdentity({instantPopup:!0});if(!dt)throw E(),new Error(`The ${L} provider is not configured to support sign-in`);const bt=await ce.getProfile();u(Vr.create({identity:dt.identity,profile:bt,authApi:ce}))}catch(dt){E(),Ie.post(new pe.SP("Login failed",dt))}};return a.createElement(Do,null,a.createElement(Sr,{variant:"fullHeight",title:L,actions:a.createElement(Te.Z,{color:"primary",variant:"outlined",onClick:De},"Sign In")},a.createElement(B.Z,{variant:"body1"},V)))},loader:async(t,r)=>{const u=t.get(r),E=await u.getBackstageIdentity({optional:!0});if(!E)return;const C=await u.getProfile();return Vr.create({identity:E.identity,profile:C,authApi:u})}},Xl={Component:({onSignInStarted:t,onSignInSuccess:r})=>a.createElement(Do,null,a.createElement(Sr,{title:"Guest",variant:"fullHeight",actions:a.createElement(Te.Z,{color:"primary",variant:"outlined",onClick:()=>{t(),r(new Go)}},"Enter")},a.createElement(B.Z,{variant:"body1"},"Enter as a Guest User.",a.createElement("br",null),"You will not have a verified identity,",a.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new Go},Ql=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,ql=(0,re.Z)(t=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:t.spacing(2)}}),{name:"BackstageCustomProvider"}),Wi=t=>{const{ref:r,...u}=t;return{inputRef:r,...u}},ec={Component:({onSignInStarted:t,onSignInSuccess:r})=>{const u=ql(),{register:E,handleSubmit:C,formState:L}=(0,At.cI)({mode:"onChange"}),{errors:V}=L,ce=({userId:Ie,idToken:De})=>{t(),r(Vr.fromLegacy({userId:Ie,getIdToken:De!==void 0?async()=>De:void 0,profile:{email:`${Ie}@example.com`}}))};return a.createElement(Do,null,a.createElement(Sr,{title:"Custom User",variant:"fullHeight"},a.createElement(B.Z,{variant:"body1"},"Enter your own User ID and credentials.",a.createElement("br",null),"This selection will not be stored."),a.createElement("form",{className:u.form,onSubmit:C(ce)},a.createElement(Jt.Z,null,a.createElement(Je.Z,{...Wi(E("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(V.userId)}),V.userId&&a.createElement(dn.Z,{error:!0},V.userId.message)),a.createElement(Jt.Z,null,a.createElement(Je.Z,{...Wi(E("idToken",{required:!1,validate:Ie=>!Ie||Ql.test(Ie)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(V.idToken)}),V.idToken&&a.createElement(dn.Z,{error:!0},V.idToken.message)),a.createElement(Te.Z,{type:"submit",color:"primary",variant:"outlined",className:u.button,disabled:!(L!=null&&L.isDirty)||!un()(V)},"Continue"))))},loader:async()=>{}};class Ho{constructor(r){this.config=r}static from(r){return new Ho(r)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const Hr="@backstage/core:SignInPage:provider",Ni={guest:Xl,custom:ec,common:Jl};function Fi(t,r){if(t in r)throw new Error(`"${t}" ID is duplicated. IDs of identity providers have to be unique.`)}function tc(t){return t.reduce((u,E)=>{if(typeof E=="string")return Fi(E,u),u[E]={components:Ni[E],id:E},u;const{id:C}=E;return Fi(C,u),u[C]={components:Ni.common,id:C,config:E},u},{})}const nc=(t,r)=>{const u=(0,o.u)(o.r),E=(0,o.b)(),[C,L]=(0,a.useState)(!0),V=(0,a.useCallback)(Ie=>{r(Ho.from({identityApi:Ie,signOut:async()=>{var De;localStorage.removeItem(Hr),await((De=Ie.signOut)==null?void 0:De.call(Ie))}}))},[r]);(0,a.useLayoutEffect)(()=>{var Ie;if(!C)return;const De=localStorage.getItem(Hr);if(De===null){L(!1);return}const dt=t[De];if(!dt){L(!1);return}let bt=!1;return dt.components.loader(E,(Ie=dt.config)==null?void 0:Ie.apiRef).then(en=>{if(bt){localStorage.removeItem(Hr);return}en?V(en):L(!1)}).catch(en=>{localStorage.removeItem(Hr),!bt&&(u.post(en),L(!1))}),()=>{bt=!0}},[C,u,r,E,t,V]);const ce=(0,a.useMemo)(()=>Object.keys(t).map(Ie=>{const De=t[Ie],{Component:dt}=De.components,bt=gn=>{V(gn)},en=()=>{var gn;localStorage.setItem(Hr,((gn=De==null?void 0:De.config)==null?void 0:gn.id)||De.id)},jt=()=>{localStorage.removeItem(Hr)};return a.createElement(dt,{key:De.id,config:De.config,onSignInStarted:en,onSignInSuccess:bt,onSignInFailure:jt})}),[t,V]);return[C,ce]},ac=({onSignInSuccess:t,providers:r=[],title:u,align:E="left"})=>{const C=(0,o.u)(o.p),L=Vo(),V=tc(r),[ce,Ie]=nc(V,t);return ce?a.createElement(Wn,null):a.createElement(Io,{themeId:"home"},a.createElement(To,{title:C.getString("app.title")}),a.createElement(Ao,null,u&&a.createElement(fi,{title:u,textAlign:E}),a.createElement(O.Z,{container:!0,justifyContent:E==="center"?E:"flex-start",spacing:2,component:"ul",classes:L},Ie)))},rc=({provider:t,auto:r,onSignInSuccess:u})=>{const E=Vo(),C=(0,o.u)(t.apiRef),L=(0,o.u)(o.p),[V,ce]=(0,a.useState)(),[Ie,De]=(0,a.useState)(!1),dt=async({checkExisting:bt,showPopup:en})=>{try{let jt;if(bt&&(jt=await C.getBackstageIdentity({optional:!0})),!jt&&(en||r)&&(De(!0),jt=await C.getBackstageIdentity({instantPopup:!0}),!jt))throw new Error(`The ${t.title} provider is not configured to support sign-in`);if(!jt){De(!0);return}const gn=await C.getProfile();u(Vr.create({identity:jt.identity,authApi:C,profile:gn}))}catch(jt){ce(jt),De(!0)}};return(0,Bt.n)(()=>dt({checkExisting:!0})),Ie?a.createElement(Io,{themeId:"home"},a.createElement(To,{title:L.getString("app.title")}),a.createElement(Ao,null,a.createElement(O.Z,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:E},a.createElement(Do,null,a.createElement(Sr,{variant:"fullHeight",title:t.title,actions:a.createElement(Te.Z,{color:"primary",variant:"outlined",onClick:()=>{dt({showPopup:!0})}},"Sign In")},a.createElement(B.Z,{variant:"body1"},t.message),V&&V.name!=="PopupRejectedError"&&a.createElement(B.Z,{variant:"body1",color:"error"},V.message)))))):a.createElement(Wn,null)};function oc(t){return"provider"in t?a.createElement(rc,{...t}):a.createElement(ac,{...t})}const ic=(0,re.Z)(t=>({root:{padding:t.spacing(0,2,0,2.5),minHeight:t.spacing(3)},indicator:{backgroundColor:t.palette.info.main,height:t.spacing(.3)}}),{name:"BackstageTabbedCard"}),sc=(0,c.Z)(t=>({root:{padding:t.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:t.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(W.Z);function lc(t){const{slackChannel:r,errorBoundaryProps:u,children:E,title:C,deepLink:L,value:V,onChange:ce}=t,Ie=ic(),[De,dt]=(0,a.useState)(0),bt=ce||((gn,Un)=>dt(Un));let en;V?a.Children.map(E,gn=>{a.isValidElement(gn)&&(gn==null?void 0:gn.props.value)===V&&(en=gn==null?void 0:gn.props.children)}):a.Children.map(E,(gn,Un)=>{a.isValidElement(gn)&&Un===De&&(en=gn==null?void 0:gn.props.children)});const jt=u||(r?{slackChannel:r}:{});return a.createElement(Ce.Z,null,a.createElement(fa,{...jt},C&&a.createElement(sc,{title:C}),a.createElement(In.Z,{classes:Ie,value:V||De,onChange:bt},E),a.createElement(le.Z,null),a.createElement(P.Z,null,en),L&&a.createElement(_a,{...L})))}const cc=(0,re.Z)(t=>({root:{minWidth:t.spacing(6),minHeight:t.spacing(3),margin:t.spacing(0,2,0,0),padding:t.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:t.palette.text.primary}},selected:{fontWeight:t.typography.fontWeightBold}}),{name:"BackstageCardTab"});function uc(t){const{children:r,...u}=t,E=cc();return a.createElement(on.Z,{disableRipple:!0,classes:E,...u})}},83487:($n,qt,e)=>{"use strict";e.d(qt,{FB:()=>be,IB:()=>Oe,iH:()=>c,op:()=>re});var o=e(2784),m=e(57032);function p(R){return{$$type:"@backstage/TranslationMessages",id:R.ref.id,full:Boolean(R.full),messages:R.messages}}function z(R){return{$$type:"@backstage/TranslationResource",version:"v1",id:R.ref.id,resources:Object.entries(R.translations).map(([_,b])=>({language:_,loader:()=>b().then(N=>{const _e=N.default;return{messages:(_e==null?void 0:_e.$$type)==="@backstage/TranslationMessages"?_e.messages:_e}})}))}}var B=Object.defineProperty,i=(R,_,b)=>_ in R?B(R,_,{enumerable:!0,configurable:!0,writable:!0,value:b}):R[_]=b,$=(R,_,b)=>(i(R,typeof _!="symbol"?_+"":_,b),b),Qe=(R,_,b)=>{if(!_.has(R))throw TypeError("Cannot "+b)},Ne=(R,_,b)=>(Qe(R,_,"read from private field"),b?b.call(R):_.get(R)),a=(R,_,b)=>{if(_.has(R))throw TypeError("Cannot add the same private member more than once");_ instanceof WeakSet?_.add(R):_.set(R,b)},xe=(R,_,b,N)=>(Qe(R,_,"write to private field"),N?N.call(R,b):_.set(R,b),b),Te,ie,G;function Ge(R){const _=new Array;function b(N,_e){for(const[fe,ve]of Object.entries(N))typeof ve=="string"?_.push([_e+fe,ve]):b(ve,`${_e}${fe}.`)}return b(R,""),Object.fromEntries(_)}class ge{constructor(_){a(this,Te,void 0),a(this,ie,void 0),a(this,G,void 0),$(this,"$$type","@backstage/TranslationRef"),$(this,"version","v1"),xe(this,Te,_.id),xe(this,ie,Ge(_.messages))}get id(){return Ne(this,Te)}get T(){throw new Error("Not implemented")}getDefaultMessages(){return Ne(this,ie)}setDefaultResource(_){xe(this,G,_)}getDefaultResource(){return Ne(this,G)}toString(){return`TranslationRef{id=${this.id}}`}}Te=new WeakMap,ie=new WeakMap,G=new WeakMap;function be(R){const _=new ge(R);return R.translations&&_.setDefaultResource(z({ref:_,translations:R.translations})),_}const re=(0,m.c)({id:"core.translation"}),Oe=(0,m.c)({id:"core.applanguage"}),I=new WeakSet,c=R=>{const _=(0,m.u)(m.r),b=(0,m.u)(re),[N,_e]=(0,o.useState)(()=>b.getTranslation(R)),fe=(0,o.useMemo)(()=>b.translation$(R),[b,R]),ve=(0,o.useCallback)(v=>{if(!I.has(R)){const ee=`Failed to load translation resource '${R.id}'; caused by ${v}`;console.error(ee),_.post(new Error(ee)),I.add(R)}},[_,R]);(0,o.useEffect)(()=>{const v=fe.subscribe({next(ee){ee.ready&&_e(ee)},error(ee){ve(ee)}});return()=>{v.unsubscribe()}},[fe,ve]);const Y=(0,o.useRef)(!0);if((0,o.useEffect)(()=>{Y.current?Y.current=!1:_e(b.getTranslation(R))},[b,R]),!N.ready)throw new Promise(v=>{const ee=fe.subscribe({next(oe){oe.ready&&(ee.unsubscribe(),v())},error(oe){ee.unsubscribe(),ve(oe),v()}})});return{t:N.t}}},57032:($n,qt,e)=>{"use strict";e.d(qt,{F:()=>b,S:()=>Qe,a:()=>Oe,b:()=>p,c:()=>$,d:()=>a,e:()=>Te,f:()=>N,g:()=>Ne,h:()=>G,i:()=>Ge,j:()=>ge,k:()=>be,l:()=>re,m:()=>ie,n:()=>I,o:()=>xe,p:()=>c,q:()=>R,r:()=>_,s:()=>_e,t:()=>fe,u:()=>z,v:()=>ve,x:()=>Y});var o=e(2784),m=e(18473);function p(){const v=(0,m.Vt)("api-context");if(!v)throw new Error("API context is not available");const ee=v.atVersion(1);if(!ee)throw new Error("ApiContext v1 not available");return ee}function z(v){const oe=p().get(v);if(!oe)throw new Error(`No implementation available for ${v}`);return oe}function B(v){return function(oe){const Rt=sn=>{const me=p(),Zt={};for(const yt in v)if(v.hasOwnProperty(yt)){const mt=v[yt],It=me.get(mt);if(!It)throw new Error(`No implementation available for ${mt}`);Zt[yt]=It}return React.createElement(oe,{...sn,...Zt})},T=oe.displayName||oe.name||"Component";return Rt.displayName=`withApis(${T})`,Rt}}class i{constructor(ee){if(this.config=ee,!ee.id.split(".").flatMap(Rt=>Rt.split("-")).every(Rt=>Rt.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${ee.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function $(v){return new i(v)}var Qe=(v=>(v.SignedIn="SignedIn",v.SignedOut="SignedOut",v))(Qe||{});const Ne=$({id:"core.auth.google"}),a=$({id:"core.auth.github"}),xe=$({id:"core.auth.okta"}),Te=$({id:"core.auth.gitlab"}),ie=$({id:"core.auth.microsoft"}),G=$({id:"core.auth.onelogin"}),Ge=$({id:"core.auth.bitbucket"}),ge=$({id:"core.auth.bitbucket-server"}),be=$({id:"core.auth.atlassian"}),re=$({id:"core.alert"}),Oe=$({id:"core.analytics"}),I=$({id:"core.apptheme"}),c=$({id:"core.config"}),R=$({id:"core.discovery"}),_=$({id:"core.error"});var b=(v=>(v[v.None=0]="None",v[v.Active=1]="Active",v))(b||{});const N=$({id:"core.featureflags"}),_e=$({id:"core.fetch"}),fe=$({id:"core.identity"}),ve=$({id:"core.oauthrequest"}),Y=$({id:"core.storage"})},30705:($n,qt,e)=>{"use strict";e.d(qt,{CO:()=>Ft,IY:()=>re,NT:()=>N,Oi:()=>It,P4:()=>Tt,R5:()=>be,Rz:()=>oe,YO:()=>ct,fC:()=>$,ni:()=>Qe,qD:()=>G,rx:()=>Gt,tg:()=>mt,vJ:()=>an,x8:()=>yt,z$:()=>ie});var o=e(18473),m=e(2784),p=e(57032),z=e(73557);const B=(0,o.CT)("analytics-context"),i=()=>{const D=(0,m.useContext)(B);if(D===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const U=D.atVersion(1);if(U===void 0)throw new Error("No context found for version 1.");return U},$=D=>{const{attributes:U,children:O}=D,ne={...i(),...U},he=(0,o.EI)({1:ne});return m.createElement(B.Provider,{value:he},O)};function Qe(D,U){return"id"in D?{api:D,deps:{},factory:()=>U}:D}const Ne=(0,o.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),a="_ROUTABLE-EXTENSION-RENDERED";class xe{constructor(U,O={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=U,this.context=O,Ne.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{Ne.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...Ne.mostRecentGatheredNavigation,...Ne.mostRecentRoutableExtensionRender}),Ne.mostRecentGatheredNavigation=void 0,Ne.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),Ne.beforeUnloadRegistered=!0)}setContext(U){this.context=U}captureEvent(U,O,{value:M,attributes:ne}={}){const{_routeNodeType:he,...ze}=this.context;if(U===a){Ne.mostRecentGatheredNavigation&&(Ne.mostRecentRoutableExtensionRender={context:{...ze,extension:"App"}});return}if(Ne.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...Ne.mostRecentGatheredNavigation,...Ne.mostRecentRoutableExtensionRender})}catch(Ct){console.warn("Error during analytics event capture. %o",Ct)}Ne.mostRecentGatheredNavigation=void 0,Ne.mostRecentRoutableExtensionRender=void 0}if(U==="navigate"&&he==="gathered"&&ze.pluginId==="root"){Ne.mostRecentGatheredNavigation={action:U,subject:O,value:M,attributes:ne,context:ze};return}try{this.analyticsApi.captureEvent({action:U,subject:O,value:M,attributes:ne,context:ze})}catch(Ct){console.warn("Error during analytics event capture. %o",Ct)}}}function Te(){try{return(0,p.u)(p.a)}catch{return{captureEvent:()=>{}}}}function ie(){const D=(0,m.useRef)(null),U=i(),O=Te();function M(){return D.current===null&&(D.current=new xe(O)),D.current}const ne=M();return ne.setContext(U),ne}const G=()=>{const D=(0,o.Vt)("app-context");if(!D)throw new Error("App context is not available");const U=D.atVersion(1);if(!U)throw new Error("AppContext v1 not available");return U},Ge=(0,o.uW)("component-data-store",()=>new WeakMap),ge="__backstage_data";function be(D,U,O){var M;const ne=D;let he=(M=ne[ge])!=null?M:Ge.get(D);if(he||(he={map:new Map},Object.defineProperty(ne,ge,{enumerable:!1,configurable:!0,writable:!1,value:he}),Ge.set(D,he)),he.map.has(U)){const ze=D.displayName||D.name;throw new Error(`Attempted to attach duplicate data "${U}" to component "${ze}"`)}he.map.set(U,O)}function re(D,U){var O;if(!D)return;const M=D.type;if(!M)return;const ne=(O=M[ge])!=null?O:Ge.get(M);if(ne)return ne.map.get(U)}const Oe=(0,o.uW)("route-ref-type",()=>Symbol("route-ref-type"));var I=Object.defineProperty,c=(D,U,O)=>U in D?I(D,U,{enumerable:!0,configurable:!0,writable:!0,value:O}):D[U]=O,R=(D,U,O)=>(c(D,typeof U!="symbol"?U+"":U,O),O),_;class b{constructor(U,O){this.id=U,this.params=O,R(this,_,"absolute")}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}_=Oe;function N(D){var U;return new b(D.id,(U=D.params)!=null?U:[])}var _e=Object.defineProperty,fe=(D,U,O)=>U in D?_e(D,U,{enumerable:!0,configurable:!0,writable:!0,value:O}):D[U]=O,ve=(D,U,O)=>(fe(D,typeof U!="symbol"?U+"":U,O),O),Y;const v=/^\w+$/;class ee{constructor(U,O,M,ne){this.id=U,this.path=O,this.parent=M,this.params=ne,ve(this,Y,"sub")}toString(){return`routeRef{type=sub,id=${this.id}}`}}Y=Oe;function oe(D){const{id:U,path:O,parent:M}=D,ne=O.split("/").filter(Ct=>Ct.startsWith(":")).map(Ct=>Ct.substring(1)),he=[...M.params,...ne];if(M.params.some(Ct=>ne.includes(Ct)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!O.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${O}'`);if(O.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${O}'`);for(const Ct of ne)if(!v.test(Ct))throw new Error(`SubRouteRef path has invalid param, got '${Ct}'`);return new ee(U,O,M,he)}var Rt=Object.defineProperty,T=(D,U,O)=>U in D?Rt(D,U,{enumerable:!0,configurable:!0,writable:!0,value:O}):D[U]=O,sn=(D,U,O)=>(T(D,typeof U!="symbol"?U+"":U,O),O),me;class Zt{constructor(U,O,M){this.id=U,this.params=O,this.optional=M,sn(this,me,"external")}toString(){return`routeRef{type=external,id=${this.id}}`}}me=Oe;function yt(D){var U;return new Zt(D.id,(U=D.params)!=null?U:[],Boolean(D.optional))}function mt(D){const{pathname:U}=(0,z.TH)(),O=(0,o.Vt)("routing-context");if(!O)throw new Error("Routing context is not available");const M=O.atVersion(1),ne=(0,m.useMemo)(()=>M&&M.resolve(D,{pathname:U}),[M,D,U]);if(!O)throw new Error("useRouteRef used outside of routing context");if(!M)throw new Error("RoutingContext v1 not available");const he="optional"in D&&D.optional;if(!ne&&!he)throw new Error(`No path for ${D}`);return ne}function It(D){return(0,z.UO)()}var We=Object.defineProperty,Pt=(D,U,O)=>U in D?We(D,U,{enumerable:!0,configurable:!0,writable:!0,value:O}):D[U]=O,ot=(D,U,O)=>(Pt(D,typeof U!="symbol"?U+"":U,O),O);class zt extends m.Component{constructor(){super(...arguments),ot(this,"state",{error:void 0}),ot(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(U){return{error:U}}render(){const{error:U}=this.state,{app:O,plugin:M}=this.props,{ErrorBoundaryFallback:ne}=O.getComponents();return U?m.createElement(ne,{error:U,resetError:this.handleErrorReset,plugin:M}):this.props.children}}function Tt(D){const{component:U,mountPoint:O,name:M}=D;return ct({component:{lazy:()=>U().then(ne=>{const he=Ct=>{const Ye=ie();try{mt(O)}catch(Mt){if(typeof Mt=="object"&&Mt!==null){const{message:rn}=Mt;if(typeof rn=="string"&&rn.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${O} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw Mt}return(0,m.useEffect)(()=>{Ye.captureEvent(a,"")},[Ye]),m.createElement(ne,{...Ct})},ze=M||ne.displayName||ne.name||"LazyComponent";return he.displayName=`RoutableExtension(${ze})`,he},ne=>ze=>{const Ct=G(),{BootErrorPage:Ye}=Ct.getComponents();return m.createElement(Ye,{step:"load-chunk",error:ne})})},data:{"core.mountPoint":O},name:M})}function Ft(D){const{component:U,name:O}=D;return ct({component:U,name:O})}function ct(D){const{data:U={},name:O}=D;O||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let M;if("lazy"in D.component){const he=D.component.lazy;M=(0,m.lazy)(()=>he().then(ze=>({default:ze})))}else M=D.component.sync;const ne=O||M.displayName||M.name||"Component";return{expose(he){const ze=Ct=>{const Ye=G(),{Progress:Mt}=Ye.getComponents(),rn=U==null?void 0:U["core.mountPoint"];return m.createElement(m.Suspense,{fallback:m.createElement(Mt,null)},m.createElement(zt,{app:Ye,plugin:he},m.createElement($,{attributes:{pluginId:he.getId(),...O&&{extension:O},...rn&&{routeRef:rn.id}}},m.createElement(M,{...Ct}))))};be(ze,"core.plugin",he),be(ze,"core.extensionName",O);for(const[Ct,Ye]of Object.entries(U))be(ze,Ct,Ye);return ze.displayName=`Extension(${ne})`,ze}}}function ht(D,U,O,M){return m.Children.toArray(D).flatMap(ne=>{if(!(0,m.isValidElement)(ne))return[];if(ne.type===m.Fragment)return ht(ne.props.children,U,O,M);if(re(ne,"core.featureFlagged")){const he=ne.props;return("with"in he?U.isActive(he.with):!U.isActive(he.without))?ht(ne.props.children,U,O,M):[]}if(O===void 0||O(ne))return[ne];if(M)throw new Error(M);return ht(ne.props.children,U,O,M)})}class $t{constructor(U,O){this.node=U,this.featureFlagsApi=O}selectByComponentData(U){const O=ht(this.node,this.featureFlagsApi,M=>re(M,U.key)!==void 0,U.withStrictError);return new $t(O,this.featureFlagsApi)}findComponentData(U){return ht(this.node,this.featureFlagsApi,M=>re(M,U.key)!==void 0).map(M=>re(M,U.key)).filter(M=>M!==void 0)}getElements(){return ht(this.node,this.featureFlagsApi)}}function an(D,U,O=[]){const M=(0,p.u)(p.f),ne=new $t(D,M);return(0,m.useMemo)(()=>U(ne),[D,...O])}class St{constructor(U){this.config=U}getId(){return this.config.id}getApis(){var U;return(U=this.config.apis)!=null?U:[]}getFeatureFlags(){var U,O;return(O=(U=this.config.featureFlags)==null?void 0:U.slice())!=null?O:[]}get routes(){var U;return(U=this.config.routes)!=null?U:{}}get externalRoutes(){var U;return(U=this.config.externalRoutes)!=null?U:{}}provide(U){return U.expose(this)}toString(){return`plugin{${this.config.id}}`}}function Gt(D){return new St(D)}},32272:($n,qt,e)=>{"use strict";e.d(qt,{BD:()=>z,SP:()=>_,VL:()=>ve,VZ:()=>p,dR:()=>re});var o=e(24852),m=e.n(o);function p(Y){if(typeof Y!="object"||Y===null||Array.isArray(Y))return!1;const v=Y;return!(typeof v.name!="string"||v.name===""||typeof v.message!="string")}function z(Y){if(typeof Y!="object"||Y===null||Array.isArray(Y))throw new Error(`Encountered invalid error, not an object, got '${Y}'`);const v=Y;if(typeof v.name!="string"||v.name==="")throw new Error(`Encountered error object without a name, got '${Y}'`);if(typeof v.message!="string")throw new Error(`Encountered error object without a message, got '${Y}'`)}function B(Y,v){const oe={name:"Unknown",message:"<no reason given>",...serializeError$1(Y)};return v!=null&&v.includeStack||delete oe.stack,oe}function i(Y){const v=(0,o.deserializeError)(Y);return Y.stack||(v.stack=void 0),v}function $(Y){if(p(Y)){const v=String(Y);return v!=="[object Object]"?v:`${Y.name}: ${Y.message}`}return`unknown error '${Y}'`}var Qe=Object.defineProperty,Ne=(Y,v,ee)=>v in Y?Qe(Y,v,{enumerable:!0,configurable:!0,writable:!0,value:ee}):Y[v]=ee,a=(Y,v,ee)=>(Ne(Y,typeof v!="symbol"?v+"":v,ee),ee);class xe extends Error{constructor(v,ee){var oe;let Rt=v;if(ee!==void 0){const T=$(ee);Rt?Rt+=`; caused by ${T}`:Rt=`caused by ${T}`}super(Rt),a(this,"cause"),(oe=Error.captureStackTrace)==null||oe.call(Error,this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=p(ee)?ee:void 0}}var Te=Object.defineProperty,ie=(Y,v,ee)=>v in Y?Te(Y,v,{enumerable:!0,configurable:!0,writable:!0,value:ee}):Y[v]=ee,G=(Y,v,ee)=>(ie(Y,typeof v!="symbol"?v+"":v,ee),ee);class Ge extends null{constructor(){super(...arguments),G(this,"name","InputError")}}class ge extends null{constructor(){super(...arguments),G(this,"name","AuthenticationError")}}class be extends null{constructor(){super(...arguments),G(this,"name","NotAllowedError")}}class re extends xe{constructor(){super(...arguments),G(this,"name","NotFoundError")}}class Oe extends null{constructor(){super(...arguments),G(this,"name","ConflictError")}}class I extends null{constructor(){super(...arguments),G(this,"name","NotModifiedError")}}class c extends null{constructor(){super(...arguments),G(this,"name","NotImplementedError")}}class R extends null{}class _ extends xe{constructor(v,ee){super(v,ee),this.name=p(ee)?ee.name:"Error"}}async function b(Y){var v;try{const ee=await Y.text();if(ee){if((v=Y.headers.get("content-type"))!=null&&v.startsWith("application/json"))try{const oe=JSON.parse(ee);if(oe.error&&oe.response)return oe}catch{}return{error:{name:"Error",message:`Request failed with status ${Y.status} ${Y.statusText}, ${ee}`},response:{statusCode:Y.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${Y.status} ${Y.statusText}`},response:{statusCode:Y.status}}}var N=Object.defineProperty,_e=(Y,v,ee)=>v in Y?N(Y,v,{enumerable:!0,configurable:!0,writable:!0,value:ee}):Y[v]=ee,fe=(Y,v,ee)=>(_e(Y,typeof v!="symbol"?v+"":v,ee),ee);class ve extends Error{constructor(v){super(v.message),fe(this,"response"),fe(this,"body"),fe(this,"cause"),this.name="ResponseError",this.response=v.response,this.body=v.data,this.cause=v.cause}static async fromResponse(v){const ee=await b(v),oe=ee.response.statusCode||v.status,Rt=ee.error.name||v.statusText,T=`Request failed with ${oe} ${Rt}`,sn=i(ee.error);return new ve({message:T,response:v,data:ee,cause:sn})}}},49462:($n,qt,e)=>{"use strict";e.d(qt,{Om:()=>i,ae:()=>Oe,nW:()=>c,q3:()=>I,zN:()=>re});var o=e(57032),m=e(30705),p=e(1854),z=e(73250),B=e(2784);const i=(0,o.c)({id:"core.scmauth"});var $=(R,_,b)=>{if(!_.has(R))throw TypeError("Cannot "+b)},Qe=(R,_,b)=>($(R,_,"read from private field"),b?b.call(R):_.get(R)),Ne=(R,_,b)=>{if(_.has(R))throw TypeError("Cannot add the same private member more than once");_ instanceof WeakSet?_.add(R):_.set(R,b)},a=(R,_,b,N)=>($(R,_,"write to private field"),N?N.call(R,b):_.set(R,b),b),xe,Te,ie,G,Ge;class ge{constructor(_){Ne(this,xe,void 0),a(this,xe,_)}async getCredentials(_){const b=new URL(_.url),N=Qe(this,xe).find(_e=>_e.isUrlSupported(b));if(!N)throw new Error(`No auth provider available for '${_.url}', see https://backstage.io/link?scm-auth`);return N.getCredentials(_)}}xe=new WeakMap;const be=class vr{constructor(_,b,N,_e){Ne(this,Te,void 0),Ne(this,ie,void 0),Ne(this,G,void 0),Ne(this,Ge,void 0),a(this,Te,b),a(this,ie,N),a(this,G,_e),a(this,Ge,_)}static createDefaultApiFactory(){return(0,m.ni)({api:i,deps:{github:o.d,gitlab:o.e,azure:o.m,bitbucket:o.i},factory:({github:_,gitlab:b,azure:N,bitbucket:_e})=>vr.merge(vr.forGithub(_),vr.forGitlab(b),vr.forAzure(N),vr.forBitbucket(_e))})}static forAuthApi(_,b){return new vr("generic",_,b.host,b.scopeMapping)}static forGithub(_,b){var N;const _e=(N=b==null?void 0:b.host)!=null?N:"github.com";return new vr("github",_,_e,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(_,b){var N;const _e=(N=b==null?void 0:b.host)!=null?N:"gitlab.com";return new vr("gitlab",_,_e,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(_,b){var N;const _e=(N=b==null?void 0:b.host)!=null?N:"dev.azure.com";return new vr("azure",_,_e,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(_,b){var N;const _e=(N=b==null?void 0:b.host)!=null?N:"bitbucket.org";return new vr("bitbucket",_,_e,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(..._){return new ge(_)}isUrlSupported(_){return _.host===Qe(this,ie)}getAdditionalScopesForProvider(_){var b,N;return!(_!=null&&_.customScopes)||Qe(this,Ge)==="generic"?[]:(N=(b=_.customScopes)==null?void 0:b[Qe(this,Ge)])!=null?N:[]}async getCredentials(_){const{url:b,additionalScope:N,..._e}=_,fe=Qe(this,G).default.slice();N!=null&&N.repoWrite&&fe.push(...Qe(this,G).repoWrite);const ve=this.getAdditionalScopesForProvider(N);ve.length&&fe.push(...ve);const Y=[...new Set(fe)],v=await Qe(this,Te).getAccessToken(Y,_e);return{token:v,headers:{Authorization:`Bearer ${v}`}}}};Te=new WeakMap,ie=new WeakMap,G=new WeakMap,Ge=new WeakMap;let re=be;class Oe{static fromConfig(_){return p.Lx.fromConfig(_)}}const I=(0,o.c)({id:"integration.scmintegrations"}),c=R=>{var _;const{type:b}=R,N=(0,m.qD)(),_e=z.Z,fe=b&&(_=N.getSystemIcon(b))!=null?_:_e;return B.createElement(fe,null)}},1854:($n,qt,e)=>{"use strict";e.d(qt,{BT:()=>On,Lx:()=>Ya,MY:()=>st,ah:()=>q});var o=e(82717),m=e.n(o),p=e(76635),z=e.n(p),B=e(96279),i=e.n(B),$=e(69292),Qe=e(87195),Ne=e(26228),a=e(48834).Buffer;function xe(g){const l=new URL("http://example.com");return l.host=g,l.host===g}function Te(g){try{return new URL(g),!0}catch{return!1}}function ie(g,l){return{list(){return g},byUrl(y){try{const K=typeof y=="string"?new URL(y):y;return g.find(Re=>l(Re)===K.host)}catch{return}},byHost(y){return g.find(K=>l(K)===y)}}}function G(g){const{url:l,base:y,lineNumber:K}=g;try{return new URL(l),l}catch{}let Re;if(l.startsWith("/")){const{filepath:lt}=m()(y);Re=new URL(y);const Dt=(0,p.trimEnd)(Re.pathname.substring(0,Re.pathname.length-lt.length),"/");Re.pathname=`${Dt}${l}`}else Re=new URL(l,y);return Re.search=new URL(y).search,K&&(Re.hash=`L${K}`),Re.toString()}const Ge="amazonaws.com";function ge(g){var l;const y=g.getOptionalString("endpoint"),K=(l=g.getOptionalBoolean("s3ForcePathStyle"))!=null?l:!1;let Re,lt;if(y){try{const Kn=new URL(y);Re=Kn.host,lt=Kn.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${y}' is not a valid URL`)}if(lt!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${y}'`)}else Re=Ge;const Dt=g.getOptionalString("accessKeyId"),Xt=g.getOptionalString("secretAccessKey"),Sn=g.getOptionalString("roleArn"),Fn=g.getOptionalString("externalId");return{host:Re,endpoint:y,s3ForcePathStyle:K,accessKeyId:Dt,secretAccessKey:Xt,roleArn:Sn,externalId:Fn}}function be(g){const l=g.map(ge);return l.some(y=>y.host===Ge)||l.push({host:Ge}),l}var re=Object.defineProperty,Oe=(g,l,y)=>l in g?re(g,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[l]=y,I=(g,l,y)=>(Oe(g,typeof l!="symbol"?l+"":l,y),y);const c=class{constructor(l){this.integrationConfig=l}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){return G(l)}resolveEditUrl(l){return l}};I(c,"factory",({config:g})=>{var l;const y=be((l=g.getOptionalConfigArray("integrations.awsS3"))!=null?l:[]);return ie(y.map(K=>new c(K)),K=>K.config.host)});let R=c;var _=(g,l,y)=>{if(!l.has(g))throw TypeError("Cannot "+y)},b=(g,l,y)=>(_(g,l,"read from private field"),y?y.call(g):l.get(g)),N=(g,l,y)=>{if(l.has(g))throw TypeError("Cannot add the same private member more than once");l instanceof WeakSet?l.add(g):l.set(g,y)},_e=(g,l,y,K)=>(_(g,l,"write to private field"),K?K.call(g,y):l.set(g,y),y),fe,ve,Y,v,ee,oe,Rt;const T="GB",sn=class Gi{constructor(l,y,K,Re,lt,Dt){N(this,fe,void 0),N(this,ve,void 0),N(this,Y,void 0),N(this,v,void 0),N(this,ee,void 0),N(this,oe,void 0),N(this,Rt,(...Xt)=>{const Sn=new URL(b(this,fe));return Sn.pathname=Xt.map(Fn=>encodeURIComponent(Fn)).join("/"),Sn}),_e(this,fe,l),_e(this,ve,y),_e(this,Y,K),_e(this,v,Re),_e(this,ee,lt),_e(this,oe,Dt)}static fromRepoUrl(l){var y;const K=new URL(l);let Re,lt,Dt;const Xt=K.pathname.split("/").map(Oa=>decodeURIComponent(Oa));if(Xt[2]==="_git"?(Re=Xt[1],lt=Dt=Xt[3]):Xt[3]==="_git"?(Re=Xt[1],lt=Xt[2],Dt=Xt[4]):Xt[4]==="_git"&&(Re=`${Xt[1]}/${Xt[2]}`,lt=Xt[3],Dt=Xt[5]),!Re||!lt||!Dt)throw new Error("Azure URL must point to a git repository");const Sn=(y=K.searchParams.get("path"))!=null?y:void 0;let Fn;const Kn=K.searchParams.get("version");if(Kn){if(Kn.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");Fn=Kn.slice(2)}return new Gi(K.origin,Re,lt,Dt,Sn,Fn)}toRepoUrl(){let l;return b(this,Y)===b(this,v)?l=b(this,Rt).call(this,b(this,ve),"_git",b(this,v)):l=b(this,Rt).call(this,b(this,ve),b(this,Y),"_git",b(this,v)),b(this,ee)&&l.searchParams.set("path",b(this,ee)),b(this,oe)&&l.searchParams.set("version",T+b(this,oe)),l.toString()}toFileUrl(){if(!b(this,ee))throw new Error("Azure URL must point to a specific path to be able to download a file");const l=b(this,Rt).call(this,b(this,ve),b(this,Y),"_apis","git","repositories",b(this,v),"items");return l.searchParams.set("api-version","6.0"),l.searchParams.set("path",b(this,ee)),b(this,oe)&&l.searchParams.set("version",b(this,oe)),l.toString()}toArchiveUrl(){const l=b(this,Rt).call(this,b(this,ve),b(this,Y),"_apis","git","repositories",b(this,v),"items");return l.searchParams.set("recursionLevel","full"),l.searchParams.set("download","true"),l.searchParams.set("api-version","6.0"),b(this,ee)&&l.searchParams.set("scopePath",b(this,ee)),b(this,oe)&&l.searchParams.set("version",b(this,oe)),l.toString()}toCommitsUrl(){const l=b(this,Rt).call(this,b(this,ve),b(this,Y),"_apis","git","repositories",b(this,v),"commits");return l.searchParams.set("api-version","6.0"),b(this,oe)&&l.searchParams.set("searchCriteria.itemVersion.version",b(this,oe)),l.toString()}getOwner(){return b(this,ve)}getProject(){return b(this,Y)}getRepo(){return b(this,v)}getPath(){return b(this,ee)}getRef(){return b(this,oe)}};fe=new WeakMap,ve=new WeakMap,Y=new WeakMap,v=new WeakMap,ee=new WeakMap,oe=new WeakMap,Rt=new WeakMap;let me=sn;const Zt="dev.azure.com",yt=["clientId","clientSecret","tenantId","personalAccessToken"],mt=new Map([["ClientSecret",["clientId","clientSecret","tenantId"]],["ManagedIdentity",["clientId"]],["PersonalAccessToken",["personalAccessToken"]]]);function It(g){for(const l of mt.entries()){const[y,K]=l,Re=yt.filter(lt=>!K.includes(lt));if(K.every(lt=>g[lt]!==void 0)&&Re.every(lt=>g[lt]===void 0))return{kind:y,organizations:g.organizations,...K.reduce((lt,Dt)=>(lt[Dt]=g[Dt],lt),{})}}throw new Error("is not a valid credential")}function We(g){var l,y,K,Re;const lt=(l=g.getOptionalString("host"))!=null?l:Zt;let Dt=(y=g.getOptionalConfigArray("credentials"))==null?void 0:y.map(Fn=>({organizations:Fn.getOptionalStringArray("organizations"),personalAccessToken:Fn.getOptionalString("personalAccessToken"),tenantId:Fn.getOptionalString("tenantId"),clientId:Fn.getOptionalString("clientId"),clientSecret:Fn.getOptionalString("clientSecret")}));const Xt=g.getOptionalString("token");if(g.getOptional("credential")!==void 0&&g.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.");if(g.getOptional("token")!==void 0&&g.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.");if(Xt!==void 0){const Fn=[{personalAccessToken:Xt}];Dt=(K=Dt==null?void 0:Dt.concat(Fn))!=null?K:Fn}if(g.getOptional("credential")!==void 0){const Fn=[{organizations:g.getOptionalStringArray("credential.organizations"),token:g.getOptionalString("credential.token"),tenantId:g.getOptionalString("credential.tenantId"),clientId:g.getOptionalString("credential.clientId"),clientSecret:g.getOptionalString("credential.clientSecret")}];Dt=(Re=Dt==null?void 0:Dt.concat(Fn))!=null?Re:Fn}if(!xe(lt))throw new Error(`Invalid Azure integration config, '${lt}' is not a valid host`);let Sn;if(Dt!==void 0){const Fn=Dt==null?void 0:Dt.reduce((Kn,Oa,za)=>{let ir;try{It(Oa)}catch(ar){ir=ar.message}return ir!==void 0&&Kn.push(`credential at position ${za+1} ${ir}`),Kn},Array.of()).concat(Object.entries(Dt.filter(Kn=>Kn.organizations!==void 0&&Kn.organizations.length>0).reduce((Kn,Oa,za)=>{var ir;return(ir=Oa.organizations)==null||ir.forEach(ar=>{Kn[ar]||(Kn[ar]=[]),Kn[ar].push(za+1)}),Kn},{})).filter(([Kn,Oa])=>Oa.length>1).reduce((Kn,[Oa,za])=>(Kn.push(`organization ${Oa} is specified multiple times in credentials at positions ${za.slice(0,za.length-1).join(", ")} and ${za[za.length-1]}`),Kn),Array.of()));if((Fn==null?void 0:Fn.length)>0)throw new Error(`Invalid Azure integration config for ${lt}: ${Fn.join("; ")}`);if(Sn=Dt.map(Kn=>It(Kn)),Sn.some(Kn=>Kn.kind!=="PersonalAccessToken")&&lt!==Zt)throw new Error(`Invalid Azure integration config for ${lt}, only personal access tokens can be used with hosts other than ${Zt}`);if(Sn.filter(Kn=>Kn.organizations===void 0||Kn.organizations.length===0).length>1)throw new Error(`Invalid Azure integration config for ${lt}, you cannot specify multiple credentials without organizations`)}return{host:lt,credentials:Sn}}function Pt(g){const l=g.map(We);return l.some(y=>y.host===Zt)||l.push({host:Zt}),l}var ot=Object.defineProperty,zt=(g,l,y)=>l in g?ot(g,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[l]=y,Tt=(g,l,y)=>(zt(g,typeof l!="symbol"?l+"":l,y),y);const Ft=class{constructor(l){this.integrationConfig=l}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){var y;const{url:K,base:Re}=l;if(Te(K))return K;try{const lt=me.fromRepoUrl(Re),Dt=new URL(Re),Xt=new URL(`https://a.com${(y=lt.getPath())!=null?y:""}`),Sn=new URL(K,Xt).pathname;return Dt.searchParams.set("path",Sn),l.lineNumber&&(Dt.searchParams.set("line",String(l.lineNumber)),Dt.searchParams.set("lineEnd",String(l.lineNumber+1)),Dt.searchParams.set("lineStartColumn","1"),Dt.searchParams.set("lineEndColumn","1")),Dt.toString()}catch{return new URL(K,Re).toString()}}resolveEditUrl(l){return l}};Tt(Ft,"factory",({config:g})=>{var l;const y=Pt((l=g.getOptionalConfigArray("integrations.azure"))!=null?l:[]);return ie(y.map(K=>new Ft(K)),K=>K.config.host)});let ct=Ft;function ht(g){return me.fromRepoUrl(g).toFileUrl()}function $t(g){return me.fromRepoUrl(g).toArchiveUrl()}function an(g){return me.fromRepoUrl(g).toCommitsUrl()}var St=Object.defineProperty,Gt=(g,l,y)=>l in g?St(g,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[l]=y,D=(g,l,y)=>(Gt(g,typeof l!="symbol"?l+"":l,y),y);const U=null;class O{constructor(l){this.credential=l,D(this,"azureDevOpsScope","499b84ac-1321-427f-aa17-267ca6975798/.default"),D(this,"cached")}static fromAzureDevOpsCredential(l){switch(l.kind){case"PersonalAccessToken":return O.fromPersonalAccessTokenCredential(l);case"ClientSecret":return O.fromTokenCredential(new ClientSecretCredential(l.tenantId,l.clientId,l.clientSecret));case"ManagedIdentity":return O.fromTokenCredential(new ManagedIdentityCredential(l.clientId));default:throw new Error(`Credential kind '${l.kind}' not supported`)}}static fromTokenCredential(l){return new O(l)}static fromPersonalAccessTokenCredential(l){return new O(l.personalAccessToken)}async getCredentials(){if(this.cached===void 0||this.cached.expiresAt!==void 0&&Date.now()>this.cached.expiresAt)if(typeof this.credential=="string")this.cached={headers:{Authorization:`Basic ${btoa(`:${this.credential}`)}`},type:"pat",token:this.credential};else{const l=await this.credential.getToken(this.azureDevOpsScope);if(!l)throw new Error("Failed to retrieve access token");this.cached={expiresAt:l.expiresOnTimestamp-U,headers:{Authorization:`Bearer ${l.token}`},type:"bearer",token:l.token}}return this.cached}}class M{constructor(l){this.providers=l}static fromIntegrations(l){const y=l.azure.list().reduce((K,Re)=>{var lt;return(lt=Re.config.credentials)==null||lt.forEach(Dt=>{var Xt;if(Dt.organizations===void 0||Dt.organizations.length===0)K.get(Re.config.host)===void 0&&K.set(Re.config.host,O.fromAzureDevOpsCredential(Dt));else{const Sn=O.fromAzureDevOpsCredential(Dt);(Xt=Dt.organizations)==null||Xt.forEach(Fn=>{K.set(`${Re.config.host}/${Fn}`,Sn)})}}),Re.config.host==="dev.azure.com"&&K.get(Re.config.host)===void 0&&K.set(Re.config.host,O.fromTokenCredential(new DefaultAzureCredential)),K},new Map);return new M(y)}forAzureDevOpsServerOrganization(l){const y=l.pathname.split("/").filter(K=>K!=="");if(l.host!=="dev.azure.com"&&y.length>0){if(y[0]!=="tfs")return this.providers.get(`${l.host}/${y[0]}`);if(y[0]==="tfs"&&y.length>1)return this.providers.get(`${l.host}/${y[1]}`)}}forAzureDevOpsOrganization(l){const y=l.pathname.split("/").filter(K=>K!=="");if(l.host==="dev.azure.com"&&y.length>0)return this.providers.get(`${l.host}/${y[0]}`)}forHost(l){return this.providers.get(l.host)}async getCredentials(l){var y,K;const Re=new URL(l.url),lt=(K=(y=this.forAzureDevOpsOrganization(Re))!=null?y:this.forAzureDevOpsServerOrganization(Re))!=null?K:this.forHost(Re);if(lt!==void 0)return lt.getCredentials(l)}}async function ne(g,l){var y;const K=l?{...l}:{},Re=(y=g.credentials)==null?void 0:y.filter(lt=>lt.organizations===void 0||lt.organizations.length===0)[0];if(Re){const Dt=await O.fromAzureDevOpsCredential(Re).getCredentials();return{headers:{...Dt==null?void 0:Dt.headers,...K}}}return{headers:K}}const he="bitbucket.org",ze="https://api.bitbucket.org/2.0";function Ct(g){var l;const y=(l=g.getOptionalString("host"))!=null?l:he;let K=g.getOptionalString("apiBaseUrl");const Re=g.getOptionalString("token"),lt=g.getOptionalString("username"),Dt=g.getOptionalString("appPassword");if(!xe(y))throw new Error(`Invalid Bitbucket integration config, '${y}' is not a valid host`);return K?K=(0,p.trimEnd)(K,"/"):y===he?K=ze:K=`https://${y}/rest/api/1.0`,{host:y,apiBaseUrl:K,token:Re,username:lt,appPassword:Dt}}function Ye(g){const l=g.map(Ct);return l.some(y=>y.host===he)||l.push({host:he,apiBaseUrl:ze}),l}var Mt=Object.defineProperty,rn=(g,l,y)=>l in g?Mt(g,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[l]=y,Wt=(g,l,y)=>(rn(g,typeof l!="symbol"?l+"":l,y),y);const ft=class{constructor(l){this.integrationConfig=l}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const y=G(l);if(!l.lineNumber)return y;const K=new URL(y);return this.integrationConfig.host==="bitbucket.org"?K.hash=`lines-${l.lineNumber}`:K.hash=`${l.lineNumber}`,K.toString()}resolveEditUrl(l){const y=m()(l),K=new URL(l);return K.searchParams.set("mode","edit"),K.searchParams.set("spa","0"),K.searchParams.set("at",y.ref),K.toString()}};Wt(ft,"factory",({config:g})=>{var l,y,K;const Re=Ye((K=g.getOptionalConfigArray("integrations.bitbucket"))!=null?K:[...(l=g.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?l:[],...(y=g.getOptionalConfigArray("integrations.bitbucketServer"))!=null?y:[]]);return ie(Re.map(lt=>new ft(lt)),lt=>lt.config.host)});let we=ft;async function rt(g,l){const{name:y,owner:K,resource:Re}=parseGitUrl(g),lt=Re==="bitbucket.org";let Dt=lt?`${l.apiBaseUrl}/repositories/${K}/${y}`:`${l.apiBaseUrl}/projects/${K}/repos/${y}/default-branch`,Xt=await fetch(Dt,le(l));if(Xt.status===404&&!lt&&(Dt=`${l.apiBaseUrl}/projects/${K}/repos/${y}/branches/default`,Xt=await fetch(Dt,le(l))),!Xt.ok){const Fn=`Failed to retrieve default branch from ${Dt}, ${Xt.status} ${Xt.statusText}`;throw new Error(Fn)}let Sn;if(lt)Sn=(await Xt.json()).mainbranch.name;else{const{displayId:Fn}=await Xt.json();Sn=Fn}if(!Sn)throw new Error(`Failed to read default branch from ${Dt}. Response ${Xt.status} ${Xt.json()}`);return Sn}async function xt(g,l){const{name:y,owner:K,ref:Re,protocol:lt,resource:Dt,filepath:Xt}=parseGitUrl(g),Sn=Dt==="bitbucket.org";let Fn=Re;Fn||(Fn=await rt(g,l));const Kn=Xt?`&path=${encodeURIComponent(decodeURIComponent(Xt))}`:"";return Sn?`${lt}://${Dt}/${K}/${y}/get/${Fn}.tar.gz`:`${l.apiBaseUrl}/projects/${K}/repos/${y}/archive?format=tgz&at=${Fn}&prefix=${K}-${y}${Kn}`}function kt(g,l){try{const{owner:y,name:K,ref:Re,filepathtype:lt,filepath:Dt}=parseGitUrl(g);if(!y||!K||lt!=="browse"&&lt!=="raw"&&lt!=="src")throw new Error("Invalid Bitbucket URL or file path");const Xt=Dt.replace(/^\//,"");if(l.host==="bitbucket.org"){if(!Re)throw new Error("Invalid Bitbucket URL or file path");return`${l.apiBaseUrl}/repositories/${y}/${K}/src/${Re}/${Xt}`}return`${l.apiBaseUrl}/projects/${y}/repos/${K}/raw/${Xt}?at=${Re}`}catch(y){throw new Error(`Incorrect URL: ${g}, ${y}`)}}function le(g){const l={};if(g.token)l.Authorization=`Bearer ${g.token}`;else if(g.username&&g.appPassword){const y=a.from(`${g.username}:${g.appPassword}`,"utf8");l.Authorization=`Basic ${y.toString("base64")}`}return{headers:l}}const Ue="bitbucket.org",Lt="https://api.bitbucket.org/2.0";function Yt(g){const l=Ue,y=Lt,K=g.getString("username"),Re=g.getString("appPassword");return{host:l,apiBaseUrl:y,username:K,appPassword:Re}}function se(g){const l=g.map(Yt);return l.length===0&&l.push({host:Ue,apiBaseUrl:Lt}),l}var Ze=Object.defineProperty,pe=(g,l,y)=>l in g?Ze(g,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[l]=y,Me=(g,l,y)=>(pe(g,typeof l!="symbol"?l+"":l,y),y);const nt=class{constructor(l){this.integrationConfig=l}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const y=G(l);if(l.lineNumber){const K=new URL(y);return K.hash=`lines-${l.lineNumber}`,K.toString()}return y}resolveEditUrl(l){const y=m()(l),K=new URL(l);return K.searchParams.set("mode","edit"),K.searchParams.set("at",y.ref),K.toString()}};Me(nt,"factory",({config:g})=>{var l;const y=se((l=g.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?l:[]);return ie(y.map(K=>new nt(K)),K=>K.config.host)});let pt=nt;async function Bt(g,l){const{name:y,owner:K}=parseGitUrl(g),Re=`${l.apiBaseUrl}/repositories/${K}/${y}`,lt=await fetch(Re,Le(l));if(!lt.ok){const Sn=`Failed to retrieve default branch from ${Re}, ${lt.status} ${lt.statusText}`;throw new Error(Sn)}const Xt=(await lt.json()).mainbranch.name;if(!Xt)throw new Error(`Failed to read default branch from ${Re}. Response ${lt.status} ${lt.json()}`);return Xt}async function tn(g,l){const{name:y,owner:K,ref:Re,protocol:lt,resource:Dt}=parseGitUrl(g);let Xt=Re;return Xt||(Xt=await Bt(g,l)),`${lt}://${Dt}/${K}/${y}/get/${Xt}.tar.gz`}function Ce(g,l){try{const{owner:y,name:K,ref:Re,filepathtype:lt,filepath:Dt}=parseGitUrl(g);if(!y||!K||lt!=="src"&&lt!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const Xt=Dt.replace(/^\//,"");if(!Re)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${l.apiBaseUrl}/repositories/${y}/${K}/src/${Re}/${Xt}`}catch(y){throw new Error(`Incorrect URL: ${g}, ${y}`)}}function Le(g){const l={};if(g.username&&g.appPassword){const y=a.from(`${g.username}:${g.appPassword}`,"utf8");l.Authorization=`Basic ${y.toString("base64")}`}return{headers:l}}function P(g){const l=g.getString("host");let y=g.getOptionalString("apiBaseUrl");const K=g.getOptionalString("token"),Re=g.getOptionalString("username"),lt=g.getOptionalString("password");if(!xe(l))throw new Error(`Invalid Bitbucket Server integration config, '${l}' is not a valid host`);return y?y=(0,p.trimEnd)(y,"/"):y=`https://${l}/rest/api/1.0`,{host:l,apiBaseUrl:y,token:K,username:Re,password:lt}}function W(g){return g.map(P)}var J=Object.defineProperty,it=(g,l,y)=>l in g?J(g,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[l]=y,ut=(g,l,y)=>(it(g,typeof l!="symbol"?l+"":l,y),y);const Et=class{constructor(l){this.integrationConfig=l}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const y=G(l);if(l.lineNumber){const K=new URL(y);return K.hash=l.lineNumber.toString(),K.toString()}return y}resolveEditUrl(l){return l.includes("?")?l.substring(0,l.indexOf("?")):l}};ut(Et,"factory",({config:g})=>{var l;const y=W((l=g.getOptionalConfigArray("integrations.bitbucketServer"))!=null?l:[]);return ie(y.map(K=>new Et(K)),K=>K.config.host)});let Jt=Et;async function mn(g,l){const{name:y,owner:K}=parseGitUrl(g);let Re=`${l.apiBaseUrl}/projects/${K}/repos/${y}/default-branch`,lt=await fetch(Re,Vn(l));if(lt.status===404&&(Re=`${l.apiBaseUrl}/projects/${K}/repos/${y}/branches/default`,lt=await fetch(Re,Vn(l))),!lt.ok){const Sn=`Failed to retrieve default branch from ${Re}, ${lt.status} ${lt.statusText}`;throw new Error(Sn)}const{displayId:Dt}=await lt.json(),Xt=Dt;if(!Xt)throw new Error(`Failed to read default branch from ${Re}. Response ${lt.status} ${lt.json()}`);return Xt}async function An(g,l){const{name:y,owner:K,ref:Re,filepath:lt}=parseGitUrl(g);let Dt=Re;Dt||(Dt=await mn(g,l));const Xt=lt?`&path=${encodeURIComponent(decodeURIComponent(lt))}`:"";return`${l.apiBaseUrl}/projects/${K}/repos/${y}/archive?format=tgz&at=${Dt}&prefix=${K}-${y}${Xt}`}function vn(g,l){try{const{owner:y,name:K,ref:Re,filepathtype:lt,filepath:Dt}=parseGitUrl(g);if(!y||!K||lt!=="browse"&&lt!=="raw"&&lt!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const Xt=Dt.replace(/^\//,"");return`${l.apiBaseUrl}/projects/${y}/repos/${K}/raw/${Xt}?at=${Re}`}catch(y){throw new Error(`Incorrect URL: ${g}, ${y}`)}}function Vn(g){const l={};if(g.token)l.Authorization=`Bearer ${g.token}`;else if(g.username&&g.password){const y=a.from(`${g.username}:${g.password}`,"utf8");l.Authorization=`Basic ${y.toString("base64")}`}return{headers:l}}function Mn(g){const l=g.getString("host");let y=g.getOptionalString("baseUrl"),K=g.getOptionalString("cloneUrl"),Re=g.getOptionalString("gitilesBaseUrl");const lt=g.getOptionalString("username"),Dt=g.getOptionalString("password");if(xe(l)){if(y&&!Te(y))throw new Error(`Invalid Gerrit integration config, '${y}' is not a valid baseUrl`);if(K&&!Te(K))throw new Error(`Invalid Gerrit integration config, '${K}' is not a valid cloneUrl`);if(Re&&!Te(Re))throw new Error(`Invalid Gerrit integration config, '${Re}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${l}' is not a valid host`);return y?y=(0,p.trimEnd)(y,"/"):y=`https://${l}`,Re?Re=(0,p.trimEnd)(Re,"/"):Re=`https://${l}`,K?K=(0,p.trimEnd)(K,"/"):K=y,{host:l,baseUrl:y,cloneUrl:K,gitilesBaseUrl:Re,username:lt,password:Dt}}function Zn(g){return g.map(Mn)}const A=")]}'";function F(g,l){const y=new URL(g.gitilesBaseUrl),K=new URL(l),lt=K.pathname.substring(K.pathname.startsWith("/a/")?2:0).replace(y.pathname,"").split("/").filter(Oa=>!!Oa),Dt=lt.indexOf("+");if(Dt<=0)throw new Error(`Unable to parse project from url: ${l}`);const Xt=(0,p.trimStart)(lt.slice(0,Dt).join("/"),"/"),Sn=lt.indexOf("heads");if(Sn<=0)throw new Error(`Unable to parse branch from url: ${l}`);const Fn=lt[Sn+1],Kn=lt.slice(Sn+2).join("/");return{branch:Fn,filePath:Kn===""?"/":Kn,project:Xt}}function Pe(g,l,y,K){return`${g.gitilesBaseUrl}/${l}/+/refs/heads/${y}/${(0,p.trimStart)(K,"/")}`}function gt(g,l,y,K){const Re=K==="/"||K===""?".tar.gz":`/${K}.tar.gz`;return`${Vt(g)}/${l}/+archive/refs/heads/${y}${Re}`}function Ot(g){return g.password?"/a/":"/"}function Vt(g){if(!g.baseUrl||!g.gitilesBaseUrl)throw new Error("Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.");if(g.gitilesBaseUrl.startsWith(g.baseUrl))return g.gitilesBaseUrl.replace(g.baseUrl.concat("/"),g.baseUrl.concat(Ot(g)));if(g.password)throw new Error("Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.");return g.gitilesBaseUrl}function ae(g,l){const{branch:y,project:K}=F(g,l);return`${g.baseUrl}${Ot(g)}projects/${encodeURIComponent(K)}/branches/${y}`}function Ae(g,l){const{project:y}=F(g,l);return`${g.cloneUrl}${Ot(g)}${y}`}function je(g,l){const{branch:y,filePath:K,project:Re}=F(g,l);return`${g.baseUrl}${Ot(g)}projects/${encodeURIComponent(Re)}/branches/${y}/files/${encodeURIComponent(K)}/content`}function Ht(g){return`${g.baseUrl}${Ot(g)}projects/`}function nn(g){const l={};if(!g.password)return l;const y=a.from(`${g.username}:${g.password}`,"utf8");return l.Authorization=`Basic ${y.toString("base64")}`,{headers:l}}async function ln(g){const l=await g.text();if(l.startsWith(A))try{return JSON.parse(l.slice(A.length))}catch(y){throw new Error(`Invalid response from Gerrit: ${l.slice(0,10)} - ${y}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${l.slice(0,10)}`)}var on=Object.defineProperty,In=(g,l,y)=>l in g?on(g,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[l]=y,Bn=(g,l,y)=>(In(g,typeof l!="symbol"?l+"":l,y),y);const Hn=class{constructor(l){this.integrationConfig=l}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const{url:y,base:K,lineNumber:Re}=l;let lt;if(y.startsWith("/")){const{branch:Dt,project:Xt}=F(this.config,K);return Pe(this.config,Xt,Dt,y)}return y?lt=new URL(y,K):lt=new URL(K),Re&&(lt.hash=Re.toString()),lt.toString()}resolveEditUrl(l){return l}};Bn(Hn,"factory",({config:g})=>{var l;const y=Zn((l=g.getOptionalConfigArray("integrations.gerrit"))!=null?l:[]);return ie(y.map(K=>new Hn(K)),K=>K.config.host)});let ra=Hn;function yn(g){const l=g.getString("host");let y=g.getOptionalString("baseUrl");const K=g.getOptionalString("username"),Re=g.getOptionalString("password");if(!xe(l))throw new Error(`Invalid Gitea integration config, '${l}' is not a valid host`);return y?y=(0,p.trimEnd)(y,"/"):y=`https://${l}`,{host:l,baseUrl:y,username:K,password:Re}}function na(g,l){const y=Qn(g,l);return`${y.url}/${y.owner}/${y.name}/_edit/${y.ref}/${y.path}`}function ia(g,l){const y=Qn(g,l);return`${y.url}/api/v1/repos/${y.owner}/${y.name}/contents/${y.path}?ref=${y.ref}`}function oa(g,l){const y=Qn(g,l);return`${y.url}/api/v1/repos/${y.owner}/${y.name}/archive/${y.ref}.tar.gz`}function ua(g,l){const y=Qn(g,l);return`${y.url}/api/v1/repos/${y.owner}/${y.name}/git/commits/${y.ref}`}function Pa(g){const l={},{username:y,password:K}=g;return K?(y?l.Authorization=`basic ${a.from(`${y}:${K}`).toString("base64")}`:l.Authorization=`token ${K}`,{headers:l}):l}function Qn(g,l){var y;const K=(y=g.baseUrl)!=null?y:`https://${g.host}`;try{const[Re,lt,Dt,Xt,Sn,Fn,...Kn]=l.replace(K,"").split("/"),Oa=Kn.join("/").replace(/^\//,"");return{url:K,owner:lt,name:Dt,ref:Fn,path:Oa}}catch(Re){throw new Error(`Incorrect URL: ${l}, ${Re}`)}}var Ea=Object.defineProperty,X=(g,l,y)=>l in g?Ea(g,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[l]=y,Be=(g,l,y)=>(X(g,typeof l!="symbol"?l+"":l,y),y);const et=class{constructor(l){this.config=l}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(l){return G(l)}resolveEditUrl(l){return na(this.config,l)}};Be(et,"factory",({config:g})=>{var l;const K=((l=g.getOptionalConfigArray("integrations.gitea"))!=null?l:[]).map(Re=>yn(Re));return ie(K.map(Re=>new et(Re)),Re=>Re.config.host)});let vt=et;const Se="github.com",H="https://api.github.com",Ee="https://raw.githubusercontent.com";function de(g){var l,y;const K=(l=g.getOptionalString("host"))!=null?l:Se;let Re=g.getOptionalString("apiBaseUrl"),lt=g.getOptionalString("rawBaseUrl");const Dt=g.getOptionalString("token"),Xt=(y=g.getOptionalConfigArray("apps"))==null?void 0:y.map(Sn=>({appId:Sn.getNumber("appId"),clientId:Sn.getString("clientId"),clientSecret:Sn.getString("clientSecret"),webhookSecret:Sn.getString("webhookSecret"),privateKey:Sn.getString("privateKey"),allowedInstallationOwners:Sn.getOptionalStringArray("allowedInstallationOwners")}));if(!xe(K))throw new Error(`Invalid GitHub integration config, '${K}' is not a valid host`);return Re?Re=(0,p.trimEnd)(Re,"/"):K===Se&&(Re=H),lt?lt=(0,p.trimEnd)(lt,"/"):K===Se&&(lt=Ee),{host:K,apiBaseUrl:Re,rawBaseUrl:lt,token:Dt,apps:Xt}}function st(g){const l=g.map(de);return l.some(y=>y.host===Se)||l.push({host:Se,apiBaseUrl:H,rawBaseUrl:Ee}),l}function k(g,l,y){try{const{owner:K,name:Re,ref:lt,filepathtype:Dt,filepath:Xt}=parseGitUrl(g);if(!K||!Re||!lt||Dt!=="blob"&&Dt!=="raw"&&Dt!=="tree")throw new Error("Invalid GitHub URL or file path");const Sn=Xt.replace(/^\//,"");return Q(l,y)==="api"?`${l.apiBaseUrl}/repos/${K}/${Re}/contents/${Sn}?ref=${lt}`:`${l.rawBaseUrl}/${K}/${Re}/${lt}/${Sn}`}catch(K){throw new Error(`Incorrect URL: ${g}, ${K}`)}}function j(g,l){const y={};return Q(g,l)==="api"&&(y.Accept="application/vnd.github.v3.raw"),l.token&&(y.Authorization=`token ${l.token}`),{headers:y}}function Q(g,l){return g.apiBaseUrl&&(l.token||!g.rawBaseUrl)?"api":"raw"}var te=Object.defineProperty,ke=(g,l,y)=>l in g?te(g,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[l]=y,Je=(g,l,y)=>(ke(g,typeof l!="symbol"?l+"":l,y),y);class He{constructor(){Je(this,"tokenCache",new Map),Je(this,"isExpired",l=>Ne.ou.local()>l)}async getOrCreateToken(l,y,K){let Re=this.tokenCache.get(l);if((!Re||this.isExpired(Re.expiresAt))&&(Re=await K(),Re.expiresAt=Re.expiresAt.minus({minutes:10}),this.tokenCache.set(l,Re)),!this.appliesToRepo(Re,y))throw new Error(`The Backstage GitHub application used in the ${l} organization does not have access to a repository with the name ${y}`);return{accessToken:Re.token}}appliesToRepo(l,y){return y===void 0?!0:l.repositories!==void 0?l.repositories.includes(y):!0}}const qe={Accept:"application/vnd.github.machine-man-preview+json"};class At{constructor(l,y){Je(this,"appClient"),Je(this,"baseUrl"),Je(this,"baseAuthConfig"),Je(this,"cache",new He),Je(this,"allowedInstallationOwners"),this.allowedInstallationOwners=l.allowedInstallationOwners,this.baseUrl=y,this.baseAuthConfig={appId:l.appId,privateKey:l.privateKey.replace(/\\n/gm,`
`)},this.appClient=new Qe.v({baseUrl:y,headers:qe,authStrategy:$.i,auth:this.baseAuthConfig})}async getInstallationCredentials(l,y){var K;return this.allowedInstallationOwners&&!((K=this.allowedInstallationOwners)!=null&&K.includes(l))?{accessToken:void 0}:this.cache.getOrCreateToken(l,y,async()=>{var Re;const{installationId:lt,suspended:Dt}=await this.getInstallationData(l);if(Dt)throw new Error(`The GitHub application for ${l} is suspended`);const Xt=await this.appClient.apps.createInstallationAccessToken({installation_id:lt,headers:qe});let Sn;if(Xt.data.repository_selection==="selected"){const Fn=new Qe.v({baseUrl:this.baseUrl,auth:Xt.data.token}),Kn=await Fn.paginate(Fn.apps.listReposAccessibleToInstallation);Sn=((Re=Kn.repositories)!=null?Re:Kn).map(za=>za.name)}return{token:Xt.data.token,expiresAt:Ne.ou.fromISO(Xt.data.expires_at),repositories:Sn}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(l){const K=(await this.getInstallations()).find(lt=>{var Dt;return lt.account&&"login"in lt.account&&((Dt=lt.account.login)==null?void 0:Dt.toLocaleLowerCase("en-US"))===l.toLocaleLowerCase("en-US")});if(K)return{installationId:K.id,suspended:Boolean(K.suspended_by)};const Re=new Error(`No app installation found for ${l} in ${this.baseAuthConfig.appId}`);throw Re.name="NotFoundError",Re}}class dn{constructor(l){Je(this,"apps");var y,K;this.apps=(K=(y=l.apps)==null?void 0:y.map(Re=>new At(Re,l.apiBaseUrl)))!=null?K:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(y=>y.getInstallations()))).flat():[]}async getAppToken(l,y){if(this.apps.length===0)return;const K=await Promise.all(this.apps.map(Xt=>Xt.getInstallationCredentials(l,y).then(Sn=>({credentials:Sn,error:void 0}),Sn=>({credentials:void 0,error:Sn})))),Re=K.find(Xt=>{var Sn;return(Sn=Xt.credentials)==null?void 0:Sn.accessToken});if(Re)return Re.credentials.accessToken;const Dt=K.map(Xt=>Xt.error).find(Xt=>(Xt==null?void 0:Xt.name)!=="NotFoundError");if(Dt)throw Dt}}const wt=class{constructor(l,y){this.githubAppCredentialsMux=l,this.token=y}async getCredentials(l){const y=m()(l.url),K=y.owner||y.name,Re=y.owner?y.name:void 0;let lt="app",Dt=await this.githubAppCredentialsMux.getAppToken(K,Re);return Dt||(lt="token",Dt=this.token),{headers:Dt?{Authorization:`Bearer ${Dt}`}:void 0,token:Dt,type:lt}}};Je(wt,"create",g=>new wt(new dn(g),g.token));let un=null;class hn{constructor(l){this.providers=l}static fromIntegrations(l){const y=new Map;return l.github.list().forEach(K=>{const Re=un.create(K.config);y.set(K.config.host,Re)}),new hn(y)}async getCredentials(l){const y=new URL(l.url),K=this.providers.get(y.host);if(!K)throw new Error(`There is no GitHub integration that matches ${l.url}. Please add a configuration for an integration.`);return K.getCredentials(l)}}var En=Object.defineProperty,kn=(g,l,y)=>l in g?En(g,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[l]=y,wn=(g,l,y)=>(kn(g,typeof l!="symbol"?l+"":l,y),y);const xn=class{constructor(l){this.integrationConfig=l}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){return On(G(l),"tree")}resolveEditUrl(l){return On(l,"edit")}};wn(xn,"factory",({config:g})=>{var l;const y=st((l=g.getOptionalConfigArray("integrations.github"))!=null?l:[]);return ie(y.map(K=>new xn(K)),K=>K.config.host)});let Rn=xn;function On(g,l){return g.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(y,K,Re,lt)=>`//${K}/${Re}/${lt}/${l}/`)}var pn=Object.defineProperty,_n=(g,l,y)=>l in g?pn(g,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[l]=y,aa=(g,l,y)=>(_n(g,typeof l!="symbol"?l+"":l,y),y);const sa=null;class Aa extends Rn{constructor(l){super(l)}get config(){return super.config}}aa(Aa,"factory",Rn.factory);const Sa=null,ka=null,Wa=null,Ba="gitlab.com",Ra="https://gitlab.com/api/v4";function ja(g){const l=g.getString("host");let y=g.getOptionalString("apiBaseUrl");const K=g.getOptionalString("token");let Re=g.getOptionalString("baseUrl");if(y?y=(0,p.trimEnd)(y,"/"):l===Ba&&(y=Ra),Re?Re=(0,p.trimEnd)(Re,"/"):Re=`https://${l}`,xe(l)){if(!y||!Te(y))throw new Error(`Invalid GitLab integration config, '${y}' is not a valid apiBaseUrl`);if(!Te(Re))throw new Error(`Invalid GitLab integration config, '${Re}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${l}' is not a valid host`);return{host:l,token:K,apiBaseUrl:y,baseUrl:Re}}function Na(g){const l=g.map(ja);return l.some(y=>y.host===Ba)||l.push({host:Ba,apiBaseUrl:Ra,baseUrl:`https://${Ba}`}),l}function Va(g){let l="";return g.host!==Ba&&(l=new URL(g.baseUrl).pathname),trimEnd(l,"/")}async function ur(g,l){const y=await da(g,l);return er(g,y,l).toString()}function qa(g){const{token:l=""}=g;return{headers:{"PRIVATE-TOKEN":l}}}function er(g,l,y){try{const K=new URL(g),Re=K.pathname.split("/blob/").slice(1).join("/blob/"),[lt,...Dt]=Re.split("/"),Xt=Va(y);return K.pathname=[...Xt?[Xt]:[],"api/v4/projects",l,"repository/files",encodeURIComponent(decodeURIComponent(Dt.join("/"))),"raw"].join("/"),K.search=`?ref=${lt}`,K}catch(K){throw new Error(`Incorrect url: ${g}, ${K}`)}}async function da(g,l){const y=new URL(g);if(!y.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let K=y.pathname.split("/-/blob/")[0].split("/blob/")[0];const Re=Va(l);Re&&(K=K.replace(Re,""));const lt=new URL(`${y.origin}${Re}/api/v4/projects/${encodeURIComponent(K.replace(/^\//,""))}`),Dt=await fetch(lt.toString(),qa(l)),Xt=await Dt.json();if(!Dt.ok)throw new Error(`GitLab Error '${Xt.error}', ${Xt.error_description}`);return Number(Xt.id)}catch(K){throw new Error(`Could not get GitLab project ID for: ${g}, ${K}`)}}var tr=Object.defineProperty,nr=(g,l,y)=>l in g?tr(g,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[l]=y,or=(g,l,y)=>(nr(g,typeof l!="symbol"?l+"":l,y),y);const Fa=class{constructor(l){this.integrationConfig=l}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){return G(l)}resolveEditUrl(l){return q(l,"edit")}};or(Fa,"factory",({config:g})=>{var l;const y=Na((l=g.getOptionalConfigArray("integrations.gitlab"))!=null?l:[]);return ie(y.map(K=>new Fa(K)),K=>K.config.host)});let Fe=Fa;function q(g,l){return g.replace(/\/\-\/(blob|tree|edit)\//,`/-/${l}/`)}var at=Object.defineProperty,bn=(g,l,y)=>l in g?at(g,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[l]=y,Ln=(g,l,y)=>(bn(g,typeof l!="symbol"?l+"":l,y),y);const qn=class{constructor(l){this.token=l}async getCredentials(l){return this.token?{headers:{Authorization:`Bearer ${this.token}`},token:this.token}:{}}};Ln(qn,"create",g=>new qn(g.token));let ha=null;class Ua{constructor(l){this.providers=l}static fromIntegrations(l){const y=new Map;return l.gitlab.list().forEach(K=>{const Re=ha.create(K.config);y.set(K.config.host,Re)}),new Ua(y)}async getCredentials(l){const y=new URL(l.url),K=this.providers.get(y.host);if(!K)throw new Error(`There is no GitLab integration that matches ${l.url}. Please add a configuration for an integration.`);return K.getCredentials(l)}}function Ka(g){if(!g)return{};if(!g.has("clientEmail")&&!g.has("privateKey"))return{};const l=g.getString("privateKey").split("\\n").join(`
`);return{clientEmail:g.getString("clientEmail"),privateKey:l}}var va=Object.defineProperty,xa=(g,l,y)=>l in g?va(g,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):g[l]=y,Ia=(g,l,y)=>(xa(g,typeof l!="symbol"?l+"":l,y),y);class Ya{constructor(l){Ia(this,"byType"),this.byType=l}static fromConfig(l){return new Ya({awsS3:R.factory({config:l}),azure:ct.factory({config:l}),bitbucket:we.factory({config:l}),bitbucketCloud:pt.factory({config:l}),bitbucketServer:Jt.factory({config:l}),gerrit:ra.factory({config:l}),github:Rn.factory({config:l}),gitlab:Fe.factory({config:l}),gitea:vt.factory({config:l})})}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(l=>l.list())}byUrl(l){let y=Object.values(this.byType).map(K=>K.byUrl(l)).filter(Boolean);if(y.length>1){const K=y.filter(Re=>!(Re instanceof we));K.length!==0&&(y=K)}return y[0]}byHost(l){return Object.values(this.byType).map(y=>y.byHost(l)).find(Boolean)}resolveUrl(l){const y=this.byUrl(l.base);return y?y.resolveUrl(l):G(l)}resolveEditUrl(l){const y=this.byUrl(l);return y?y.resolveEditUrl(l):l}}},71900:($n,qt,e)=>{"use strict";e.d(qt,{Cy:()=>Rt,DC:()=>Ct,OO:()=>rn,RE:()=>v,XQ:()=>Mt,Yq:()=>Pt,ap:()=>ft,bM:()=>Gt,cm:()=>U,d1:()=>he,fP:()=>Y,fe:()=>O,gC:()=>Wt,hK:()=>ze,hs:()=>M,nE:()=>ot,x1:()=>Ye,zJ:()=>ne});var o=e(2784),m=e(73557),p=e(49558),z=e(30705),B=e(57032),i=e(98127),$=e(73495),Qe=e(78373),Ne=e(56563),a=e(75650),xe=e(99688),Te=e(13737),ie=e(60364),G=e(90436),Ge=e(79692),ge=e(95544),be=e(8629),re=e(79249),Oe=e(38724),I=e(99152),c=e(6487),R=e(49429),_=e(77277),b=e(34520),N=e(15933);const _e=(0,z.NT)({id:"api-docs"}),fe=(0,z.x8)({id:"register-component",optional:!0}),ve=[i.C.columns.createTitleColumn({hidden:!0}),i.C.columns.createNameColumn({defaultKind:"API"}),i.C.columns.createSystemColumn(),i.C.columns.createOwnerColumn(),i.C.columns.createSpecTypeColumn(),i.C.columns.createSpecLifecycleColumn(),i.C.columns.createMetadataDescriptionColumn(),i.C.columns.createTagsColumn()],Y=we=>{var rt;const{initiallySelectedFilter:xt="all",columns:kt,actions:le}=we,Lt=`${(rt=(0,B.u)(B.p).getOptionalString("organization.name"))!=null?rt:"Backstage"} API Explorer`,Yt=(0,z.tg)(fe),{allowed:se}=(0,Ne.gI)({permission:a.x7});return o.createElement(p.g9,{themeId:"apis",title:"APIs",subtitle:Lt,pageTitleOverride:"APIs"},o.createElement(p.VY,null,o.createElement(p.yW,{title:""},se&&o.createElement(p.XF,{title:"Register Existing API",to:Yt==null?void 0:Yt()}),o.createElement(p.qt,null,"All your APIs")),o.createElement($.UO,null,o.createElement($._i,null,o.createElement($._i.Filters,null,o.createElement($.tW,{initialFilter:"api",hidden:!0}),o.createElement($.sL,null),o.createElement($.EW,{initialFilter:xt}),o.createElement($.dq,null),o.createElement($.df,null),o.createElement($.xE,null)),o.createElement($._i.Content,null,o.createElement(i.C,{columns:kt||ve,actions:le}))))))},v=we=>(0,m.pC)()||o.createElement(Y,{...we}),ee=(0,B.c)({id:"plugin.api-docs.config"}),oe=we=>o.createElement(p.Oi,{text:we.definition,language:we.language,showCopyCodeButton:!0}),Rt=()=>{var we;const{entity:rt}=(0,Qe.u)(),xt=(0,B.u)(ee),{getApiDefinitionWidget:kt}=xt;if(!rt)return o.createElement(xe.Z,{severity:"error"},"Could not fetch the API");const le=kt(rt),Ue=(we=rt.metadata.title)!=null?we:rt.metadata.name;return le?o.createElement(p.oZ,{title:Ue},o.createElement(p.hB,{label:le.title,key:"widget"},le.component(rt.spec.definition)),o.createElement(p.hB,{label:"Raw",key:"raw"},o.createElement(oe,{definition:rt.spec.definition,language:le.rawLanguage||rt.spec.type}))):o.createElement(p.oZ,{title:Ue,children:[o.createElement(p.hB,{label:rt.spec.type,key:"raw"},o.createElement(oe,{definition:rt.spec.definition,language:rt.spec.type}))]})},T=o.lazy(()=>Promise.all([e.e(3524),e.e(1978),e.e(8847),e.e(2339)]).then(e.bind(e,50164)).then(we=>({default:we.AsyncApiDefinition}))),sn=we=>o.createElement(o.Suspense,{fallback:o.createElement(p.Ex,null)},o.createElement(T,{...we})),me=o.lazy(()=>e.e(3413).then(e.bind(e,13413)).then(we=>({default:we.GraphQlDefinition}))),Zt=we=>o.createElement(o.Suspense,{fallback:o.createElement(p.Ex,null)},o.createElement(me,{...we})),yt=o.lazy(()=>Promise.all([e.e(3524),e.e(1978),e.e(5970)]).then(e.bind(e,15970)).then(we=>({default:we.OpenApiDefinition}))),mt=we=>o.createElement(o.Suspense,{fallback:o.createElement(p.Ex,null)},o.createElement(yt,{...we})),It=we=>{const rt=(0,ie.Z)();return o.createElement(p.Oi,{customStyle:{backgroundColor:rt.palette.background.default},text:we.definition,language:"protobuf",showCopyCodeButton:!0})},We=we=>{const{definition:rt}=we,xt=(0,ie.Z)();return o.createElement(p.Oi,{customStyle:{backgroundColor:xt.palette.background.default},text:rt,language:"typescript",showCopyCodeButton:!0})};function Pt(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:we=>o.createElement(mt,{definition:we})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:we=>o.createElement(sn,{definition:we})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:we=>o.createElement(Zt,{definition:we})},{type:"grpc",title:"gRPC",component:we=>o.createElement(It,{definition:we})},{type:"trpc",title:"tRPC",component:we=>o.createElement(We,{definition:we})}]}const ot=we=>{const{apiEntity:rt}=we,kt=(0,B.u)(ee).getApiDefinitionWidget(rt),le=kt?kt.title:rt.spec.type;return o.createElement(G.Z,{component:"span"},le)},zt=(0,Ge.Z)(we=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",height:"100%"},tabs:{borderRight:`1px solid ${we.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"},title:{color:we.palette.text.primary,wordBreak:"break-word",fontSize:we.typography.h3.fontSize,marginBottom:0},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:we.spacing(1),color:we.palette.text.primary}}));function Tt(we){const{children:rt,value:xt,index:kt,...le}=we,Ue=zt();return o.createElement("div",{role:"tabpanel",hidden:xt!==kt,id:`vertical-tabpanel-${kt}`,"aria-labelledby":`vertical-tab-${kt}`,className:Ue.tabContents,...le},xt===kt&&o.createElement(ge.Z,{pl:3,pr:3},rt))}function Ft(we){return{id:`vertical-tab-${we}`,"aria-controls":`vertical-tabpanel-${we}`}}function ct(we){var rt,xt,kt;const{open:le,entity:Ue,onClose:Lt}=we,[Yt,se]=o.useState(0),Ze=zt();(0,o.useEffect)(()=>{se(0)},[le]);const Me=(0,B.u)(ee).getApiDefinitionWidget(Ue);let nt=0,pt=0;return o.createElement(be.Z,{fullWidth:!0,maxWidth:"xl",open:le,onClose:Lt,"aria-labelledby":"api-definition-dialog-title",PaperProps:{className:Ze.fullHeightDialog}},o.createElement(re.Z,{id:"api-definition-dialog-title",disableTypography:!0},o.createElement(G.Z,{className:Ze.type},"API - ",(rt=Me==null?void 0:Me.title)!=null?rt:"Raw"),o.createElement(G.Z,{className:Ze.title,variant:"h1"},(xt=Ue.metadata.title)!=null?xt:Ue.metadata.name)),o.createElement(Oe.Z,{dividers:!0,className:Ze.root},o.createElement(I.Z,{orientation:"vertical",variant:"scrollable",value:Yt,onChange:(Bt,tn)=>se(tn),"aria-label":"API definition options",className:Ze.tabs},Me?o.createElement(c.Z,{label:Me.title,...Ft(nt++)}):null,o.createElement(c.Z,{label:"Raw",...Ft(nt++)})),Me?o.createElement(Tt,{value:Yt,index:pt++},Me.component(Ue.spec.definition)):null,o.createElement(Tt,{value:Yt,index:pt++},o.createElement(oe,{definition:Ue.spec.definition,language:(kt=Me==null?void 0:Me.rawLanguage)!=null?kt:Ue.spec.type}))),o.createElement(R.Z,null,o.createElement(_.Z,{onClick:Lt,color:"primary"},"Close")))}function ht(){return{title:"Type",field:"spec.type",render:we=>o.createElement(ot,{apiEntity:we})}}const $t=({apiEntity:we})=>{const[rt,xt]=(0,o.useState)(!1);return o.createElement(o.Fragment,null,o.createElement(Te.Z,{"aria-label":"Toggle API Definition Dialog",onClick:()=>xt(!rt)},o.createElement(N.Z,null)),o.createElement(ct,{entity:we,open:rt,onClose:()=>xt(!1)}))};function an(){return{title:"API Definition",render:we=>o.createElement($t,{apiEntity:we})}}const St=[$.u3.columns.createEntityRefColumn({defaultKind:"API"}),$.u3.columns.createSystemColumn(),$.u3.columns.createOwnerColumn(),ht(),$.u3.columns.createSpecLifecycleColumn(),$.u3.columns.createMetadataDescriptionColumn(),an()],Gt=we=>{const{variant:rt="gridItem",columns:xt=St}=we,{entity:kt}=(0,Qe.u)(),{entities:le,loading:Ue,error:Lt}=(0,$.eK)(kt,{type:b.Dg});return Ue?o.createElement(p.rJ,{variant:rt,title:"Consumed APIs"},o.createElement(p.Ex,null)):Lt||!le?o.createElement(p.rJ,{variant:rt,title:"Consumed APIs"},o.createElement(p.GB,{severity:"error",title:"Could not load APIs",message:o.createElement(p.Oi,{text:`${Lt}`,language:"text"})})):o.createElement($.u3,{title:"Consumed APIs",variant:rt,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(G.Z,{variant:"body1"},"This ",kt.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),o.createElement(G.Z,{variant:"body2"},o.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:xt,entities:le})},D=[$.u3.columns.createEntityRefColumn({defaultKind:"API"}),$.u3.columns.createOwnerColumn(),ht(),$.u3.columns.createSpecLifecycleColumn(),$.u3.columns.createMetadataDescriptionColumn()],U=we=>{const{variant:rt="gridItem",columns:xt=D}=we,{entity:kt}=(0,Qe.u)(),{entities:le,loading:Ue,error:Lt}=(0,$.eK)(kt,{type:b.aS,kind:"API"});return Ue?o.createElement(p.rJ,{variant:rt,title:"APIs"},o.createElement(p.Ex,null)):Lt||!le?o.createElement(p.rJ,{variant:rt,title:"APIs"},o.createElement(p.GB,{severity:"error",title:"Could not load APIs",message:o.createElement(p.Oi,{text:`${Lt}`,language:"text"})})):o.createElement($.u3,{title:"APIs",variant:rt,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(G.Z,{variant:"body1"},"This ",kt.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),o.createElement(G.Z,{variant:"body2"},o.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:xt,entities:le})},O=we=>{const{variant:rt="gridItem",columns:xt=St}=we,{entity:kt}=(0,Qe.u)(),{entities:le,loading:Ue,error:Lt}=(0,$.eK)(kt,{type:b.M_});return Ue?o.createElement(p.rJ,{variant:rt,title:"Provided APIs"},o.createElement(p.Ex,null)):Lt||!le?o.createElement(p.rJ,{variant:rt,title:"Provided APIs"},o.createElement(p.GB,{severity:"error",title:"Could not load APIs",message:o.createElement(p.Oi,{text:`${Lt}`,language:"text"})})):o.createElement($.u3,{title:"Provided APIs",variant:rt,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(G.Z,{variant:"body1"},"This ",kt.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),o.createElement(G.Z,{variant:"body2"},o.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:xt,entities:le})},M=we=>{const{variant:rt="gridItem"}=we,{entity:xt}=(0,Qe.u)(),{entities:kt,loading:le,error:Ue}=(0,$.eK)(xt,{type:b.X9});return le?o.createElement(p.rJ,{variant:rt,title:"Consumers"},o.createElement(p.Ex,null)):Ue||!kt?o.createElement(p.rJ,{variant:rt,title:"Consumers"},o.createElement(p.GB,{severity:"error",title:"Could not load components",message:o.createElement(p.Oi,{text:`${Ue}`,language:"text"})})):o.createElement($.u3,{title:"Consumers",variant:rt,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(G.Z,{variant:"body1"},"No component consumes this API."),o.createElement(G.Z,{variant:"body2"},o.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:$.u3.componentEntityColumns,entities:kt})},ne=we=>{const{variant:rt="gridItem"}=we,{entity:xt}=(0,Qe.u)(),{entities:kt,loading:le,error:Ue}=(0,$.eK)(xt,{type:b.Zj});return le?o.createElement(p.rJ,{variant:rt,title:"Providers"},o.createElement(p.Ex,null)):Ue||!kt?o.createElement(p.rJ,{variant:rt,title:"Providers"},o.createElement(p.GB,{severity:"error",title:"Could not load components",message:o.createElement(p.Oi,{text:`${Ue}`,language:"text"})})):o.createElement($.u3,{title:"Providers",variant:rt,emptyContent:o.createElement("div",{style:{textAlign:"center"}},o.createElement(G.Z,{variant:"body1"},"No component provides this API."),o.createElement(G.Z,{variant:"body2"},o.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:$.u3.componentEntityColumns,entities:kt})},he=(0,z.rx)({id:"api-docs",routes:{root:_e},apis:[(0,z.ni)({api:ee,deps:{},factory:()=>{const we=Pt();return{getApiDefinitionWidget:rt=>we.find(xt=>xt.type===rt.spec.type)}}})],externalRoutes:{registerApi:fe}}),ze=he.provide((0,z.P4)({name:"ApiExplorerPage",component:()=>e.e(9712).then(e.bind(e,39712)).then(we=>we.ApiExplorerIndexPage),mountPoint:_e})),Ct=he.provide((0,z.CO)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(109).then(e.bind(e,40109)).then(we=>we.ApiDefinitionCard)}})),Ye=he.provide((0,z.CO)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(9047).then(e.bind(e,59047)).then(we=>we.ConsumedApisCard)}})),Mt=he.provide((0,z.CO)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(9025).then(e.bind(e,69025)).then(we=>we.ConsumingComponentsCard)}})),rn=he.provide((0,z.CO)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(9047).then(e.bind(e,59047)).then(we=>we.ProvidedApisCard)}})),Wt=he.provide((0,z.CO)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(9025).then(e.bind(e,69025)).then(we=>we.ProvidingComponentsCard)}})),ft=he.provide((0,z.CO)({name:"EntityHasApisCard",component:{lazy:()=>e.e(9047).then(e.bind(e,59047)).then(we=>we.HasApisCard)}}))},75650:($n,qt,e)=>{"use strict";e.d(qt,{es:()=>i,j8:()=>B,x7:()=>z});var o=e(5083);const m="catalog-entity",p=(0,o.J$)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:m}),z=(0,o.J$)({name:"catalog.entity.create",attributes:{action:"create"}}),B=(0,o.J$)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:m}),i=(0,o.J$)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:m}),$=(0,o.J$)({name:"catalog.location.read",attributes:{action:"read"}}),Qe=(0,o.J$)({name:"catalog.location.create",attributes:{action:"create"}}),Ne=(0,o.J$)({name:"catalog.location.delete",attributes:{action:"delete"}}),a=[p,z,B,i,$,Qe,Ne]},98487:($n,qt,e)=>{"use strict";e.d(qt,{Az:()=>T,Ho:()=>ee,Nm:()=>b,_U:()=>v,t0:()=>sn,vw:()=>_});var o=e(34520),m=e(49558),p=e(30705),z=e(57032),B=e(79692),i=e(60364),$=e(4614),Qe=e(12524),Ne=e.n(Qe),a=e(2784),xe=e(10368),Te=e(73495),ie=e(39412),G=e(48760),Ge=e(14162),ge=e.n(Ge),be=e(69294);const re=(0,xe.Z)(me=>({text:{fill:me.palette.textContrast},secondary:{fill:me.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function Oe({edge:{relations:me}}){const Zt=re();return a.createElement("text",{className:Zt.text,textAnchor:"middle"},me.map((yt,mt)=>a.createElement("tspan",{key:yt,className:Ne()(mt>0&&Zt.secondary)},mt>0&&a.createElement("tspan",null," / "),yt)))}function I({kind:me,...Zt}){var yt;const It=(yt=(0,p.qD)().getSystemIcon(`kind:${me.toLocaleLowerCase("en-US")}`))!=null?yt:ie.Z;return a.createElement(It,{...Zt})}const c=(0,B.Z)(me=>({node:{fill:me.palette.grey[300],stroke:me.palette.grey[300],"&.primary":{fill:me.palette.primary.light,stroke:me.palette.primary.light},"&.secondary":{fill:me.palette.secondary.light,stroke:me.palette.secondary.light}},text:{fill:me.palette.getContrastText(me.palette.grey[300]),"&.primary":{fill:me.palette.primary.contrastText},"&.secondary":{fill:me.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function R({node:{id:me,entity:Zt,color:yt="default",focused:mt,onClick:It}}){const We=c(),[Pt,ot]=(0,a.useState)(0),[zt,Tt]=(0,a.useState)(0),Ft=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{if(Ft.current){let{height:ne,width:he}=Ft.current.getBBox();ne=Math.round(ne),he=Math.round(he),(ne!==zt||he!==Pt)&&(ot(he),Tt(ne))}},[Pt,zt]);const{kind:ct,metadata:{name:ht,namespace:$t=o.zG,title:an}}=Zt,St=10,Gt=zt,D=ct?Gt+St:0,U=D+Pt+St*2,O=zt+St*2,M=an!=null?an:ct&&ht&&$t?(0,Te.$3)({kind:ct,name:ht,namespace:$t}):me;return a.createElement("g",{onClick:It,className:Ne()(It&&We.clickable)},a.createElement("rect",{className:Ne()(We.node,yt==="primary"&&"primary",yt==="secondary"&&"secondary"),width:U,height:O,rx:10}),ct&&a.createElement(I,{kind:ct,y:St,x:St,width:Gt,height:Gt,className:Ne()(We.text,mt&&"focused",yt==="primary"&&"primary",yt==="secondary"&&"secondary")}),a.createElement("text",{ref:Ft,className:Ne()(We.text,mt&&"focused",yt==="primary"&&"primary",yt==="secondary"&&"secondary"),y:O/2,x:D+(Pt+St*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},M))}const _=[[o.$1,o.S4],[o.Dg,o.X9],[o.Zj,o.M_],[o.aS,o.cz],[o._b,o.wP],[o.KS,o.hr],[o.nP,o.w$]];var b=(me=>(me.TOP_BOTTOM="TB",me.BOTTOM_TOP="BT",me.LEFT_RIGHT="LR",me.RIGHT_LEFT="RL",me))(b||{});const N=ge()(10);function _e(){const me=(0,z.u)(Te.Ah),Zt=(0,a.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[yt,mt]=(0,a.useState)({}),It=(0,a.useCallback)(()=>{const{cachedEntities:Ft,requestedEntities:ct}=Zt.current,ht={};ct.forEach($t=>{const an=Ft.get($t);an&&(ht[$t]=an)}),mt(ht)},[Zt,mt]),[We,Pt]=(0,be.default)(async()=>{const{requestedEntities:Ft,outstandingEntities:ct,cachedEntities:ht}=Zt.current;await Promise.all(Array.from(Ft).map($t=>N(async()=>{if(ht.has($t))return;if(ct.has($t)){await ct.get($t);return}const an=me.getEntityByRef($t);ct.set($t,an);try{const St=await an;St&&(ht.set($t,St),It())}finally{ct.delete($t)}})))},[Zt,It]),{loading:ot,error:zt}=We,Tt=(0,a.useCallback)(Ft=>{const ct=new Set(Ft),{requestedEntities:ht}=Zt.current;(ct.size!==ht.size||Array.from(ct).some($t=>!ht.has($t)))&&(Zt.current.requestedEntities=ct,Pt(),It())},[Zt,Pt,It]);return{entities:yt,loading:ot,error:zt,requestEntities:Tt}}function fe({rootEntityRefs:me,filter:{maxDepth:Zt=Number.POSITIVE_INFINITY,relations:yt,kinds:mt}={}}){const{entities:It,loading:We,error:Pt,requestEntities:ot}=_e();return(0,a.useEffect)(()=>{const zt=new Set([...me]),Tt=new Set;let Ft=[...me],ct=0;for(;Ft.length>0&&(!isFinite(Zt)||ct<Zt);){const ht=Ft;for(Ft=[];ht.length>0;){const $t=ht.shift(),an=It[$t];if(Tt.add($t),an&&an.relations)for(const St of an.relations)(!yt||yt.includes(St.type))&&(!mt||mt.some(Gt=>St.targetRef.startsWith(`${Gt.toLocaleLowerCase("en-US")}:`)))&&(Tt.has(St.targetRef)||(Ft.push(St.targetRef),zt.add(St.targetRef)))}++ct}ot([...zt])},[It,me,Zt,yt,mt,ot]),{entities:It,loading:We,error:Pt}}function ve({rootEntityRefs:me,maxDepth:Zt=Number.POSITIVE_INFINITY,unidirectional:yt=!0,mergeRelations:mt=!0,kinds:It,relations:We,onNodeClick:Pt,relationPairs:ot=_}){const[zt,Tt]=(0,a.useState)({}),{entities:Ft,loading:ct,error:ht}=fe({rootEntityRefs:me,filter:{maxDepth:Zt,kinds:It,relations:We}});return(0,G.Z)(()=>{var $t;if(!Ft||Object.keys(Ft).length===0){Tt({});return}const an=Object.entries(Ft).map(([U,O])=>{const M=me.includes(U),ne={id:U,entity:O,focused:M,color:M?"secondary":"primary",kind:O.kind,name:O.metadata.name,namespace:O.metadata.namespace||o.zG,title:O.metadata.title,spec:O.spec};return Pt&&(ne.onClick=he=>Pt(ne,he)),ne}),St=[],Gt=new Set,D=[...me];for(;D.length>0;){const U=D.pop(),O=Ft[U];Gt.add(U),O&&(($t=O==null?void 0:O.relations)==null||$t.forEach(M=>{var ne;if(Ft[M.targetRef]&&!(We&&!We.includes(M.type))&&!(It&&!It.some(he=>M.targetRef.startsWith(`${he.toLocaleLowerCase("en-US")}:`)))){if(!yt||!Gt.has(M.targetRef))if(mt){const he=(ne=ot.find(([Ct,Ye])=>Ct===M.type||Ye===M.type))!=null?ne:[M.type],[ze]=he;St.push({from:ze===M.type?U:M.targetRef,to:ze===M.type?M.targetRef:U,relations:he,label:"visible"})}else St.push({from:U,to:M.targetRef,relations:[M.type],label:"visible"});Gt.has(M.targetRef)||(D.push(M.targetRef),Gt.add(M.targetRef))}}))}Tt({nodes:an,edges:St})},100,[Ft,me,It,We,yt,mt,Pt,ot]),{loading:ct,error:ht,...zt}}const Y=(0,B.Z)(me=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${me.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),v=me=>{const{rootEntityNames:Zt,maxDepth:yt=2,unidirectional:mt=!0,mergeRelations:It=!0,kinds:We,relations:Pt,direction:ot=b.LEFT_RIGHT,onNodeClick:zt,relationPairs:Tt=_,className:Ft,zoom:ct="enabled",renderNode:ht,renderLabel:$t,curve:an}=me,St=(0,i.Z)(),Gt=Y(),D=(0,a.useMemo)(()=>(Array.isArray(Zt)?Zt:[Zt]).map(ze=>(0,o.eE)(ze)),[Zt]),U=(0,z.u)(z.r),{loading:O,error:M,nodes:ne,edges:he}=ve({rootEntityRefs:D,maxDepth:yt,unidirectional:mt,mergeRelations:It,kinds:We,relations:Pt,onNodeClick:zt,relationPairs:Tt});return(0,a.useEffect)(()=>{M&&U.post(M)},[U,M]),a.createElement("div",{className:Ne()(Gt.container,Ft)},O&&a.createElement($.Z,{className:Gt.progress}),ne&&he&&a.createElement(m.mn,{nodes:ne,edges:he,renderNode:ht||R,renderLabel:$t||Oe,direction:ot,className:Gt.graph,paddingX:St.spacing(4),paddingY:St.spacing(4),labelPosition:m.NX.LabelPosition.RIGHT,labelOffset:St.spacing(1),zoom:ct,curve:an}))},ee=(0,p.NT)({id:"catalog-graph"}),oe=(0,p.x8)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0}),Rt=(0,p.rx)({id:"catalog-graph",routes:{catalogGraph:ee},externalRoutes:{catalogEntity:oe}}),T=Rt.provide((0,p.CO)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(9842).then(e.bind(e,59842)).then(me=>me.CatalogGraphCard)}})),sn=Rt.provide((0,p.P4)({name:"CatalogGraphPage",component:()=>e.e(1440).then(e.bind(e,71440)).then(me=>me.CatalogGraphPage),mountPoint:ee}))},84241:($n,qt,e)=>{"use strict";e.d(qt,{C:()=>c,a:()=>Ne,c:()=>I,d:()=>xe,g:()=>Te});var o=e(57032),m=e(30705),p=e(49462),z=e(73495),B=e(87195),i=e(49431),$=e(82717),Qe=e.n($);const Ne=(0,o.c)({id:"plugin.catalog-import.service"}),a=(R,_)=>{const b=R.github.byUrl(_);if(!b)return;const{name:N,owner:_e}=Qe()(_);return{repo:N,owner:_e,githubIntegrationConfig:b.config}};function xe(R){const{ref:_,...b}=R;return{inputRef:_,...b}}function Te(R){var _;return(_=R.getOptionalString("catalog.import.entityFilename"))!=null?_:"catalog-info.yaml"}function ie(R){var _;return(_=R.getOptionalString("catalog.import.pullRequestBranchName"))!=null?_:"backstage-integration"}var G=Object.defineProperty,Ge=(R,_,b)=>_ in R?G(R,_,{enumerable:!0,configurable:!0,writable:!0,value:b}):R[_]=b,ge=(R,_,b)=>(Ge(R,typeof _!="symbol"?_+"":_,b),b);class be{constructor(_){ge(this,"discoveryApi"),ge(this,"identityApi"),ge(this,"scmAuthApi"),ge(this,"scmIntegrationsApi"),ge(this,"catalogApi"),ge(this,"configApi"),this.discoveryApi=_.discoveryApi,this.scmAuthApi=_.scmAuthApi,this.identityApi=_.identityApi,this.scmIntegrationsApi=_.scmIntegrationsApi,this.catalogApi=_.catalogApi,this.configApi=_.configApi}async analyzeUrl(_){var b;if(new URL(_).pathname.match(/\.ya?ml$/)||(b=new URL(_).searchParams.get("path"))!=null&&b.match(/.ya?ml$/)){const fe=await this.catalogApi.addLocation({type:"url",target:_,dryRun:!0});return{type:"locations",locations:[{exists:fe.exists,target:fe.location.target,entities:fe.entities.map(ve=>{var Y;return{kind:ve.kind,namespace:(Y=ve.metadata.namespace)!=null?Y:"default",name:ve.metadata.name}})}]}}if(!a(this.scmIntegrationsApi,_)){const fe=this.scmIntegrationsApi.byUrl(_),ve=Te(this.configApi);throw fe?new Error(`The ${fe.title} integration only supports full URLs to ${ve} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${ve} file instead.`)}const _e=await this.analyzeLocation({repo:_});if(_e.existingEntityFiles.length>0){const fe=_e.existingEntityFiles.reduce((ve,Y)=>{var v;return ve[Y.location.target]={target:Y.location.target,exists:Y.isRegistered,entities:[...Y.location.target in ve?ve[Y.location.target].entities:[],{name:Y.entity.metadata.name,namespace:(v=Y.entity.metadata.namespace)!=null?v:"default",kind:Y.entity.kind}]},ve},{});return{type:"locations",locations:Object.values(fe)}}return{type:"repository",integrationType:"github",url:_,generatedEntities:_e.generateEntities.map(fe=>fe.entity)}}async preparePullRequest(){var _;const b=(_=this.configApi.getOptionalString("app.title"))!=null?_:"Backstage",N=this.configApi.getString("app.baseUrl");return{title:`Add ${Te(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${b} software catalog](${N}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(_){const{repositoryUrl:b,fileContent:N,title:_e,body:fe}=_,ve=a(this.scmIntegrationsApi,b);if(ve)return await this.submitGitHubPrToRepo({...ve,repositoryUrl:b,fileContent:N,title:_e,body:fe});throw new Error("unimplemented!")}async analyzeLocation(_){const{token:b}=await this.identityApi.getCredentials(),N=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...b&&{Authorization:`Bearer ${b}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:_.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(fe=>{throw new Error(`Failed to generate entity definitions, ${fe.message}`)});if(!N.ok)throw new Error(`Failed to generate entity definitions. Received http response ${N.status}: ${N.statusText}`);return await N.json()}async submitGitHubPrToRepo(_){const{owner:b,repo:N,title:_e,body:fe,fileContent:ve,repositoryUrl:Y,githubIntegrationConfig:v}=_,{token:ee}=await this.scmAuthApi.getCredentials({url:Y,additionalScope:{repoWrite:!0}}),oe=new B.v({auth:ee,baseUrl:v.apiBaseUrl}),Rt=ie(this.configApi),T=Te(this.configApi),sn=await oe.repos.get({owner:b,repo:N}).catch(yt=>{throw new Error(re("Couldn't fetch repo data",yt))}),me=await oe.git.getRef({owner:b,repo:N,ref:`heads/${sn.data.default_branch}`}).catch(yt=>{throw new Error(re("Couldn't fetch default branch data",yt))});return await oe.git.createRef({owner:b,repo:N,ref:`refs/heads/${Rt}`,sha:me.data.object.sha}).catch(yt=>{throw new Error(re(`Couldn't create a new branch with name '${Rt}'`,yt))}),await oe.repos.createOrUpdateFileContents({owner:b,repo:N,path:T,message:_e,content:i.DS.encode(ve),branch:Rt}).catch(yt=>{throw new Error(re(`Couldn't create a commit with ${T} file added`,yt))}),{link:(await oe.pulls.create({owner:b,repo:N,title:_e,head:Rt,body:fe,base:sn.data.default_branch}).catch(yt=>{throw new Error(re(`Couldn't create a pull request for ${Rt} branch`,yt))})).data.html_url,location:`https://${v.host}/${b}/${N}/blob/${sn.data.default_branch}/${T}`}}}function re(R,_){return`${R}, received http response status code ${_.status}: ${_.message}`}const Oe=(0,m.NT)({id:"catalog-import"}),I=(0,m.rx)({id:"catalog-import",apis:[(0,m.ni)({api:Ne,deps:{discoveryApi:o.q,scmAuthApi:p.Om,identityApi:o.t,scmIntegrationsApi:p.q3,catalogApi:z.Ah,configApi:o.p},factory:({discoveryApi:R,scmAuthApi:_,identityApi:b,scmIntegrationsApi:N,catalogApi:_e,configApi:fe})=>new be({discoveryApi:R,scmAuthApi:_,scmIntegrationsApi:N,identityApi:b,catalogApi:_e,configApi:fe})})],routes:{importPage:Oe}}),c=I.provide((0,m.P4)({name:"CatalogImportPage",component:()=>e.e(3591).then(e.bind(e,23591)).then(R=>R.ImportPage),mountPoint:Oe}))},61068:($n,qt,e)=>{"use strict";e.d(qt,{N$:()=>An});var o=e(18473),m=e(2784),p=e(57032),z=e(30705),B=e(30195),i=e(29641);const $=(0,o.CT)("analytics-context"),Qe=()=>{const A=useContext($);if(A===void 0)return{pluginId:"root",extensionId:"App"};const F=A.atVersion(1);if(F===void 0)throw new Error("No context found for version 1.");return F},Ne=A=>{const{attributes:F,children:Pe}=A,Ot={...Qe(),...F},Vt=createVersionedValueMap({1:Ot});return React.createElement($.Provider,{value:Vt},Pe)},a=(0,p.c)({id:"core.app-tree"}),xe=(0,p.c)({id:"core.components"});function Te(A){return(0,p.u)(xe).getComponent(A)}const ie=(0,p.c)({id:"core.analytics"}),G=(0,o.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),Ge="_ROUTABLE-EXTENSION-RENDERED";class ge{constructor(F,Pe={pluginId:"root",extensionId:"App"}){this.analyticsApi=F,this.context=Pe,G.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{G.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...G.mostRecentGatheredNavigation,...G.mostRecentRoutableExtensionRender}),G.mostRecentGatheredNavigation=void 0,G.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),G.beforeUnloadRegistered=!0)}setContext(F){this.context=F}captureEvent(F,Pe,{value:gt,attributes:Ot}={}){const Vt=this.context;if(F===Ge){G.mostRecentGatheredNavigation&&(G.mostRecentRoutableExtensionRender={context:{...Vt,extensionId:"App"}});return}if(G.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...G.mostRecentGatheredNavigation,...G.mostRecentRoutableExtensionRender})}catch(ae){console.warn("Error during analytics event capture. %o",ae)}G.mostRecentGatheredNavigation=void 0,G.mostRecentRoutableExtensionRender=void 0}if(F==="navigate"&&Vt.pluginId==="root"){G.mostRecentGatheredNavigation={action:F,subject:Pe,value:gt,attributes:Ot,context:Vt};return}try{this.analyticsApi.captureEvent({action:F,subject:Pe,value:gt,attributes:Ot,context:Vt})}catch(ae){console.warn("Error during analytics event capture. %o",ae)}}}function be(){try{return useApi(ie)}catch{return{captureEvent:()=>{}}}}function re(){const A=useRef(null),F=Qe(),Pe=be();function gt(){return A.current===null&&(A.current=new ge(Pe)),A.current}const Ot=gt();return Ot.setContext(F),Ot}var Oe=Object.defineProperty,I=(A,F,Pe)=>F in A?Oe(A,F,{enumerable:!0,configurable:!0,writable:!0,value:Pe}):A[F]=Pe,c=(A,F,Pe)=>(I(A,typeof F!="symbol"?F+"":F,Pe),Pe);class R extends m.Component{constructor(){super(...arguments),c(this,"state",{error:void 0}),c(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(F){return{error:F}}render(){const{error:F}=this.state,{plugin:Pe,children:gt,Fallback:Ot}=this.props;return F?m.createElement(Ot,{plugin:Pe,error:F,resetError:this.handleErrorReset}):gt}}(0,o.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1}));const _="_ROUTABLE-EXTENSION-RENDERED";function b(A){const{id:F}=A;return{id:F,toString(){return`ComponentRef{id=${F}}`}}}const N=b({id:"core.components.progress"}),_e=b({id:"core.components.notFoundErrorPage"}),fe=b({id:"core.components.errorBoundaryFallback"}),ve={progress:N,notFoundErrorPage:_e,errorBoundaryFallback:fe},Y=A=>{const{disableTracking:F,children:Pe}=A,gt=(0,z.z$)();return(0,m.useEffect)(()=>{F||gt.captureEvent(_,"")},[gt,F]),m.createElement(m.Fragment,null,Pe)};function v(A){var F;const{node:Pe,routable:gt,children:Ot}=A,Vt=Pe.spec.source,ae=Te(ve.progress),Ae=Te(ve.errorBoundaryFallback),je={extensionId:Pe.spec.id,pluginId:(F=Pe.spec.source)==null?void 0:F.id};return m.createElement(m.Suspense,{fallback:m.createElement(ae,null)},m.createElement(R,{plugin:Vt,Fallback:Ae},m.createElement(z.fC,{attributes:je},m.createElement(Y,{disableTracking:!gt},Ot))))}function ee(A){return{id:A,$$type:"@backstage/ExtensionDataRef",config:{},optional(){return{...this,config:{...this.config,optional:!0}}},toString(){const F=Boolean(this.config.optional);return`ExtensionDataRef{id=${A},optional=${F}}`}}}const oe={reactElement:ee("core.reactElement"),routePath:ee("core.routing.path"),routeRef:ee("core.routing.ref")};function Rt(A){const F=A;if(F.$$type!=="@backstage/ExtensionDefinition")throw new Error(`Invalid extension definition instance, bad type '${F.$$type}'`);if(F.version!=="v1")throw new Error(`Invalid extension definition instance, bad version '${F.version}'`);return F}function T(A){var F,Pe;return{$$type:"@backstage/ExtensionDefinition",version:"v1",kind:A.kind,namespace:A.namespace,name:A.name,attachTo:A.attachTo,disabled:(F=A.disabled)!=null?F:!1,inputs:(Pe=A.inputs)!=null?Pe:{},output:A.output,configSchema:A.configSchema,factory({inputs:gt,...Ot}){return A.factory({inputs:gt,...Ot})},toString(){const gt=[];return A.kind&&gt.push(`kind=${A.kind}`),A.namespace&&gt.push(`namespace=${A.namespace}`),A.name&&gt.push(`name=${A.name}`),gt.push(`attachTo=${A.attachTo.id}@${A.attachTo.input}`),`ExtensionDefinition{${gt.join(",")}}`}}}function sn(A,F){return{$$type:"@backstage/ExtensionInput",extensionData:A,config:{singleton:Boolean(F==null?void 0:F.singleton),optional:Boolean(F==null?void 0:F.optional)}}}function me(A,F){var Pe;const gt=Rt(A),{name:Ot,kind:Vt,namespace:ae,...Ae}=gt,je=(Pe=gt.namespace)!=null?Pe:F==null?void 0:F.namespace,Ht=Ot&&je?`${je}/${Ot}`:je||Ot;if(!Ht)throw new Error(`Extension must declare an explicit namespace or name as it could not be resolved from context, kind=${Vt} namespace=${je} name=${Ot}`);const nn=Vt?`${Vt}:${Ht}`:Ht;return{...Ae,$$type:"@backstage/Extension",version:"v1",id:nn,toString(){return`Extension{id=${nn}}`}}}function Zt(A){var F,Pe,gt,Ot;const Vt=((F=A.extensions)!=null?F:[]).map(Ae=>me(Ae,{namespace:A.id})),ae=Vt.map(Ae=>Ae.id);if(ae.length!==new Set(ae).size){const Ae=Array.from(new Set(ae.filter((je,Ht)=>ae.indexOf(je)!==Ht)));throw new Error(`Plugin '${A.id}' provided duplicate extensions: ${Ae.join(", ")}`)}return{$$type:"@backstage/BackstagePlugin",version:"v1",id:A.id,routes:(Pe=A.routes)!=null?Pe:{},externalRoutes:(gt=A.externalRoutes)!=null?gt:{},featureFlags:(Ot=A.featureFlags)!=null?Ot:[],extensions:Vt,toString(){return`Plugin{id=${A.id}}`}}}function yt(A){var F;const Pe=A.extensions.map(Ot=>me(Ot)),gt=(F=A.featureFlags)!=null?F:[];return{$$type:"@backstage/ExtensionOverrides",version:"v1",extensions:Pe,featureFlags:gt,toString(){const Ot=Pe.map(String).join(","),Vt=gt.map(ae=>ae.name).join(",");return`ExtensionOverrides{extensions=[${Ot}],featureFlags=[${Vt}]}`}}}function mt(A){const{factory:F,configSchema:Pe,inputs:gt}=A,Ot="api"in A?A.api:F.api;return T({kind:"api",namespace:Ot.id,attachTo:{id:"app",input:"apis"},inputs:gt,configSchema:Pe,output:{api:mt.factoryDataRef},factory({config:Vt,inputs:ae}){return typeof F=="function"?{api:F({config:Vt,inputs:ae})}:{api:F}}})}(A=>{A.factoryDataRef=ee("core.api.factory")})(mt||(mt={}));function It(A){var F;return T({kind:"app-root-element",namespace:A.namespace,name:A.name,attachTo:(F=A.attachTo)!=null?F:{id:"app/root",input:"elements"},configSchema:A.configSchema,disabled:A.disabled,inputs:A.inputs,output:{element:oe.reactElement},factory({inputs:Pe,config:gt}){return{element:typeof A.element=="function"?A.element({inputs:Pe,config:gt}):A.element}}})}function We(A){var F;return T({kind:"app-root-wrapper",namespace:A.namespace,name:A.name,attachTo:(F=A.attachTo)!=null?F:{id:"app/root",input:"wrappers"},configSchema:A.configSchema,disabled:A.disabled,inputs:A.inputs,output:{component:We.componentDataRef},factory({inputs:Pe,config:gt}){return{component:Vt=>m.createElement(A.Component,{inputs:Pe,config:gt},Vt.children)}}})}(A=>{A.componentDataRef=ee("app.root.wrapper")})(We||(We={}));function Pt(A){var F;return T({kind:"app-router-component",namespace:A.namespace,name:A.name,attachTo:(F=A.attachTo)!=null?F:{id:"app/root",input:"router"},configSchema:A.configSchema,disabled:A.disabled,inputs:A.inputs,output:{component:Pt.componentDataRef},factory({inputs:Pe,config:gt}){return{component:Vt=>m.createElement(A.Component,{inputs:Pe,config:gt},Vt.children)}}})}(A=>{A.componentDataRef=ee("app.router.wrapper")})(Pt||(Pt={}));function ot(A){const F=A(B.z);return{parse:Pe=>{const gt=F.safeParse(Pe);if(gt.success)return gt.data;throw new Error(gt.error.issues.map(zt).join("; "))},schema:(0,i.ZP)(F)}}function zt(A){if(A.code==="invalid_union")return zt(A.unionErrors[0].issues[0]);let F=A.message;return F==="Required"&&(F="Missing required value"),A.path.length&&(F+=` at '${A.path.join(".")}'`),F}function Tt(A){var F;const Pe="configSchema"in A?A.configSchema:ot(gt=>gt.object({path:gt.string().default(A.defaultPath)}));return T({kind:"page",namespace:A.namespace,name:A.name,attachTo:(F=A.attachTo)!=null?F:{id:"app/routes",input:"routes"},configSchema:Pe,inputs:A.inputs,disabled:A.disabled,output:{element:oe.reactElement,path:oe.routePath,routeRef:oe.routeRef.optional()},factory({config:gt,inputs:Ot,node:Vt}){const ae=lazy(()=>A.loader({config:gt,inputs:Ot}).then(Ae=>({default:()=>Ae})));return{path:gt.path,routeRef:A.routeRef,element:React.createElement(v,{node:Vt,routable:!0},React.createElement(ae,null))}}})}function Ft(A){const{routeRef:F,title:Pe,icon:gt,namespace:Ot,name:Vt}=A;return T({namespace:Ot,name:Vt,kind:"nav-item",attachTo:{id:"app/nav",input:"items"},configSchema:ot(ae=>ae.object({title:ae.string().default(Pe)})),output:{navTarget:Ft.targetDataRef},factory:({config:ae})=>({navTarget:{title:ae.title,icon:gt,routeRef:F}})})}(A=>{A.targetDataRef=ee("core.nav-item.target")})(Ft||(Ft={}));function ct(A){const{logoIcon:F,logoFull:Pe}=A;return T({kind:"nav-logo",name:A==null?void 0:A.name,namespace:A==null?void 0:A.namespace,attachTo:{id:"app/nav",input:"logos"},output:{logos:ct.logoElementsDataRef},factory:()=>({logos:{logoIcon:F,logoFull:Pe}})})}(A=>{A.logoElementsDataRef=ee("core.nav-logo.logo-elements")})(ct||(ct={}));function ht(A){var F;return T({kind:"sign-in-page",namespace:A==null?void 0:A.namespace,name:A==null?void 0:A.name,attachTo:(F=A.attachTo)!=null?F:{id:"app/root",input:"signInPage"},configSchema:A.configSchema,inputs:A.inputs,disabled:A.disabled,output:{component:ht.componentDataRef},factory({config:Pe,inputs:gt,node:Ot}){const Vt=(0,m.lazy)(()=>A.loader({config:Pe,inputs:gt}).then(ae=>({default:ae})));return{component:ae=>m.createElement(v,{node:Ot,routable:!0},m.createElement(Vt,{...ae}))}}})}(A=>{A.componentDataRef=ee("core.sign-in-page.component")})(ht||(ht={}));function $t(A){return T({kind:"theme",namespace:"app",name:A.id,attachTo:{id:"app",input:"themes"},output:{theme:$t.themeDataRef},factory:()=>({theme:A})})}(A=>{A.themeDataRef=ee("core.theme.theme")})($t||($t={}));function an(A){return T({kind:"component",namespace:A.ref.id,name:A.name,attachTo:{id:"app",input:"components"},inputs:A.inputs,disabled:A.disabled,configSchema:A.configSchema,output:{component:an.componentDataRef},factory({config:F,inputs:Pe,node:gt}){let Ot;if("sync"in A.loader)Ot=A.loader.sync({config:F,inputs:Pe});else{const Vt=A.loader.lazy;Ot=(0,m.lazy)(()=>Vt({config:F,inputs:Pe}).then(ae=>({default:ae})))}return{component:{ref:A.ref,impl:Vt=>m.createElement(v,{node:gt},m.createElement(Ot,{...Vt}))}}}})}(A=>{A.componentDataRef=ee("core.component.component")})(an||(an={}));function St(A){return T({kind:"translation",namespace:A.resource.id,name:A.name,attachTo:{id:"app",input:"translations"},output:{resource:St.translationDataRef},factory:()=>({resource:A.resource})})}(A=>{A.translationDataRef=ee("core.translation.translation")})(St||(St={}));const Gt="eHgtF5hmbrXyiEvo";function D(A=Error){const{stack:F}=new A(Gt);if(!F)return"<unknown>";const Pe=F.includes(Gt)?F.indexOf(`
`)+1:0,gt=F.indexOf(`
`,F.indexOf(`
`,Pe)+1)+1,Ot=F.indexOf(`
`,gt),Vt=F.substring(gt,Ot).trim();return Vt?Vt.includes("(")?Vt.substring(Vt.indexOf("(")+1,Vt.indexOf(")")):Vt.includes("@")?Vt.substring(Vt.indexOf("@")+1):Vt:"unknown"}var U=Object.defineProperty,O=(A,F,Pe)=>F in A?U(A,F,{enumerable:!0,configurable:!0,writable:!0,value:Pe}):A[F]=Pe,M=(A,F,Pe)=>(O(A,typeof F!="symbol"?F+"":F,Pe),Pe),ne=(A,F,Pe)=>{if(!F.has(A))throw TypeError("Cannot "+Pe)},he=(A,F,Pe)=>(ne(A,F,"read from private field"),Pe?Pe.call(A):F.get(A)),ze=(A,F,Pe)=>{if(F.has(A))throw TypeError("Cannot add the same private member more than once");F instanceof WeakSet?F.add(A):F.set(A,Pe)},Ct=(A,F,Pe,gt)=>(ne(A,F,"write to private field"),gt?gt.call(A,Pe):F.set(A,Pe),Pe),Ye,Mt,rn,Wt,ft;function we(A){const F=A;if(F.$$type!=="@backstage/RouteRef")throw new Error(`Invalid RouteRef, bad type '${F.$$type}'`);return F}class rt{constructor(F=[],Pe){this.params=F,ze(this,Wt),M(this,"$$type","@backstage/RouteRef"),M(this,"version","v1"),ze(this,Ye,void 0),ze(this,Mt,void 0),ze(this,rn,void 0),Ct(this,Mt,F),Ct(this,rn,Pe)}getParams(){return he(this,Mt)}getDescription(){return he(this,Ye)?he(this,Ye):`created at '${he(this,rn)}'`}setId(F){if(!F)throw new Error(`${he(this,Wt,ft)} id must be a non-empty string`);if(he(this,Ye))throw new Error(`${he(this,Wt,ft)} was referenced twice as both '${he(this,Ye)}' and '${F}'`);Ct(this,Ye,F)}toString(){return`${he(this,Wt,ft)}{${this.getDescription()}}`}}Ye=new WeakMap,Mt=new WeakMap,rn=new WeakMap,Wt=new WeakSet,ft=function(){return this.$$type.slice(11)};function xt(A){return new rt(A==null?void 0:A.params,D())}var kt=Object.defineProperty,le=(A,F,Pe)=>F in A?kt(A,F,{enumerable:!0,configurable:!0,writable:!0,value:Pe}):A[F]=Pe,Ue=(A,F,Pe)=>(le(A,typeof F!="symbol"?F+"":F,Pe),Pe),Lt=(A,F,Pe)=>{if(!F.has(A))throw TypeError("Cannot "+Pe)},Yt=(A,F,Pe)=>(Lt(A,F,"read from private field"),Pe?Pe.call(A):F.get(A)),se=(A,F,Pe)=>{if(F.has(A))throw TypeError("Cannot add the same private member more than once");F instanceof WeakSet?F.add(A):F.set(A,Pe)},Ze=(A,F,Pe,gt)=>(Lt(A,F,"write to private field"),gt?gt.call(A,Pe):F.set(A,Pe),Pe),pe,Me;const nt=/^\w+$/;class pt{constructor(F,Pe,gt){this.path=F,Ue(this,"$$type","@backstage/SubRouteRef"),Ue(this,"version","v1"),se(this,pe,void 0),se(this,Me,void 0),Ze(this,pe,Pe),Ze(this,Me,gt)}getParams(){return Yt(this,pe)}getParent(){return Yt(this,Me)}getDescription(){const F=we(Yt(this,Me));return`at ${this.path} with parent ${F.getDescription()}`}toString(){return`SubRouteRef{${this.getDescription()}}`}}pe=new WeakMap,Me=new WeakMap;function Bt(A){const{path:F,parent:Pe}=A,Ot=we(Pe).getParams(),Vt=F.split("/").filter(je=>je.startsWith(":")).map(je=>je.substring(1)),ae=[...Ot,...Vt];if(Ot.some(je=>Vt.includes(je)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!F.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${F}'`);if(F.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${F}'`);for(const je of Vt)if(!nt.test(je))throw new Error(`SubRouteRef path has invalid param, got '${je}'`);return new pt(F,ae,Pe)}var tn=Object.defineProperty,Ce=(A,F,Pe)=>F in A?tn(A,F,{enumerable:!0,configurable:!0,writable:!0,value:Pe}):A[F]=Pe,Le=(A,F,Pe)=>(Ce(A,typeof F!="symbol"?F+"":F,Pe),Pe);class P extends null{constructor(F,Pe=[],gt){super(Pe,gt),this.optional=F,this.params=Pe,Le(this,"$$type","@backstage/ExternalRouteRef")}}function W(A){return new P(Boolean(A==null?void 0:A.optional),A==null?void 0:A.params,D())}function J(A){const{pathname:F}=useLocation(),Pe=useVersionedContext("routing-context");if(!Pe)throw new Error("Routing context is not available");const gt=Pe.atVersion(1),Ot=useMemo(()=>gt&&gt.resolve(A,{pathname:F}),[gt,A,F]);if(!Pe)throw new Error("useRouteRef used outside of routing context");if(!gt)throw new Error("RoutingContext v1 not available");const Vt="optional"in A&&A.optional;if(!Ot&&!Vt)throw new Error(`No path for ${A}`);return Ot}function it(A){return useParams()}var ut=e(34520),Et=e(56563),Jt=e(78373);function mn(A,F){const Pe=new Set([...getEntityRelations(A,RELATION_MEMBER_OF,{kind:"group"}),...A?[getCompoundEntityRef(A)]:[]].map(stringifyEntityRef)),gt=getEntityRelations(F,RELATION_OWNED_BY).map(stringifyEntityRef);for(const Ot of gt)if(Pe.has(Ot))return!0;return!1}function An(A){const{entity:F,loading:Pe,error:gt}=(0,Jt.a)(),{allowed:Ot,loading:Vt,error:ae}=(0,Et.gI)({permission:A,resourceRef:F?(0,ut.eE)(F):void 0});return Pe||Vt?{loading:!0,allowed:!1}:gt?{loading:!1,allowed:!1,error:gt}:{loading:!1,allowed:Ot,error:ae}}const vn={entityContentTitle:ee("catalog.entity-content-title"),entityFilterFunction:ee("catalog.entity-filter-function"),entityFilterExpression:ee("catalog.entity-filter-expression")};function Vn(A){var F,Pe;return createExtension({kind:"entity-card",namespace:A.namespace,name:A.name,attachTo:(F=A.attachTo)!=null?F:{id:"entity-content:catalog/overview",input:"cards"},disabled:(Pe=A.disabled)!=null?Pe:!0,output:{element:coreExtensionData.reactElement,filterFunction:vn.entityFilterFunction.optional(),filterExpression:vn.entityFilterExpression.optional()},inputs:A.inputs,configSchema:createSchemaFromZod(gt=>gt.object({filter:gt.string().optional()})),factory({config:gt,inputs:Ot,node:Vt}){const ae=lazy(()=>A.loader({inputs:Ot}).then(Ae=>({default:()=>Ae})));return{element:React.createElement(ExtensionBoundary,{node:Vt},React.createElement(ae,null)),...Zn({config:gt,options:A})}}})}function Mn(A){var F,Pe;return createExtension({kind:"entity-content",namespace:A.namespace,name:A.name,attachTo:(F=A.attachTo)!=null?F:{id:"page:catalog/entity",input:"contents"},disabled:(Pe=A.disabled)!=null?Pe:!0,output:{element:coreExtensionData.reactElement,path:coreExtensionData.routePath,routeRef:coreExtensionData.routeRef.optional(),title:vn.entityContentTitle,filterFunction:vn.entityFilterFunction.optional(),filterExpression:vn.entityFilterExpression.optional()},inputs:A.inputs,configSchema:createSchemaFromZod(gt=>gt.object({path:gt.string().default(A.defaultPath),title:gt.string().default(A.defaultTitle),filter:gt.string().optional()})),factory({config:gt,inputs:Ot,node:Vt}){const ae=lazy(()=>A.loader({inputs:Ot}).then(Ae=>({default:()=>Ae})));return{path:gt.path,title:gt.title,routeRef:A.routeRef,element:React.createElement(ExtensionBoundary,{node:Vt,routable:!0},React.createElement(ae,null)),...Zn({config:gt,options:A})}}})}function Zn(A){const{options:F,config:Pe}=A;return Pe.filter?{filterExpression:Pe.filter}:typeof F.filter=="string"?{filterExpression:F.filter}:typeof F.filter=="function"?{filterFunction:F.filter}:{}}},78373:($n,qt,e)=>{"use strict";e.d(qt,{A:()=>$,a:()=>a,g:()=>B,u:()=>Ne});var o=e(34520),m=e(30705),p=e(18473),z=e(2784);function B(xe,Te,ie){var G;let Ge=((G=xe==null?void 0:xe.relations)==null?void 0:G.filter(ge=>ge.type===Te).map(ge=>(0,o.of)(ge.targetRef)))||[];return ie!=null&&ie.kind&&(Ge=Ge.filter(ge=>ge.kind.toLocaleLowerCase("en-US")===ie.kind.toLocaleLowerCase("en-US"))),Ge}const i=(0,p.CT)("entity-context"),$=xe=>{const{children:Te,entity:ie,loading:G,error:Ge,refresh:ge}=xe,be={entity:ie,loading:G,error:Ge,refresh:ge};return z.createElement(i.Provider,{value:(0,p.EI)({1:be})},z.createElement(m.fC,{attributes:{...ie?{entityRef:(0,o.eE)(ie)}:void 0}},Te))},Qe=xe=>React.createElement($,{entity:xe.entity,loading:!Boolean(xe.entity),error:void 0,refresh:void 0,children:xe.children});function Ne(){const xe=(0,p.Vt)("entity-context");if(!xe)throw new Error("Entity context is not available");const Te=xe.atVersion(1);if(!Te)throw new Error("EntityContext v1 not available");if(!Te.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:Te.entity}}function a(){const xe=(0,p.Vt)("entity-context");if(!xe)throw new Error("Entity context is not available");const Te=xe.atVersion(1);if(!Te)throw new Error("EntityContext v1 not available");const{entity:ie,loading:G,error:Ge,refresh:ge}=Te;return{entity:ie,loading:G,error:Ge,refresh:ge}}},73495:($n,qt,e)=>{"use strict";e.d(qt,{$3:()=>wt,Ah:()=>W,CR:()=>et,CV:()=>ae,EW:()=>dr,LH:()=>va,UO:()=>Pa,U_:()=>kr,Uh:()=>Ea,XI:()=>J,ZW:()=>H,_i:()=>Pe,co:()=>ka,df:()=>dn,dq:()=>Aa,dx:()=>Ra,eK:()=>X,n8:()=>it,nN:()=>Fa,nl:()=>Pr,p3:()=>An,ph:()=>Ja,pp:()=>oo,rI:()=>Na,sL:()=>Ua,sk:()=>Gr,tW:()=>k,u3:()=>Ln,wi:()=>Wa,wp:()=>Qn,xE:()=>ha});var o=e(57032),m=e(30705),p=e(34520),z=e(72579),B=e.n(z),i=e(2784),$=e(82394),Qe=e.n($),Ne=e(41156),a=e(60364),xe=e(77277),Te=e(4190),ie=e(95544),G=e(90436),Ge=e(60905),ge=e(21324),be=e(5806),re=e(79692),Oe=e(86619),I=e(80030),c=e(15223),R=e(42494),_=e(29611),b=e(50581),N=e(61837),_e=e(15459),fe=e(55999),ve=e(49378),Y=e(54506),v=e(94339),ee=e(24579),oe=e(38402),Rt=e(86136),T=e(11776),sn=e(9520),me=e(8629),Zt=e(79249),yt=e(38724),mt=e(99152),It=e(6487),We=e(49429),Pt=e(85256),ot=e(12231),zt=e(36444),Tt=e(49558),Ft=e(78373),ct=e(76635),ht=e.n(ct),$t=e(19126),an=e.n($t),St=e(73557),Gt=e(69294),D=e(48760),U=e(90736),O=e(64279),M=e(18149),ne=e.n(M),he=e(829),ze=e.n(he),Ct=e(72164),Ye=e(38016),Mt=e(88013),rn=e(99688),Wt=e(19996),ft=e(25505),we=e(12524),rt=e.n(we),xt=e(89586),kt=e(5270),le=e(98685),Ue=e(62367),Lt=e(18473),Yt=e(33375),se=e(21853),Ze=e(11640),pe=e(28347),Me=e(39412),nt=e(27685),pt=e(3440),Bt=e.n(pt),tn=e(10921),Ce=e(32272),Le=e(47603),P=e(38408);const W=(0,o.c)({id:"plugin.catalog.service"}),J=(0,o.c)({id:"plugin.catalog.entity-presentation"});function it(h,S){const{kind:x,namespace:Z,name:ue,title:$e,description:Ke,displayName:Ve,type:_t}=ut(h),Kt=(0,p.eE)({kind:x||"unknown",namespace:Z||p.zG,name:ue||"unknown"}),Nt=Et({kind:x,namespace:Z,name:ue,context:S}),cn=[Ve,$e,Nt].find(fn=>fn&&typeof fn=="string"),Pn=[cn!==Kt?Kt:void 0,_t,Ke].filter(fn=>fn&&typeof fn=="string").join(" | ");return{entityRef:Kt,primaryTitle:cn,secondaryTitle:Pn||void 0,Icon:void 0}}function ut(h){if(typeof h=="string"){let S=h.indexOf(":");const x=h.indexOf("/");x!==-1&&x<S&&(S=-1);const Z=S===-1?void 0:h.slice(0,S),ue=x===-1?void 0:h.slice(S+1,x),$e=h.slice(Math.max(S+1,x+1));return{kind:Z,namespace:ue,name:$e}}if(typeof h=="object"&&h!==null){const S=[B()(h,"kind")].find(_t=>_t&&typeof _t=="string"),x=[B()(h,"metadata.namespace"),B()(h,"namespace")].find(_t=>_t&&typeof _t=="string"),Z=[B()(h,"metadata.name"),B()(h,"name")].find(_t=>_t&&typeof _t=="string"),ue=[B()(h,"metadata.title")].find(_t=>_t&&typeof _t=="string"),$e=[B()(h,"metadata.description")].find(_t=>_t&&typeof _t=="string"),Ke=[B()(h,"spec.profile.displayName")].find(_t=>_t&&typeof _t=="string"),Ve=[B()(h,"spec.type")].find(_t=>_t&&typeof _t=="string");return{kind:S,namespace:x,name:Z,title:ue,description:$e,displayName:Ke,type:Ve}}return{}}function Et(h){var S,x,Z,ue,$e;const Ke=((S=h.kind)==null?void 0:S.toLocaleLowerCase("en-US"))||"unknown",Ve=h.namespace||p.zG,_t=h.name||"unknown",Kt=(Z=(x=h.context)==null?void 0:x.defaultKind)==null?void 0:Z.toLocaleLowerCase("en-US"),Nt=($e=(ue=h.context)==null?void 0:ue.defaultNamespace)==null?void 0:$e.toLocaleLowerCase("en-US");let cn=_t;return(Nt&&Ve.toLocaleLowerCase("en-US")!==Nt||Ve!==p.zG)&&(cn=`${Ve}/${cn}`),Kt&&Ke.toLocaleLowerCase("en-US")!==Kt&&(cn=`${Ke}:${cn}`),cn}function Jt(h,S,x){const[Z,ue]=(0,i.useState)(h);return(0,i.useEffect)(()=>{ue(h);const $e=S==null?void 0:S.subscribe({next:Ke=>{ue(Ke)},complete:()=>{$e==null||$e.unsubscribe()}});return()=>{$e==null||$e.unsubscribe()}},x),Z}function mn(h,S){const Z=(0,o.b)().get(J),ue=[Z,JSON.stringify(h),JSON.stringify(S||null)],$e=(0,i.useMemo)(()=>Z?Z.forEntity(typeof h=="string"||"metadata"in h?h:(0,p.eE)(h),S):{snapshot:it(h,S)},ue);return Jt($e.snapshot,$e.update$,[$e])}const An=(0,o.c)({id:"catalog-react.starred-entities"});var vn=Object.defineProperty,Vn=(h,S,x)=>S in h?vn(h,S,{enumerable:!0,configurable:!0,writable:!0,value:x}):h[S]=x,Mn=(h,S,x)=>(Vn(h,typeof S!="symbol"?S+"":S,x),x);class Zn{constructor(){Mn(this,"starredEntities",new Set),Mn(this,"subscribers",new Set),Mn(this,"observable",new ObservableImpl(S=>(S.next(new Set(this.starredEntities)),this.subscribers.add(S),()=>{this.subscribers.delete(S)})))}async toggleStarred(S){this.starredEntities.delete(S)||this.starredEntities.add(S);for(const x of this.subscribers)x.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const A=h=>{var S,x;const Z=(0,Ne.Z)(Ve=>{var _t,Kt;return Ve.breakpoints.down((Kt=(_t=h.options)==null?void 0:_t.drawerBreakpoint)!=null?Kt:"md")}),ue=(0,a.Z)(),[$e,Ke]=(0,i.useState)(!1);return Z?i.createElement(i.Fragment,null,i.createElement(xe.Z,{style:{marginTop:ue.spacing(1),marginLeft:ue.spacing(1)},onClick:()=>Ke(!0),startIcon:i.createElement(zt.Z,null)},"Filters"),i.createElement(Te.ZP,{open:$e,onClose:()=>Ke(!1),anchor:(x=(S=h.options)==null?void 0:S.drawerAnchor)!=null?x:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},i.createElement(ie.Z,{m:2},i.createElement(G.Z,{variant:"h6",component:"h2",style:{marginBottom:ue.spacing(1)}},"Filters"),h.children))):i.createElement(Ge.Z,{item:!0,lg:2},h.children)},F=h=>i.createElement(Ge.Z,{item:!0,xs:12,lg:10},h.children),Pe=h=>i.createElement(Ge.Z,{container:!0,style:{position:"relative"}},h.children);Pe.Filters=A,Pe.Content=F;function gt(h){return h.reduce((S,x)=>({...S,...x.getCatalogFilters?x.getCatalogFilters():{}}),{})}function Ot(h){const S={};return h.forEach(x=>{var Z;x instanceof on||x instanceof Bn||x instanceof Hn||x instanceof ra||x instanceof yn||x instanceof ia||x instanceof In||x instanceof na||Object.assign(S,((Z=x.getCatalogFilters)==null?void 0:Z.call(x))||{})}),S}function Vt(h){return S=>h.every(x=>!x.filterEntity||x.filterEntity(S))}function ae(h,S){var x;const Z=(x=h.metadata.annotations)==null?void 0:x[p.M6];if(Z)try{const ue=(0,p.Ou)(Z),$e=S.byUrl(ue.target);return{locationTargetUrl:ue.target,integrationType:$e==null?void 0:$e.type}}catch{return}}var Ae=Object.defineProperty,je=(h,S,x)=>S in h?Ae(h,S,{enumerable:!0,configurable:!0,writable:!0,value:x}):h[S]=x,Ht=(h,S,x)=>(je(h,typeof S!="symbol"?S+"":S,x),x);class nn{constructor(S){this.value=S}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class ln{constructor(S){this.value=S}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class on{constructor(S){this.values=S}filterEntity(S){return this.values.every(x=>{var Z;return((Z=S.metadata.tags)!=null?Z:[]).includes(x)})}getCatalogFilters(){return{"metadata.tags":this.values}}toQueryValue(){return this.values}}class In{constructor(S){this.value=S}filterEntity(S){const x=this.toUpperArray(this.value.split(/\s/)),Z=this.toUpperArray([S.metadata.tags]),ue=this.toUpperArray([S.metadata.name,S.metadata.title]);for(const $e of x)if(Z.every(Ke=>Ke!==$e)&&ue.every(Ke=>!Ke.includes($e)))return!1;return!0}toUpperArray(S){return S.flat().filter(x=>Boolean(x)).map(x=>x.toLocaleUpperCase("en-US"))}}class Bn{constructor(S){Ht(this,"values"),this.values=S.reduce((x,Z)=>{try{return x.push((0,p.eE)((0,p.of)(Z,{defaultKind:"Group"}))),x}catch{return x}},[])}getCatalogFilters(){return{"relations.ownedBy":this.values}}filterEntity(S){return this.values.some(x=>(0,Ft.g)(S,p.S4).some(Z=>(0,p.eE)(Z)===x))}toQueryValue(){return this.values}}class Hn{constructor(S){this.values=S}getCatalogFilters(){return{"spec.lifecycle":this.values}}filterEntity(S){return this.values.some(x=>{var Z;return((Z=S.spec)==null?void 0:Z.lifecycle)===x})}toQueryValue(){return this.values}}class ra{constructor(S){this.values=S}getCatalogFilters(){return{"metadata.namespace":this.values}}filterEntity(S){return this.values.some(x=>S.metadata.namespace===x)}toQueryValue(){return this.values}}class yn{constructor(S,x){this.value=S,this.refs=x}static owned(S){return new yn("owned",S)}static all(){return new yn("all")}static starred(S){return new yn("starred",S)}getCatalogFilters(){var S,x,Z;return this.value==="owned"?{"relations.ownedBy":(S=this.refs)!=null?S:[]}:this.value==="starred"?{"metadata.name":(Z=(x=this.refs)==null?void 0:x.map(ue=>(0,p.of)(ue).name))!=null?Z:[]}:{}}filterEntity(S){var x,Z,ue,$e;if(this.value==="starred")return(Z=(x=this.refs)==null?void 0:x.includes((0,p.eE)(S)))!=null?Z:!0;if(this.value==="owned"){const Ke=(0,Ft.g)(S,p.S4);return($e=(ue=this.refs)==null?void 0:ue.some(Ve=>Ke.some(_t=>(0,p.eE)(_t)===Ve)))!=null?$e:!1}return!0}toQueryValue(){return this.value}}class na{constructor(S,x,Z){this.value=S,this.isOwnedEntity=x,this.isStarredEntity=Z}filterEntity(S){switch(this.value){case"owned":return this.isOwnedEntity(S);case"starred":return this.isStarredEntity(S);default:return!0}}toQueryValue(){return this.value}}class ia{constructor(S){this.value=S}getCatalogFilters(){return this.value?{"metadata.annotations.backstage.io/orphan":String(this.value)}:{}}filterEntity(S){var x;const Z=(x=S.metadata.annotations)==null?void 0:x["backstage.io/orphan"];return Z!==void 0&&this.value.toString()===Z}}class oa{constructor(S){this.value=S}filterEntity(S){var x,Z;const ue=((Z=(x=S==null?void 0:S.status)==null?void 0:x.items)==null?void 0:Z.length)>0;return ue!==void 0&&this.value===ue}}const ua=(0,i.createContext)(void 0),Pa=h=>{const S=(0,U.default)(),x=(0,o.u)(W),[Z,ue]=(0,i.useState)({}),$e=(0,St.TH)(),Ke=h.pagination===!0||typeof h.pagination=="object",Ve=h.pagination&&typeof h.pagination=="object"&&typeof h.pagination.limit=="number"?h.pagination.limit:20,{queryParameters:_t,cursor:Kt}=(0,i.useMemo)(()=>{var zn;const Wn=an().parse($e.search,{ignoreQueryPrefix:!0});return{queryParameters:(zn=Wn.filters)!=null?zn:{},cursor:typeof Wn.cursor=="string"?Wn.cursor:void 0}},[$e]),[Nt,cn]=(0,i.useState)(Kt),[Pn,fn]=(0,i.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[],pageInfo:Ke?{}:void 0})),[{loading:Dn,error:Xn},Cn]=(0,Gt.default)(async()=>{var zn;const Wn=(0,ct.compact)(Object.values(Z)),ya=Object.keys(Z).reduce((_a,ba)=>{const fa=Z[ba];return fa!=null&&fa.toQueryValue&&(_a[ba]=fa.toQueryValue()),_a},{});if(Ke)if(Nt){if(Nt!==Pn.appliedCursor){const _a=Vt(Wn),ba=await x.queryEntities({cursor:Nt,limit:Ve});fn({appliedFilters:Z,appliedCursor:Nt,backendEntities:ba.items,entities:ba.items.filter(_a),pageInfo:ba.pageInfo})}}else{const _a=Vt(Wn),ba=gt(Wn),fa=gt((0,ct.compact)(Object.values(Pn.appliedFilters)));if(!(0,ct.isEqual)(fa,ba)){const wa=await x.queryEntities({filter:ba,limit:Ve,orderFields:[{field:"metadata.name",order:"asc"}]});fn({appliedFilters:Z,backendEntities:wa.items,entities:wa.items.filter(_a),pageInfo:wa.pageInfo})}}else{const _a=Vt(Wn),ba=Ot(Wn),fa=Ot((0,ct.compact)(Object.values(Pn.appliedFilters)));if((0,ct.isEqual)(fa,ba))fn({appliedFilters:Z,backendEntities:Pn.backendEntities,entities:Pn.backendEntities.filter(_a)});else{const wa=await x.getEntities({filter:ba});fn({appliedFilters:Z,backendEntities:wa.items,entities:wa.items.filter(_a)})}}if(S()){const _a=an().parse($e.search,{ignoreQueryPrefix:!0}),ba=an().stringify({..._a,filters:ya,cursor:Nt},{addQueryPrefix:!0,arrayFormat:"repeat"}),fa=`${window.location.pathname}${ba}`;(zn=window.history)==null||zn.replaceState(null,document.title,fa)}},[x,_t,Z,Pn,Nt,Ke],{loading:!0});(0,D.Z)(Cn,10,[Z,Nt]);const ea=(0,i.useCallback)(zn=>{cn(void 0),ue(Wn=>{const ya=typeof zn=="function"?zn(Wn):zn;return{...Wn,...ya}})},[]),ma=(0,i.useMemo)(()=>{var zn,Wn;if(!Ke)return;const ya=(zn=Pn.pageInfo)==null?void 0:zn.prevCursor,_a=(Wn=Pn.pageInfo)==null?void 0:Wn.nextCursor;return{prev:ya?()=>cn(ya):void 0,next:_a?()=>cn(_a):void 0}},[Ke,Pn.pageInfo]),Gn=(0,i.useMemo)(()=>({filters:Pn.appliedFilters,entities:Pn.entities,backendEntities:Pn.backendEntities,updateFilters:ea,queryParameters:_t,loading:Dn,error:Xn,pageInfo:ma}),[Pn,ea,_t,Dn,Xn,ma]);return i.createElement(ua.Provider,{value:Gn},h.children)};function Qn(){const h=(0,i.useContext)(ua);if(!h)throw new Error("useEntityList must be used within EntityListProvider");return h}function Ea(){var h;const S=(0,o.u)(W),{filters:{kind:x,type:Z},queryParameters:{type:ue},updateFilters:$e}=Qn(),Ke=(0,i.useMemo)(()=>[ue].flat().filter(Boolean),[ue]),[Ve,_t]=(0,i.useState)(Ke.length?Ke:(h=Z==null?void 0:Z.getTypes())!=null?h:[]);(0,i.useEffect)(()=>{Ke.length&&_t(Ke)},[Ke]);const[Kt,Nt]=(0,i.useState)([]),cn=(0,i.useMemo)(()=>x==null?void 0:x.value,[x]),{error:Pn,loading:fn,value:Dn}=(0,O.default)(async()=>cn?await S.getEntityFacets({filter:{kind:cn},facets:["spec.type"]}).then(ea=>ea.facets["spec.type"]||[]):[],[cn,S]),Xn=(0,i.useRef)(Dn);return(0,i.useEffect)(()=>{const Cn=Xn.current;if(Xn.current=Dn,fn||!cn||Cn===Dn||!Dn)return;const ea=[...new Set(ze()(Dn,Gn=>-Gn.count).map(Gn=>Gn.value.toLocaleLowerCase("en-US")))];Nt(ea);const ma=Ve.filter(Gn=>ea.includes(Gn));ne()(Ve,ma)||_t(ma)},[fn,cn,Ve,_t,Dn]),(0,i.useEffect)(()=>{$e({type:Ve.length?new ln(Ve):void 0})},[Ve,$e]),{loading:fn,error:Pn,availableTypes:Kt,selectedTypes:Ve,setSelectedTypes:_t}}function X(h,S){var x,Z;const ue=(x=S==null?void 0:S.type)==null?void 0:x.toLocaleLowerCase("en-US"),$e=(Z=S==null?void 0:S.kind)==null?void 0:Z.toLocaleLowerCase("en-US"),Ke=(0,o.u)(W),{loading:Ve,value:_t,error:Kt}=(0,O.default)(async()=>{var Nt;const cn=(Nt=h.relations)==null?void 0:Nt.filter(fn=>(!ue||fn.type.toLocaleLowerCase("en-US")===ue)&&(!$e||(0,p.of)(fn.targetRef).kind===$e));if(!(cn!=null&&cn.length))return[];const{items:Pn}=await Ke.getEntitiesByRefs({entityRefs:cn.map(fn=>fn.targetRef)});return Pn.filter(fn=>Boolean(fn))},[h,ue,$e]);return{entities:_t,loading:Ve,error:Kt}}function Be(h){return typeof h=="string"?h:(0,p.eE)(h)}function et(){const h=(0,o.u)(An),S=(0,Ct.Z)((0,i.useMemo)(()=>h.starredEntitie$(),[h]),new Set),x=(0,i.useCallback)(ue=>S.has(Be(ue)),[S]),Z=(0,i.useCallback)(ue=>h.toggleStarred(Be(ue)).then(),[h]);return{starredEntities:S,toggleStarredEntity:Z,isStarredEntity:x}}function vt(h){return typeof h=="string"?h:(0,p.eE)(h)}function Se(h){const S=(0,o.u)(An),[x,Z]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{const $e=S.starredEntitie$().subscribe({next(Ke){Z(Ke.has(vt(h)))}});return()=>{$e.unsubscribe()}},[h,S]),{toggleStarredEntity:(0,i.useCallback)(()=>S.toggleStarred(vt(h)).then(),[h,S]),isStarredEntity:x}}function H(){const h=(0,o.u)(o.t),{loading:S,value:x}=(0,O.default)(async()=>{const{ownershipEntityRefs:ue}=await h.getBackstageIdentity();return ue},[]),Z=(0,i.useMemo)(()=>{const ue=new Set(x!=null?x:[]);return $e=>{const Ke=(0,Ft.g)($e,p.S4).map(p.eE);for(const Ve of Ke)if(ue.has(Ve))return!0;return!1}},[x]);return{loading:S,isOwnedEntity:Z}}function Ee(){const h=(0,o.u)(W),{error:S,loading:x,value:Z}=(0,O.default)(async()=>await h.getEntityFacets({facets:["kind"]}).then($e=>{var Ke;return((Ke=$e.facets.kind)==null?void 0:Ke.map(Ve=>Ve.value).sort())||[]}),[h]);return{loading:x,error:S,allKinds:Z!=null?Z:[]}}function de(h,S,x){let Z=h;return S&&(Z=Z.filter($e=>S.some(Ke=>Ke.toLocaleLowerCase("en-US")===$e.toLocaleLowerCase("en-US")))),x&&!h.some($e=>$e.toLocaleLowerCase("en-US")===x.toLocaleLowerCase("en-US"))&&(Z=Z.concat([x])),Z.sort().reduce(($e,Ke)=>($e[Ke.toLocaleLowerCase("en-US")]=Ke,$e),{})}function st(h){var S,x;const{filters:Z,queryParameters:{kind:ue},updateFilters:$e}=Qn(),Ke=(0,i.useMemo)(()=>[ue].flat()[0],[ue]),[Ve,_t]=(0,i.useState)((x=Ke!=null?Ke:(S=Z.kind)==null?void 0:S.value)!=null?x:h.initialFilter);(0,i.useEffect)(()=>{Ke&&_t(Ke)},[Ke]),(0,i.useEffect)(()=>{var Pn,fn;(Pn=Z.kind)!=null&&Pn.value&&_t((fn=Z.kind)==null?void 0:fn.value)},[Z.kind]),(0,i.useEffect)(()=>{$e({kind:Ve?new nn(Ve):void 0})},[Ve,$e]);const{allKinds:Kt,loading:Nt,error:cn}=Ee();return{loading:Nt,error:cn,allKinds:Kt!=null?Kt:[],selectedKind:Ve,setSelectedKind:_t}}const k=h=>{const{allowedKinds:S,hidden:x,initialFilter:Z="component"}=h,ue=(0,o.u)(o.l),{error:$e,allKinds:Ke,selectedKind:Ve,setSelectedKind:_t}=st({initialFilter:Z});if((0,i.useEffect)(()=>{$e&&ue.post({message:"Failed to load entity kinds",severity:"error"})},[$e,ue]),$e)return null;const Kt=de(Ke,S,Ve),Nt=Object.keys(Kt).map(cn=>({value:cn,label:Kt[cn]}));return x?null:i.createElement(ie.Z,{pb:1,pt:1},i.createElement(Tt.Ph,{label:"Kind",items:Nt,selected:Ve.toLocaleLowerCase("en-US"),onChange:cn=>_t(String(cn))}))},j=i.createElement(ft.Z,{fontSize:"small"}),Q=i.createElement(Wt.Z,{fontSize:"small"});function te({selected:h}){return i.createElement(ge.Z,{icon:j,checkedIcon:Q,checked:h})}const ke=(0,i.memo)(h=>{const{selected:S,value:x,availableOptions:Z,showCounts:ue}=h,$e=ue?`${x} (${Z==null?void 0:Z[x]})`:x;return i.createElement(be.Z,{control:i.createElement(te,{selected:S}),label:$e,onClick:Ke=>Ke.preventDefault()})}),Je=(0,re.Z)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function He(h){const S=Je();return i.createElement(Oe.Z,{variant:"outlined",...h,className:rt()(S.input,h.className)})}function qe(h){var S,x;const{label:Z,name:ue,path:$e,showCounts:Ke,Filter:Ve,InputProps:_t,initialSelectedOptions:Kt=[]}=h,{updateFilters:Nt,filters:cn,queryParameters:{[ue]:Pn}}=Qn(),fn=(0,o.u)(W),{value:Dn}=(0,O.default)(async()=>{var Wn;const ya=$e,{facets:_a}=await fn.getEntityFacets({facets:[ya],filter:(Wn=cn.kind)==null?void 0:Wn.getCatalogFilters()});return Object.fromEntries(_a[ya].map(({value:ba,count:fa})=>[ba,fa]))},[cn.kind]),Xn=(0,i.useMemo)(()=>[Pn].flat().filter(Boolean),[Pn]),[Cn,ea]=(0,i.useState)(Xn.length?Xn:(x=(S=cn[ue])==null?void 0:S.values)!=null?x:Kt);(0,i.useEffect)(()=>{Xn.length&&ea(Xn)},[Xn]);const ma=Object.keys(Dn!=null?Dn:{}),Gn=Cn.length&&ma.length;(0,i.useEffect)(()=>{Nt({[ue]:Gn?new Ve(Cn):void 0})},[ue,Gn,Cn,Ve,Nt]);const zn=cn[ue];return zn&&typeof zn=="object"&&!("values"in zn)||!ma.length||ma.length<=1?null:i.createElement(ie.Z,{pb:1,pt:1},i.createElement(G.Z,{variant:"button",component:"label"},Z,i.createElement(Mt.ZP,{multiple:!0,disableCloseOnSelect:!0,options:ma,value:Cn,onChange:(Wn,ya)=>ea(ya),renderOption:(Wn,{selected:ya})=>i.createElement(ke,{selected:ya,value:Wn,availableOptions:Dn,showCounts:!!Ke}),size:"small",popupIcon:i.createElement(Ye.Z,{"data-testid":`${String(ue)}-picker-expand`}),renderInput:Wn=>i.createElement(He,{...Wn,..._t})})))}const At=(0,re.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),dn=h=>{const{initialFilter:S=[]}=h,x=At();return i.createElement(qe,{label:"Lifecycle",name:"lifecycles",path:"spec.lifecycle",Filter:Hn,InputProps:{className:x.input},initialSelectedOptions:S})};function wt(h,S){const x=S==null?void 0:S.defaultKind;let Z,ue,$e;return"metadata"in h?(Z=h.kind,ue=h.metadata.namespace,$e=h.metadata.name):(Z=h.kind,ue=h.namespace,$e=h.name),(ue===void 0||ue==="")&&(ue=p.zG),(S==null?void 0:S.defaultNamespace)!==void 0?(S==null?void 0:S.defaultNamespace)===ue&&(ue=void 0):ue===p.zG&&(ue=void 0),Z=Z.toLocaleLowerCase("en-US"),Z=x&&x.toLocaleLowerCase("en-US")===Z?void 0:Z,`${Z?`${Z}:`:""}${ue?`${ue}/`:""}${$e}`}function un(h,S){for(const x of["spec.profile.displayName","metadata.title"]){const Z=B()(h,x);if(Z&&typeof Z=="string")return Z}return S}function hn({enabled:h}){const S=(0,o.u)(W),[x]=(0,i.useState)(async()=>{if(!h)return[];const Z="relations.ownedBy";return S.getEntityFacets({facets:[Z]}).then(ue=>ue.facets[Z].map($e=>$e.value).map($e=>{const{kind:Ke,name:Ve,namespace:_t}=(0,p.of)($e);return{apiVersion:"backstage.io/v1beta1",kind:Ke,metadata:{name:Ve,namespace:_t}}}).sort(($e,Ke)=>($e.metadata.namespace||"").localeCompare(Ke.metadata.namespace||"","en-US")||$e.metadata.name.localeCompare(Ke.metadata.name,"en-US")||$e.kind.localeCompare(Ke.kind,"en-US"))).catch(()=>[])});return(0,Gt.default)(async(Z,ue)=>{var $e;const Ke=await x;if(!Ke)return{items:[]};const Ve=($e=ue==null?void 0:ue.limit)!=null?$e:20,{text:_t,start:Kt}=En(Z),Nt=Ke.filter(Pn=>xn(_t,Pn)),cn=Kt+Ve;return{items:Nt.slice(0,cn),...wn({entities:Nt,limit:cn,payload:{text:_t,start:cn}})}},[x],{loading:!0,value:{items:[]}})}function En(h){return kn(h)&&h.cursor?JSON.parse(atob(h.cursor)):{text:h.text||"",start:0}}function kn(h){return!!h.cursor}function wn({entities:h,limit:S,payload:x}){return h.length>S?{cursor:btoa(JSON.stringify(x))}:{}}function xn(h,S){var x;const Z=h.trim();return S.kind.includes(Z)||((x=S.metadata.namespace)==null?void 0:x.includes(Z))||S.metadata.name.includes(Z)}function Rn(){const h=(0,o.u)(W);return(0,Gt.default)(async(S,x)=>{var Z;const ue=S,$e=S,Ke=(Z=x==null?void 0:x.limit)!=null?Z:20;if($e.cursor){const _t=await h.queryEntities({cursor:$e.cursor,limit:Ke});return{cursor:_t.pageInfo.nextCursor,items:[...$e.items,..._t.items]}}const Ve=await h.queryEntities({fullTextFilter:{term:ue.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:Ke});return{cursor:Ve.pageInfo.nextCursor,items:Ve.items}},[],{loading:!0})}function On({mode:h,initialSelectedOwnersRefs:S}){const x=h==="owners-only",Z=Rn(),ue=hn({enabled:x}),[$e,Ke]=x?ue:Z;return[$e,Ke,pn({enabled:!x,initialSelectedOwnersRefs:S})]}function pn({enabled:h,initialSelectedOwnersRefs:S}){const x=(0,i.useRef)({}),Z=(0,o.u)(W),[,ue]=(0,Gt.default)(async()=>{(await Z.getEntitiesByRefs({entityRefs:S})).items.forEach(Ke=>{Ke&&(x.current[(0,p.eE)(Ke)]=Ke)})},[]);return(0,xt.n)(()=>{h&&S.length>0&&ue()}),{getEntity:$e=>x.current[$e],setEntity:$e=>{x.current[(0,p.eE)($e)]=$e}}}const _n=(0,re.Z)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),aa=i.createElement(ft.Z,{fontSize:"small"}),sa=i.createElement(Wt.Z,{fontSize:"small"}),Aa=h=>{var S,x,Z;const ue=_n(),{mode:$e="owners-only"}=h||{},{updateFilters:Ke,filters:Ve,queryParameters:{owners:_t}}=Qn(),[Kt,Nt]=(0,i.useState)(""),cn=(0,i.useMemo)(()=>[_t].flat().filter(Boolean),[_t]),[Pn,fn]=(0,i.useState)(cn.length?cn:(x=(S=Ve.owners)==null?void 0:S.values)!=null?x:[]),[{value:Dn,loading:Xn},Cn,ea]=On({mode:$e,initialSelectedOwnersRefs:Pn});(0,kt.b)(()=>Cn({text:Kt}),[Kt,Cn],250);const ma=(Dn==null?void 0:Dn.items)||[];return(0,i.useEffect)(()=>{if(cn.length){const Gn=new Bn(cn);fn(Gn.values)}},[cn]),(0,i.useEffect)(()=>{Ke({owners:Pn.length?new Bn(Pn):void 0})},[Pn,Ke]),["user","group"].includes(((Z=Ve.kind)==null?void 0:Z.value.toLocaleLowerCase("en-US"))||"")?null:i.createElement(ie.Z,{pb:1,pt:1},i.createElement(G.Z,{variant:"button",component:"label"},"Owner",i.createElement(Mt.ZP,{multiple:!0,disableCloseOnSelect:!0,loading:Xn,options:ma,value:Pn,getOptionSelected:(Gn,zn)=>typeof zn=="string"?(0,p.eE)(Gn)===zn:Gn===zn,getOptionLabel:Gn=>{const zn=typeof Gn=="string"?ea.getEntity(Gn)||(0,p.of)(Gn,{defaultKind:"group",defaultNamespace:"default"}):Gn;return un(zn,wt(zn))},onChange:(Gn,zn)=>{Nt(""),fn(zn.map(Wn=>{const ya=typeof Wn=="string"?Wn:(0,p.eE)(Wn);return typeof Wn!="string"&&ea.setEntity(Wn),ya}))},filterOptions:Gn=>Gn,renderOption:(Gn,{selected:zn})=>{const Wn=Gn.kind.toLocaleLowerCase("en-US")==="group";return i.createElement(be.Z,{control:i.createElement(ge.Z,{icon:aa,checkedIcon:sa,checked:zn}),onClick:ya=>ya.preventDefault(),label:i.createElement(ie.Z,{display:"flex",flexWrap:"wrap",alignItems:"center"},Wn?i.createElement(Ue.Z,{fontSize:"small"}):i.createElement(le.Z,{fontSize:"small"}),"\xA0",un(Gn,wt(Gn,{defaultKind:Gn.kind})))})},size:"small",popupIcon:i.createElement(Ye.Z,{"data-testid":"owner-picker-expand"}),renderInput:Gn=>i.createElement(Oe.Z,{...Gn,className:ue.input,onChange:zn=>{Nt(zn.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:Gn=>{const zn=Gn.currentTarget;Math.abs(zn.scrollHeight-zn.clientHeight-zn.scrollTop)<1&&(Dn!=null&&Dn.cursor)&&Cn({items:Dn.items,cursor:Dn.cursor})},"data-testid":"owner-picker-listbox"}})))},Sa=(0,re.Z)(h=>({root:{display:"inline-flex",alignItems:"center"},icon:{marginRight:h.spacing(.5),color:h.palette.text.secondary,lineHeight:0}}),{name:"CatalogReactEntityDisplayName"}),ka=h=>{const{entityRef:S,hideIcon:x,disableTooltip:Z,defaultKind:ue,defaultNamespace:$e}=h,Ke=Sa(),{primaryTitle:Ve,secondaryTitle:_t,Icon:Kt}=mn(S,{defaultKind:ue,defaultNamespace:$e});let Nt=i.createElement(i.Fragment,null,Ve);return Nt=i.createElement(ie.Z,{component:"span",className:Ke.root},Kt&&!x?i.createElement(ie.Z,{component:"span",className:Ke.icon},i.createElement(Kt,{fontSize:"inherit"})):null,Nt),_t&&!Z&&(Nt=i.createElement(I.ZP,{enterDelay:1500,title:_t},Nt)),Nt},Wa=(0,Lt.uW)("catalog:entity-route-ref",()=>(0,m.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function Ba(h){var S,x;return{kind:h.kind.toLocaleLowerCase("en-US"),namespace:(x=(S=h.metadata.namespace)==null?void 0:S.toLocaleLowerCase("en-US"))!=null?x:DEFAULT_NAMESPACE,name:h.metadata.name}}const Ra=(0,i.forwardRef)((h,S)=>{var x;const{entityRef:Z,defaultKind:ue,defaultNamespace:$e,title:Ke,children:Ve,hideIcon:_t,...Kt}=h,Nt=ja(h.entityRef),cn=(x=Ve!=null?Ve:Ke)!=null?x:i.createElement(ka,{entityRef:Z,defaultKind:ue,defaultNamespace:$e,hideIcon:_t});return i.createElement(Tt.rU,{...Kt,ref:S,to:Nt},cn)});function ja(h){var S;const x=(0,m.tg)(Wa);let Z,ue,$e;if(typeof h=="string"){const Ve=(0,p.of)(h);Z=Ve.kind,ue=Ve.namespace,$e=Ve.name}else"metadata"in h?(Z=h.kind,ue=h.metadata.namespace,$e=h.metadata.name):(Z=h.kind,ue=h.namespace,$e=h.name);Z=Z.toLocaleLowerCase("en-US"),ue=(S=ue==null?void 0:ue.toLocaleLowerCase("en-US"))!=null?S:p.zG;const Ke={kind:encodeURIComponent(Z),namespace:encodeURIComponent(ue),name:encodeURIComponent($e)};return x(Ke)}function Na(h){const{entityRefs:S,hideIcons:x,...Z}=h;return i.createElement(i.Fragment,null,S.map((ue,$e)=>{const Ke=typeof ue=="string"?ue:(0,p.eE)(ue);return i.createElement(i.Fragment,{key:`${$e}.${Ke}`},$e>0&&", ",i.createElement(Ra,{...Z,entityRef:ue,hideIcon:x}))}))}const Va=h=>{const S=useRouteRef(Wa);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:S(getCompoundEntityRef(h.entity))},React.createElement(InfoIcon,null))},ur=h=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${h.email}`,to:`mailto:${h.email}`},React.createElement(EmailIcon,null)),qa=h=>{var S;const x=(S=h.entity.spec.profile)==null?void 0:S.email;return x?React.createElement(ur,{email:x}):null},er=h=>{var S;const x=(S=h.entity.spec.profile)==null?void 0:S.email;return x?React.createElement(ur,{email:x}):null},da=(0,re.Z)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),tr=4,nr=h=>{var S,x,Z,ue;const{entityRef:$e,children:Ke,delayTime:Ve=500}=h,_t=da(),Kt=useApiHolder(),Nt=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[cn,Pn]=useState(!1),fn=useMemo(()=>debounce(()=>Pn(!0),Ve),[Ve]),[{loading:Dn,error:Xn,value:Cn},ea]=useAsyncFn(async()=>{const Gn=Kt.get(W);if(Gn){const zn=await Gn.getEntityByRef($e);if(!zn)throw new Error(`${$e} not found`);return zn}},[Kt,$e]),ma=()=>{Pn(!1),fn.cancel()};return useEffect(()=>{Nt.isOpen&&!Cn&&!Xn&&!Dn&&ea()},[Nt.isOpen,ea,Cn,Xn,Dn]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:fn},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover(Nt)},Ke)),cn&&React.createElement(HoverPopover,{PaperProps:{className:_t.popoverPaper},...bindPopover(Nt),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:ma},React.createElement(Card,null,React.createElement(CardContent,null,Xn&&React.createElement(ResponseErrorPanel,{error:Xn}),Dn&&React.createElement(Progress,null),Cn&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},Cn.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},Cn.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},Cn.kind),Cn.metadata.description&&React.createElement(Typography,{className:_t.descriptionTypography,paragraph:!0},Cn.metadata.description),React.createElement(Typography,null,(x=(S=Cn.spec)==null?void 0:S.type)==null?void 0:x.toString()),React.createElement(Box,{marginTop:"0.5em"},(Cn.metadata.tags||[]).slice(0,tr).map(Gn=>React.createElement(Chip,{key:Gn,size:"small",label:Gn})),((Z=Cn.metadata.tags)==null?void 0:Z.length)&&((ue=Cn.metadata.tags)==null?void 0:ue.length)>tr&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!Xn&&Cn&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(Cn)&&React.createElement(er,{entity:Cn}),isGroupEntity(Cn)&&React.createElement(qa,{entity:Cn}),React.createElement(Va,{entity:Cn}))))))},or=(0,re.Z)(h=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),Fa=()=>{var h,S;const x=or(),{filters:Z,updateFilters:ue}=Qn(),[$e,Ke]=(0,i.useState)((S=(h=Z.text)==null?void 0:h.value)!=null?S:"");return(0,D.Z)(()=>{ue({text:$e.length?new In($e):void 0})},250,[$e,ue]),i.createElement(c.Z,{className:x.searchToolbar},i.createElement(R.Z,null,i.createElement(_.Z,{"aria-label":"search",id:"input-with-icon-adornment",className:x.input,placeholder:"Search",autoComplete:"off",onChange:Ve=>Ke(Ve.target.value),value:$e,startAdornment:i.createElement(b.Z,{position:"start"},i.createElement(se.Z,null)),endAdornment:i.createElement(b.Z,{position:"end"},i.createElement(N.Z,{"aria-label":"clear search",onClick:()=>Ke(""),edge:"end",disabled:$e.length===0},i.createElement(Yt.Z,null)))})))},Fe=Object.freeze({createEntityRefColumn(h){const{defaultKind:S}=h;function x(Z){var ue;return((ue=Z.metadata)==null?void 0:ue.title)||wt(Z,{defaultKind:S})}return{title:"Name",highlight:!0,customFilterAndSearch(Z,ue){return x(ue).includes(Z)},customSort(Z,ue){return x(Z).localeCompare(x(ue))},render:Z=>{var ue;return i.createElement(Ra,{entityRef:Z,defaultKind:S,title:(ue=Z.metadata)==null?void 0:ue.title})}}},createEntityRelationColumn(h){const{title:S,relation:x,defaultKind:Z,filter:ue}=h;function $e(Ve){return(0,Ft.g)(Ve,x,ue)}function Ke(Ve){return $e(Ve).map(_t=>wt(_t,{defaultKind:Z})).join(", ")}return{title:S,customFilterAndSearch(Ve,_t){return Ke(_t).includes(Ve)},customSort(Ve,_t){return Ke(Ve).localeCompare(Ke(_t))},render:Ve=>i.createElement(Na,{entityRefs:$e(Ve),defaultKind:Z})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:p.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:p.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:p.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:h=>i.createElement(Tt.Or,{text:h.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),q=[Fe.createEntityRefColumn({defaultKind:"system"}),Fe.createDomainColumn(),Fe.createOwnerColumn(),Fe.createMetadataDescriptionColumn()],at=[Fe.createEntityRefColumn({defaultKind:"component"}),Fe.createSystemColumn(),Fe.createOwnerColumn(),Fe.createSpecTypeColumn(),Fe.createSpecLifecycleColumn(),Fe.createMetadataDescriptionColumn()],bn=(0,re.Z)(h=>({empty:{padding:h.spacing(2),display:"flex",justifyContent:"center"}})),Ln=h=>{const{entities:S,title:x,emptyContent:Z,variant:ue="gridItem",columns:$e,tableOptions:Ke={}}=h,Ve=bn(),_t={minWidth:"0",width:"100%"};return ue==="gridItem"&&(_t.height="calc(100% - 10px)"),i.createElement(Tt.iA,{columns:$e,title:x,style:_t,emptyContent:Z&&i.createElement("div",{className:Ve.empty},Z),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,...Ke},data:S})};Ln.columns=Fe,Ln.systemEntityColumns=q,Ln.componentEntityColumns=at;const qn=(0,re.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),ha=h=>{const S=qn();return i.createElement(qe,{label:"Tags",name:"tags",path:"metadata.tags",Filter:on,showCounts:h.showCounts,InputProps:{className:S.input}})},Ua=h=>{var S;const{hidden:x,initialFilter:Z}=h,ue=(0,o.u)(o.l),{error:$e,availableTypes:Ke,selectedTypes:Ve,setSelectedTypes:_t}=Ea();if((0,i.useEffect)(()=>{$e&&ue.post({message:"Failed to load entity types",severity:"error"}),Z&&_t([Z])},[$e,ue,Z,_t]),Ke.length===0||$e)return null;const Kt=[{value:"all",label:"all"},...Ke.map(Nt=>({value:Nt,label:Nt}))];return x?null:i.createElement(ie.Z,{pb:1,pt:1},i.createElement(Tt.Ph,{label:"Type",items:Kt,selected:(S=Kt.length>1?Ve[0]:void 0)!=null?S:"all",onChange:Nt=>_t(Nt==="all"?[]:[String(Nt)])}))},Ka=(0,_e.Z)({root:{color:"#f3ba37"}})(Ze.Z),va=h=>{const{toggleStarredEntity:S,isStarredEntity:x}=Se(h.entity);return i.createElement(N.Z,{"aria-label":"favorite",color:"inherit",...h,onClick:()=>S()},i.createElement(I.ZP,{title:x?"Remove from favorites":"Add to favorites"},x?i.createElement(Ka,null):i.createElement(pe.Z,null)))},xa=Me.Z;function Ia(h,S){if(h)return h.toLocaleLowerCase("en-US");if(S)try{return(0,p.of)(S).kind.toLocaleLowerCase("en-US")}catch{return}}function Ya(h,S){const x=(0,m.qD)(),Z=Ia(h,S);return Z&&x.getSystemIcon(`kind:${Z}`)||xa}function g(h){const{kind:S,entityRef:x,...Z}=h,ue=Ya(S,x);return i.createElement(ue,{...Z})}const l=(0,re.Z)(h=>({node:{fill:h.palette.grey[300],stroke:h.palette.grey[300],"&.primary":{fill:h.palette.primary.light,stroke:h.palette.primary.light},"&.secondary":{fill:h.palette.secondary.light,stroke:h.palette.secondary.light}},text:{fill:h.palette.getContrastText(h.palette.grey[300]),"&.primary":{fill:h.palette.primary.contrastText},"&.secondary":{fill:h.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function y(h){const S=(0,o.u)(W),x=(0,p.eE)(h),{loading:Z,error:ue,value:$e}=(0,O.default)(async()=>{const Ke=await S.getEntityAncestors({entityRef:x}),Ve=new Array,_t=new Array;for(const Kt of Ke.items){const Nt=(0,p.eE)(Kt.entity),cn=Nt===Ke.rootEntityRef;Ve.push({id:Nt,root:cn,...Kt.entity});for(const Pn of Kt.parentEntityRefs)_t.push({from:Nt,to:Pn})}return{nodes:Ve,edges:_t}},[x]);return{loading:Z,error:ue,nodes:($e==null?void 0:$e.nodes)||[],edges:($e==null?void 0:$e.edges)||[]}}function K({node:h}){const S=l(),x=(0,St.s0)(),Z=(0,m.tg)(Wa),[ue,$e]=(0,i.useState)(0),[Ke,Ve]=(0,i.useState)(0),_t=(0,i.useRef)(null);(0,i.useLayoutEffect)(()=>{if(_t.current){let{height:Cn,width:ea}=_t.current.getBBox();Cn=Math.round(Cn),ea=Math.round(ea),(Cn!==Ke||ea!==ue)&&($e(ea),Ve(Cn))}},[ue,Ke]);const Kt=10,Nt=Ke,cn=Nt+Kt,Pn=cn+ue+Kt*2,fn=Ke+Kt*2,Dn=h.metadata.title||(h.kind&&h.metadata.name&&h.metadata.namespace?wt({kind:h.kind,name:h.metadata.name,namespace:h.metadata.namespace||""}):h.id),Xn=()=>{x(Z({kind:h.kind,namespace:h.metadata.namespace||p.zG,name:h.metadata.name}))};return i.createElement("g",{onClick:Xn,className:S.clickable},i.createElement("rect",{className:rt()(S.node,h.root?"secondary":"primary"),width:Pn,height:fn,rx:10}),i.createElement(g,{kind:h.kind,y:Kt,x:Kt,width:Nt,height:Nt,className:rt()(S.text,h.root?"secondary":"primary")}),i.createElement("text",{ref:_t,className:rt()(S.text,h.root?"secondary":"primary"),y:fn/2,x:cn+(ue+Kt*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},Dn))}function Re(h){const{loading:S,error:x,nodes:Z,edges:ue}=y(h.entity);return S?i.createElement(Tt.Ex,null):x?i.createElement(Tt.Gk,{error:x}):i.createElement(i.Fragment,null,i.createElement(fe.Z,{variant:"h2"},"Ancestry"),i.createElement(fe.Z,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",i.createElement(Tt.rU,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),i.createElement(ie.Z,{mt:4},i.createElement(Tt.mn,{nodes:Z,edges:ue,renderNode:K,direction:Tt.NX.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const lt=(0,re.Z)(h=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:h.spacing(2)},helpIcon:{marginLeft:h.spacing(1),color:h.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function Dt(h){const S=lt();return i.createElement(ve.Z,{...h,primaryTypographyProps:{className:S.monospace},secondaryTypographyProps:{className:S.monospace}})}function Xt(h){const S=lt();return i.createElement(Y.Z,{className:S.monospace},h.children)}function Sn(h){return i.createElement(ie.Z,{mt:2},i.createElement(v.Z,{variant:"outlined"},i.createElement(ee.Z,null,i.createElement(G.Z,{variant:"h6",gutterBottom:!0},h.title,h.helpLink&&i.createElement(Oa,{to:h.helpLink})),h.children)))}function Fn(h){if(h.match(/^url:https?:\/\//))return h.slice(4);if(h.match(/^https?:\/\//))return h}function Kn(h){const[S,x]=h.entry,Z=Fn(x);return i.createElement(oe.Z,null,h.indent&&i.createElement(Rt.Z,null),i.createElement(Dt,{primary:S,secondary:Z?i.createElement(Tt.rU,{to:Z},x):x}))}function Oa(h){const S=lt();return i.createElement(Tt.rU,{to:h.to,className:S.helpIcon},i.createElement(nt.Z,{fontSize:"inherit"}))}const za=(0,re.Z)({root:{display:"flex",flexDirection:"column"}});function ir(h){var S,x;const Z=(0,o.u)(W),ue=(0,p.eE)(h),$e=(S=h.metadata.annotations)==null?void 0:S[p.P1],Ke=(x=h.metadata.annotations)==null?void 0:x[p.q1],{loading:Ve,error:_t,value:Kt}=(0,O.default)(async()=>!$e&&!Ke?[]:(await Z.getEntities({filter:[...$e?[{[`metadata.annotations.${p.P1}`]:$e}]:[],...Ke?[{[`metadata.annotations.${p.q1}`]:Ke}]:[]]})).items,[$e,Ke]);return{loading:Ve,error:_t,location:$e,originLocation:Ke,colocatedEntities:Kt==null?void 0:Kt.filter(Nt=>(0,p.eE)(Nt)!==ue)}}function ar(h){return i.createElement(T.Z,{dense:!0},h.header&&i.createElement(Kn,{key:"header",entry:h.header}),h.entities.map(S=>i.createElement(oe.Z,{key:(0,p.eE)(S)},i.createElement(Rt.Z,null,i.createElement(g,{kind:S.kind})),i.createElement(Dt,{primary:i.createElement(Ra,{entityRef:S})}))))}function to(h){const{entity:S}=h,{loading:x,error:Z,location:ue,originLocation:$e,colocatedEntities:Ke}=ir(S);if(x)return i.createElement(Tt.Ex,null);if(Z)return i.createElement(Tt.Gk,{error:Z});if(!ue&&!$e)return i.createElement(rn.Z,{severity:"warning"},"Entity had no location information.");if(!(Ke!=null&&Ke.length))return i.createElement(rn.Z,{severity:"info"},"There were no other entities on this location.");if(ue===$e)return i.createElement(ar,{entities:Ke});const Ve=Ke.filter(Kt=>{var Nt;return((Nt=Kt.metadata.annotations)==null?void 0:Nt[p.P1])===ue}),_t=Ke.filter(Kt=>{var Nt;return((Nt=Kt.metadata.annotations)==null?void 0:Nt[p.q1])===$e});return i.createElement(i.Fragment,null,Ve.length>0&&i.createElement(ar,{entities:Ve,header:["At the same location",ue]}),_t.length>0&&i.createElement(ar,{entities:_t,header:["At the same origin",$e]}))}function no(h){const S=za();return i.createElement(i.Fragment,null,i.createElement(fe.Z,{variant:"h2"},"Colocated"),i.createElement(fe.Z,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),i.createElement("div",{className:S.root},i.createElement(to,{entity:h.entity})))}function Wr(h){return Object.fromEntries([...Object.entries(h)].sort((S,x)=>S[0]<x[0]?-1:1))}function ao(h){return i.createElement(i.Fragment,null,i.createElement(fe.Z,{variant:"h2"},"Entity as JSON"),i.createElement(fe.Z,null,"This is the raw entity data as received from the catalog, on JSON form."),i.createElement(fe.Z,null,i.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},i.createElement(Tt.Oi,{text:JSON.stringify(Wr(h.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const Ir=(0,re.Z)({root:{display:"flex",flexDirection:"column"}});function ro(h){var S,x,Z;const ue=Ir(),{apiVersion:$e,kind:Ke,metadata:Ve,spec:_t,relations:Kt=[],status:Nt={}}=h.entity,cn=Bt()(ze()(Kt,fn=>fn.targetRef),"type"),Pn=(0,p.eE)(h.entity);return i.createElement(i.Fragment,null,i.createElement(fe.Z,{variant:"h2"},"Overview"),i.createElement("div",{className:ue.root},i.createElement(Sn,{title:"Identity"},i.createElement(T.Z,{dense:!0},i.createElement(oe.Z,null,i.createElement(Dt,{primary:"apiVersion",secondary:$e})),i.createElement(oe.Z,null,i.createElement(Dt,{primary:"kind",secondary:Ke})),(_t==null?void 0:_t.type)&&i.createElement(oe.Z,null,i.createElement(Dt,{primary:"spec.type",secondary:(S=_t.type)==null?void 0:S.toString()})),Ve.uid&&i.createElement(oe.Z,null,i.createElement(Dt,{primary:"uid",secondary:Ve.uid}),i.createElement(sn.Z,null,i.createElement(Tt.bj,{text:Ve.uid}))),Ve.etag&&i.createElement(oe.Z,null,i.createElement(Dt,{primary:"etag",secondary:Ve.etag}),i.createElement(sn.Z,null,i.createElement(Tt.bj,{text:Ve.etag}))),i.createElement(oe.Z,null,i.createElement(Dt,{primary:"entityRef",secondary:Pn}),i.createElement(sn.Z,null,i.createElement(Tt.bj,{text:Pn}))))),i.createElement(Sn,{title:"Metadata"},!!Object.keys(Ve.annotations||{}).length&&i.createElement(T.Z,{dense:!0,subheader:i.createElement(Xt,null,"Annotations",i.createElement(Oa,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(Ve.annotations).map(fn=>i.createElement(Kn,{key:fn[0],indent:!0,entry:fn}))),!!Object.keys(Ve.labels||{}).length&&i.createElement(T.Z,{dense:!0,subheader:i.createElement(Xt,null,"Labels")},Object.entries(Ve.labels).map(fn=>i.createElement(Kn,{key:fn[0],indent:!0,entry:fn}))),!!((x=Ve.tags)!=null&&x.length)&&i.createElement(T.Z,{dense:!0,subheader:i.createElement(Xt,null,"Tags")},Ve.tags.map((fn,Dn)=>i.createElement(oe.Z,{key:`${fn}-${Dn}`},i.createElement(Rt.Z,null),i.createElement(Dt,{primary:fn}))))),!!Kt.length&&i.createElement(Sn,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(cn).map(([fn,Dn],Xn)=>i.createElement("div",{key:Xn},i.createElement(T.Z,{dense:!0,subheader:i.createElement(Xt,null,fn)},Dn.map(Cn=>i.createElement(oe.Z,{key:Cn.targetRef},i.createElement(Rt.Z,null,i.createElement(g,{entityRef:Cn.targetRef})),i.createElement(Dt,{primary:i.createElement(Ra,{entityRef:Cn.targetRef})}))))))),!!((Z=Nt.items)!=null&&Z.length)&&i.createElement(Sn,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},Nt.items.map((fn,Dn)=>i.createElement("div",{key:Dn},i.createElement(G.Z,null,fn.level,": ",fn.type),i.createElement(ie.Z,{ml:2},fn.message))))))}function $r(h){return i.createElement(i.Fragment,null,i.createElement(fe.Z,{variant:"h2"},"Entity as YAML"),i.createElement(fe.Z,null,"This is the raw entity data as received from the catalog, on YAML form."),i.createElement(fe.Z,null,i.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},i.createElement(Tt.Oi,{text:tn.ZP.stringify(Wr(h.entity)),language:"yaml",showCopyCodeButton:!0}))))}const Zr=(0,re.Z)(h=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:h.palette.background.paper},tabs:{borderRight:`1px solid ${h.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function rr(h){const{children:S,value:x,index:Z,...ue}=h,$e=Zr();return i.createElement("div",{role:"tabpanel",hidden:x!==Z,id:`vertical-tabpanel-${Z}`,"aria-labelledby":`vertical-tab-${Z}`,className:$e.tabContents,...ue},x===Z&&i.createElement(ie.Z,{pl:3,pr:3},S))}function Cr(h){return{id:`vertical-tab-${h}`,"aria-controls":`vertical-tabpanel-${h}`}}function kr(h){const S=Zr(),[x,Z]=i.useState(0);return(0,i.useEffect)(()=>{Z(0)},[h.open]),h.entity?i.createElement(me.Z,{fullWidth:!0,maxWidth:"xl",open:h.open,onClose:h.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:S.fullHeightDialog}},i.createElement(Zt.Z,{id:"entity-inspector-dialog-title"},"Entity Inspector"),i.createElement(yt.Z,{dividers:!0},i.createElement("div",{className:S.root},i.createElement(mt.Z,{orientation:"vertical",variant:"scrollable",value:x,onChange:(ue,$e)=>Z($e),"aria-label":"Inspector options",className:S.tabs},i.createElement(It.Z,{label:"Overview",...Cr(0)}),i.createElement(It.Z,{label:"Ancestry",...Cr(1)}),i.createElement(It.Z,{label:"Colocated",...Cr(2)}),i.createElement(It.Z,{label:"Raw JSON",...Cr(3)}),i.createElement(It.Z,{label:"Raw YAML",...Cr(4)})),i.createElement(rr,{value:x,index:0},i.createElement(ro,{entity:h.entity})),i.createElement(rr,{value:x,index:1},i.createElement(Re,{entity:h.entity})),i.createElement(rr,{value:x,index:2},i.createElement(no,{entity:h.entity})),i.createElement(rr,{value:x,index:3},i.createElement(ao,{entity:h.entity})),i.createElement(rr,{value:x,index:4},i.createElement($r,{entity:h.entity})))),i.createElement(We.Z,null,i.createElement(xe.Z,{onClick:h.onClose,color:"primary"},"Close"))):null}function Dr(h){var S;const x=(0,o.u)(W),Z=(S=h.metadata.annotations)==null?void 0:S[p.q1],ue=h.metadata.uid,$e=Z==="bootstrap:bootstrap",Ke=(0,O.default)(async()=>{const Dn=x.getLocationByRef(Z);let Xn;if(!Z)Xn=Promise.resolve([]);else{const Cn=`metadata.annotations.${p.q1}`;Xn=x.getEntities({filter:{[Cn]:Z},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(ea=>ea.items)}return Promise.all([Dn,Xn]).then(([Cn,ea])=>({location:Cn,colocatedEntities:ea}))},[x,h]),Ve=(0,i.useCallback)(async function(){const{location:Xn}=Ke.value;await x.removeLocationById(Xn.id)},[x,Ke]),_t=(0,i.useCallback)(async function(){await x.removeEntityByUid(ue)},[x,ue]);if($e)return{type:"bootstrap",location:Z,deleteEntity:_t};const{loading:Kt,error:Nt,value:cn}=Ke;if(Kt)return{type:"loading"};if(Nt)return{type:"error",error:Nt};const{location:Pn,colocatedEntities:fn}=cn;return Pn?{type:"unregister",location:Z,colocatedEntities:fn.map(p.iB),unregisterLocation:Ve,deleteEntity:_t}:{type:"only-delete",deleteEntity:_t}}const Nr=(0,re.Z)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),Fr=({entity:h,onConfirm:S,onClose:x})=>{var Z;const ue=(0,o.u)(o.l),$e=(0,o.u)(o.p),Ke=Nr(),Ve=Dr(h),[_t,Kt]=(0,i.useState)(!1),[Nt,cn]=(0,i.useState)(!1),Pn=(Z=$e.getOptionalString("app.title"))!=null?Z:"Backstage",fn=(0,i.useCallback)(async function(){if("unregisterLocation"in Ve){cn(!0);try{await Ve.unregisterLocation(),S()}catch(ea){(0,Ce.BD)(ea),ue.post({message:ea.message})}finally{cn(!1)}}},[ue,S,Ve]),Dn=(0,i.useCallback)(async function(){var ea;if("deleteEntity"in Ve){cn(!0);try{await Ve.deleteEntity();const ma=(ea=h.metadata.title)!=null?ea:h.metadata.name;S(),ue.post({message:`Removed entity ${ma}`,severity:"success",display:"transient"})}catch(ma){(0,Ce.BD)(ma),ue.post({message:ma.message})}finally{cn(!1)}}},[ue,S,Ve,h]),Xn=()=>i.createElement(We.Z,{className:Ke.dialogActions},i.createElement(xe.Z,{onClick:x,color:"primary"},"Cancel"));return Ve.type==="loading"?i.createElement(Tt.Ex,null):Ve.type==="error"?i.createElement(Tt.Gk,{error:Ve.error}):Ve.type==="bootstrap"?i.createElement(i.Fragment,null,i.createElement(rn.Z,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',Ve.location,'"). If you believe this is in error, please contact the ',Pn," ","integrator."),i.createElement(ie.Z,{marginTop:2},!_t&&i.createElement(i.Fragment,null,i.createElement(xe.Z,{variant:"text",size:"small",color:"primary",className:Ke.advancedButton,onClick:()=>Kt(!0)},"Advanced Options"),i.createElement(Xn,null)),_t&&i.createElement(i.Fragment,null,i.createElement(fe.Z,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),i.createElement(xe.Z,{variant:"contained",color:"secondary",disabled:Nt,onClick:Dn},"Delete Entity"),i.createElement(Xn,null)))):Ve.type==="only-delete"?i.createElement(i.Fragment,null,i.createElement(fe.Z,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),i.createElement(xe.Z,{variant:"contained",color:"secondary",disabled:Nt,onClick:Dn},"Delete Entity"),i.createElement(Xn,null)):Ve.type==="unregister"?i.createElement(i.Fragment,null,i.createElement(fe.Z,null,"This action will unregister the following entities:"),i.createElement(fe.Z,{component:"ul"},Ve.colocatedEntities.map(Cn=>i.createElement("li",{key:`${Cn.kind}:${Cn.namespace}/${Cn.name}`},i.createElement(Ra,{entityRef:Cn})))),i.createElement(fe.Z,null,"Located at the following location:"),i.createElement(fe.Z,{component:"ul"},i.createElement("li",null,Ve.location)),i.createElement(fe.Z,null,"To undo, just re-register the entity in ",Pn,"."),i.createElement(ie.Z,{marginTop:2},i.createElement(xe.Z,{variant:"contained",color:"secondary",disabled:Nt,onClick:fn},"Unregister Location"),!_t&&i.createElement(ie.Z,{component:"span",marginLeft:2},i.createElement(xe.Z,{variant:"text",size:"small",color:"primary",className:Ke.advancedButton,onClick:()=>Kt(!0)},"Advanced Options"))),_t&&i.createElement(i.Fragment,null,i.createElement(ie.Z,{paddingTop:4,paddingBottom:4},i.createElement(Pt.Z,null)),i.createElement(fe.Z,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),i.createElement(xe.Z,{variant:"contained",color:"secondary",disabled:Nt,onClick:Dn},"Delete Entity"))):i.createElement(rn.Z,{severity:"error"},"Internal error: Unknown state")},oo=h=>{const{open:S,onConfirm:x,onClose:Z,entity:ue}=h;return i.createElement(me.Z,{open:S,onClose:Z},i.createElement(Zt.Z,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),i.createElement(yt.Z,null,i.createElement(Fr,{entity:ue,onConfirm:x,onClose:Z})))};function io(){const h=(0,o.u)(o.t),S=(0,o.u)(W),{filters:x}=Qn(),{value:Z,loading:ue}=(0,O.default)(async()=>(await h.getBackstageIdentity()).ownershipEntityRefs,[]),{user:$e,owners:Ke,...Ve}=x,{["metadata.name"]:_t,...Kt}=gt((0,ct.compact)(Object.values(Ve))),[{value:Nt,loading:cn},Pn]=(0,Gt.default)(async Dn=>{const Xn=so(Dn.owners,Dn.ownershipEntityRefs);if(Xn===void 0)return 0;const{totalItems:Cn}=await S.queryEntities({filter:{...Dn.filter,"relations.ownedBy":Xn},limit:0});return Cn},[],{loading:!0});return(0,P.Z)(()=>{Object.keys(Kt).length!==0&&Z!==void 0&&Pn({ownershipEntityRefs:Z,owners:Ke,filter:Kt})},[Z,Ke,Kt]),{count:Nt,loading:ue||cn,filter:(0,i.useMemo)(()=>yn.owned(Z!=null?Z:[]),[Z]),ownershipEntityRefs:Z}}function so(h,S){var x;if(S===void 0)return;const Z=(x=h==null?void 0:h.values)!=null?x:[];if(Z.length){const ue=(0,ct.intersection)(Z,S);return ue.length===0?void 0:ue}return S}function yr(){const h=(0,o.u)(W),{filters:S}=Qn(),x=(0,i.useRef)(),Z=(0,i.useMemo)(()=>{const{user:Ke,...Ve}=S,_t=(0,ct.compact)(Object.values(Ve)),Kt=gt(_t),Nt={filter:Kt,limit:0};return Object.keys(Kt).length===0?(x.current=void 0,x.current):(0,ct.isEqual)(Nt,x.current)?x.current:(x.current=Nt,Nt)},[S]),{value:ue,loading:$e}=(0,O.default)(async()=>{if(Z===void 0)return 0;const{totalItems:Ke}=await h.queryEntities(Z);return Ke},[Z]);return{count:ue,loading:$e}}function Kr(){const h=(0,o.u)(W),{filters:S}=Qn(),{starredEntities:x}=et(),Z=(0,i.useRef)(),ue=(0,i.useMemo)(()=>{const{user:_t,...Kt}=S,Nt=(0,ct.compact)(Object.values(Kt)),fn={filter:{...gt(Nt),["metadata.name"]:Array.from(x).map(Dn=>(0,p.of)(Dn).name)},limit:1e3};return(0,ct.isEqual)(fn,Z.current)?Z.current:(Z.current=fn,fn)},[S,x]),{value:$e,loading:Ke}=(0,O.default)(async()=>x.size?(await h.queryEntities(ue)).items.map(Kt=>(0,p.eE)({kind:Kt.kind,namespace:Kt.metadata.namespace,name:Kt.metadata.name})).filter(Kt=>x.has(Kt)).length:0,[ue,x]),Ve=(0,i.useMemo)(()=>yn.starred(Array.from(x)),[x]);return{count:$e,loading:Ke,filter:Ve}}const zr=(0,re.Z)(h=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:h.spacing(1,0,1,0)},title:{margin:h.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:h.palette.text.primary},menuItem:{minHeight:h.spacing(6)},groupWrapper:{margin:h.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function cr(h){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:Le.Z},{id:"starred",label:"Starred",icon:Ze.Z}]},{name:h!=null?h:"Company",items:[{id:"all",label:"All"}]}]}const dr=h=>{var S;const{initialFilter:x,availableFilters:Z}=h,ue=zr(),Ke=(S=(0,o.u)(o.p).getOptionalString("organization.name"))!=null?S:"Company",{filters:Ve,updateFilters:_t,queryParameters:{kind:Kt,user:Nt}}=Qn(),cn=["starred","all"],Pn=cr(Ke).map(fa=>({...fa,items:fa.items.filter(({id:wa})=>["group","user"].some(xr=>xr===Kt)?cn.includes(wa):!Z||Z.includes(wa))})).filter(({items:fa})=>!!fa.length),{count:fn,loading:Dn,filter:Xn}=io(),{count:Cn}=yr(),{count:ea,filter:ma,loading:Gn}=Kr(),zn=(0,i.useMemo)(()=>[Nt].flat()[0],[Nt]),[Wn,ya]=(0,i.useState)(zn!=null?zn:x),_a=(0,i.useMemo)(()=>({all:Cn,starred:ea,owned:fn}),[ea,fn,Cn]);(0,i.useEffect)(()=>{zn&&ya(zn)},[zn]);const ba=Dn||Gn;return(0,i.useEffect)(()=>{!ba&&Wn&&Wn!=="all"&&_a[Wn]===0&&ya("all")},[ba,_a,Wn,ya]),(0,i.useEffect)(()=>{if(!Wn||ba)return;_t({user:(()=>Wn==="owned"?Xn:Wn==="starred"?ma:yn.all())()})},[Wn,ma,Xn,_t,ba]),i.createElement(v.Z,{className:ue.root},Pn.map(fa=>i.createElement(i.Fragment,{key:fa.name},i.createElement(G.Z,{variant:"subtitle2",component:"span",className:ue.title},fa.name),i.createElement(v.Z,{className:ue.groupWrapper},i.createElement(T.Z,{disablePadding:!0,dense:!0,role:"menu","aria-label":fa.name},fa.items.map(wa=>{var xr,Da;return i.createElement(ot.Z,{role:"none presentation",key:wa.id,divider:!0,onClick:()=>ya(wa.id),selected:wa.id===((xr=Ve.user)==null?void 0:xr.value),className:ue.menuItem,disabled:_a[wa.id]===0,"data-testid":`user-picker-${wa.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},wa.icon&&i.createElement(Rt.Z,{className:ue.listIcon},i.createElement(wa.icon,{fontSize:"small"})),i.createElement(ve.Z,null,i.createElement(G.Z,{variant:"body1"},wa.label," ")),i.createElement(sn.Z,null,(Da=_a[wa.id])!=null?Da:"-"))}))))))},Mr=(0,re.Z)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),_r=i.createElement(ft.Z,{fontSize:"small"}),mr=i.createElement(Wt.Z,{fontSize:"small"}),Pr=()=>{const h=Mr(),{updateFilters:S}=Qn(),[x,Z]=(0,i.useState)([]);function ue(Ve){S({orphan:Ve?new ia(Ve):void 0})}function $e(Ve){S({error:Ve?new oa(Ve):void 0})}const Ke=["Is Orphan","Has Error"];return i.createElement(ie.Z,{pb:1,pt:1},i.createElement(G.Z,{variant:"button",component:"label"},"Processing Status",i.createElement(Mt.ZP,{multiple:!0,disableCloseOnSelect:!0,options:Ke,value:x,onChange:(Ve,_t)=>{Z(_t),ue(_t.includes("Is Orphan")),$e(_t.includes("Has Error"))},renderOption:(Ve,{selected:_t})=>i.createElement(be.Z,{control:i.createElement(ge.Z,{icon:_r,checkedIcon:mr,checked:_t}),onClick:Kt=>Kt.preventDefault(),label:Ve}),size:"small",popupIcon:i.createElement(Ye.Z,{"data-testid":"processing-status-picker-expand"}),renderInput:Ve=>i.createElement(Oe.Z,{...Ve,className:h.input,variant:"outlined"})})))},Ar=(0,re.Z)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),Ja=()=>{const h=Ar();return i.createElement(qe,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:ra,InputProps:{className:h.input}})},lo=(0,re.Z)(h=>({code:{borderRadius:6,margin:h.spacing(2,0),background:h.palette.type==="dark"?"#444":h.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function co(h,S){var x,Z;const ue=(S==null?void 0:S.kind)||"Component",$e=(S==null?void 0:S.metadata.name)||"example",Ke=((x=S==null?void 0:S.spec)==null?void 0:x.type)||"website",Ve=((Z=S==null?void 0:S.spec)==null?void 0:Z.owner)||"user:default/guest",_t=`apiVersion: backstage.io/v1alpha1
kind: ${ue}
metadata:
  name: ${$e}
  annotations:${h.map(cn=>`
    ${cn}: value`).join("")}
spec:
  type: ${Ke}
  owner: ${Ve}`;let Kt=6;const Nt=[];return h.forEach(()=>{Nt.push(Kt),Kt++}),{yamlText:_t,lineNumbers:Nt}}function uo(h,S="Component"){const x=h.length<=1;return i.createElement(i.Fragment,null,"The ",x?"annotation":"annotations"," ",h.map(Z=>i.createElement("code",null,Z)).reduce((Z,ue)=>i.createElement(i.Fragment,null,Z,", ",ue))," ",x?"is":"are"," missing. You need to add the"," ",x?"annotation":"annotations"," to your ",S," if you want to enable this tool.")}function Gr(h){let S;try{S=(0,Ft.u)().entity}catch{}const{annotation:x,readMoreUrl:Z}=h,ue=Array.isArray(x)?x:[x],$e=Z||"https://backstage.io/docs/features/software-catalog/well-known-annotations",Ke=lo(),Ve=(S==null?void 0:S.kind)||"Component",{yamlText:_t,lineNumbers:Kt}=co(ue,S);return i.createElement(Tt.ub,{missing:"field",title:"Missing Annotation",description:uo(ue,Ve),action:i.createElement(i.Fragment,null,i.createElement(G.Z,{variant:"body1"},"Add the annotation to your ",Ve," YAML as shown in the highlighted example below:"),i.createElement(ie.Z,{className:Ke.code},i.createElement(Tt.Oi,{text:_t,language:"yaml",showLineNumbers:!0,highlightedNumbers:Kt,customStyle:{background:"inherit",fontSize:"115%"}})),i.createElement(xe.Z,{color:"primary",component:Tt.rU,to:$e},"Read more"))})}function mo(h){var S;const{children:x,value:Z}=h,[ue,$e]=useState((S=Z==null?void 0:Z.filters)!=null?S:{}),Ke=useCallback(Kt=>{$e(Nt=>{const cn=typeof Kt=="function"?Kt(Nt):Kt;return{...Nt,...cn}})},[]),Ve=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),_t=useMemo(()=>{var Kt,Nt,cn,Pn,fn;return{entities:(Kt=Z==null?void 0:Z.entities)!=null?Kt:Ve.entities,backendEntities:(Nt=Z==null?void 0:Z.backendEntities)!=null?Nt:Ve.backendEntities,updateFilters:(cn=Z==null?void 0:Z.updateFilters)!=null?cn:Ke,filters:ue,loading:(Pn=Z==null?void 0:Z.loading)!=null?Pn:!1,queryParameters:(fn=Z==null?void 0:Z.queryParameters)!=null?fn:Ve.queryParameters,error:Z==null?void 0:Z.error}},[Z,Ve,ue,Ke]);return React.createElement(ua.Provider,{value:_t},x)}},98127:($n,qt,e)=>{"use strict";e.d(qt,{C:()=>_});var o=e(34520),m=e(49558),p=e(73495),z=e(78373),B=e(90436),i=e(15459),$=e(93750),Qe=e(27604),Ne=e(2997),a=e(11640),xe=e(28347),Te=e(76635),ie=e.n(Te),G=e(19928),Ge=e.n(G),ge=e(2784),be=e(7089);const re=Object.freeze({createNameColumn(N){function _e(fe){var ve;return((ve=fe.metadata)==null?void 0:ve.title)||(0,p.$3)(fe,{defaultKind:N==null?void 0:N.defaultKind})}return{title:"Name",field:"resolved.entityRef",highlight:!0,customSort({entity:fe},{entity:ve}){return _e(fe).localeCompare(_e(ve))},render:({entity:fe})=>ge.createElement(p.dx,{entityRef:fe,defaultKind:(N==null?void 0:N.defaultKind)||"Component"})}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:N})=>ge.createElement(p.rI,{entityRefs:N.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:N})=>ge.createElement(p.rI,{entityRefs:N.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",render:({entity:N})=>{var _e,fe;return ge.createElement(ge.Fragment,null,(((_e=N==null?void 0:N.spec)==null?void 0:_e.targets)||((fe=N==null?void 0:N.spec)==null?void 0:fe.target))&&ge.createElement(m.Or,{text:(N.spec.targets||[N.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(N={hidden:!1}){return{title:"Type",field:"entity.spec.type",hidden:N.hidden,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:N})=>ge.createElement(m.Or,{text:N.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Tags",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:N})=>ge.createElement(ge.Fragment,null,N.metadata.tags&&N.metadata.tags.map(_e=>ge.createElement(be.Z,{key:_e,label:_e,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(N){return{title:"Title",field:"entity.metadata.title",hidden:N==null?void 0:N.hidden,searchable:!0}},createLabelColumn(N,_e){return{title:(_e==null?void 0:_e.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:fe})=>{var ve;const Y=(ve=fe.metadata)==null?void 0:ve.labels,v=Y&&Y[N]||(_e==null?void 0:_e.defaultValue);return ge.createElement(ge.Fragment,null,v&&ge.createElement(be.Z,{key:v,label:v,size:"small",variant:"outlined"}))},width:"auto"}},createNamespaceColumn(){return{title:"Namespace",field:"entity.metadata.namespace",width:"auto"}}});function Oe(N){const{columns:_e,data:fe,next:ve,prev:Y}=N;return ge.createElement(m.iA,{columns:_e,data:fe,options:{paginationPosition:"both",pageSizeOptions:[],showFirstLastPageButtons:!1,pageSize:Number.MAX_SAFE_INTEGER,emptyRowsWhenPaging:!1},onPageChange:v=>{v>0?ve==null||ve():Y==null||Y()},page:Y?1:0,totalCount:ve?Number.MAX_VALUE:Number.MAX_SAFE_INTEGER,localization:{pagination:{labelDisplayedRows:""}}})}const I=(0,i.Z)({root:{color:"#f3ba37"}})(a.Z),c=(N,_e)=>{const fe=ve=>ve.metadata.title||(0,p.$3)(ve,{defaultKind:"Component"});return fe(N).localeCompare(fe(_e))},R=({filters:N,entities:_e})=>{var fe;const ve=N.type===void 0;return[re.createTitleColumn({hidden:!0}),re.createNameColumn({defaultKind:(fe=N.kind)==null?void 0:fe.value}),...Y(),re.createMetadataDescriptionColumn(),re.createTagsColumn()];function Y(){var v;const ee=[re.createSystemColumn(),re.createOwnerColumn(),re.createSpecTypeColumn({hidden:!ve}),re.createSpecLifecycleColumn()];switch((v=N.kind)==null?void 0:v.value){case"user":return[];case"domain":case"system":return[re.createOwnerColumn()];case"group":case"template":return[re.createSpecTypeColumn({hidden:!ve})];case"location":return[re.createSpecTypeColumn({hidden:!ve}),re.createSpecTargetsColumn()];default:return _e.every(oe=>oe.metadata.namespace==="default")?ee:[...ee,re.createNamespaceColumn()]}}},_=N=>{var _e,fe,ve,Y;const{columns:v=R,tableOptions:ee,subtitle:oe,emptyContent:Rt}=N,{isStarredEntity:T,toggleStarredEntity:sn}=(0,p.CR)(),me=(0,p.wp)(),{loading:Zt,error:yt,entities:mt,filters:It,pageInfo:We}=me,Pt=!!We,ot=(0,ge.useMemo)(()=>typeof v=="function"?v(me):v,[v,me]);if(yt)return ge.createElement("div",null,ge.createElement(m.GB,{severity:"error",title:"Could not fetch catalog entities."},ge.createElement(m.Oi,{language:"text",text:yt.toString()})));const zt=[({entity:O})=>{var M;const ne=(M=O.metadata.annotations)==null?void 0:M[o.l2],he="View";return{icon:()=>ge.createElement(ge.Fragment,null,ge.createElement(B.Z,{style:$.Z},he),ge.createElement(Ne.Z,{fontSize:"small"})),tooltip:he,disabled:!ne,onClick:()=>{ne&&window.open(ne,"_blank")}}},({entity:O})=>{var M;const ne=(M=O.metadata.annotations)==null?void 0:M[o.Tf],he="Edit";return{icon:()=>ge.createElement(ge.Fragment,null,ge.createElement(B.Z,{style:$.Z},he),ge.createElement(Qe.Z,{fontSize:"small"})),tooltip:he,disabled:!ne,onClick:()=>{ne&&window.open(ne,"_blank")}}},({entity:O})=>{const M=T(O),ne=M?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>ge.createElement(ge.Fragment,null,ge.createElement(B.Z,{style:$.Z},ne),M?ge.createElement(I,null):ge.createElement(xe.Z,null)),tooltip:ne,onClick:()=>sn(O)}}],Tt=((_e=It.kind)==null?void 0:_e.value)||"",Ft=((fe=It.type)==null?void 0:fe.value)||"",ht=[(0,Te.capitalize)((Y=(ve=It.user)==null?void 0:ve.value)!=null?Y:"all"),Ft,Ge()(Tt)].filter(O=>O).join(" "),$t=`${ht} (${mt.length})`,an=N.actions||zt,St={actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!Zt,padding:"dense",...ee};if(Pt)return ge.createElement(Oe,{columns:ot,emptyContent:Rt,isLoading:Zt,title:$t,actions:an,subtitle:oe,options:St,data:mt.map(b),next:We.next,prev:We.prev});const Gt=mt.sort(c).map(b),D=20,U=Gt.length>D;return ge.createElement(m.iA,{isLoading:Zt,columns:ot,options:{paging:U,pageSize:D,pageSizeOptions:[20,50,100],...St},title:`${ht} (${mt.length})`,data:Gt,actions:an,subtitle:oe,emptyContent:Rt})};_.columns=re;function b(N){const _e=(0,z.g)(N,o.cz,{kind:"system"}),fe=(0,z.g)(N,o.S4);return{entity:N,resolved:{name:(0,p.$3)(N,{defaultKind:"Component"}),entityRef:(0,o.eE)(N),ownedByRelationsTitle:fe.map(ve=>(0,p.$3)(ve,{defaultKind:"group"})).join(", "),ownedByRelations:fe,partOfSystemRelationTitle:_e.map(ve=>(0,p.$3)(ve,{defaultKind:"system"})).join(", "),partOfSystemRelations:_e}}}},50893:($n,qt,e)=>{"use strict";e.d(qt,{E:()=>me});var o=e(34520),m=e(49558),p=e(57032),z=e(30705),B=e(73495),i=e(78373),$=e(12231),Qe=e(86136),Ne=e(49378),a=e(85256),xe=e(80030),Te=e(61837),ie=e(79784),G=e(50758),Ge=e(95544),ge=e(99688),be=e(2784),re=e(73557),Oe=e(79692),I=e(31654),c=e(43054),R=e(65759),_=e(61068),b=e(75650),N=e(49166),_e=e(95074),fe=e(34341);function ve(Zt){var yt;const{unregisterEntityOptions:mt,isUnregisterAllowed:It,onUnregisterEntity:We,onClose:Pt}=Zt,ot=typeof(mt==null?void 0:mt.disableUnregister)=="boolean",zt=(yt=!It||(ot?!!(mt!=null&&mt.disableUnregister):(mt==null?void 0:mt.disableUnregister)==="disable"))!=null?yt:!1;let Tt=be.createElement(be.Fragment,null);return(mt==null?void 0:mt.disableUnregister)!=="hidden"&&(Tt=be.createElement($.Z,{onClick:()=>{Pt(),We()},disabled:zt},be.createElement(Qe.Z,null,be.createElement(N.Z,{fontSize:"small"})),be.createElement(Ne.Z,{primary:"Unregister entity"}))),be.createElement(be.Fragment,null,Tt)}const Y=(0,Oe.Z)(Zt=>({button:{color:Zt.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function v(Zt){const{UNSTABLE_extraContextMenuItems:yt,UNSTABLE_contextMenuOptions:mt,onUnregisterEntity:It,onInspectEntity:We}=Zt,[Pt,ot]=(0,be.useState)(),zt=Y(),Ft=(0,_.N$)(b.j8).allowed,ct=D=>{ot(D.currentTarget)},ht=()=>{ot(void 0)},$t=(0,p.u)(p.l),[an,St]=(0,_e.Z)();(0,be.useEffect)(()=>{!an.error&&an.value&&$t.post({message:"Copied!",severity:"info",display:"transient"})},[an,$t]);const Gt=yt&&[...yt.map(D=>be.createElement($.Z,{key:D.title,onClick:()=>{ht(),D.onClick()}},be.createElement(Qe.Z,null,be.createElement(D.Icon,{fontSize:"small"})),be.createElement(Ne.Z,{primary:D.title}))),be.createElement(a.Z,{key:"the divider is here!"})];return be.createElement(be.Fragment,null,be.createElement(xe.ZP,{title:"More",arrow:!0},be.createElement(Te.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!Pt,role:"button",onClick:ct,"data-testid":"menu-button",className:zt.button,id:"long-menu"},be.createElement(c.Z,null))),be.createElement(ie.ZP,{open:Boolean(Pt),onClose:ht,anchorEl:Pt,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},be.createElement(G.Z,{autoFocusItem:Boolean(Pt)},Gt,be.createElement(ve,{unregisterEntityOptions:mt,isUnregisterAllowed:Ft,onUnregisterEntity:It,onClose:ht}),be.createElement($.Z,{onClick:()=>{ht(),We()}},be.createElement(Qe.Z,null,be.createElement(I.Z,{fontSize:"small"})),be.createElement(Ne.Z,{primary:"Inspect entity"})),be.createElement($.Z,{onClick:()=>{ht(),St(window.location.toString())}},be.createElement(Qe.Z,null,be.createElement(R.Z,{fontSize:"small"})),be.createElement(Ne.Z,{primary:"Copy entity URL"})))))}const ee="plugin.catalog.entityLayoutRoute",oe=()=>null;(0,z.R5)(oe,ee,!0),(0,z.R5)(oe,"core.gatherMountPoints",!0);function Rt(Zt){const{entity:yt,title:mt}=Zt;return be.createElement(Ge.Z,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},be.createElement(Ge.Z,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},yt?be.createElement(B.co,{entityRef:yt,hideIcon:!0}):mt),yt&&be.createElement(B.LH,{entity:yt}))}function T(Zt,yt,mt,It){var We,Pt,ot,zt,Tt;const Ft=(We=Zt!=null?Zt:It==null?void 0:It.kind)!=null?We:"",ct=(Pt=yt!=null?yt:It==null?void 0:It.metadata.namespace)!=null?Pt:"";return{headerTitle:`${(Tt=(zt=(ot=It==null?void 0:It.metadata.title)!=null?ot:mt)!=null?zt:It==null?void 0:It.metadata.name)!=null?Tt:""}${ct&&ct!==o.zG?` in ${ct}`:""}`,headerType:(()=>{let $t=Ft.toLocaleLowerCase("en-US");return It&&It.spec&&"type"in It.spec&&($t+=" \u2014 ",$t+=It.spec.type.toLocaleLowerCase("en-US")),$t})()}}function sn(Zt){var yt,mt;const{entity:It}=Zt,We=(0,i.g)(It,o.S4);return be.createElement(be.Fragment,null,We.length>0&&be.createElement(m.i9,{label:"Owner",contentTypograpyRootComponent:"p",value:be.createElement(B.rI,{entityRefs:We,defaultKind:"Group",color:"inherit"})}),((yt=It.spec)==null?void 0:yt.lifecycle)&&be.createElement(m.i9,{label:"Lifecycle",value:(mt=It.spec.lifecycle)==null?void 0:mt.toString()}))}const me=Zt=>{var yt,mt,It;const{UNSTABLE_extraContextMenuItems:We,UNSTABLE_contextMenuOptions:Pt,children:ot,NotFoundComponent:zt}=Zt,{kind:Tt,namespace:Ft,name:ct}=(0,z.Oi)(B.wi),{entity:ht,loading:$t,error:an}=(0,i.a)(),St=(0,re.TH)(),Gt=(0,z.vJ)(ot,rn=>rn.selectByComponentData({key:ee,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:Wt})=>{if(ht){if(Wt.if&&!Wt.if(ht))return[]}else return[];return[{path:Wt.path,title:Wt.title,children:Wt.children,tabProps:Wt.tabProps}]}),[ht]),{headerTitle:D,headerType:U}=T(Tt,Ft,ct,ht),[O,M]=(0,be.useState)(!1),[ne,he]=(0,be.useState)(!1),ze=(0,re.s0)(),Ct=(0,z.tg)(fe.r),Ye=(0,z.tg)(fe.u),Mt=async()=>{M(!1),he(!1),ze(Ye?Ye():Ct())};return(0,be.useEffect)(()=>{M(!1),he(!1)},[St.pathname]),be.createElement(m.T3,{themeId:(It=(mt=(yt=ht==null?void 0:ht.spec)==null?void 0:yt.type)==null?void 0:mt.toString())!=null?It:"home"},be.createElement(m.h4,{title:be.createElement(Rt,{title:D,entity:ht}),pageTitleOverride:D,type:U},ht&&be.createElement(be.Fragment,null,be.createElement(sn,{entity:ht}),be.createElement(v,{UNSTABLE_extraContextMenuItems:We,UNSTABLE_contextMenuOptions:Pt,onUnregisterEntity:()=>M(!0),onInspectEntity:()=>he(!0)}))),$t&&be.createElement(m.Ex,null),ht&&be.createElement(m.tn,{routes:Gt}),an&&be.createElement(m.VY,null,be.createElement(ge.Z,{severity:"error"},an.toString())),!$t&&!an&&!ht&&be.createElement(m.VY,null,zt||be.createElement(m.GB,{title:"Entity not found"},"There is no ",Tt," with the requested"," ",be.createElement(m.rU,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),be.createElement(B.pp,{open:O,entity:ht,onConfirm:Mt,onClose:()=>M(!1)}),be.createElement(B.U_,{open:ne,entity:ht,onClose:()=>he(!1)}))};me.Route=oe},34341:($n,qt,e)=>{"use strict";e.d(qt,{D:()=>$t,a:()=>zt,b:()=>Gt,c:()=>an,r:()=>U,u:()=>D,v:()=>St});var o=e(34520);function m(O){const{years:M=0,months:ne=0,weeks:he=0,days:ze=0,hours:Ct=0,minutes:Ye=0,seconds:Mt=0,milliseconds:rn=0}=O;return((((M*365+ne*30+he*7+ze)*24+Ct)*60+Ye)*60+Mt)*1e3+rn}var p=e(99798),z=e.n(p),B=e(12830),i=e.n(B),$=e(82394),Qe=e.n($),Ne=e(73495),a=e(43642),xe=e(77224),Te=e(15933),ie=e(86737),G=e(78898),Ge=e(4989),ge=e(44407),be=e(84219),re=e(98685),Oe=e(39412),I=e(76635),c=e(30705);const R={seconds:10},_={milliseconds:50},b=ie.Z,N={api:Te.Z,component:ge.Z,system:xe.Z,resource:Oe.Z,domain:a.Z,location:Ge.Z,user:re.Z,group:be.Z,template:G.Z};function _e(O){return{async:O.async,render:({entityRef:M,entity:ne,context:he})=>({snapshot:(0,Ne.n8)(ne||M,he),loadEntity:O.async})}}var fe=(O,M,ne)=>{if(!M.has(O))throw TypeError("Cannot "+ne)},ve=(O,M,ne)=>(fe(O,M,"read from private field"),ne?ne.call(O):M.get(O)),Y=(O,M,ne)=>{if(M.has(O))throw TypeError("Cannot add the same private member more than once");M instanceof WeakSet?M.add(O):M.set(O,ne)},v=(O,M,ne,he)=>(fe(O,M,"write to private field"),he?he.call(O,ne):M.set(O,ne),ne),ee=(O,M,ne)=>(fe(O,M,"access private method"),ne),oe,Rt,T,sn,me,Zt,yt,mt,It,We,Pt;const ot=class Xo{constructor(M){Y(this,Zt),Y(this,mt),Y(this,We),Y(this,oe,void 0),Y(this,Rt,void 0),Y(this,T,void 0),Y(this,sn,void 0),Y(this,me,void 0);var ne,he,ze,Ct;const Ye=(ne=M.cacheTtl)!=null?ne:R,Mt=(he=M.batchDelay)!=null?he:_,rn=(ze=M.renderer)!=null?ze:_e({async:!0}),Wt={};if(Object.entries(N).forEach(([ft,we])=>{Wt[ft.toLocaleLowerCase("en-US")]=we}),Object.entries((Ct=M.kindIcons)!=null?Ct:{}).forEach(([ft,we])=>{Wt[ft.toLocaleLowerCase("en-US")]=we}),rn.async){if(!M.catalogApi)throw new TypeError("Asynchronous rendering requires a catalog API");v(this,T,ee(this,mt,It).call(this,{cacheTtl:Ye,batchDelay:Mt,renderer:rn,catalogApi:M.catalogApi}))}v(this,Rt,m(Ye)),v(this,oe,new Map),v(this,sn,Wt),v(this,me,rn)}static createLocal(){return new Xo({renderer:_e({async:!1})})}static create(M){return new Xo(M)}forEntity(M,ne){const{entityRef:he,kind:ze,entity:Ct,needsLoad:Ye}=ee(this,Zt,yt).call(this,M),Mt=ft=>{const{snapshot:we}=ve(this,me).render({entityRef:he,loading:ft.loading,entity:ft.entity,context:ne||{}});return{...we,entityRef:he,Icon:ee(this,We,Pt).call(this,we.Icon,ze)}};let rn;try{rn=Mt({loading:Ye,entity:Ct})}catch{rn={primaryTitle:he,entityRef:he}}const Wt=Ye?new(Qe())(ft=>{let we=!1;return Promise.resolve().then(()=>{var rt;return(rt=ve(this,T))==null?void 0:rt.load(he)}).then(rt=>{if(!we&&rt&&rt.metadata.etag!==(Ct==null?void 0:Ct.metadata.etag)){const xt=Mt({loading:!1,entity:rt});ft.next(xt)}}).catch(()=>{}).finally(()=>{we||ft.complete()}),()=>{we=!0}}):void 0;return{snapshot:rn,update$:Wt}}};oe=new WeakMap,Rt=new WeakMap,T=new WeakMap,sn=new WeakMap,me=new WeakMap,Zt=new WeakSet,yt=function(O){if(typeof O!="string")return{entity:O,kind:O.kind,entityRef:(0,o.eE)(O),needsLoad:!1};const M=ve(this,oe).get(O),ne=M==null?void 0:M.entity,ze=(!M||Date.now()-M.updatedAt>ve(this,Rt))&&ve(this,me).async!==!1&&ve(this,T)!==void 0;return{entity:ne,kind:(0,o.of)(O).kind,entityRef:O,needsLoad:ze}},mt=new WeakSet,It=function(O){const M=m(O.cacheTtl),ne=m(O.batchDelay);return new(z())(async he=>{const{items:ze}=await O.catalogApi.getEntitiesByRefs({entityRefs:he}),Ct=Date.now();return he.forEach((Ye,Mt)=>{ve(this,oe).set(Ye,{updatedAt:Ct,entity:ze[Mt]})}),ze},{name:"DefaultEntityPresentationApi",cacheMap:new(i())(M),maxBatchSize:100,batchScheduleFn:ne?he=>setTimeout(he,ne):void 0})},We=new WeakSet,Pt=function(O,M){var ne;return O||(O===!1?!1:(ne=ve(this,sn)[M.toLocaleLowerCase("en-US")])!=null?ne:b)};let zt=ot;async function Tt({storageApi:O}){var M;const ne=O.forBucket("settings"),he=O.forBucket("starredEntities"),ze=ne.snapshot("starredEntities").value;if(!(0,I.isArray)(ze))return;const Ct=new Set((M=he.snapshot("entityRefs").value)!=null?M:[]);ze.filter(I.isString).map(Ye=>Ye.split(":")).filter(Ye=>Ye.length===4&&Ye[0]==="entity").map(([Ye,Mt,rn,Wt])=>(0,o.eE)({kind:Mt,namespace:rn,name:Wt})).forEach(Ye=>Ct.add(Ye)),await he.set("entityRefs",Array.from(Ct)),await ne.remove("starredEntities")}var Ft=Object.defineProperty,ct=(O,M,ne)=>M in O?Ft(O,M,{enumerable:!0,configurable:!0,writable:!0,value:ne}):O[M]=ne,ht=(O,M,ne)=>(ct(O,typeof M!="symbol"?M+"":M,ne),ne);class $t{constructor(M){ht(this,"settingsStore"),ht(this,"starredEntities"),ht(this,"subscribers",new Set),ht(this,"observable",new(Qe())(he=>(he.next(new Set(this.starredEntities)),this.subscribers.add(he),()=>{this.subscribers.delete(he)})));var ne;Tt(M).then(),this.settingsStore=M.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((ne=this.settingsStore.snapshot("entityRefs").value)!=null?ne:[]),this.settingsStore.observe$("entityRefs").subscribe({next:he=>{var ze;this.starredEntities=new Set((ze=he.value)!=null?ze:[]),this.notifyChanges()}})}async toggleStarred(M){this.starredEntities.has(M)?this.starredEntities.delete(M):this.starredEntities.add(M),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const M of this.subscribers)M.next(new Set(this.starredEntities))}}const an=(0,c.x8)({id:"create-component",optional:!0}),St=(0,c.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Gt=(0,c.x8)({id:"create-from-template",optional:!0,params:["namespace","templateName"]}),D=(0,c.x8)({id:"catalog:unregister-redirect",optional:!0}),U=(0,c.NT)({id:"catalog"})},16673:($n,qt,e)=>{"use strict";e.d(qt,{BL:()=>ft,Cy:()=>xt,Eq:()=>me,FZ:()=>Yt,Kf:()=>Gt,PA:()=>sn,Tu:()=>Ct,VU:()=>mt,_l:()=>St,bM:()=>Mt,dN:()=>Ye,f2:()=>rn,im:()=>Pt,jF:()=>kt,mr:()=>ot,o6:()=>Ue,oU:()=>rt,p$:()=>Ft,rR:()=>ze,vA:()=>yt,yf:()=>we});var o=e(34341),m=e(2784),p=e(79692),z=e(12420),B=e(8629),i=e(79249),$=e(49429),Qe=e(77277),Ne=e(95544),a=e(73495),xe=e(78373),Te=e(19928),ie=e.n(Te),G=e(57032),Ge=e(30705),ge=e(64279),be=e(99688),re=e(73557),Oe=e(32272),I=e(49558),c=e(34520),R=e(88285),_=e(42054),b=e(99798),N=e.n(b),_e=e(82394),fe=e.n(_e),ve=e(76635),Y=e.n(ve);function v(){const se=useApi(catalogApiRef),{error:Ze,loading:pe,value:Me}=useAsync(async()=>await se.getEntityFacets({facets:["kind"]}).then(pt=>{var Bt;return((Bt=pt.facets.kind)==null?void 0:Bt.map(tn=>tn.value).sort())||[]}),[se]);return{loading:pe,error:Ze,allKinds:Me!=null?Me:[]}}function ee(se,Ze,pe){let Me=se;return Ze&&(Me=Me.filter(pt=>Ze.some(Bt=>Bt.toLocaleLowerCase("en-US")===pt.toLocaleLowerCase("en-US")))),pe&&!se.some(pt=>pt.toLocaleLowerCase("en-US")===pe.toLocaleLowerCase("en-US"))&&(Me=Me.concat([pe])),Me.sort().reduce((pt,Bt)=>(pt[Bt.toLocaleLowerCase("en-US")]=Bt,pt),{})}const oe=(0,p.Z)(se=>(0,z.Z)({root:{...se.typography.h4}}));function Rt(se){var Ze,pe;const{initialFilter:Me="component",allowedKinds:nt}=se,pt=oe(),{allKinds:Bt}=v(),{filters:tn,updateFilters:Ce,queryParameters:{kind:Le}}=useEntityList(),P=useMemo(()=>[Le].flat()[0],[Le]),[W,J]=useState((pe=P!=null?P:(Ze=tn.kind)==null?void 0:Ze.value)!=null?pe:Me);useEffect(()=>{P&&J(P)},[P]),useEffect(()=>{var ut,Et;(ut=tn.kind)!=null&&ut.value&&J((Et=tn.kind)==null?void 0:Et.value)},[tn.kind]),useEffect(()=>{Ce({kind:W?new EntityKindFilter(W):void 0})},[W,Ce]);const it=ee(Bt,nt,W);return React.createElement(Select,{input:React.createElement(InputBase,null),value:W.toLocaleLowerCase("en-US"),onChange:ut=>J(ut.target.value),classes:pt},Object.keys(it).map(ut=>React.createElement(MenuItem,{value:ut,key:ut},`${pluralize(it[ut])}`)))}function T(se){const{open:Ze,onClose:pe,onConfirm:Me,entity:nt}=se,[pt,Bt]=(0,m.useState)(!1),tn=(0,G.u)(a.Ah),Ce=(0,G.u)(G.l),Le=async()=>{Bt(!0);try{const P=nt.metadata.uid;await tn.removeEntityByUid(P),Me()}catch(P){(0,Oe.BD)(P),Ce.post({message:P.message})}finally{Bt(!1)}};return m.createElement(B.Z,{open:Ze,onClose:pe},m.createElement(i.Z,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),m.createElement($.Z,null,m.createElement(Qe.Z,{variant:"contained",color:"secondary",disabled:pt,onClick:Le},"Delete"),m.createElement(Qe.Z,{onClick:pe,color:"primary"},"Cancel")))}function sn(se){var Ze,pe;return((pe=(Ze=se==null?void 0:se.metadata)==null?void 0:Ze.annotations)==null?void 0:pe["backstage.io/orphan"])==="true"}function me(){const se=(0,re.s0)(),Ze=(0,Ge.tg)(o.r),[pe,Me]=(0,m.useState)(!1),{entity:nt}=(0,xe.u)(),pt=async()=>{Me(!1),se(Ze())};return m.createElement(m.Fragment,null,m.createElement(be.Z,{severity:"warning",onClick:()=>Me(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),m.createElement(T,{open:pe,entity:nt,onConfirm:pt,onClose:()=>Me(!1)}))}async function Zt(se,Ze){var pe;const Me=(pe=se.relations)==null?void 0:pe.map(pt=>pt.targetRef);if(!Me||(Me==null?void 0:Me.length)<1||Me.length>1e3)return[];const nt=await Ze.getEntitiesByRefs({entityRefs:Me,fields:["kind","metadata.name","metadata.namespace"]});return Me.filter((pt,Bt)=>nt.items[Bt]===void 0)}async function yt(se,Ze){const pe=Ze.apis.get(a.Ah);if(!pe)throw new Error(`No implementation available for ${a.Ah}`);return(await Zt(se,pe)).length>0}function mt(){const{entity:se}=(0,xe.u)(),Ze=(0,G.u)(a.Ah),{loading:pe,error:Me,value:nt}=(0,ge.default)(async()=>Zt(se,Ze),[se,Ze]);return Me?m.createElement(Ne.Z,{mb:1},m.createElement(I.Gk,{error:Me})):pe||!nt||nt.length===0?null:m.createElement(m.Fragment,null,m.createElement(be.Z,{severity:"warning"},"This entity has relations to other entities, which can't be found in the catalog. ",m.createElement("br",null),"Entities not found are: ",nt.join(", ")))}const It=se=>se.error&&se.level==="error"&&se.type===R.mk;async function We(se,Ze){return{items:(await Ze.getEntityAncestors({entityRef:se})).items.map(nt=>{var pt,Bt;return{errors:((Bt=(pt=nt.entity.status)==null?void 0:pt.items)!=null?Bt:[]).filter(It).map(Le=>Le.error).filter(Le=>Boolean(Le)),entity:nt.entity}}).filter(nt=>nt.errors.length>0)}}async function Pt(se,Ze){const pe=Ze.apis.get(a.Ah);if(!pe)throw new Error(`No implementation available for ${a.Ah}`);return(await We((0,c.eE)(se),pe)).items.length>0}function ot(){const{entity:se}=(0,xe.u)(),Ze=(0,c.eE)(se),pe=(0,G.u)(a.Ah),{loading:Me,error:nt,value:pt}=(0,ge.default)(async()=>We(Ze,pe),[Ze,pe]);return nt?m.createElement(Ne.Z,{mb:1},m.createElement(I.Gk,{error:nt})):Me||!pt?null:m.createElement(m.Fragment,null,pt.items.map((Bt,tn)=>m.createElement(Ne.Z,{key:tn,mb:1},(0,c.eE)(se)!==(0,c.eE)(Bt.entity)&&m.createElement(Ne.Z,{p:1},"The error below originates from"," ",m.createElement(a.dx,{entityRef:Bt.entity})),Bt.errors.map((Ce,Le)=>m.createElement(I.Gk,{key:Le,error:Ce})))))}const zt="core.backstage.entitySwitch",Tt=se=>null;(0,Ge.R5)(Tt,zt,!0);const Ft=se=>{var Ze,pe;const{entity:Me,loading:nt}=(0,xe.a)(),pt=(0,G.b)(),Bt=(0,Ge.vJ)(se.children,Ce=>Ce.selectByComponentData({key:zt,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(Le=>{if(nt&&!Me)return[];const{if:P,children:W}=Le.props;return Me?[{if:P==null?void 0:P(Me,{apis:pt}),children:W}]:[{if:P===void 0,children:W}]}),[pt,Me,nt]);if(Bt.some(Ce=>typeof Ce.if=="object"&&"then"in Ce.if))return m.createElement(ct,{results:Bt,renderMultipleMatches:se.renderMultipleMatches});if(se.renderMultipleMatches==="all"){const Ce=Bt.filter(Le=>Le.if).map(Le=>Le.children);return Ce.length===0?ht(Bt):m.createElement(m.Fragment,null,Ce)}return(pe=(Ze=Bt.find(Ce=>Ce.if))==null?void 0:Ze.children)!=null?pe:ht(Bt)};function ct({results:se,renderMultipleMatches:Ze}){const{loading:pe,value:Me}=(0,ge.default)(async()=>{var nt;const pt=se.map(async({if:Bt,children:tn})=>{try{if(await Bt)return tn}catch{}return null});if(Ze==="all"){const Bt=(await Promise.all(pt)).filter(Boolean);return Bt.length===0?ht(se):m.createElement(m.Fragment,null,Bt)}return(nt=(await Promise.all(pt)).find(Boolean))!=null?nt:ht(se)},[se]);return pe||!Me?null:Me}function ht(se){var Ze,pe;return(pe=(Ze=se.filter(Me=>Me.if===void 0)[0])==null?void 0:Ze.children)!=null?pe:null}Ft.Case=Tt;function $t(se,Ze){return Boolean(se&&typeof se=="string"&&(se==null?void 0:se.toLocaleLowerCase("en-US"))===(Ze==null?void 0:Ze.toLocaleLowerCase("en-US")))}function an(se,Ze){return typeof Ze=="string"?$t(se,Ze):Ze.length===0||Ze.some(pe=>$t(se,pe))}function St(se){return U({kind:se})}function Gt(se){return U({kind:"component",type:se})}function D(se){return U({kind:"resource",type:se})}function U(se){return Ze=>{var pe;return!(se.kind&&!an(Ze.kind,se.kind)||se.type&&!an((pe=Ze.spec)==null?void 0:pe.type,se.type))}}function O(se){return Ze=>{var pe;return an((pe=Ze.metadata)==null?void 0:pe.namespace,se)}}const M=null,ne=a._i.Filters,he=a._i.Content,ze=(0,Ge.rx)({id:"catalog",apis:[(0,Ge.ni)({api:a.Ah,deps:{discoveryApi:G.q,fetchApi:G.s},factory:({discoveryApi:se,fetchApi:Ze})=>new R.MS({discoveryApi:se,fetchApi:Ze})}),(0,Ge.ni)({api:a.p3,deps:{storageApi:G.x},factory:({storageApi:se})=>new o.D({storageApi:se})}),(0,Ge.ni)({api:a.XI,deps:{catalogApi:a.Ah},factory:({catalogApi:se})=>o.a.create({catalogApi:se})})],routes:{catalogIndex:o.r,catalogEntity:a.wi},externalRoutes:{createComponent:o.c,viewTechDoc:o.v,createFromTemplate:o.b,unregisterRedirect:o.u}}),Ct=ze.provide((0,Ge.P4)({name:"CatalogIndexPage",component:()=>e.e(1729).then(e.bind(e,21729)).then(se=>se.CatalogPage),mountPoint:o.r})),Ye=ze.provide((0,Ge.P4)({name:"CatalogEntityPage",component:()=>e.e(4897).then(e.bind(e,84897)).then(se=>se.CatalogEntityPage),mountPoint:a.wi})),Mt=ze.provide((0,Ge.CO)({name:"EntityAboutCard",component:{lazy:()=>e.e(5724).then(e.bind(e,45724)).then(se=>se.AboutCard)}})),rn=ze.provide((0,Ge.CO)({name:"EntityLinksCard",component:{lazy:()=>e.e(9448).then(e.bind(e,69448)).then(se=>se.EntityLinksCard)}})),Wt=ze.provide((0,Ge.CO)({name:"EntityLabelsCard",component:{lazy:()=>e.e(1296).then(e.bind(e,1296)).then(se=>se.EntityLabelsCard)}})),ft=ze.provide((0,Ge.CO)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(4745).then(e.bind(e,34745)).then(se=>se.HasSystemsCard)}})),we=ze.provide((0,Ge.CO)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(5932).then(e.bind(e,5932)).then(se=>se.HasComponentsCard)}})),rt=ze.provide((0,Ge.CO)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(4949).then(e.bind(e,74949)).then(se=>se.HasSubcomponentsCard)}})),xt=ze.provide((0,Ge.CO)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(2842).then(e.bind(e,2842)).then(se=>se.HasResourcesCard)}})),kt=ze.provide((0,Ge.CO)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(748).then(e.bind(e,20748)).then(se=>se.DependsOnComponentsCard)}})),le=ze.provide((0,Ge.CO)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(6146).then(e.bind(e,36146)).then(se=>se.DependencyOfComponentsCard)}})),Ue=ze.provide((0,Ge.CO)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(7127).then(e.bind(e,47127)).then(se=>se.DependsOnResourcesCard)}})),Lt=ze.provide((0,Ge.CO)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(9489).then(e.bind(e,59489)).then(se=>se.RelatedEntitiesCard)}})),Yt=ze.provide((0,_.c)({name:"CatalogSearchResultListItem",component:()=>e.e(306).then(e.bind(e,60306)).then(se=>se.CatalogSearchResultListItem),predicate:se=>se.type==="software-catalog"}))},42214:($n,qt,e)=>{"use strict";e.d(qt,{IJ:()=>gt,Oz:()=>Vt,Q3:()=>Vn,fX:()=>rn,i4:()=>Pe});var o=e(57032),m=e(30705),p=e(1854),z=e(87195),B=e(49462),i=e(2784),$=e(78373),Qe=e(73495),Ne=e(39857),a=e(73557),xe=e(79692),Te=e(27616),ie=e(8284),G=e(90436),Ge=e(4614),ge=e(80030),be=e(69087),re=e(35111),Oe=e(14498),I=e(89571),c=e(15584),R=e(49378),_=e(70660),b=e(91256),N=e(37390),_e=e(95544),fe=e(67358),ve=e(27556),Y=e(97485),v=e(12420),ee=e(60905),oe=e(7089),Rt=e(38592),T=e(61837),sn=e(28899),me=e(86619),Zt=e(77277),yt=e(73698),mt=e(12231),It=e(38016),We=e(69001),Pt=e(26228),ot=e(49558),zt=e(64279),Tt=e(30254),Ft=e(34520),ct=e(82717),ht=e.n(ct),$t=e(58838),an=e(43266),St=e(26883),Gt=e(77446),D=e(99688);const U=(0,o.c)({id:"plugin.githubactions.service"});var O=Object.defineProperty,M=(ae,Ae,je)=>Ae in ae?O(ae,Ae,{enumerable:!0,configurable:!0,writable:!0,value:je}):ae[Ae]=je,ne=(ae,Ae,je)=>(M(ae,typeof Ae!="symbol"?Ae+"":Ae,je),je);class he{constructor(Ae){ne(this,"configApi"),ne(this,"scmAuthApi"),this.configApi=Ae.configApi,this.scmAuthApi=Ae.scmAuthApi}async getOctokit(Ae="github.com"){var je;const{token:Ht}=await this.scmAuthApi.getCredentials({url:`https://${Ae}/`,additionalScope:{customScopes:{github:["repo"]}}}),ln=(0,p.MY)((je=this.configApi.getOptionalConfigArray("integrations.github"))!=null?je:[]).find(In=>In.host===Ae),on=ln==null?void 0:ln.apiBaseUrl;return new z.v({auth:Ht,baseUrl:on})}async reRunWorkflow(Ae){const{hostname:je,owner:Ht,repo:nn,runId:ln}=Ae;return(await this.getOctokit(je)).actions.reRunWorkflow({owner:Ht,repo:nn,run_id:ln})}async listWorkflowRuns(Ae){const{hostname:je,owner:Ht,repo:nn,pageSize:ln=100,page:on=0,branch:In}=Ae;return(await(await this.getOctokit(je)).actions.listWorkflowRunsForRepo({owner:Ht,repo:nn,per_page:ln,page:on,...In?{branch:In}:{}})).data}async getWorkflow(Ae){const{hostname:je,owner:Ht,repo:nn,id:ln}=Ae;return(await(await this.getOctokit(je)).actions.getWorkflow({owner:Ht,repo:nn,workflow_id:ln})).data}async getWorkflowRun(Ae){const{hostname:je,owner:Ht,repo:nn,id:ln}=Ae;return(await(await this.getOctokit(je)).actions.getWorkflowRun({owner:Ht,repo:nn,run_id:ln})).data}async listJobsForWorkflowRun(Ae){const{hostname:je,owner:Ht,repo:nn,id:ln,pageSize:on=100,page:In=0}=Ae;return(await(await this.getOctokit(je)).actions.listJobsForWorkflowRun({owner:Ht,repo:nn,run_id:ln,per_page:on,page:In})).data}async downloadJobLogsForWorkflowRun(Ae){const{hostname:je,owner:Ht,repo:nn,runId:ln}=Ae;return(await(await this.getOctokit(je)).actions.downloadJobLogsForWorkflowRun({owner:Ht,repo:nn,job_id:ln})).data}async listBranches(Ae){const{hostname:je,owner:Ht,repo:nn,page:ln=0}=Ae;return(await(await this.getOctokit(je)).rest.repos.listBranches({owner:Ht,repo:nn,per_page:100,page:ln})).data}async getDefaultBranch(Ae){const{hostname:je,owner:Ht,repo:nn}=Ae;return(await(await this.getOctokit(je)).rest.repos.get({owner:Ht,repo:nn})).data.default_branch}}var ze=(ae=>(ae[ae.success=0]="success",ae[ae.failure=1]="failure",ae[ae.pending=2]="pending",ae[ae.running=3]="running",ae))(ze||{});const Ct=(0,m.NT)({id:"github-actions"}),Ye=(0,m.Rz)({id:"github-actions/build",path:"/:id",parent:Ct}),Mt=(0,m.rx)({id:"github-actions",apis:[(0,m.ni)({api:U,deps:{configApi:o.p,scmAuthApi:B.Om},factory:({configApi:ae,scmAuthApi:Ae})=>new he({configApi:ae,scmAuthApi:Ae})})],routes:{entityContent:Ct}}),rn=Mt.provide((0,m.P4)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return Zn}).then(ae=>ae.Router),mountPoint:Ct})),Wt=Mt.provide((0,m.CO)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(6169).then(e.bind(e,96169)).then(ae=>ae.LatestWorkflowRunCard)}})),ft=Mt.provide((0,m.CO)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(6169).then(e.bind(e,96169)).then(ae=>ae.LatestWorkflowsForBranchCard)}})),we=Mt.provide((0,m.CO)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(6169).then(e.bind(e,96169)).then(ae=>ae.RecentWorkflowRunsCard)}})),rt="github.com/project-slug",xt=ae=>{var Ae,je;return(je=(Ae=ae==null?void 0:ae.metadata.annotations)==null?void 0:Ae[rt])!=null?je:""},kt=ae=>i.createElement(i.Fragment,null,i.createElement(le,{...ae}),Ue(ae));function le({status:ae,conclusion:Ae}){if(ae===void 0)return null;switch(ae.toLocaleLowerCase("en-US")){case"queued":return i.createElement(ot.wA,null);case"in_progress":return i.createElement(ot.VC,null);case"completed":switch(Ae==null?void 0:Ae.toLocaleLowerCase("en-US")){case"skipped":return i.createElement(ot.dh,null);case"timed_out":return i.createElement(ot.Pd,null);case"failure":return i.createElement(ot.vK,null);default:return i.createElement(ot.Kq,null)}default:return i.createElement(ot.wA,null)}}function Ue({status:ae,conclusion:Ae}){if(ae===void 0)return"";switch(ae.toLocaleLowerCase("en-US")){case"queued":return"Queued";case"in_progress":return"In progress";case"completed":switch(Ae==null?void 0:Ae.toLocaleLowerCase("en-US")){case"skipped":return"Aborted";case"timed_out":return"Timed out";case"failure":return"Error";default:return"Completed"}default:return"Pending"}}const Lt=({hostname:ae,owner:Ae,repo:je})=>{const Ht=(0,o.u)(U),{id:nn}=(0,m.Oi)(Ye);return(0,zt.default)(async()=>{if(!je||!Ae)throw new Error("No repo/owner provided");const ln=await Ht.listJobsForWorkflowRun({hostname:ae,owner:Ae,repo:je,id:parseInt(nn,10)});return{total_count:ln.total_count,jobs:ln.jobs.map(on=>{var In,Bn,Hn,ra;return{html_url:(In=on.html_url)!=null?In:void 0,status:on.status,conclusion:(Bn=on.conclusion)!=null?Bn:void 0,started_at:on.started_at,completed_at:(Hn=on.completed_at)!=null?Hn:void 0,id:on.id,name:on.name,steps:(ra=on.steps)==null?void 0:ra.map(yn=>{var na,ia,oa;return{name:yn.name,status:yn.status,conclusion:(na=yn.conclusion)!=null?na:void 0,number:yn.number,started_at:(ia=yn.started_at)!=null?ia:void 0,completed_at:(oa=yn.completed_at)!=null?oa:void 0}})}})}},[je,Ae,nn])},Yt=({hostname:ae,owner:Ae,repo:je})=>{const Ht=(0,o.u)(U),{id:nn}=(0,m.Oi)(Ye);return(0,zt.default)(async()=>je&&Ae?Ht.getWorkflowRun({hostname:ae,owner:Ae,repo:je,id:parseInt(nn,10)}):Promise.reject(new Error("No repo/owner provided")),[je,Ae,nn])},se=({hostname:ae,owner:Ae,repo:je,id:Ht})=>{const nn=(0,o.u)(U);return(0,zt.default)(async()=>je&&Ae?nn.downloadJobLogsForWorkflowRun({hostname:ae,owner:Ae,repo:je,runId:Ht}):Promise.reject("No repo/owner provided"),[je,Ae,Ht])},Ze=ae=>{var Ae,je,Ht;const nn=(Ht=(Ae=ae==null?void 0:ae.metadata.annotations)==null?void 0:Ae[Ft.M6])!=null?Ht:(je=ae==null?void 0:ae.metadata.annotations)==null?void 0:je[Ft.P1];return nn!=null&&nn.startsWith("url:")?ht()(nn.slice(4)).resource:void 0},pe=(0,xe.Z)(ae=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:ae.palette.background.default}})),Me=({entity:ae,runId:Ae,inProgress:je})=>{const Ht=pe(),nn=xt(ae),ln=Ze(ae),[on,In]=nn&&nn.split("/")||[],Bn=se({hostname:ln,owner:on,repo:In,id:Ae}),Hn=Bn.value?String(Bn.value):void 0,[ra,yn]=i.useState(!1),na=()=>{yn(!0)},ia=()=>{yn(!1)};return i.createElement(Te.Z,{TransitionProps:{unmountOnExit:!0},disabled:je},i.createElement(ie.Z,{expandIcon:i.createElement(It.Z,null),IconButtonProps:{className:Ht.button}},i.createElement(G.Z,{variant:"button"},Bn.loading?i.createElement(Ge.Z,null):"Job Log"),i.createElement(ge.ZP,{title:"Open Log",TransitionComponent:be.Z,arrow:!0},i.createElement(Tt.Z,{onClick:oa=>{oa.stopPropagation(),na()},style:{marginLeft:"auto"}})),i.createElement(re.Z,{className:Ht.modal,onClick:oa=>oa.stopPropagation(),open:ra,onClose:ia},i.createElement(Oe.Z,{in:ra},i.createElement("div",{className:Ht.modalLogContainer},i.createElement(ot.nU,{text:Hn!=null?Hn:"No Values Found",classes:{root:Ht.log}}))))),Hn&&i.createElement("div",{className:Ht.normalLogContainer},i.createElement(ot.nU,{text:Hn,classes:{root:Ht.log}})))},nt=(0,xe.Z)(ae=>({root:{maxWidth:720,margin:ae.spacing(2)},title:{padding:ae.spacing(1,0,2,0)},table:{padding:ae.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),pt=(ae,Ae)=>{if(!ae||!Ae)return"";const je=Pt.ou.fromISO(ae);return(Ae?Pt.ou.fromISO(Ae):Pt.ou.now()).diff(je).toFormat("m 'minutes' s 'seconds'")},Bt=({step:ae})=>{var Ae;return i.createElement(I.Z,null,i.createElement(c.Z,null,i.createElement(R.Z,{primary:ae.name,secondary:pt(ae.started_at,ae.completed_at)})),i.createElement(c.Z,null,i.createElement(kt,{status:ae.status.toLocaleUpperCase("en-US"),conclusion:(Ae=ae.conclusion)==null?void 0:Ae.toLocaleUpperCase("en-US")})))},tn=({job:ae,className:Ae,entity:je})=>{var Ht;const nn=nt();return i.createElement(Te.Z,{TransitionProps:{unmountOnExit:!0},className:Ae},i.createElement(ie.Z,{expandIcon:i.createElement(It.Z,null),IconButtonProps:{className:nn.button}},i.createElement(G.Z,{variant:"button"},ae.name," (",pt(ae.started_at,ae.completed_at),")")),i.createElement(_.Z,{className:nn.accordionDetails},i.createElement(b.Z,null,i.createElement(N.Z,null,(Ht=ae.steps)==null?void 0:Ht.map(ln=>i.createElement(Bt,{key:ln.number,step:ln}))))),ae.status==="queued"||ae.status==="in_progress"?i.createElement(Me,{runId:ae.id,inProgress:!0,entity:je}):i.createElement(Me,{runId:ae.id,inProgress:!1,entity:je}))},Ce=({jobs:ae,entity:Ae})=>{const je=nt();return i.createElement(_e.Z,null,ae&&ae.total_count>0&&ae.jobs.map(Ht=>i.createElement(tn,{key:Ht.id,job:Ht,className:Ht.status!=="success"?je.failed:je.success,entity:Ae})))},Le=({entity:ae})=>{var Ae,je,Ht,nn,ln,on,In,Bn,Hn,ra,yn,na,ia,oa,ua;const Pa=xt(ae),Qn=Ze(ae),[Ea,X]=Pa&&Pa.split("/")||[],Be=Yt({hostname:Qn,owner:Ea,repo:X}),et=Lt({hostname:Qn,owner:Ea,repo:X}),vt=nt();return Be.error&&Be.error.message?i.createElement(G.Z,{variant:"h6",color:"error"},"Failed to load build, ",Be.error.message):Be.loading?i.createElement(fe.Z,null):i.createElement("div",{className:vt.root},i.createElement(_e.Z,{mb:3},i.createElement(ot.Oo,{"aria-label":"breadcrumb"},i.createElement(ot.rU,{to:".."},"Workflow runs"),i.createElement(G.Z,null,"Workflow run details"))),i.createElement(b.Z,{component:ve.Z,className:vt.table},i.createElement(N.Z,null,i.createElement(Y.Z,null,i.createElement(I.Z,null,i.createElement(c.Z,null,i.createElement(G.Z,{noWrap:!0},"Branch")),i.createElement(c.Z,null,(Ae=Be.value)==null?void 0:Ae.head_branch)),i.createElement(I.Z,null,i.createElement(c.Z,null,i.createElement(G.Z,{noWrap:!0},"Message")),i.createElement(c.Z,null,(Ht=(je=Be.value)==null?void 0:je.head_commit)==null?void 0:Ht.message)),i.createElement(I.Z,null,i.createElement(c.Z,null,i.createElement(G.Z,{noWrap:!0},"Commit ID")),i.createElement(c.Z,null,(ln=(nn=Be.value)==null?void 0:nn.head_commit)==null?void 0:ln.id)),i.createElement(I.Z,null,i.createElement(c.Z,null,i.createElement(G.Z,{noWrap:!0},"Workflow")),i.createElement(c.Z,null,(on=Be.value)==null?void 0:on.name)),i.createElement(I.Z,null,i.createElement(c.Z,null,i.createElement(G.Z,{noWrap:!0},"Status")),i.createElement(c.Z,null,i.createElement(kt,{status:((In=Be.value)==null?void 0:In.status)||void 0,conclusion:((Bn=Be.value)==null?void 0:Bn.conclusion)||void 0}))),i.createElement(I.Z,null,i.createElement(c.Z,null,i.createElement(G.Z,{noWrap:!0},"Author")),i.createElement(c.Z,null,`${(yn=(ra=(Hn=Be.value)==null?void 0:Hn.head_commit)==null?void 0:ra.author)==null?void 0:yn.name} (${(oa=(ia=(na=Be.value)==null?void 0:na.head_commit)==null?void 0:ia.author)==null?void 0:oa.email})`)),i.createElement(I.Z,null,i.createElement(c.Z,null,i.createElement(G.Z,{noWrap:!0},"Links")),i.createElement(c.Z,null,((ua=Be.value)==null?void 0:ua.html_url)&&i.createElement(ot.rU,{to:Be.value.html_url},"Workflow runs on GitHub"," ",i.createElement(We.Z,{className:vt.externalLinkIcon})))),i.createElement(I.Z,null,i.createElement(c.Z,{colSpan:2},i.createElement(G.Z,{noWrap:!0},"Jobs"),et.loading?i.createElement(Ge.Z,null):i.createElement(Ce,{jobs:et.value,entity:ae})))))))};function P({hostname:ae,owner:Ae,repo:je,branch:Ht,initialPageSize:nn=6}){const ln=(0,o.u)(U),on=(0,o.u)(o.r),[In,Bn]=(0,i.useState)(0),[Hn,ra]=(0,i.useState)(0),[yn,na]=(0,i.useState)(nn),[ia,oa]=(0,i.useState)([]),[ua,Pa]=(0,i.useState)(""),{loading:Qn,value:Ea,retry:X,error:Be}=(0,Gt.Z)(async()=>{const et=await ln.getDefaultBranch({hostname:ae,owner:Ae,repo:je});Pa(et);let vt=Ht;Ht==="default"&&(vt=et);const H=await(async()=>{let de=!0,st=0;const k=[];for(;de;){const j=await ln.listBranches({hostname:ae,owner:Ae,repo:je,page:st});j.length===0&&(de=!1),st++,k.push(...j)}return k})();oa(H);const Ee=await ln.listWorkflowRuns({hostname:ae,owner:Ae,repo:je,pageSize:yn,page:Hn+1,branch:vt});return Bn(Ee.total_count),Ee.workflow_runs.map(de=>{var st,k,j,Q,te,ke,Je,He,qe;return{workflowName:(st=de.name)!=null?st:void 0,message:(k=de.head_commit)==null?void 0:k.message,id:`${de.id}`,onReRunClick:async()=>{try{await ln.reRunWorkflow({hostname:ae,owner:Ae,repo:je,runId:de.id})}catch(At){on.post(new Error(`Failed to rerun the workflow: ${At.message}`))}},source:{branchName:(j=de.head_branch)!=null?j:void 0,commit:{hash:(Q=de.head_commit)==null?void 0:Q.id,url:(Je=(te=de.head_repository)==null?void 0:te.branches_url)==null?void 0:Je.replace("{/branch}",(ke=de.head_branch)!=null?ke:"")}},status:(He=de.status)!=null?He:void 0,conclusion:(qe=de.conclusion)!=null?qe:void 0,url:de.url,githubUrl:de.html_url}})},[Hn,yn,je,Ae]);return[{page:Hn,pageSize:yn,loading:Qn,runs:Ea,branches:ia,defaultBranch:ua,projectName:`${Ae}/${je}`,total:In,error:Be},{runs:Ea,setPage:ra,setPageSize:na,retry:X}]}const W=(0,xe.Z)(ae=>(0,v.Z)({card:{border:`1px solid ${ae.palette.divider}`,boxShadow:ae.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:ae.spacing(4,1,1),flex:"1",minWidth:"0px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"middle"},bottomline:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"-5px"},pagination:{width:"100%"}})),J={skipped:"warning",canceled:"info",timed_out:"error",failure:"error",success:"success"},it=(ae,Ae)=>{var je,Ht,nn,ln;const on=Ae.toLocaleLowerCase();return((je=ae.workflowName)==null?void 0:je.toLocaleLowerCase().includes(on))||((Ht=ae.source.branchName)==null?void 0:Ht.toLocaleLowerCase().includes(on))||((nn=ae.status)==null?void 0:nn.toLocaleLowerCase().includes(on))||((ln=ae.id)==null?void 0:ln.toLocaleLowerCase().includes(on))},ut=({runs:ae,searchTerm:Ae,loading:je,onChangePageSize:Ht,onChangePage:nn,page:ln,total:on,pageSize:In})=>{const Bn=W(),Hn=(0,m.tg)(Ye),ra=ae==null?void 0:ae.filter(yn=>it(yn,Ae));return i.createElement(ee.Z,{container:!0,spacing:3},ra&&(ae==null?void 0:ae.length)!==0?ra.map(yn=>{var na,ia;return i.createElement(ee.Z,{key:yn.id,item:!0,container:!0,xs:12,sm:4,md:4,xl:4},i.createElement(_e.Z,{className:Bn.card},i.createElement(_e.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},i.createElement(_e.Z,{pt:2,sx:{width:"100%"},textAlign:"center"},i.createElement(ge.ZP,{title:(na=yn.status)!=null?na:"No Status",placement:"top-start"},i.createElement(D.Z,{variant:"outlined",severity:J[yn.conclusion],style:{alignItems:"center"}},i.createElement(G.Z,{variant:"h6"},i.createElement(ot.rU,{to:Hn({id:yn.id})},i.createElement(G.Z,{color:"primary",variant:"h6"},yn.workflowName))))),i.createElement(ge.ZP,{title:(ia=yn.message)!=null?ia:"No run message"},i.createElement(G.Z,{variant:"body2",component:"span",style:{fontSize:"smaller"}},i.createElement(ot.SA,{content:`Commit ID : ${yn.source.commit.hash}`}))),yn.source.branchName&&i.createElement(ot.SA,{content:`Branch : ${yn.source.branchName}`}),i.createElement(oe.Z,{key:yn.id,size:"small",label:`Workflow ID : ${yn.id}`}),i.createElement(oe.Z,{size:"small",label:i.createElement(_e.Z,{display:"flex",alignItems:"center"},i.createElement(kt,{status:yn.status,conclusion:yn.conclusion}))}),i.createElement("div",{className:Bn.bottomline},yn.githubUrl&&i.createElement(ot.rU,{to:yn.githubUrl},"Workflow runs on GitHub"," ",i.createElement(We.Z,{className:Bn.externalLinkIcon})),i.createElement(Rt.Z,null,i.createElement(ge.ZP,{title:"Rerun workflow"},i.createElement(T.Z,{onClick:yn.onReRunClick,style:{fontSize:"12px"}},i.createElement(an.Z,null)))))))))}):i.createElement(_e.Z,{p:2},je?i.createElement(Ge.Z,null):"No matching runs found."),i.createElement("div",{className:Bn.pagination},i.createElement(sn.Z,{component:"div",count:on,page:ln,rowsPerPage:In,onPageChange:(yn,na)=>nn(na),onRowsPerPageChange:yn=>Ht(parseInt(yn.target.value,6)),labelRowsPerPage:"Workflows per page",rowsPerPageOptions:[6,12,18,{label:"All",value:-1}]})))},Et=({searchTerm:ae,handleSearch:Ae,retry:je})=>i.createElement(i.Fragment,null,i.createElement(_e.Z,{flexGrow:1}),i.createElement(me.Z,{type:"search",label:"Search",value:ae,onChange:Ae,"data-testid":"search-control",style:{marginRight:"20px"}}),i.createElement(Rt.Z,null,i.createElement(ge.ZP,{title:"Reload workflow runs"},i.createElement(T.Z,{onClick:je},i.createElement(St.Z,null))))),Jt=({entity:ae})=>{const Ae=xt(ae),je=Ze(ae),[Ht,nn]=(Ae!=null?Ae:"/").split("/"),[ln,on]=(0,i.useState)("default"),[In,Bn]=(0,i.useState)([]),[Hn,ra]=(0,i.useState)(""),yn=vt=>{ra(vt.target.value)},[{runs:na,branches:ia,defaultBranch:oa,...ua},{retry:Pa,setPage:Qn,setPageSize:Ea}]=P({hostname:je,owner:Ht,repo:nn,branch:ln==="all"?void 0:ln}),X=je||"github.com",Be=!ua.loading&&!na,et=vt=>{const Se=vt.target.value;on(Se),Qn(0),Pa()};return(0,i.useEffect)(()=>{Bn(na)},[na,ln]),(0,i.useEffect)(()=>{on(oa)},[oa]),i.createElement(ee.Z,{item:!0},Be?i.createElement(ot.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:i.createElement(Zt.Z,{variant:"contained",color:"primary",href:`https://${X}/${Ae}/actions/new`},"Create new Workflow")}):i.createElement(ot.rJ,{title:i.createElement(_e.Z,{display:"flex",alignItems:"center"},i.createElement($t.Z,null),i.createElement(_e.Z,{mr:1}),i.createElement(G.Z,{variant:"h6"},Ae),i.createElement(yt.Z,{value:ln,key:ln,label:"Branch",onChange:et,"data-testid":"menu-control",style:{marginLeft:"30px",marginRight:"20px",width:"230px"}},ia.map(vt=>i.createElement(mt.Z,{key:vt.name,value:vt.name},vt.name===oa?i.createElement(G.Z,{variant:"body2",component:"span"},vt.name," ",i.createElement(G.Z,{variant:"body2",component:"span",style:{color:"lightgray",fontSize:"x-small"}},"(default)")):vt.name)),i.createElement(mt.Z,{value:"all",key:"all",style:{color:"lightGrey",fontSize:"small"}},"select all branches")),i.createElement(Et,{searchTerm:Hn,handleSearch:yn,retry:Pa}))},i.createElement(ut,{runs:In,loading:ua.loading,onChangePageSize:Ea,onChangePage:Qn,page:ua.page,total:ua.total,pageSize:ua.pageSize,searchTerm:Hn,projectName:Ae})))},mn=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:ae=>{const Ae=()=>{const je=(0,m.tg)(Ye);return i.createElement(ot.rU,{component:Ne.rU,to:je({id:ae.id})},ae.message)};return i.createElement(Ae,null)}},{title:"Source",render:ae=>{var Ae,je;return i.createElement(G.Z,{variant:"body2",noWrap:!0},i.createElement(G.Z,{paragraph:!0,variant:"body2"},(Ae=ae.source)==null?void 0:Ae.branchName),i.createElement(G.Z,{paragraph:!0,variant:"body2"},(je=ae.source)==null?void 0:je.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",customSort:(ae,Ae)=>Ue(ae).localeCompare(Ue(Ae)),render:ae=>i.createElement(_e.Z,{display:"flex",alignItems:"center"},i.createElement(kt,{status:ae.status,conclusion:ae.conclusion}))},{title:"Actions",render:ae=>i.createElement(ge.ZP,{title:"Rerun workflow"},i.createElement(T.Z,{onClick:ae.onReRunClick},i.createElement(an.Z,null))),width:"10%"}],An=({projectName:ae,loading:Ae,pageSize:je,page:Ht,retry:nn,runs:ln,onChangePage:on,onChangePageSize:In,total:Bn})=>i.createElement(ot.iA,{isLoading:Ae,options:{paging:!0,pageSize:je,padding:"dense"},totalCount:Bn,page:Ht,actions:[{icon:()=>i.createElement(St.Z,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>nn()}],data:ln!=null?ln:[],onPageChange:on,onRowsPerPageChange:In,style:{width:"100%"},title:i.createElement(_e.Z,{display:"flex",alignItems:"center"},i.createElement($t.Z,null),i.createElement(_e.Z,{mr:1}),i.createElement(G.Z,{variant:"h6"},ae)),columns:mn}),vn=({entity:ae,branch:Ae})=>{const je=xt(ae),Ht=Ze(ae),[nn,ln]=(je!=null?je:"/").split("/"),[{runs:on,...In},{retry:Bn,setPage:Hn,setPageSize:ra}]=P({hostname:Ht,owner:nn,repo:ln,branch:Ae}),yn=Ht||"github.com";return!In.loading&&!on?i.createElement(ot.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:i.createElement(Zt.Z,{variant:"contained",color:"primary",href:`https://${yn}/${je}/actions/new`},"Create new Workflow")}):i.createElement(An,{...In,runs:on,loading:In.loading,retry:Bn,onChangePageSize:ra,onChangePage:Hn})},Vn=ae=>{var Ae;return Boolean((Ae=ae.metadata.annotations)==null?void 0:Ae[rt])};var Zn=Object.freeze({__proto__:null,isGithubActionsAvailable:Vn,Router:ae=>{const{view:Ae="table"}=ae,{entity:je}=(0,$.u)();if(!Vn(je))return i.createElement(Qe.sk,{annotation:rt});const Ht=Ae==="cards"?i.createElement(Jt,{entity:je}):i.createElement(vn,{entity:je});return i.createElement(a.Z5,null,i.createElement(a.AW,{path:"/",element:Ht}),i.createElement(a.AW,{path:`${Ye.path}`,element:i.createElement(Le,{entity:je})}))}});const A=(0,xe.Z)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),F=ae=>{var Ae;const{error:je,loading:Ht,lastRun:nn,branch:ln}=ae,on=A();return je?i.createElement(G.Z,null,"Couldn't fetch latest ",ln," run"):Ht?i.createElement(fe.Z,null):i.createElement(ot.xT,{metadata:{status:i.createElement(i.Fragment,null,i.createElement(kt,{status:nn.status,conclusion:nn.conclusion})),message:nn.message,url:i.createElement(ot.rU,{to:(Ae=nn.githubUrl)!=null?Ae:""},"See more on GitHub"," ",i.createElement(We.Z,{className:on.externalLinkIcon}))}})},Pe=ae=>{var Ae,je,Ht;const{branch:nn="master",variant:ln}=ae,{entity:on}=(0,$.u)(),In=(0,o.u)(o.r),Bn=Ze(on),[Hn,ra]=((je=(Ae=on==null?void 0:on.metadata.annotations)==null?void 0:Ae[rt])!=null?je:"/").split("/"),[{runs:yn,loading:na,error:ia}]=P({hostname:Bn,owner:Hn,repo:ra,branch:nn}),oa=(Ht=yn==null?void 0:yn[0])!=null?Ht:{};return(0,i.useEffect)(()=>{ia&&In.post(ia)},[ia,In]),i.createElement(ot.rJ,{title:`Last ${nn} build`,variant:ln},i.createElement(F,{error:ia,loading:na,branch:nn,lastRun:oa}))},gt=ae=>{const{branch:Ae="master",variant:je}=ae,{entity:Ht}=(0,$.u)();return i.createElement(ot.rJ,{title:`Last ${Ae} build`,variant:je},i.createElement(vn,{branch:Ae,entity:Ht}))},Ot=ae=>ae.split(`
`)[0],Vt=ae=>{var Ae,je;const{branch:Ht,dense:nn=!1,limit:ln=5,variant:on}=ae,{entity:In}=(0,$.u)(),Bn=(0,o.u)(o.r),Hn=Ze(In),[ra,yn]=((je=(Ae=In==null?void 0:In.metadata.annotations)==null?void 0:Ae[rt])!=null?je:"/").split("/"),[{runs:na=[],loading:ia,error:oa}]=P({hostname:Hn,owner:ra,repo:yn,branch:Ht,initialPageSize:ln});(0,i.useEffect)(()=>{oa&&Bn.post(oa)},[oa,Bn]);const ua=Hn||"github.com",Pa=(0,m.tg)(Ye);return oa?i.createElement(ot.yu,{title:oa.message,error:oa}):i.createElement(ot.rJ,{title:"Recent Workflow Runs",subheader:Ht?`Branch: ${Ht}`:"All Branches",noPadding:!0,variant:on},na.length?i.createElement(ot.iA,{isLoading:ia,options:{search:!1,paging:!1,padding:nn?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:Qn=>{var Ea;return i.createElement(ot.rU,{component:Ne.rU,to:Pa({id:Qn.id})},Ot((Ea=Qn.message)!=null?Ea:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:kt}],data:na}):i.createElement("div",{style:{textAlign:"center"}},i.createElement(G.Z,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),i.createElement(G.Z,{variant:"body2"},i.createElement(ot.rU,{to:`https://${ua}/${ra}/${yn}/actions/new`},"Create a new workflow"))))}},59235:($n,qt,e)=>{"use strict";e.d(qt,{$M:()=>zt,Eg:()=>Ft,Jh:()=>Ye,Yq:()=>se,jJ:()=>Ze,jQ:()=>ct,oy:()=>ze,qJ:()=>O,rw:()=>Tt,w1:()=>ot});var o=e(30705),m=e(57032),p=e(34520),z=e(78373),B=e(73495),i=e(79692),$=e(12420),Qe=e(95544),Ne=e(90436),a=e(60905),xe=e(82938),Te=e(38402),ie=e(86136),G=e(49378),Ge=e(85256),ge=e(61837),be=e(11776),re=e(80030),Oe=e(9520),I=e(76637),c=e(2784),R=e(64279),_=e(49558),b=e(73655),N=e(99688),_e=e(52866),fe=e(27604),ve=e(13384),Y=e(62367),v=e(52160),ee=e(61068),oe=e(75650),Rt=e(98685),T=e(19928),sn=e.n(T),me=e(14162),Zt=e.n(me),yt=e(19126),mt=e.n(yt),It=e(76635),We=e.n(It);const Pt=(0,o.x8)({id:"catalog-index"}),ot=(0,o.rx)({id:"org",externalRoutes:{catalogIndex:Pt}}),zt=ot.provide((0,o.CO)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(111).then(e.bind(e,50111)).then(pe=>pe.GroupProfileCard)}})),Tt=ot.provide((0,o.CO)({name:"EntityMembersListCard",component:{lazy:()=>e.e(111).then(e.bind(e,50111)).then(pe=>pe.MembersListCard)}})),Ft=ot.provide((0,o.CO)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(111).then(e.bind(e,50111)).then(pe=>pe.OwnershipCard)}})),ct=ot.provide((0,o.CO)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(111).then(e.bind(e,50111)).then(pe=>pe.UserProfileCard)}})),ht=async(pe,Me)=>(pe.length===0?{items:[]}:await Me.getEntities({filter:{kind:"User","relations.memberof":pe.map(pt=>(0,p.eE)({kind:"group",namespace:pt.namespace.toLocaleLowerCase("en-US"),name:pt.name.toLocaleLowerCase("en-US")}))}})).items,$t=async(pe,Me)=>{var nt;const pt=new Map,tn=[{kind:pe.kind,namespace:(nt=pe.metadata.namespace)!=null?nt:p.zG,name:pe.metadata.name}],Ce=[];for(;tn.length>0;){const Le=tn.shift(),P=await Me.getEntityByRef(Le);pt.set((0,p.eE)(Le),!0);const W=(0,z.g)(P,p._b,{kind:"Group"}).filter(J=>!pt.has((0,p.eE)(J)));W.forEach(J=>pt.set((0,p.eE)(J),!0)),tn.push(...W),Ce.push(...W)}return Ce},an=async(pe,Me)=>ht(await $t(pe,Me),Me),St=pe=>{const Me=new Map;return pe.filter(nt=>{const pt=(0,p.eE)(nt),Bt=Me.has(pt);return Me.set(pt,!0),!Bt})},Gt=(0,i.Z)(pe=>(0,$.Z)({card:{border:`1px solid ${pe.palette.divider}`,boxShadow:pe.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:pe.spacing(4,1,1),flex:"1",minWidth:"0px"}})),D=pe=>{var Me;const nt=Gt(),{metadata:{name:pt,description:Bt},spec:{profile:tn}}=pe.member,Ce=(Me=tn==null?void 0:tn.displayName)!=null?Me:pt;return c.createElement(Qe.Z,{className:nt.card},c.createElement(Qe.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},c.createElement(_.qE,{displayName:Ce,picture:tn==null?void 0:tn.picture,customStyles:{position:"absolute",top:"-2rem"}}),c.createElement(Qe.Z,{pt:2,sx:{width:"100%"},textAlign:"center"},c.createElement(Ne.Z,{variant:"h6"},c.createElement(B.dx,{"data-testid":"user-link",entityRef:pe.member,title:Ce})),(tn==null?void 0:tn.email)&&c.createElement(_.rU,{to:`mailto:${tn.email}`},c.createElement(_.Or,{text:tn.email})),Bt&&c.createElement(Ne.Z,{variant:"subtitle2"},Bt))))},U=(0,i.Z)(pe=>({root:{height:"100%"},cardContent:{overflow:"auto"},memberList:{display:"grid",gap:pe.spacing(1.5),gridTemplateColumns:`repeat(auto-fit, minmax(auto, ${pe.spacing(34)}px))`}})),O=pe=>{var Me;const{memberDisplayTitle:nt="Members",pageSize:pt=50,showAggregateMembersToggle:Bt}=pe,tn=U(),{entity:Ce}=(0,z.u)(),{metadata:{name:Le,namespace:P},spec:{profile:W}}=Ce,J=(0,m.u)(B.Ah),it=(Me=W==null?void 0:W.displayName)!=null?Me:Le,ut=P||p.zG,[Et,Jt]=c.useState(1),mn=(Ae,je)=>{Jt(je)},[An,vn]=(0,c.useState)(!1),{loading:Vn,value:Mn}=(0,R.default)(async()=>Bt?await an(Ce,J):[],[J,Ce,Bt]),{loading:Zn,error:A,value:F}=(0,R.default)(async()=>(await J.getEntities({filter:{kind:"User","relations.memberof":[(0,p.eE)({kind:"group",namespace:ut.toLocaleLowerCase("en-US"),name:Le.toLocaleLowerCase("en-US")})]}})).items,[J,Ce]),Pe=St([...F!=null?F:[],...Mn&&An?Mn:[]].sort((Ae,je)=>(0,p.eE)(Ae).localeCompare((0,p.eE)(je))));if(Zn)return c.createElement(_.Ex,null);if(A)return c.createElement(_.Gk,{error:A});const gt=Math.ceil(((Pe==null?void 0:Pe.length)||0)/pt),Ot=gt<2?"":`, page ${Et} of ${gt}`,Vt=c.createElement(I.Z,{count:gt,page:Et,onChange:mn,showFirstButton:!0,showLastButton:!0});let ae;return Pe&&Pe.length>0?ae=c.createElement(Qe.Z,{className:tn.memberList},Pe.slice(pt*(Et-1),pt*Et).map(Ae=>c.createElement(D,{member:Ae,key:Ae.metadata.uid}))):ae=c.createElement(Qe.Z,{p:2},c.createElement(Ne.Z,null,"This group has no ",nt.toLocaleLowerCase(),".")),c.createElement(a.Z,{item:!0,className:tn.root},c.createElement(_.rJ,{title:`${nt} (${(Pe==null?void 0:Pe.length)||0}${Ot})`,subheader:`of ${it}`,...gt<=1?{}:{actions:Vt},className:tn.root,cardClassName:tn.cardContent},Bt&&c.createElement(c.Fragment,null,"Direct Members",c.createElement(xe.Z,{color:"primary",checked:An,onChange:()=>{vn(!An)},inputProps:{"aria-label":"Users Type Switch"}}),"Aggregated Members"),An&&Vn?c.createElement(_.Ex,null):ae))},M=({href:pe,Icon:Me,text:nt})=>c.createElement(Te.Z,{key:pe},c.createElement(ie.Z,null,Me?c.createElement(Me,null):c.createElement(v.Z,null)),c.createElement(G.Z,null,c.createElement(_.rU,{to:pe},nt))),ne=({links:pe})=>{const Me=(0,o.qD)(),nt=pt=>{var Bt;return pt&&(Bt=Me.getSystemIcon(pt))!=null?Bt:v.Z};return pe===void 0?null:c.createElement(c.Fragment,null,c.createElement(Ge.Z,null),pe.map(pt=>c.createElement(M,{key:pt.url,href:pt.url,text:pt.title,Icon:nt(pt.icon)})))},he=pe=>c.createElement(Qe.Z,{display:"flex",alignItems:"center"},c.createElement(Y.Z,{fontSize:"inherit"}),c.createElement(Qe.Z,{ml:1},pe.title)),ze=pe=>{var Me,nt,pt;const Bt=(0,m.u)(B.Ah),tn=(0,m.u)(m.l),{entity:Ce}=(0,z.u)(),{allowed:Le}=(0,ee.N$)(oe.es),P=(0,c.useCallback)(async()=>{await Bt.refreshEntity((0,p.eE)(Ce)),tn.post({message:"Refresh scheduled",severity:"info",display:"transient"})},[Bt,tn,Ce]);if(!Ce)return c.createElement(N.Z,{severity:"error"},"Group not found");const{metadata:{name:W,description:J,title:it,annotations:ut,links:Et},spec:{profile:Jt}}=Ce,mn=(0,z.g)(Ce,p._b,{kind:"Group"}),An=(0,z.g)(Ce,p.wP,{kind:"group"}),vn=ut==null?void 0:ut[p.P1],Vn=(vn==null?void 0:vn.startsWith("url:"))||(vn==null?void 0:vn.startsWith("file:")),Mn=(Me=Ce.metadata.annotations)==null?void 0:Me[p.Tf],Zn=(pt=(nt=Jt==null?void 0:Jt.displayName)!=null?nt:it)!=null?pt:W,A=Jt!=null&&Jt.email?`mailto:${Jt.email}`:"#",F=Mn?c.createElement(ge.Z,{"aria-label":"Edit",title:"Edit Metadata",component:_.rU,to:Mn},c.createElement(fe.Z,null)):c.createElement(ge.Z,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},c.createElement(fe.Z,null));return c.createElement(_.rJ,{title:c.createElement(he,{title:Zn}),subheader:J,variant:pe.variant,action:c.createElement(c.Fragment,null,Vn&&Le&&c.createElement(ge.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:P},c.createElement(_e.Z,null)),F)},c.createElement(a.Z,{container:!0,spacing:3},c.createElement(a.Z,{item:!0,xs:12,sm:2,xl:1},c.createElement(_.qE,{displayName:Zn,picture:Jt==null?void 0:Jt.picture})),c.createElement(a.Z,{item:!0,md:10,xl:11},c.createElement(be.Z,null,(Jt==null?void 0:Jt.email)&&c.createElement(Te.Z,null,c.createElement(ie.Z,null,c.createElement(re.ZP,{title:"Email"},c.createElement(ve.Z,null))),c.createElement(G.Z,{primary:c.createElement(_.rU,{to:A},Jt.email),secondary:"Email"})),c.createElement(Te.Z,null,c.createElement(ie.Z,null,c.createElement(re.ZP,{title:"Parent Group"},c.createElement(b.Z,null))),c.createElement(G.Z,{primary:An.length?c.createElement(B.rI,{entityRefs:An,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),c.createElement(Te.Z,null,c.createElement(ie.Z,null,c.createElement(re.ZP,{title:"Child Groups"},c.createElement(Y.Z,null))),c.createElement(G.Z,{primary:mn.length?c.createElement(B.rI,{entityRefs:mn,defaultKind:"Group"}):"N/A",secondary:"Child Groups"})),(pe==null?void 0:pe.showLinks)&&c.createElement(ne,{links:Et})))))},Ct=pe=>pe.title?c.createElement(Qe.Z,{display:"flex",alignItems:"center"},c.createElement(Rt.Z,{fontSize:"inherit"}),c.createElement(Qe.Z,{ml:1},pe.title)):null,Ye=pe=>{var Me,nt;const{entity:pt}=(0,z.u)();if(!pt)return c.createElement(N.Z,{severity:"error"},"User not found");const Bt=(Me=pt.metadata.annotations)==null?void 0:Me[p.Tf],{metadata:{name:tn,description:Ce,links:Le},spec:{profile:P}}=pt,W=(nt=P==null?void 0:P.displayName)!=null?nt:tn,J=P!=null&&P.email?`mailto:${P.email}`:void 0,it=(0,z.g)(pt,p.hr,{kind:"Group"});return c.createElement(_.rJ,{title:c.createElement(Ct,{title:W}),subheader:Ce,variant:pe.variant,action:c.createElement(c.Fragment,null,Bt&&c.createElement(ge.Z,{"aria-label":"Edit",title:"Edit Metadata",component:_.rU,to:Bt},c.createElement(fe.Z,null)))},c.createElement(a.Z,{container:!0,spacing:3,alignItems:"flex-start"},c.createElement(a.Z,{item:!0,xs:12,sm:2,xl:1},c.createElement(_.qE,{displayName:W,picture:P==null?void 0:P.picture})),c.createElement(a.Z,{item:!0,md:10,xl:11},c.createElement(be.Z,null,(P==null?void 0:P.email)&&c.createElement(Te.Z,null,c.createElement(ie.Z,null,c.createElement(re.ZP,{title:"Email"},c.createElement(ve.Z,null))),c.createElement(G.Z,null,c.createElement(_.rU,{to:J!=null?J:""},P.email))),c.createElement(Te.Z,null,c.createElement(ie.Z,null,c.createElement(re.ZP,{title:"Member of"},c.createElement(Y.Z,null))),c.createElement(G.Z,null,c.createElement(B.rI,{entityRefs:it,defaultKind:"Group"}))),(pe==null?void 0:pe.showLinks)&&c.createElement(ne,{links:Le})))))},Mt=Zt()(10),rn=(pe,Me)=>{const{kind:nt,type:pt}=Me,Bt=pe.map(Ce=>(0,B.$3)((0,p.of)(Ce),{defaultKind:"group"})),tn={kind:nt.toLocaleLowerCase("en-US"),type:pt,owners:Bt,user:"all"};return mt().stringify({filters:tn},{arrayFormat:"repeat"})},Wt=pe=>[...(0,z.g)(pe,p.hr,{kind:"Group"}).map(({kind:pt,namespace:Bt,name:tn})=>(0,p.eE)({kind:pt,namespace:Bt,name:tn})),(0,p.eE)(pe)],ft=pe=>pe!==void 0,we=async(pe,Me,nt=[])=>{const pt=(0,z.g)(pe,p._b,{kind:"Group"}),Bt=pt.length>0,tn=(0,p.eE)(pe);if(Bt){const Ce=pt.map(it=>(0,p.eE)(it)),W=(await Me.getEntitiesByRefs({fields:["kind","metadata.namespace","metadata.name","relations"],entityRefs:Ce})).items.filter(ft).filter(it=>!nt.includes((0,p.eE)(it))),J=(await Promise.all(W.map(it=>Mt(()=>we(it,Me,[...nt,tn]))))).flatMap(it=>it);return(0,It.uniq)([...J,tn])}return[tn]},rt=async(pe,Me,nt)=>{const pt=pe.kind==="Group",Bt=Me==="aggregated",tn=pe.kind==="User";return Bt&&pt?we(pe,nt):Bt&&tn?Wt(pe):[(0,p.eE)(pe)]},xt=(pe,Me,nt)=>nt.getEntities({filter:[{kind:Me,"relations.ownedBy":pe}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]});function kt(pe,Me,nt,pt=6){const Bt=(0,m.u)(B.Ah),tn=nt!=null?nt:["Component","API","System"],{loading:Ce,error:Le,value:P}=(0,R.default)(async()=>{const W=await rt(pe,Me,Bt);return(await xt(W,tn,Bt)).items.reduce((Et,Jt)=>{var mn,An;const vn=Et.find(Vn=>{var Mn;return Vn.kind===Jt.kind&&Vn.type===((Mn=Jt.spec)==null?void 0:Mn.type)});return vn?vn.count+=1:Et.push({kind:Jt.kind,type:(An=(mn=Jt.spec)==null?void 0:mn.type)==null?void 0:An.toString(),count:1}),Et},[]).sort((Et,Jt)=>Jt.count-Et.count).slice(0,pt).map(Et=>({counter:Et.count,type:Et.type,kind:Et.kind,queryParams:rn(W,Et)}))},[Bt,pe,Me]);return{componentsWithCounters:P,loading:Ce,error:Le}}const le=(0,i.Z)(pe=>(0,$.Z)({card:{border:`1px solid ${pe.palette.divider}`,boxShadow:pe.shadows[2],borderRadius:"4px",padding:pe.spacing(2),transition:`${pe.transitions.duration.standard}ms`,"&:hover":{boxShadow:pe.shadows[4]},height:"100%"},bold:{fontWeight:pe.typography.fontWeightBold},smallFont:{fontSize:pe.typography.body2.fontSize},entityTypeBox:{background:Me=>pe.getPageTheme({themeId:Me.type}).backgroundImage,color:Me=>pe.getPageTheme({themeId:Me.type}).fontColor}})),Ue=({counter:pe,type:Me,kind:nt,url:pt})=>{const Bt=le({type:Me!=null?Me:nt}),tn=Me!=null?Me:nt,Ce=tn.length>10;return c.createElement(_.rU,{to:pt,variant:"body2"},c.createElement(Qe.Z,{className:`${Bt.card} ${Bt.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},c.createElement(Ne.Z,{className:Bt.bold,variant:"h6"},pe),c.createElement(Qe.Z,{sx:{width:"100%",textAlign:"center"}},c.createElement(Ne.Z,{className:`${Bt.bold} ${Ce&&Bt.smallFont}`,variant:"h6"},c.createElement(_.Or,{text:sn()(tn.toLocaleUpperCase("en-US"),pe)}))),Me&&c.createElement(Ne.Z,{variant:"subtitle1"},nt)))},Lt=({entity:pe,relationsType:Me,entityFilterKind:nt,entityLimit:pt=6})=>{const Bt=(0,o.tg)(Pt),{componentsWithCounters:tn,loading:Ce,error:Le}=kt(pe,Me,nt,pt);return Ce?c.createElement(_.Ex,null):Le?c.createElement(_.Gk,{error:Le}):c.createElement(a.Z,{container:!0},tn==null?void 0:tn.map(P=>{var W;return c.createElement(a.Z,{item:!0,xs:6,md:6,lg:4,key:(W=P.type)!=null?W:P.kind},c.createElement(Ue,{counter:P.counter,kind:P.kind,type:P.type,url:`${Bt()}/?${P.queryParams}`}))}))},Yt=(0,i.Z)(pe=>({list:{[pe.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[pe.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[pe.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}}})),se=pe=>{const{variant:Me,entityFilterKind:nt,hideRelationsToggle:pt,relationsType:Bt,entityLimit:tn=6}=pe,Ce=pt===void 0?!1:pt,Le=Yt(),{entity:P}=(0,z.u)(),W=P.kind==="User"?"aggregated":"direct",[J,it]=(0,c.useState)(Bt!=null?Bt:W);return(0,c.useEffect)(()=>{Bt||it(W)},[it,W,Bt]),c.createElement(_.rJ,{title:"Ownership",variant:Me},!Ce&&c.createElement(be.Z,{dense:!0},c.createElement(Te.Z,{className:Le.list},c.createElement(G.Z,{className:Le.listItemText}),c.createElement(Oe.Z,{className:Le.listItemSecondaryAction},"Direct Relations",c.createElement(re.ZP,{placement:"top",arrow:!0,title:`${J==="direct"?"Direct":"Aggregated"} Relations`},c.createElement(xe.Z,{color:"primary",checked:J!=="direct",onChange:()=>{it(J==="direct"?"aggregated":"direct")},name:"pin",inputProps:{"aria-label":"Ownership Type Switch"}})),"Aggregated Relations"))),c.createElement(Lt,{entity:P,entityLimit:tn,relationsType:J,entityFilterKind:nt}))},Ze=pe=>{const{singularTitle:Me,pluralTitle:nt,icon:pt,filter:Bt}=pe,tn=(0,m.u)(m.t),Ce=(0,m.u)(B.Ah),Le=(0,o.tg)(B.wi),{value:P}=(0,R.default)(async()=>{const W=await tn.getBackstageIdentity();return(await Ce.getEntities({filter:[{kind:"group","relations.hasMember":W.userEntityRef,...Bt!=null?Bt:{}}],fields:["metadata","kind"]})).items},[]);if(!(P!=null&&P.length))return null;if(P.length===1){const W=P[0];return c.createElement(_.R6,{text:Me,to:Le((0,p.iB)(W)),icon:pt})}return c.createElement(_.R6,{icon:pt,text:nt},c.createElement(_.k2,{title:nt},P==null?void 0:P.map(function(J){return c.createElement(_.BT,{title:J.metadata.title||J.metadata.name,subtitle:J.metadata.namespace!==p.zG?J.metadata.namespace:void 0,to:Le((0,p.iB)(J)),icon:pt,key:(0,p.eE)(J)})})))}},5083:($n,qt,e)=>{"use strict";e.d(qt,{J$:()=>G,Y2:()=>R,g2:()=>Qe,rG:()=>i});var o=e(32272),m=e(96279),p=e.n(m),z=e(9571),B=e(30195),i=(_=>(_.DENY="DENY",_.ALLOW="ALLOW",_.CONDITIONAL="CONDITIONAL",_))(i||{});function $(_,b){return _.name===b.name}function Qe(_,b){return"resourceType"in _?!b||_.resourceType===b:!1}function Ne(_){return _.attributes.action==="create"}function a(_){return _.attributes.action==="read"}function xe(_){return _.attributes.action==="update"}function Te(_){return _.attributes.action==="delete"}function ie(_){return{authorize:async(b,N)=>await _.authorize(b,N),authorizeConditional(b,N){const _e=b;return _.authorize(_e,N)}}}function G({name:_,attributes:b,resourceType:N}){return N?{type:"resource",name:_,attributes:b,resourceType:N}:{type:"basic",name:_,attributes:b}}var Ge=Object.defineProperty,ge=(_,b,N)=>b in _?Ge(_,b,{enumerable:!0,configurable:!0,writable:!0,value:N}):_[b]=N,be=(_,b,N)=>(ge(_,typeof b!="symbol"?b+"":b,N),N);const re=B.z.lazy(()=>B.z.object({rule:B.z.string(),resourceType:B.z.string(),params:B.z.record(B.z.any()).optional()}).or(B.z.object({anyOf:B.z.array(re).nonempty()})).or(B.z.object({allOf:B.z.array(re).nonempty()})).or(B.z.object({not:re}))),Oe=B.z.object({result:B.z.literal(i.ALLOW).or(B.z.literal(i.DENY))}),I=B.z.union([B.z.object({result:B.z.literal(i.ALLOW).or(B.z.literal(i.DENY))}),B.z.object({result:B.z.literal(i.CONDITIONAL),pluginId:B.z.string(),resourceType:B.z.string(),conditions:re})]),c=(_,b)=>B.z.object({items:B.z.array(B.z.intersection(B.z.object({id:B.z.string()}),_)).refine(N=>N.length===b.size&&N.every(({id:_e})=>b.has(_e)),{message:"Items in response do not match request"})});class R{constructor(b){be(this,"enabled"),be(this,"discovery");var N;this.discovery=b.discovery,this.enabled=(N=b.config.getOptionalBoolean("permission.enabled"))!=null?N:!1}async authorize(b,N){return this.makeRequest(b,Oe,N)}async authorizeConditional(b,N){return this.makeRequest(b,I,N)}async makeRequest(b,N,_e){if(!this.enabled)return b.map(Rt=>({result:i.ALLOW}));const fe={items:b.map(Rt=>({id:z.Z(),...Rt}))},ve=await this.discovery.getBaseUrl("permission"),Y=await p()(`${ve}/authorize`,{method:"POST",body:JSON.stringify(fe),headers:{...this.getAuthorizationHeader(_e==null?void 0:_e.token),"content-type":"application/json"}});if(!Y.ok)throw await o.VL.fromResponse(Y);const v=await Y.json(),oe=c(N,new Set(fe.items.map(({id:Rt})=>Rt))).parse(v).items.reduce((Rt,T)=>(Rt[T.id]=T,Rt),{});return fe.items.map(Rt=>oe[Rt.id])}getAuthorizationHeader(b){return b?{Authorization:`Bearer ${b}`}:{}}}},56563:($n,qt,e)=>{"use strict";e.d(qt,{RV:()=>i,gI:()=>Qe,iM:()=>$,un:()=>a});var o=e(2784),m=e(57032),p=e(30705),z=e(5083),B=e(69984);const i=(0,m.c)({id:"plugin.permission.api"});class ${constructor(Te,ie){this.permissionClient=Te,this.identityApi=ie}static create(Te){const{config:ie,discovery:G,identity:Ge}=Te,ge=new z.Y2({discovery:G,config:ie});return new $(ge,Ge)}async authorize(Te){return(await this.permissionClient.authorize([Te],await this.identityApi.getCredentials()))[0]}}function Qe(xe){const Te=(0,m.u)(i),{data:ie,error:G}=(0,B.ZP)(xe,async Ge=>{if((0,z.g2)(Ge.permission)&&!Ge.resourceRef)return z.rG.DENY;const{result:ge}=await Te.authorize(Ge);return ge});return G?{error:G,loading:!1,allowed:!1}:ie===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:ie===z.rG.ALLOW}}const Ne=xe=>{const{permission:Te,resourceRef:ie,errorComponent:G,...Ge}=xe,ge=Qe(isResourcePermission(Te)?{permission:Te,resourceRef:ie}:{permission:Te}),be=useApp(),{NotFoundErrorPage:re}=be.getComponents();let Oe=G===void 0?React.createElement(re,null):G;return ge.loading?Oe=null:ge.allowed&&(Oe=xe.element),React.createElement(Route,{...Ge,element:Oe})};function a(xe){const{permission:Te,resourceRef:ie}=xe,G=Qe((0,z.g2)(Te)?{permission:Te,resourceRef:ie}:{permission:Te}),Ge=(0,p.qD)();if(G.loading)return null;if(G.allowed)return o.createElement(o.Fragment,null,xe.children);if(xe.errorPage)return o.createElement(o.Fragment,null,xe.errorPage);const{NotFoundErrorPage:ge}=Ge.getComponents();return o.createElement(ge,null)}},67898:($n,qt,e)=>{"use strict";e.d(qt,{t:()=>a});var o=e(34520),m="http://json-schema.org/draft-07/schema",p="TemplateV1beta3",z="A Template describes a scaffolding task for use with the Scaffolder. It describes the required parameters as well as a series of steps that will be taken to execute the scaffolding task.",B=[{apiVersion:"scaffolder.backstage.io/v1beta3",kind:"Template",metadata:{name:"react-ssr-template",title:"React SSR Template",description:"Next.js application skeleton for creating isomorphic web applications.",tags:["recommended","react"]},spec:{owner:"artist-relations-team",type:"website",parameters:{required:["name","description","repoUrl"],"backstage:permissions":{tags:["one","two"]},properties:{name:{title:"Name",type:"string",description:"Unique name of the component"},description:{title:"Description",type:"string",description:"Description of the component"},repoUrl:{title:"Pick a repository",type:"string","ui:field":"RepoUrlPicker"}}},steps:[{id:"fetch",name:"Fetch",action:"fetch:plain",parameters:{url:"./template"},"backstage:permissions":{tags:["one","two"]}},{id:"publish",name:"Publish to GitHub",action:"publish:github",parameters:{repoUrl:"${{ parameters.repoUrl }}"},if:"${{ parameters.repoUrl }}"}],output:{catalogInfoUrl:"${{ steps.publish.output.catalogInfoUrl }}"}}}],i=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["scaffolder.backstage.io/v1beta3"]},kind:{enum:["Template"]},spec:{type:"object",required:["type","steps"],properties:{type:{type:"string",description:"The type of component created by the template. The software catalog accepts any type value, but an organization should take great care to establish a proper taxonomy for these. Tools including Backstage itself may read this field and behave differently depending on its value. For example, a website type component may present tooling in the Backstage interface that is specific to just websites.",examples:["service","website","library"],minLength:1},owner:{type:"string",description:"The user (or group) owner of the template",minLength:1},parameters:{oneOf:[{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}},{type:"array",description:"A list of separate forms to collect parameters.",items:{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}}}]},presentation:{type:"object",description:"A way to redefine the labels for actionable buttons.",properties:{backButtonText:{type:"string",description:"A button which return the user to one step back."},createButtonText:{type:"string",description:"A button which start the execution of the template."},reviewButtonText:{type:"string",description:"A button which open the review step to verify the input prior to start the execution."}}},steps:{type:"array",description:"A list of steps to execute.",items:{type:"object",description:"A description of the step to execute.",required:["action"],properties:{id:{type:"string",description:"The ID of the step, which can be used to refer to its outputs."},name:{type:"string",description:"The name of the step, which will be displayed in the UI during the scaffolding process."},action:{type:"string",description:"The name of the action to execute."},input:{type:"object",description:"A templated object describing the inputs to the action."},if:{type:["string","boolean"],description:'A templated condition that skips the step when evaluated to false. If the condition is true or not defined, the step is executed. The condition is true, if the input is not `false`, `undefined`, `null`, `""`, `0`, or `[]`.'},"backstage:permissions":{type:"object",description:"Object used for authorizing the step",properties:{tags:{type:"array",items:{type:"string"}}}}}}},output:{type:"object",description:"A templated object describing the outputs of the scaffolding task.",properties:{links:{type:"array",description:"A list of external hyperlinks, typically pointing to resources created or updated by the template",items:{type:"object",required:[],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://github.com/my-org/my-new-repo"],minLength:1},entityRef:{type:"string",description:"An entity reference to an entity in the catalog.",examples:["Component:default/my-app"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["View new repo"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1}}}},text:{type:"array",description:"A list of Markdown text blobs, like output data from the template.",items:{type:"object",required:[],properties:{title:{type:"string",description:"A user friendly display name for the text.",examples:["Output Content"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},content:{type:"string",description:"The text blob to display in the UI, rendered as Markdown.",examples:["**hey** _I'm_ Markdown"]}}}}},additionalProperties:{type:"string"}}}}}}],$={$schema:m,$id:p,description:z,examples:B,allOf:i};const Qe=(0,o.wI)($),Ne={async check(xe){return Qe(xe)===xe}},a=xe=>xe.apiVersion==="scaffolder.backstage.io/v1beta3"&&xe.kind==="Template"},31011:($n,qt,e)=>{"use strict";e.d(qt,{Iy:()=>ia,Lp:()=>X,Q0:()=>An,_G:()=>H,br:()=>Ce,h4:()=>Bn,l0:()=>A,mg:()=>Me,ow:()=>on,v9:()=>et,vF:()=>Ot,zP:()=>de});var o=e(57032),m=e(30705),p=e(79692),z=e(42494),B=e(90436),i=e(12420),$=e(27556),Qe=e(11776),Ne=e(38402),a=e(86136),xe=e(49378),Te=e(67358),ie=e(31625),G=e(31377),Ge=e(34546),ge=e(77277),be=e(60364),re=e(94339),Oe=e(24579),I=e(60905),c=e(95544),R=e(85256),_=e(7089),b=e(14503),N=e(4614),_e=e(97136),fe=e(5806),ve=e(21324),Y=e(86619),v=e(2784),ee=e(51251),oe=e(49558),Rt=e(11280),T=e(19126),sn=e.n(T),me=e(64279),Zt=e(60885),yt=e(9850),mt=e.n(yt),It=e(95303),We=e(93804),Pt=e(90137),ot=e(16715),zt=e(34520),Tt=e(73495),Ft=e(78373),ct=e(52160),ht=e(67898),$t=e(27057),an=e(71140),St=e(34063),Gt=e(12524),D=e.n(Gt),U=e(34812),O=e(91750),M=e(70218),ne=e(26228),he=e(75951),ze=e.n(he),Ct=e(89586),Ye=e(82108),Mt=e.n(Ye),rn=e(19996),Wt=e(25505),ft=e(38016),we=e(88013),rt=e(61837),xt=e(12231),kt=e(50758),le=e(79784),Ue=e(30254),Lt=e(27604),Yt=e(33882),se=e(43054);function Ze(k){return typeof k=="object"&&k!==null&&!Array.isArray(k)}function pe(k,j){if(!Ze(k))return;const{properties:Q,items:te,anyOf:ke,oneOf:Je,allOf:He,dependencies:qe,then:At,else:dn}=k;for(const wt in k)k.hasOwnProperty(wt)&&wt.startsWith("ui:")&&(j[wt]=k[wt],delete k[wt]);if(Ze(Q))for(const wt in Q){if(!Q.hasOwnProperty(wt))continue;const un=Q[wt];if(!Ze(un))continue;const hn={};j[wt]=hn,pe(un,hn)}if(Ze(te)){const wt={};j.items=wt,pe(te,wt)}if(Array.isArray(ke))for(const wt of ke)Ze(wt)&&pe(wt,j);if(Array.isArray(Je))for(const wt of Je)Ze(wt)&&pe(wt,j);if(Array.isArray(He))for(const wt of He)Ze(wt)&&pe(wt,j);if(Ze(qe))for(const wt of Object.keys(qe)){const un=qe[wt];Ze(un)&&pe(un,j)}Ze(At)&&pe(At,j),Ze(dn)&&pe(dn,j)}const Me=k=>{const j={},Q=JSON.parse(JSON.stringify(k));return pe(Q,j),{uiSchema:j,schema:Q}},nt=()=>{const k={__errors:[],addError:j=>{var Q;(Q=k.__errors)==null||Q.push(j)}};return k};function pt(k){return!!k&&"__errors"in k}function Bt(k){var j;if(!k)return!1;for(const Q of Object.values(k)){if(pt(Q)){if(((j=Q.__errors)!=null?j:[]).length>0)return!0;continue}if(Bt(Q))return!0}return!1}function tn(k){return typeof k=="object"&&k!==null&&!Array.isArray(k)}const Ce=(k,j,Q)=>{async function te(ke,Je="#",He=ke){var qe,At;const dn=new ee.NL(k),wt={},un=async(hn,En,kn,wn,xn)=>{const Rn=j[hn];if(Rn){const On=nt();try{await Rn(kn,On,{...Q,formData:ke,schema:wn,uiSchema:xn})}catch(pn){On.addError(pn.message)}wt[En]=On}};for(const[hn,En]of Object.entries(He)){const kn=`${Je}/${hn}`,wn=dn.getSchema(kn,ke),{schema:xn,uiSchema:Rn}=Me(wn),On=wn&&wn.items,pn=async(aa,sa,Aa)=>{await un(aa["ui:field"],hn,En,sa,Aa)},_n=async aa=>{if("ui:field"in aa){const{schema:sa,uiSchema:Aa}=Me(wn.items);await pn(aa,sa,Aa)}};if(wn&&"ui:field"in wn)await pn(wn,xn,Rn);else if(On&&"ui:field"in wn.items)await _n(wn.items);else if(On&&wn.items.type==="object"){const aa=(At=(qe=wn.items)==null?void 0:qe.properties)!=null?At:[];for(const[,sa]of Object.entries(aa))await _n(sa)}else tn(En)&&(wt[hn]=await te(ke,kn,En))}return wt}return async ke=>await te(ke)},Le=k=>{const j=Object.fromEntries(Object.entries(k.formState).map(([Q,te])=>{var ke;for(const Je of k.schemas){const qe=new ee.NL(Je.mergedSchema).getSchema(`#/${Q}`,k.formState);if(qe){const At=(ke=qe["ui:backstage"])==null?void 0:ke.review;if(At){if(At.mask)return[Q,At.mask];if(At.show===!1)return[]}if(qe["ui:widget"]==="password")return[Q,"******"];if(qe.enum&&qe.enumNames)return[Q,qe.enumNames[qe.enum.indexOf(te)]||te]}}return[Q,te]}).filter(Q=>Q.length>0));return v.createElement(oe.xT,{metadata:j})},P=k=>{const j=(0,o.u)(o.f),te=k.steps.map(({title:ke,description:Je,schema:He})=>({title:ke,description:Je,mergedSchema:He,...Me(He)})).filter(ke=>{var Je;const He=(Je=ke.uiSchema["ui:backstage"])==null?void 0:Je.featureFlag;return He?j.isActive(He):!0}).map(ke=>{var Je,He,qe,At;const dn={...ke,schema:{...ke.schema,title:void 0}};return((Je=ke.schema)!=null&&Je.properties||!((He=ke.schema)!=null&&He.dependencies))&&(dn.schema.properties=Object.fromEntries(Object.entries((At=(qe=ke.schema)==null?void 0:qe.properties)!=null?At:{}).filter(([wt])=>{var un,hn;const En=(hn=(un=ke.uiSchema[wt])==null?void 0:un["ui:backstage"])==null?void 0:hn.featureFlag;return En?j.isActive(En):!0}))),dn});return{presentation:k.presentation,steps:te}},W=k=>(0,v.useState)(()=>{if(k)return k;const j=sn().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse(j.formData)}catch{return{}}}),J=k=>{const j=(0,o.u)(Zt.s),{value:Q,loading:te,error:ke}=(0,me.default)(()=>j.getTemplateParameterSchema(k),[j,k]);return{manifest:Q,loading:te,error:ke}},it=k=>{const j="backstage:featureFlag",Q=(0,o.u)(o.f);if(!k)return;const te=k==null?void 0:k.steps.filter(ke=>{const Je=ke.schema[j];return typeof Je!="string"||Q.isActive(Je)}).map(ke=>{var Je;const He=mt()(ke),qe=[];return He.schema.properties&&(He.schema.properties=Object.fromEntries(Object.entries(He.schema.properties).filter(([At,dn])=>dn[j]?Q.isActive(dn[j])?!0:(qe.push(At),!1):!0)),He.schema.required=Array.isArray(He.schema.required)?(Je=He.schema.required)==null?void 0:Je.filter(At=>!qe.includes(At)):He.schema.required),He});return{...k,steps:te}},ut=(k,j={})=>{var Q;const{layouts:te=[]}=j,ke=k==null?void 0:k.uiSchema["ui:ObjectFieldTemplate"];if(typeof ke!="string")return k;const Je=(Q=te.find(He=>He.name===ke))==null?void 0:Q.component;return Je?{...k,uiSchema:{...k.uiSchema,["ui:ObjectFieldTemplate"]:Je}}:k};var Jt=Object.freeze({__proto__:null,DescriptionField:({description:k})=>k&&v.createElement(oe.SA,{content:k,linkTarget:"_blank"})});const mn=(0,p.Z)(k=>({markdownDescription:{fontSize:k.typography.caption.fontSize,margin:0,color:k.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),An=k=>{const{children:j,displayLabel:Q=!0,rawErrors:te=[],errors:ke,help:Je,rawDescription:He,required:qe,disabled:At}=k,dn=mn();return v.createElement(z.Z,{fullWidth:!0,error:!!te.length,required:qe,disabled:At},j,Q&&He?v.createElement(oe.SA,{content:He,className:dn.markdownDescription}):null,ke,Je)},vn=k=>{const{id:j,children:Q,classNames:te,style:ke,disabled:Je,displayLabel:He,hidden:qe,label:At,onDropPropertyClick:dn,onKeyChange:wt,readonly:un,required:hn,rawErrors:En=[],errors:kn,help:wn,rawDescription:xn,schema:Rn,uiSchema:On,registry:pn}=k,_n=(0,We.LI)(On),aa=(0,We.t4)("WrapIfAdditionalTemplate",pn,_n);return qe?v.createElement("div",{style:{display:"none"}},Q):v.createElement(aa,{classNames:te,style:ke,disabled:Je,id:j,label:At,onDropPropertyClick:dn,onKeyChange:wt,readonly:un,required:hn,schema:Rn,uiSchema:On,registry:pn},v.createElement(An,{displayLabel:He,rawErrors:En,help:wn,disabled:Je,rawDescription:xn,errors:kn,required:hn},Q))},Vn=(0,p.Z)(k=>({markdownDescription:{fontSize:k.typography.caption.fontSize,margin:0,color:k.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),Mn=k=>{const{id:j,description:Q}=k,te=Vn();return Q?typeof Q=="string"?v.createElement(oe.SA,{content:Q,className:te.markdownDescription}):v.createElement(B.Z,{id:j,variant:"subtitle2",style:{marginTop:"5px"}},Q):null},Zn=(0,It.Zz)(Pt.Q2),A=k=>{const j=v.useMemo(()=>{var te;return Object.fromEntries(Object.entries((te=k.fields)!=null?te:{}).map(([ke,Je])=>[ke,He=>{var qe,At;return v.createElement(Je,{...He,uiSchema:(qe=He.uiSchema)!=null?qe:{},formData:He.formData,rawErrors:(At=He.rawErrors)!=null?At:[]})}]))},[k.fields]),Q=v.useMemo(()=>({FieldTemplate:vn,DescriptionFieldTemplate:Mn,...k.templates}),[k.templates]);return v.createElement(Zn,{...k,templates:Q,fields:j})},F=(0,p.Z)(k=>(0,i.Z)({list:{width:"100%"},text:{textWrap:"wrap"}})),Pe=({errors:k})=>{const j=F();return v.createElement($.Z,null,v.createElement(Qe.Z,{dense:!0,className:j.list},k.map((Q,te)=>v.createElement(Ne.Z,{key:te},v.createElement(a.Z,null,v.createElement(ot.Z,{color:"error"})),v.createElement(xe.Z,{classes:{primary:j.text},primary:Q.stack})))))},gt=(0,p.Z)(k=>({backButton:{marginRight:k.spacing(1)},footer:{display:"flex",flexDirection:"row",justifyContent:"right",marginTop:k.spacing(2)},formWrapper:{padding:k.spacing(2)}})),Ot=k=>{var j,Q,te,ke,Je,He,qe;const{layouts:At=[],components:dn={},...wt}=k,{ReviewStateComponent:un=Le,ReviewStepComponent:hn,backButtonText:En="Back",createButtonText:kn="Create",reviewButtonText:wn="Review"}=dn,xn=(0,m.z$)(),{presentation:Rn,steps:On}=P(wt.manifest),pn=(0,o.b)(),[_n,aa]=(0,v.useState)(0),[sa,Aa]=(0,v.useState)(!1),[Sa,ka]=W(wt.initialState),[Wa,Ba]=(0,v.useState)(),Ra=gt(),ja=(0,v.useMemo)(()=>Object.fromEntries(wt.extensions.map(({name:q,component:at})=>[q,at])),[wt.extensions]),Na=(0,v.useMemo)(()=>({...Jt,...ja}),[ja]),Va=(0,v.useMemo)(()=>Object.fromEntries(wt.extensions.map(({name:q,validation:at})=>[q,at])),[wt.extensions]),ur=(0,v.useMemo)(()=>{var q;return Ce((q=On[_n])==null?void 0:q.mergedSchema,Va,{apiHolder:pn})},[On,_n,Va,pn]),qa=()=>{aa(q=>q-1)},er=(0,v.useCallback)(q=>ka(at=>({...at,...q.formData})),[ka]),da=(0,v.useCallback)(()=>{var q;wt.onCreate(Sa);const at=typeof Sa.name=="string"?Sa.name:void 0;xn.captureEvent("create",(q=at!=null?at:wt.templateName)!=null?q:"unknown")},[wt,Sa,xn]),tr=ut(On[_n],{layouts:At}),nr=async({formData:q={}})=>{Ba(void 0),Aa(!0);const at=await ur(q);Aa(!1),Bt(at)?Ba(at):(Ba(void 0),aa(bn=>{const Ln=bn+1;return xn.captureEvent("click",`Next Step (${Ln})`),Ln})),ka(bn=>({...bn,...q}))},or=(Q=(j=Rn==null?void 0:Rn.buttonLabels)==null?void 0:j.backButtonText)!=null?Q:En,Fa=(ke=(te=Rn==null?void 0:Rn.buttonLabels)==null?void 0:te.createButtonText)!=null?ke:kn,Fe=(He=(Je=Rn==null?void 0:Rn.buttonLabels)==null?void 0:Je.reviewButtonText)!=null?He:wn;return v.createElement(v.Fragment,null,sa&&v.createElement(Te.Z,{variant:"indeterminate"}),v.createElement(ie.Z,{activeStep:_n,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},On.map((q,at)=>{const bn=_n>at;return v.createElement(G.Z,{key:at},v.createElement(Ge.Z,{"aria-label":`Step ${at+1}`,style:{cursor:bn?"pointer":"default"},onClick:()=>{bn&&aa(at)}},q.title))}),v.createElement(G.Z,null,v.createElement(Ge.Z,null,"Review"))),v.createElement("div",{className:Ra.formWrapper},_n<On.length?v.createElement(A,{validator:Rt.ZP,extraErrors:Wa,formData:Sa,formContext:{formData:Sa},schema:tr.schema,uiSchema:tr.uiSchema,onSubmit:nr,fields:Na,showErrorList:"top",templates:{ErrorListTemplate:Pe},onChange:er,experimental_defaultFormStateBehavior:{allOf:"populateDefaults"},...(qe=wt.formProps)!=null?qe:{}},v.createElement("div",{className:Ra.footer},v.createElement(ge.Z,{onClick:qa,className:Ra.backButton,disabled:_n<1||sa},or),v.createElement(ge.Z,{variant:"contained",color:"primary",type:"submit",disabled:sa},_n===On.length-1?Fe:"Next"))):hn?v.createElement(hn,{disableButtons:sa,formData:Sa,handleBack:qa,handleReset:()=>{},steps:On,handleCreate:da}):v.createElement(v.Fragment,null,v.createElement(un,{formState:Sa,schemas:On}),v.createElement("div",{className:Ra.footer},v.createElement(ge.Z,{onClick:qa,className:Ra.backButton,disabled:_n<1},"Back"),v.createElement(ge.Z,{variant:"contained",color:"primary",onClick:da},Fa)))))},Vt=(0,p.Z)(()=>({header:{backgroundImage:({cardBackgroundImage:k})=>k,color:({cardFontColor:k})=>k},subtitleWrapper:{display:"flex",justifyContent:"space-between"}})),ae=k=>{const{template:{metadata:{title:j,name:Q},spec:{type:te}}}=k,{getPageTheme:ke}=(0,be.Z)(),Je=ke({themeId:te}),He=Vt({cardFontColor:Je.fontColor,cardBackgroundImage:Je.backgroundImage}),qe=v.createElement("div",{className:He.subtitleWrapper},v.createElement("div",null,te),v.createElement("div",null,v.createElement(Tt.LH,{entity:k.template,style:{padding:0}})));return v.createElement(oe.hu,{title:j!=null?j:Q,subtitle:qe,classes:{root:He.header}})},Ae=(0,p.Z)(()=>({linkText:{display:"inline-flex",alignItems:"center"}})),je=({icon:k,text:j,url:Q})=>{const te=Ae();return v.createElement("div",{className:te.linkText},v.createElement(k,{fontSize:"small"}),v.createElement(oe.rU,{style:{marginLeft:"8px"},to:Q},j||Q))},Ht=(0,p.Z)(k=>({box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},markdown:{"& :first-child":{margin:0}},label:{color:k.palette.text.secondary,textTransform:"uppercase",fontWeight:"bold",letterSpacing:.5,lineHeight:1,fontSize:"0.75rem"},footer:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"center"},ownedBy:{display:"flex",alignItems:"center",flex:1,color:k.palette.link}})),nn=k=>{var j,Q,te,ke,Je,He,qe;const{template:At}=k,dn=Ht(),wt=(0,Ft.g)(At,zt.S4),un=(0,m.qD)(),hn=En=>{var kn;return En&&(kn=un.getSystemIcon(En))!=null?kn:ct.Z};return v.createElement(re.Z,null,v.createElement(ae,{template:At}),v.createElement(Oe.Z,null,v.createElement(I.Z,{container:!0,spacing:2},v.createElement(I.Z,{item:!0,xs:12},v.createElement(c.Z,{className:dn.box},v.createElement(oe.SA,{className:dn.markdown,content:(j=At.metadata.description)!=null?j:"No description"}))),((te=(Q=At.metadata.tags)==null?void 0:Q.length)!=null?te:0)>0&&v.createElement(v.Fragment,null,v.createElement(I.Z,{item:!0,xs:12},v.createElement(R.Z,null)),v.createElement(I.Z,{item:!0,xs:12},v.createElement(I.Z,{container:!0,spacing:2},(ke=At.metadata.tags)==null?void 0:ke.map(En=>v.createElement(I.Z,{item:!0},v.createElement(_.Z,{style:{margin:0},size:"small",label:En,key:En})))))),(k.additionalLinks||((Je=At.metadata.links)==null?void 0:Je.length))&&v.createElement(v.Fragment,null,v.createElement(I.Z,{item:!0,xs:12},v.createElement(R.Z,null)),v.createElement(I.Z,{item:!0,xs:12},v.createElement(I.Z,{container:!0,spacing:2},(He=k.additionalLinks)==null?void 0:He.map(({icon:En,text:kn,url:wn},xn)=>v.createElement(I.Z,{className:dn.linkText,item:!0,xs:6,key:xn},v.createElement(je,{icon:En,text:kn,url:wn}))),(qe=At.metadata.links)==null?void 0:qe.map(({url:En,icon:kn,title:wn},xn)=>v.createElement(I.Z,{className:dn.linkText,item:!0,xs:6,key:xn},v.createElement(je,{icon:hn(kn),text:wn||En,url:En})))))))),v.createElement(b.Z,{style:{padding:"16px",flex:1,alignItems:"flex-end"}},v.createElement("div",{className:dn.footer},v.createElement("div",{className:dn.ownedBy},wt.length>0&&v.createElement(v.Fragment,null,v.createElement(oe.tB,{fontSize:"small"}),v.createElement(Tt.rI,{style:{marginLeft:"8px"},entityRefs:wt,defaultKind:"Group",hideIcons:!0}))),v.createElement(ge.Z,{size:"small",variant:"outlined",color:"primary",onClick:()=>{var En;return(En=k.onSelected)==null?void 0:En.call(k,At)}},"Choose"))))},ln=k=>{const{templates:j,title:Q,components:{CardComponent:te}={},onSelected:ke}=k,Je=typeof Q=="string"?v.createElement(oe.yW,{title:Q}):Q;if(j.length===0)return null;const He=te||nn;return v.createElement(oe.VY,null,Je,v.createElement(oe.Oh,null,j.map(({template:qe,additionalLinks:At})=>v.createElement(He,{key:(0,zt.eE)(qe),additionalLinks:At,template:qe,onSelected:ke}))))},on=k=>{const{loading:j,error:Q,entities:te}=(0,Tt.wp)(),{groups:ke,templateFilter:Je,TemplateCardComponent:He,onTemplateSelected:qe}=k,At=(0,o.u)(o.r),dn=(0,v.useCallback)(wt=>{qe==null||qe(wt)},[qe]);return j?v.createElement(oe.Ex,null):Q?(At.post(Q),null):!te||!te.length?v.createElement(B.Z,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",v.createElement(oe.rU,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."):v.createElement(v.Fragment,null,ke.map(({title:wt,filter:un},hn)=>{const En=te.filter(ht.t).filter(kn=>Je?Je(kn):!0).filter(un).map(kn=>{var wn,xn;const Rn=(xn=(wn=k.additionalLinksForEntity)==null?void 0:wn.call(k,kn))!=null?xn:[];return{template:kn,additionalLinks:Rn}});return v.createElement(ln,{key:hn,templates:En,title:wt,components:{CardComponent:He},onSelected:dn})}))},In=(0,p.Z)({markdown:{"& :first-child":{marginTop:0},"& :last-child":{marginBottom:0}}}),Bn=k=>{var j;const{title:Q,description:te,namespace:ke,templateName:Je,...He}=k,qe=In(),At=(0,zt.eE)({kind:"Template",namespace:ke,name:Je}),dn=(0,o.u)(o.r),{loading:wt,manifest:un,error:hn}=J(At),En=it(un);return(0,v.useEffect)(()=>{hn&&dn.post(new Error(`Failed to load template, ${hn}`))},[hn,dn]),hn?He.onError(hn):v.createElement(oe.VY,null,wt&&v.createElement(oe.Ex,null),En&&v.createElement(oe.rJ,{title:Q!=null?Q:En.title,subheader:v.createElement(oe.SA,{className:qe.markdown,content:(j=te!=null?te:En.description)!=null?j:"No description"}),noPadding:!0,titleTypographyProps:{component:"h2"}},v.createElement(Ot,{manifest:En,templateName:Je,...He})))},Hn=k=>React.createElement(SecretsContextProvider,null,React.createElement(Bn,{...k})),ra=(0,p.Z)({root:{"&:hover":{textDecoration:"none"}}}),yn=k=>{const{links:j=[]}=k.output,Q=ra(),te=(0,m.qD)(),ke=(0,m.tg)(Tt.wi),Je=He=>{var qe;return(qe=te.getSystemIcon(He))!=null?qe:$t.Z};return v.createElement(v.Fragment,null,j.filter(({url:He,entityRef:qe})=>He||qe).map(({url:He,entityRef:qe,title:At,icon:dn})=>{if(qe){const wt=(0,zt.of)(qe),un=ke(wt);return{title:At,icon:dn,url:un}}return{title:At,icon:dn,url:He}}).map(({url:He,title:qe,icon:At},dn)=>{const wt=Je(At);return v.createElement(oe.rU,{to:He,key:dn,classes:{root:Q.root}},v.createElement(ge.Z,{startIcon:v.createElement(wt,null),component:"div",color:"primary"},qe))}))},na=k=>{const{output:{text:j=[]},index:Q,setIndex:te}=k,ke=(0,m.qD)(),Je=He=>{var qe;return(qe=ke.getSystemIcon(He))!=null?qe:$t.Z};return v.createElement(v.Fragment,null,j.filter(({content:He})=>He!==void 0).map(({title:He,icon:qe},At)=>{const dn=Je(qe);return v.createElement(ge.Z,{key:At,startIcon:v.createElement(dn,null),component:"div",color:"primary",onClick:()=>{Q!==At&&(te==null||te(At))},variant:Q===At?"outlined":void 0},He)}))},ia=k=>{var j,Q,te;const{output:ke}=k,[Je,He]=(0,v.useState)((j=ke==null?void 0:ke.text)!=null&&j.length?0:void 0),qe=(0,v.useMemo)(()=>{var At;return Je!==void 0?(At=ke==null?void 0:ke.text)==null?void 0:At[Je]:null},[ke,Je]);return ke?v.createElement(v.Fragment,null,v.createElement(c.Z,{paddingBottom:2},v.createElement($.Z,null,v.createElement(c.Z,{padding:2,justifyContent:"center",display:"flex",gridGap:16},v.createElement(na,{output:ke,index:Je,setIndex:He}),v.createElement(yn,{output:ke})))),qe?v.createElement(c.Z,{paddingBottom:2},v.createElement(oe.rJ,{title:(Q=qe.title)!=null?Q:"Text Output",noPadding:!0,titleTypographyProps:{component:"h2"}},v.createElement(c.Z,{padding:2,height:"100%"},v.createElement(oe.SA,{content:(te=qe.content)!=null?te:""})))):null):null},oa=(0,p.Z)(k=>({root:{color:k.palette.text.disabled},completed:{color:k.palette.status.ok},error:{color:k.palette.status.error}})),ua=k=>{const j=oa(),{active:Q,completed:te,error:ke,skipped:Je}=k,He=()=>Q?v.createElement(N.Z,{size:"20px"}):te?v.createElement(U.Z,null):ke?v.createElement(O.Z,null):Je?v.createElement(an.Z,null):v.createElement(St.Z,null);return v.createElement("div",{className:D()(j.root,{[j.completed]:te,[j.error]:ke})},He())},Pa=k=>{const[j,Q]=(0,v.useState)(""),{step:te}=k,ke=()=>te.startedAt&&te.endedAt&&j?null:te.startedAt&&te.endedAt?1:1e3,Je=(0,v.useCallback)(()=>{if(!te.startedAt){Q("");return}const He=te.endedAt?ne.ou.fromISO(te.endedAt):ne.ou.local(),qe=ne.ou.fromISO(te.startedAt),At=ne.Xp.fromDateTimes(qe,He).toDuration().valueOf();Q(ze()(At,{round:!0}))},[te.endedAt,te.startedAt]);return(0,Ct.n)(Je),(0,M.Z)(Je,ke()),v.createElement(B.Z,{variant:"caption"},j)},Qn=(0,p.Z)(k=>({failed:{backgroundColor:k.palette.error.main},success:{backgroundColor:k.palette.success.main}})),Ea=k=>{const j=Qn();return k.isComplete?v.createElement(Te.Z,{variant:"determinate",classes:{bar:k.isError?j.failed:j.success},value:100}):v.createElement(Te.Z,{variant:"indeterminate"})},X=k=>{var j,Q;return v.createElement($.Z,{style:{position:"relative",overflow:"hidden"}},v.createElement(Ea,{isComplete:(j=k.isComplete)!=null?j:!1,isError:(Q=k.isError)!=null?Q:!1}),v.createElement(c.Z,{padding:2},v.createElement(ie.Z,{activeStep:k.activeStep,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},k.steps.map(te=>{const ke=te.status==="completed",Je=te.status==="failed",He=te.status==="processing",qe=te.status==="skipped",At={completed:ke,error:Je,active:He,skipped:qe};return v.createElement(G.Z,{key:te.id},v.createElement(_e.Z,null,v.createElement(Ge.Z,{StepIconProps:At,StepIconComponent:ua,"data-testid":"step-label"},v.createElement(c.Z,null,te.name),!qe&&v.createElement(Pa,{step:te}))))}))))},Be=(0,p.Z)({root:{width:"100%",height:"100%",position:"relative"}}),et=k=>{const j=Be();return v.createElement("div",{className:j.root},v.createElement(oe.nU,{text:Object.values(k.logs).map(Q=>Q.join(`
`)).filter(Boolean).join(`
`)}))},vt=v.createElement(Wt.Z,{fontSize:"small"}),Se=v.createElement(rn.Z,{fontSize:"small"}),H=()=>{const k=(0,o.u)(o.l),{error:j,loading:Q,availableTypes:te,selectedTypes:ke,setSelectedTypes:Je}=(0,Tt.Uh)();return Q?v.createElement(oe.Ex,null):j?(k.post({message:`Failed to load entity types with error: ${j}`,severity:"error"}),null):te?v.createElement(c.Z,{pb:1,pt:1},v.createElement(B.Z,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),v.createElement(we.ZP,{multiple:!0,id:"categories-picker",options:te,value:ke,onChange:(He,qe)=>Je(qe),renderOption:(He,{selected:qe})=>v.createElement(fe.Z,{control:v.createElement(ve.Z,{icon:vt,checkedIcon:Se,checked:qe}),label:Mt()(He)}),size:"small",popupIcon:v.createElement(ft.Z,null),renderInput:He=>v.createElement(Y.Z,{...He,variant:"outlined"})})):null},Ee=(0,p.Z)(k=>({button:{color:k.page.fontColor}}));function de(k){const{onEditorClicked:j,onActionsClicked:Q,onTasksClicked:te}=k,ke=Ee(),[Je,He]=(0,v.useState)();if(!j&&!Q)return null;const qe=dn=>{He(dn.currentTarget)},At=()=>{He(void 0)};return v.createElement(v.Fragment,null,v.createElement(rt.Z,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!Je,"aria-haspopup":"true",role:"button",onClick:qe,"data-testid":"menu-button",color:"inherit",className:ke.button},v.createElement(se.Z,null)),v.createElement(le.ZP,{"aria-labelledby":"long-menu",open:Boolean(Je),onClose:At,anchorEl:Je,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},v.createElement(kt.Z,null,j&&v.createElement(xt.Z,{onClick:j},v.createElement(a.Z,null,v.createElement(Lt.Z,{fontSize:"small"})),v.createElement(xe.Z,{primary:"Template Editor"})),Q&&v.createElement(xt.Z,{onClick:Q},v.createElement(a.Z,null,v.createElement(Ue.Z,{fontSize:"small"})),v.createElement(xe.Z,{primary:"Installed Actions"})),te&&v.createElement(xt.Z,{onClick:te},v.createElement(a.Z,null,v.createElement(Yt.Z,{fontSize:"small"})),v.createElement(xe.Z,{primary:"Task List"})))))}function st(k){return{expose(){const j=()=>null;return attachComponentData(j,FIELD_EXTENSION_KEY,k),j}}}},60885:($n,qt,e)=>{"use strict";e.d(qt,{F:()=>z,S:()=>$,a:()=>B,s:()=>Ne,u:()=>Qe});var o=e(18473),m=e(2784),p=e(57032);const z="scaffolder.extensions.wrapper.v1",B="scaffolder.extensions.field.v1",i=(0,o.CT)("secrets-context"),$=a=>{const[xe,Te]=(0,m.useState)({});return m.createElement(i.Provider,{value:(0,o.EI)({1:{secrets:xe,setSecrets:Te}})},a.children)},Qe=()=>{var a;const xe=(a=(0,m.useContext)(i))==null?void 0:a.atVersion(1);if(!xe)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:Te,secrets:ie={}}=xe;return{setSecrets:(0,m.useCallback)(Ge=>{Te(ge=>({...ge,...Ge}))},[Te]),secrets:ie}},Ne=(0,o.uW)("scaffolder:scaffolder-api-ref",()=>(0,p.c)({id:"plugin.scaffolder.service"}))},12053:($n,qt,e)=>{"use strict";e.d(qt,{PT:()=>Qe,WQ:()=>ie,eP:()=>i,mx:()=>$,zS:()=>xe});var o=e(30705),m=e(57032),p=e(60885),z=e(92233),B=e(2784);function i(ge){return{expose(){const be=()=>null;return(0,o.R5)(be,p.a,ge),be}}}const $=()=>null;(0,o.R5)($,p.F,!0);const Qe=ge=>(0,o.vJ)(ge,be=>be.selectByComponentData({key:p.F}).findComponentData({key:p.a})),Ne="scaffolder.layout.v1",a="scaffolder.layouts.wrapper.v1",xe=ge=>(0,o.vJ)(ge,be=>be.selectByComponentData({key:a}).findComponentData({key:Ne}));function Te(ge,be){var re,Oe,I;switch(be.type){case"INIT":{ge.steps=be.data.spec.steps.reduce((c,R)=>(c[R.id]={status:"open",id:R.id},c),{}),ge.stepLogs=be.data.spec.steps.reduce((c,R)=>(c[R.id]=[],c),{}),ge.loading=!1,ge.error=void 0,ge.completed=!1,ge.task=be.data;return}case"LOGS":{const c=be.data;for(const R of c){const _=`${R.createdAt} ${R.body.message}`;if(!R.body.stepId||!((re=ge.steps)!=null&&re[R.body.stepId]))continue;const b=(Oe=ge.stepLogs)==null?void 0:Oe[R.body.stepId],N=(I=ge.steps)==null?void 0:I[R.body.stepId];R.body.status&&R.body.status!==N.status&&(N.status=R.body.status,N.status==="processing"&&(N.startedAt=R.createdAt),["cancelled","completed","failed"].includes(N.status)&&(N.endedAt=R.createdAt)),b==null||b.push(_)}return}case"COMPLETED":{ge.completed=!0,ge.output=be.data.body.output,ge.error=be.data.body.error;return}case"CANCELLED":{ge.cancelled=!0;return}case"ERROR":{ge.error=be.data,ge.loading=!1,ge.completed=!0;return}default:return}}const ie=ge=>{const be=(0,m.u)(p.s),[re,Oe]=(0,z.C)(Te,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,B.useEffect)(()=>{let I=!1,c,R,_=1;const b=()=>be.getTask(ge).then(N=>{if(I)return;Oe({type:"INIT",data:N});const _e=be.streamLogs({taskId:ge}),fe=new Array;function ve(){if(fe.length){const Y=fe.splice(0,fe.length);Oe({type:"LOGS",data:Y})}}R=setInterval(ve,500),c=_e.subscribe({next:Y=>{switch(Y.type){case"log":return fe.push(Y);case"cancelled":Oe({type:"CANCELLED"});return;case"completion":ve(),Oe({type:"COMPLETED",data:Y});return;default:throw new Error(`Unhandled event type ${Y.type} in observer`)}},error:Y=>{ve(),Y.message||(Y.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${_}/3 retries)`),_<=3&&setTimeout(()=>{_+=1,b()},15e3),Oe({type:"ERROR",data:Y})}})},N=>{I||Oe({type:"ERROR",data:N})});return b(),()=>{I=!0,c&&c.unsubscribe(),R&&clearInterval(R)}},[be,Oe,ge]),re};function G(ge){return{expose(){const be=()=>null;return attachComponentData(be,Ne,ge),be}}}const Ge=()=>null;(0,o.R5)(Ge,a,!0)},94063:($n,qt,e)=>{"use strict";e.d(qt,{A:()=>Lt,B:()=>kt,C:()=>Ue,D:()=>Zn,F:()=>Mn,G:()=>Et,H:()=>Me,I:()=>Ze,J:()=>se,K:()=>An,N:()=>mn,P:()=>ln,T:()=>Ea,d:()=>na,e:()=>vt,i:()=>nt,l:()=>nn,m:()=>Ye,o:()=>Ot,p:()=>je,q:()=>Ae,r:()=>Pe,s:()=>on,t:()=>ae,u:()=>A,v:()=>F,w:()=>Vt,x:()=>gt,y:()=>ft,z:()=>Wt});var o=e(49462),m=e(60885),p=e(12053),z=e(34520),B=e(32272),i=e(19126),$=e.n(i),Qe=e(82394),Ne=e.n(Qe),a=e(31734),xe=e.n(a),Te=e(88285),ie=e(57032),G=e(30705),Ge=e(73495),ge=e(86619),be=e(95544),re=e(90436),Oe=e(85256),I=e(42494),c=e(5806),R=e(21324),_=e(79692),b=e(60364),N=e(61837),_e=e(79784),fe=e(50758),ve=e(12231),Y=e(86136),v=e(49378),ee=e(27556),oe=e(77277),Rt=e(88013),T=e(2784),sn=e(64279),me=e(30195),Zt=e(29641),yt=e(74828),mt=e(29611),It=e(56939),We=e(49558),Pt=e(48760),ot=e(62155),zt=e(82108),Tt=e.n(zt),Ft=e(19996),ct=e(25505),ht=e(38016),$t=e(73557),an=e(60497),St=e(49166),Gt=e(93269),D=e(8198),U=e(15026),O=e(43054),M=e(31011),ne=Object.defineProperty,he=(Se,H,Ee)=>H in Se?ne(Se,H,{enumerable:!0,configurable:!0,writable:!0,value:Ee}):Se[H]=Ee,ze=(Se,H,Ee)=>(he(Se,typeof H!="symbol"?H+"":H,Ee),Ee);class Ct{constructor(H){ze(this,"discoveryApi"),ze(this,"scmIntegrationsApi"),ze(this,"fetchApi"),ze(this,"identityApi"),ze(this,"useLongPollingLogs");var Ee,de;this.discoveryApi=H.discoveryApi,this.fetchApi=(Ee=H.fetchApi)!=null?Ee:{fetch},this.scmIntegrationsApi=H.scmIntegrationsApi,this.useLongPollingLogs=(de=H.useLongPollingLogs)!=null?de:!1,this.identityApi=H.identityApi}async listTasks(H){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const Ee=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:de}=await this.identityApi.getBackstageIdentity(),st=$().stringify(H.filterByOwnership==="owned"?{createdBy:de}:{}),k=await this.fetchApi.fetch(`${Ee}/v2/tasks?${st}`);if(!k.ok)throw await B.VL.fromResponse(k);return await k.json()}async getIntegrationsList(H){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(de=>!this.scmIntegrationsApi.bitbucketCloud.byHost(de.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(de.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.gitea.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(de=>({type:de.type,title:de.title,host:de.config.host})).filter(de=>H.allowedHosts.includes(de.host))}}async getTemplateParameterSchema(H){const{namespace:Ee,kind:de,name:st}=(0,z.of)(H,{defaultKind:"template"}),k=await this.discoveryApi.getBaseUrl("scaffolder"),j=[Ee,de,st].map(Je=>encodeURIComponent(Je)).join("/"),Q=`${k}/v2/templates/${j}/parameter-schema`,te=await this.fetchApi.fetch(Q);if(!te.ok)throw await B.VL.fromResponse(te);return await te.json()}async scaffold(H){const{templateRef:Ee,values:de,secrets:st={}}=H,k=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,j=await this.fetchApi.fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:Ee,values:{...de},secrets:st})});if(j.status!==201){const te=`${j.status} ${j.statusText}`,ke=await j.text();throw new Error(`Backend request failed, ${te} ${ke.trim()}`)}const{id:Q}=await j.json();return{taskId:Q}}async getTask(H){const de=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(H)}`,st=await this.fetchApi.fetch(de);if(!st.ok)throw await B.VL.fromResponse(st);return await st.json()}streamLogs(H){return this.useLongPollingLogs?this.streamLogsPolling(H):this.streamLogsEventStream(H)}async dryRun(H){const Ee=await this.discoveryApi.getBaseUrl("scaffolder"),de=await this.fetchApi.fetch(`${Ee}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:H.template,values:H.values,secrets:H.secrets,directoryContents:H.directoryContents})});if(!de.ok)throw await B.VL.fromResponse(de);return de.json()}streamLogsEventStream({taskId:H,after:Ee}){return new(Ne())(de=>{var st;const k=new URLSearchParams;Ee!==void 0&&k.set("after",String(Number(Ee))),Promise.all([this.discoveryApi.getBaseUrl("scaffolder"),(st=this.identityApi)==null?void 0:st.getCredentials()]).then(([j,Q])=>{const te=`${j}/v2/tasks/${encodeURIComponent(H)}/eventstream`,ke=He=>{if(He.data)try{de.next(JSON.parse(He.data))}catch(qe){de.error(qe)}},Je=new a.EventSourcePolyfill(te,{withCredentials:!0,headers:Q!=null&&Q.token?{Authorization:`Bearer ${Q.token}`}:{}});Je.addEventListener("log",ke),Je.addEventListener("cancelled",ke),Je.addEventListener("completion",He=>{ke(He),Je.close(),de.complete()}),Je.addEventListener("error",He=>{de.error(He)})},j=>{de.error(j)})})}streamLogsPolling({taskId:H,after:Ee}){let de=Ee;return new(Ne())(st=>{this.discoveryApi.getBaseUrl("scaffolder").then(async k=>{for(;!st.closed;){const j=`${k}/v2/tasks/${encodeURIComponent(H)}/events?${$().stringify({after:de})}`,Q=await this.fetchApi.fetch(j);if(!Q.ok){await new Promise(ke=>setTimeout(ke,1e3));continue}const te=await Q.json();for(const ke of te)if(de=Number(ke.id),st.next(ke),ke.type==="completion"){st.complete();return}}})})}async listActions(){const H=await this.discoveryApi.getBaseUrl("scaffolder"),Ee=await this.fetchApi.fetch(`${H}/v2/actions`);if(!Ee.ok)throw await B.VL.fromResponse(Ee);return await Ee.json()}async cancelTask(H){const de=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(H)}/cancel`,st=await this.fetchApi.fetch(de,{method:"POST"});if(!st.ok)throw await B.VL.fromResponse(st);return await st.json()}}function Ye(Se,H){return{schema:{returnValue:(0,Zt.ZP)(Se),uiOptions:H?(0,Zt.ZP)(H):void 0},type:null,uiOptionsType:null}}const Mt=me.z.record(me.z.string().or(me.z.object({exists:me.z.boolean().optional()})).or(me.z.array(me.z.string()))),Wt=Ye(me.z.string(),me.z.object({allowedKinds:me.z.array(me.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:me.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:me.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:me.z.union([me.z.string(),me.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:me.z.array(Mt).or(Mt).optional().describe("List of key-value filter expression for entities")})).schema,ft=Se=>{var H,Ee,de,st,k;const{onChange:j,schema:{title:Q="Entity",description:te="An entity from the catalog"},required:ke,uiSchema:Je,rawErrors:He,formData:qe,idSchema:At}=Se,dn=xt(Je),wt=(H=Je["ui:options"])==null?void 0:H.defaultKind,un=((Ee=Je["ui:options"])==null?void 0:Ee.defaultNamespace)||void 0,hn=(0,ie.u)(Ge.Ah),{value:En,loading:kn}=(0,sn.default)(async()=>{const{items:pn}=await hn.getEntities(dn?{filter:dn}:void 0);return pn}),wn=(st=(de=Je["ui:options"])==null?void 0:de.allowArbitraryValues)!=null?st:!0,xn=(0,T.useCallback)(pn=>{try{return(0,Ge.$3)((0,z.of)(pn,{defaultKind:wt,defaultNamespace:un}),{defaultKind:wt,defaultNamespace:un})}catch{return pn}},[wt,un]),Rn=(0,T.useCallback)((pn,_n,aa)=>{if(typeof _n!="string")j(_n?(0,z.eE)(_n):void 0);else if(aa==="blur"||aa==="create-option"){let sa=_n;try{sa=(0,z.eE)((0,z.of)(_n,{defaultKind:wt,defaultNamespace:un}))}catch{}(qe!==_n||wn)&&j(sa)}},[j,qe,wt,un,wn]),On=(k=En==null?void 0:En.find(pn=>(0,z.eE)(pn)===qe))!=null?k:wn&&qe?xn(qe):"";return(0,T.useEffect)(()=>{(En==null?void 0:En.length)===1&&On===""&&j((0,z.eE)(En[0]))},[En,j,On]),T.createElement(I.Z,{margin:"normal",required:ke,error:(He==null?void 0:He.length)>0&&!qe},T.createElement(Rt.ZP,{disabled:(En==null?void 0:En.length)===1,id:At==null?void 0:At.$id,value:On,loading:kn,onChange:Rn,options:En||[],getOptionLabel:pn=>typeof pn=="string"?pn:(0,Ge.$3)(pn,{defaultKind:wt,defaultNamespace:un}),autoSelect:!0,freeSolo:wn,renderInput:pn=>T.createElement(ge.Z,{...pn,label:Q,margin:"dense",helperText:te,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:ke,InputProps:pn.InputProps})}))};function we(Se){return typeof Se=="object"&&Se.exists?Te.n3:Se==null?void 0:Se.toString()}function rt(Se){const H={};for(const[Ee,de]of Object.entries(Se))Array.isArray(de)?H[Ee]=de:H[Ee]=we(de);return H}function xt(Se){var H,Ee;const de=(H=Se["ui:options"])==null?void 0:H.allowedKinds,st=((Ee=Se["ui:options"])==null?void 0:Ee.catalogFilter)||de&&{kind:de};if(st)return Array.isArray(st)?st.map(rt):rt(st)}const kt=(Se,H)=>{z.y$.isValidObjectName(Se)||H.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},Ue=Ye(me.z.string()).schema,Lt=Se=>{const{onChange:H,required:Ee,schema:{title:de="Name",description:st="Unique name of the component"},rawErrors:k,formData:j,uiSchema:{"ui:autofocus":Q},idSchema:te,placeholder:ke}=Se;return T.createElement(ge.Z,{id:te==null?void 0:te.$id,label:de,placeholder:ke,helperText:st,required:Ee,value:j!=null?j:"",onChange:({target:{value:Je}})=>H(Je),margin:"normal",error:(k==null?void 0:k.length)>0&&!j,inputProps:{autoFocus:Q}})},se=Ye(me.z.string(),me.z.object({allowedKinds:me.z.array(me.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:me.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:me.z.union([me.z.string(),me.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:me.z.array(Mt).or(Mt).optional().describe("List of key-value filter expression for entities")})).schema,Ze=Se=>{var H,Ee,de,st,k;const{schema:{title:j="Owner",description:Q="The owner of the component"},uiSchema:te,...ke}=Se,Je=(H=te["ui:options"])==null?void 0:H.defaultNamespace,He=(Ee=te["ui:options"])==null?void 0:Ee.allowedKinds,qe=((de=te["ui:options"])==null?void 0:de.catalogFilter)||{kind:He||["Group","User"]},At={...te,"ui:options":{catalogFilter:qe,defaultKind:"Group",allowArbitraryValues:(k=(st=te["ui:options"])==null?void 0:st.allowArbitraryValues)!=null?k:!0,...Je!==void 0?{defaultNamespace:Je}:{}}};return T.createElement(ft,{...ke,schema:{title:j,description:Q},uiSchema:At})},Me=Ye(me.z.string(),me.z.object({allowedHosts:me.z.array(me.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:me.z.array(me.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:me.z.array(me.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:me.z.array(me.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:me.z.array(me.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:me.z.object({secretsKey:me.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:me.z.object({gitea:me.z.array(me.z.string()).optional().describe("Additional Gitea scopes to request"),gerrit:me.z.array(me.z.string()).optional().describe("Additional Gerrit scopes to request"),github:me.z.array(me.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:me.z.array(me.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:me.z.array(me.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:me.z.array(me.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,nt=(Se,H,Ee)=>{var de,st;try{const{host:k,searchParams:j}=new URL(`https://${Se}`),Q=Ee.apiHolder.get(o.q3);k?(((de=Q==null?void 0:Q.byHost(k))==null?void 0:de.type)==="bitbucket"?(k==="bitbucket.org"&&!j.get("workspace")&&H.addError("Incomplete repository location provided, workspace not provided"),j.get("project")||H.addError("Incomplete repository location provided, project not provided")):((st=Q==null?void 0:Q.byHost(k))==null?void 0:st.type)!=="gerrit"&&(j.get("owner")||H.addError("Incomplete repository location provided, owner not provided")),j.get("repo")||H.addError("Incomplete repository location provided, repo not provided")):H.addError("Incomplete repository location provided, host not provided")}catch{H.addError("Unable to parse the Repository URL")}},pt=Se=>{const{allowedOwners:H=[],rawErrors:Ee,state:de,onChange:st}=Se,k=H?H.map(Q=>({label:Q,value:Q})):[{label:"Loading...",value:"loading"}],{owner:j}=de;return T.createElement(T.Fragment,null,T.createElement(I.Z,{margin:"normal",required:!0,error:(Ee==null?void 0:Ee.length)>0&&!j},H!=null&&H.length?T.createElement(We.Ph,{native:!0,label:"Owner Available",onChange:Q=>st({owner:String(Array.isArray(Q)?Q[0]:Q)}),disabled:H.length===1,selected:j,items:k}):T.createElement(T.Fragment,null,T.createElement(It.Z,{htmlFor:"ownerInput"},"Owner"),T.createElement(mt.Z,{id:"ownerInput",onChange:Q=>st({owner:Q.target.value}),value:j})),T.createElement(yt.Z,null,"The organization, user or project that this repo will belong to")))},Bt=Se=>{const{allowedOwners:H=[],state:Ee,onChange:de,rawErrors:st}=Se,k=H?H.map(Q=>({label:Q,value:Q})):[{label:"Loading...",value:"loading"}],{owner:j}=Ee;return T.createElement(T.Fragment,null,T.createElement(I.Z,{margin:"normal",required:!0,error:(st==null?void 0:st.length)>0&&!j},H!=null&&H.length?T.createElement(We.Ph,{native:!0,label:"Owner Available",onChange:Q=>de({owner:String(Array.isArray(Q)?Q[0]:Q)}),disabled:H.length===1,selected:j,items:k}):T.createElement(T.Fragment,null,T.createElement(It.Z,{htmlFor:"ownerInput"},"Owner"),T.createElement(mt.Z,{id:"ownerInput",onChange:Q=>de({owner:Q.target.value}),value:j})),T.createElement(yt.Z,null,"Gitea namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},tn=Se=>{const{allowedOwners:H=[],state:Ee,onChange:de,rawErrors:st}=Se,k=H?H.map(Q=>({label:Q,value:Q})):[{label:"Loading...",value:"loading"}],{owner:j}=Ee;return T.createElement(T.Fragment,null,T.createElement(I.Z,{margin:"normal",required:!0,error:(st==null?void 0:st.length)>0&&!j},H!=null&&H.length?T.createElement(We.Ph,{native:!0,label:"Owner Available",onChange:Q=>de({owner:String(Array.isArray(Q)?Q[0]:Q)}),disabled:H.length===1,selected:j,items:k}):T.createElement(T.Fragment,null,T.createElement(It.Z,{htmlFor:"ownerInput"},"Owner"),T.createElement(mt.Z,{id:"ownerInput",onChange:Q=>de({owner:Q.target.value}),value:j})),T.createElement(yt.Z,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},Ce=Se=>{const{allowedOrganizations:H=[],allowedOwners:Ee=[],rawErrors:de,state:st,onChange:k}=Se,j=H?H.map(Je=>({label:Je,value:Je})):[{label:"Loading...",value:"loading"}],Q=Ee?Ee.map(Je=>({label:Je,value:Je})):[{label:"Loading...",value:"loading"}],{organization:te,owner:ke}=st;return T.createElement(T.Fragment,null,T.createElement(I.Z,{margin:"normal",required:!0,error:(de==null?void 0:de.length)>0&&!te},H!=null&&H.length?T.createElement(We.Ph,{native:!0,label:"Organization",onChange:Je=>k({organization:String(Array.isArray(Je)?Je[0]:Je)}),disabled:H.length===1,selected:te,items:j}):T.createElement(T.Fragment,null,T.createElement(It.Z,{htmlFor:"orgInput"},"Organization"),T.createElement(mt.Z,{id:"orgInput",onChange:Je=>k({organization:Je.target.value}),value:te})),T.createElement(yt.Z,null,"The Organization that this repo will belong to")),T.createElement(I.Z,{margin:"normal",required:!0,error:(de==null?void 0:de.length)>0&&!ke},Ee!=null&&Ee.length?T.createElement(We.Ph,{native:!0,label:"Owner",onChange:Je=>k({owner:String(Array.isArray(Je)?Je[0]:Je)}),disabled:Ee.length===1,selected:ke,items:Q}):T.createElement(T.Fragment,null,T.createElement(It.Z,{htmlFor:"ownerInput"},"Project"),T.createElement(mt.Z,{id:"ownerInput",onChange:Je=>k({owner:Je.target.value}),value:ke})),T.createElement(yt.Z,null,"The Project that this repo will belong to")))},Le=Se=>{const{allowedOwners:H=[],allowedProjects:Ee=[],onChange:de,rawErrors:st,state:k}=Se,{host:j,workspace:Q,project:te}=k,ke=H?H==null?void 0:H.map(He=>({label:He,value:He})):[],Je=Ee?Ee==null?void 0:Ee.map(He=>({label:He,value:He})):[];return(0,T.useEffect)(()=>{j==="bitbucket.org"&&H.length&&de({workspace:H[0]})},[H,j,de]),T.createElement(T.Fragment,null,j==="bitbucket.org"&&T.createElement(I.Z,{margin:"normal",required:!0,error:(st==null?void 0:st.length)>0&&!Q},H!=null&&H.length?T.createElement(We.Ph,{native:!0,label:"Allowed Workspaces",onChange:He=>de({workspace:String(Array.isArray(He)?He[0]:He)}),disabled:H.length===1,selected:Q,items:ke}):T.createElement(T.Fragment,null,T.createElement(It.Z,{htmlFor:"workspaceInput"},"Workspace"),T.createElement(mt.Z,{id:"workspaceInput",onChange:He=>de({workspace:He.target.value}),value:Q})),T.createElement(yt.Z,null,"The Workspace that this repo will belong to")),T.createElement(I.Z,{margin:"normal",required:!0,error:(st==null?void 0:st.length)>0&&!te},Ee!=null&&Ee.length?T.createElement(We.Ph,{native:!0,label:"Allowed Projects",onChange:He=>de({project:String(Array.isArray(He)?He[0]:He)}),disabled:Ee.length===1,selected:te,items:Je}):T.createElement(T.Fragment,null,T.createElement(It.Z,{htmlFor:"projectInput"},"Project"),T.createElement(mt.Z,{id:"projectInput",onChange:He=>de({project:He.target.value}),value:te})),T.createElement(yt.Z,null,"The Project that this repo will belong to")))},P=Se=>{const{onChange:H,rawErrors:Ee,state:de}=Se,{workspace:st,owner:k}=de;return T.createElement(T.Fragment,null,T.createElement(I.Z,{margin:"normal",error:(Ee==null?void 0:Ee.length)>0&&!st},T.createElement(It.Z,{htmlFor:"ownerInput"},"Owner"),T.createElement(mt.Z,{id:"ownerInput",onChange:j=>H({owner:j.target.value}),value:k}),T.createElement(yt.Z,null,"The owner of the project (optional)")),T.createElement(I.Z,{margin:"normal",required:!0,error:(Ee==null?void 0:Ee.length)>0&&!st},T.createElement(It.Z,{htmlFor:"parentInput"},"Parent"),T.createElement(mt.Z,{id:"parentInput",onChange:j=>H({workspace:j.target.value}),value:st}),T.createElement(yt.Z,null,"The project parent that the repo will belong to")))},W=Se=>{const{host:H,hosts:Ee,onChange:de,rawErrors:st}=Se,k=(0,ie.u)(m.s),{value:{integrations:j}={integrations:[]},loading:Q}=(0,sn.default)(async()=>await k.getIntegrationsList({allowedHosts:Ee!=null?Ee:[]}));(0,T.useEffect)(()=>{H||(Ee!=null&&Ee.length?de(Ee[0]):j!=null&&j.length&&de(j[0].host))},[Ee,H,de,j]);const te=j?j.filter(ke=>Ee!=null&&Ee.length?Ee==null?void 0:Ee.includes(ke.host):!0).map(ke=>({label:ke.title,value:ke.host})):[{label:"Loading...",value:"loading"}];return Q?T.createElement(We.Ex,null):T.createElement(T.Fragment,null,T.createElement(I.Z,{margin:"normal",required:!0,error:(st==null?void 0:st.length)>0&&!H},T.createElement(We.Ph,{native:!0,disabled:(Ee==null?void 0:Ee.length)===1,label:"Host",onChange:ke=>de(String(Array.isArray(ke)?ke[0]:ke)),selected:H,items:te,"data-testid":"host-select"}),T.createElement(yt.Z,null,"The host where the repository will be created")))},J=Se=>{const{repoName:H,allowedRepos:Ee,onChange:de,rawErrors:st}=Se;(0,T.useEffect)(()=>{H||Ee!=null&&Ee.length&&de(Ee[0])},[Ee,H,de]);const k=Ee?Ee.map(j=>({label:j,value:j})):[{label:"Loading...",value:"loading"}];return T.createElement(T.Fragment,null,T.createElement(I.Z,{margin:"normal",required:!0,error:(st==null?void 0:st.length)>0&&!H},Ee!=null&&Ee.length?T.createElement(We.Ph,{native:!0,label:"Repositories Available",onChange:j=>de(String(Array.isArray(j)?j[0]:j)),disabled:Ee.length===1,selected:H,items:k}):T.createElement(T.Fragment,null,T.createElement(It.Z,{htmlFor:"repoNameInput"},"Repository"),T.createElement(mt.Z,{id:"repoNameInput",onChange:j=>de(String(j.target.value)),value:H})),T.createElement(yt.Z,null,"The name of the repository")))};function it(Se){if(!Se.host)return;const H=new URLSearchParams;return Se.owner&&H.set("owner",Se.owner),Se.repoName&&H.set("repo",Se.repoName),Se.organization&&H.set("organization",Se.organization),Se.workspace&&H.set("workspace",Se.workspace),Se.project&&H.set("project",Se.project),`${Se.host}?${H.toString()}`}function ut(Se){let H="",Ee="",de="",st="",k="",j="";try{if(Se){const Q=new URL(`https://${Se}`);H=Q.host,Ee=Q.searchParams.get("owner")||"",de=Q.searchParams.get("repo")||"",st=Q.searchParams.get("organization")||"",k=Q.searchParams.get("workspace")||"",j=Q.searchParams.get("project")||""}}catch{}return{host:H,owner:Ee,repoName:de,organization:st,workspace:k,project:j}}const Et=Se=>{var H,Ee;const{uiSchema:de,onChange:st,rawErrors:k,formData:j,schema:Q}=Se,[te,ke]=(0,T.useState)(ut(j)),Je=(0,ie.u)(o.q3),He=(0,ie.u)(o.Om),{setSecrets:qe}=(0,m.u)(),At=(0,T.useMemo)(()=>{var pn,_n;return(_n=(pn=de==null?void 0:de["ui:options"])==null?void 0:pn.allowedHosts)!=null?_n:[]},[de]),dn=(0,T.useMemo)(()=>{var pn,_n;return(_n=(pn=de==null?void 0:de["ui:options"])==null?void 0:pn.allowedOrganizations)!=null?_n:[]},[de]),wt=(0,T.useMemo)(()=>{var pn,_n;return(_n=(pn=de==null?void 0:de["ui:options"])==null?void 0:pn.allowedOwners)!=null?_n:[]},[de]),un=(0,T.useMemo)(()=>{var pn,_n;return(_n=(pn=de==null?void 0:de["ui:options"])==null?void 0:pn.allowedProjects)!=null?_n:[]},[de]),hn=(0,T.useMemo)(()=>{var pn,_n;return(_n=(pn=de==null?void 0:de["ui:options"])==null?void 0:pn.allowedRepos)!=null?_n:[]},[de]),{owner:En,organization:kn,project:wn,repoName:xn}=te;(0,T.useEffect)(()=>{st(it(te))},[te,st]),(0,T.useEffect)(()=>{dn.length>0&&!kn&&ke(pn=>({...pn,organization:dn[0]}))},[ke,dn,kn]),(0,T.useEffect)(()=>{wt.length>0&&!En&&ke(pn=>({...pn,owner:wt[0]}))},[ke,wt,En]),(0,T.useEffect)(()=>{un.length>0&&!wn&&ke(pn=>({...pn,project:un[0]}))},[ke,un,wn]),(0,T.useEffect)(()=>{hn.length>0&&!xn&&ke(pn=>({...pn,repoName:hn[0]}))},[ke,hn,xn]);const Rn=(0,T.useCallback)(pn=>{ke(_n=>({..._n,...pn}))},[ke]);(0,Pt.Z)(async()=>{var pn;const{requestUserCredentials:_n}=(pn=de==null?void 0:de["ui:options"])!=null?pn:{},aa=te.owner?te.owner:te.project;if(!_n||!(te.host&&aa&&te.repoName))return;const[sa,Aa]=[te.host,te.repoName].map(encodeURIComponent),{token:Sa}=await He.getCredentials({url:`https://${sa}/${aa}/${Aa}`,additionalScope:{repoWrite:!0,customScopes:_n.additionalScopes}});qe({[_n.secretsKey]:Sa})},500,[te,de]);const On=(Ee=te.host&&((H=Je.byHost(te.host))==null?void 0:H.type))!=null?Ee:null;return T.createElement(T.Fragment,null,Q.title&&T.createElement(be.Z,{my:1},T.createElement(re.Z,{variant:"h5"},Q.title),T.createElement(Oe.Z,null)),Q.description&&T.createElement(re.Z,{variant:"body1"},Q.description),T.createElement(W,{host:te.host,hosts:At,onChange:pn=>ke(_n=>({..._n,host:pn})),rawErrors:k}),On==="github"&&T.createElement(pt,{allowedOwners:wt,onChange:Rn,rawErrors:k,state:te}),On==="gitea"&&T.createElement(Bt,{allowedOwners:wt,allowedRepos:hn,rawErrors:k,state:te,onChange:Rn}),On==="gitlab"&&T.createElement(tn,{allowedOwners:wt,rawErrors:k,state:te,onChange:Rn}),On==="bitbucket"&&T.createElement(Le,{allowedOwners:wt,allowedProjects:un,rawErrors:k,state:te,onChange:Rn}),On==="azure"&&T.createElement(Ce,{allowedOrganizations:dn,allowedOwners:wt,rawErrors:k,state:te,onChange:Rn}),On==="gerrit"&&T.createElement(P,{rawErrors:k,state:te,onChange:Rn}),T.createElement(J,{repoName:te.repoName,allowedRepos:hn,onChange:pn=>ke(_n=>({..._n,repoName:pn})),rawErrors:k}))},mn=Ye(me.z.string(),me.z.object({allowedKinds:me.z.array(me.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:me.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:me.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:me.z.union([me.z.string(),me.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:me.z.array(Mt).or(Mt).optional().describe("List of key-value filter expression for entities")})).schema,An=Se=>{const{schema:{title:H="Entity",description:Ee="An entity from the catalog"},uiSchema:de,required:st}=Se,k=(0,ie.u)(ie.t),{loading:j,value:Q}=(0,sn.default)(async()=>(await k.getBackstageIdentity()).ownershipEntityRefs);if(j)return T.createElement(Rt.ZP,{loading:j,renderInput:ke=>T.createElement(ge.Z,{...ke,label:H,margin:"dense",helperText:Ee,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:st,InputProps:ke.InputProps}),options:[]});const te=vn(de,Q);return T.createElement(ft,{...Se,uiSchema:te})};function vn(Se,H){const Ee=(Se==null?void 0:Se["ui:options"])||{},de=Ee.allowedKinds;return{"ui:options":{catalogFilter:{...Ee.catalogFilter,...de?{kind:de,[`relations.${z.S4}`]:H||[]}:{[`relations.${z.S4}`]:H||[]}}}}}const Mn=Ye(me.z.array(me.z.string()),me.z.object({kinds:me.z.array(me.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:me.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:me.z.string().optional().describe("Helper text to display")})).schema,Zn=Se=>{var H,Ee,de;const{formData:st,onChange:k,uiSchema:j}=Se,Q=(0,ie.u)(Ge.Ah),[te,ke]=(0,T.useState)([]),[Je,He]=(0,T.useState)(""),[qe,At]=(0,T.useState)(!1),dn=(0,z.In)().isValidTag,wt=(H=j["ui:options"])==null?void 0:H.kinds,un=(Ee=j["ui:options"])==null?void 0:Ee.showCounts,hn=(de=j["ui:options"])==null?void 0:de.helperText,{loading:En,value:kn}=(0,sn.default)(async()=>{const xn="metadata.tags",Rn={facets:[xn]};wt&&(Rn.filter={kind:wt});const{facets:On}=await Q.getEntityFacets(Rn),pn=Object.fromEntries(On[xn].map(({value:_n,count:aa})=>[_n,aa]));return ke(Object.keys(pn).sort((_n,aa)=>un?pn[aa]-pn[_n]:_n.localeCompare(aa))),pn}),wn=(xn,Rn)=>{let On=!1,pn=!1;const _n=st||[];if(Rn!=null&&Rn.length&&_n.length<Rn.length){const aa=Rn[Rn.length-1]=Rn[Rn.length-1].toLocaleLowerCase("en-US").trim();On=!dn(aa),pn=_n.indexOf(aa)!==-1}At(On),He(On?Je:""),!On&&!pn&&k(Rn||[])};return(0,ot.default)(()=>k(st||[])),T.createElement(I.Z,{margin:"normal"},T.createElement(Rt.ZP,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:wn,value:st||[],inputValue:Je,loading:En,options:te,ChipProps:{size:"small"},renderOption:xn=>un?`${xn} (${kn==null?void 0:kn[xn]})`:xn,renderInput:xn=>T.createElement(ge.Z,{...xn,label:"Tags",onChange:Rn=>He(Rn.target.value),error:qe,helperText:hn!=null?hn:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},A=(0,G.x8)({id:"register-component",optional:!0}),F=(0,G.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Pe=(0,G.NT)({id:"scaffolder"}),gt=(0,G.Rz)({id:"scaffolder/legacy/selected-template",parent:Pe,path:"/templates/:templateName"}),Ot=(0,G.Rz)({id:"scaffolder/selected-template",parent:Pe,path:"/templates/:namespace/:templateName"}),Vt=(0,G.Rz)({id:"scaffolder/task",parent:Pe,path:"/tasks/:taskId"}),ae=(0,G.Rz)({id:"scaffolder/list-tasks",parent:Pe,path:"/tasks"}),Ae=(0,G.Rz)({id:"scaffolder/actions",parent:Pe,path:"/actions"}),je=(0,G.Rz)({id:"scaffolder/edit",parent:Pe,path:"/edit"}),nn=Ye(me.z.string(),me.z.object({title:me.z.string().default("Group").describe("Group"),description:me.z.string().default("A group you are part of").describe("The group to which the entity belongs")})).schema,ln=Se=>{const{schema:{title:H,description:Ee},required:de,rawErrors:st,onChange:k}=Se,j=(0,ie.u)(ie.t),Q=(0,ie.u)(Ge.Ah),te=(0,ie.u)(ie.r),[ke,Je]=(0,T.useState)([]),[He,qe]=(0,T.useState)(null);(0,sn.default)(async()=>{const{userEntityRef:dn}=await j.getBackstageIdentity();if(!dn){te.post(new B.dR("No user entity ref found"));return}const{items:wt}=await Q.getEntities({filter:{kind:"Group",["relations.hasMember"]:[dn]}}),un=wt.filter(hn=>Boolean(hn)).map(hn=>{var En;return{label:(En=hn.metadata.title)!=null?En:hn.metadata.name,ref:(0,z.eE)(hn)}});Je(un)});const At=(dn,wt)=>{var un;qe(wt),k((un=wt==null?void 0:wt.ref)!=null?un:"")};return T.createElement(I.Z,{margin:"normal",required:de,error:(st==null?void 0:st.length)>0},T.createElement(Rt.ZP,{id:"OwnershipEntityRefPicker-dropdown",options:ke||[],value:He,onChange:At,getOptionLabel:dn=>dn.label,renderInput:dn=>T.createElement(ge.Z,{...dn,label:H,margin:"dense",helperText:Ee,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:de})}))},on=(0,G.rx)({id:"scaffolder",apis:[(0,G.ni)({api:m.s,deps:{discoveryApi:ie.q,scmIntegrationsApi:o.q3,fetchApi:ie.s,identityApi:ie.t},factory:({discoveryApi:Se,scmIntegrationsApi:H,fetchApi:Ee,identityApi:de})=>new Ct({discoveryApi:Se,scmIntegrationsApi:H,fetchApi:Ee,identityApi:de})})],routes:{root:Pe,selectedTemplate:Ot,ongoingTask:Vt,actions:Ae,listTasks:ae,edit:je},externalRoutes:{registerComponent:A,viewTechDoc:F}}),In=on.provide((0,p.eP)({component:ft,name:"EntityPicker",schema:Wt})),Bn=on.provide((0,p.eP)({component:Lt,name:"EntityNamePicker",validation:kt,schema:Ue})),Hn=on.provide((0,p.eP)({component:Et,name:"RepoUrlPicker",validation:nt,schema:Me})),ra=on.provide((0,p.eP)({component:Ze,name:"OwnerPicker",schema:se})),yn=on.provide((0,p.eP)({component:ln,name:"MyGroupsPicker",schema:nn})),na=on.provide((0,G.P4)({name:"ScaffolderPage",component:()=>Promise.all([e.e(3761),e.e(2719)]).then(e.bind(e,12719)).then(Se=>Se.Router),mountPoint:Pe})),ia=on.provide((0,p.eP)({component:An,name:"OwnedEntityPicker",schema:mn})),oa=on.provide((0,p.eP)({component:Zn,name:"EntityTagsPicker",schema:Mn})),ua=on.provide((0,G.P4)({name:"LegacyScaffolderPage",component:()=>Promise.all([e.e(3761),e.e(1447)]).then(e.bind(e,1447)).then(Se=>Se.LegacyRouter),mountPoint:Pe})),Pa=T.createElement(ct.Z,{fontSize:"small"}),Qn=T.createElement(Ft.Z,{fontSize:"small"}),Ea=()=>{const Se=(0,ie.u)(ie.l),{error:H,loading:Ee,availableTypes:de,selectedTypes:st,setSelectedTypes:k}=(0,Ge.Uh)();return Ee?T.createElement(We.Ex,null):de?H?(Se.post({message:"Failed to load entity types",severity:"error"}),null):T.createElement(be.Z,{pb:1,pt:1},T.createElement(re.Z,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),T.createElement(Rt.ZP,{id:"categories-picker",multiple:!0,options:de,value:st,onChange:(j,Q)=>k(Q),renderOption:(j,{selected:Q})=>T.createElement(c.Z,{control:T.createElement(R.Z,{icon:Pa,checkedIcon:Qn,checked:Q}),label:Tt()(j)}),size:"small",popupIcon:T.createElement(ht.Z,{"data-testid":"categories-picker-expand"}),renderInput:j=>T.createElement(ge.Z,{...j,variant:"outlined"})})):null},X=(0,_.Z)(()=>({button:{color:({fontColor:Se})=>Se}})),Be=Se=>{const{cancelEnabled:H,logsVisible:Ee,buttonBarVisible:de,onStartOver:st,onToggleLogs:k,onToggleButtonBar:j,taskId:Q}=Se,{getPageTheme:te}=(0,b.Z)(),ke=te({themeId:"website"}),Je=X({fontColor:ke.fontColor}),He=(0,ie.u)(m.s),[qe,At]=(0,T.useState)(),[{status:dn},{execute:wt}]=(0,an.r)(async()=>{Q&&await He.cancelTask(Q)});return T.createElement(T.Fragment,null,T.createElement(N.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:un=>{At(un.currentTarget)},"data-testid":"menu-button",className:Je.button},T.createElement(O.Z,null)),T.createElement(_e.ZP,{open:Boolean(qe),onClose:()=>At(void 0),anchorEl:qe,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},T.createElement(fe.Z,null,T.createElement(ve.Z,{onClick:()=>k==null?void 0:k(!Ee)},T.createElement(Y.Z,null,T.createElement(D.Z,{fontSize:"small"})),T.createElement(v.Z,{primary:Ee?"Hide Logs":"Show Logs"})),T.createElement(ve.Z,{onClick:()=>j==null?void 0:j(!de)},T.createElement(Y.Z,null,T.createElement(U.Z,{fontSize:"small"})),T.createElement(v.Z,{primary:de?"Hide Button Bar":"Show Button Bar"})),T.createElement(ve.Z,{onClick:st},T.createElement(Y.Z,null,T.createElement(Gt.Z,{fontSize:"small"})),T.createElement(v.Z,{primary:"Start Over"})),T.createElement(ve.Z,{onClick:wt,disabled:!H||dn!=="not-executed","data-testid":"cancel-task"},T.createElement(Y.Z,null,T.createElement(St.Z,{fontSize:"small"})),T.createElement(v.Z,{primary:"Cancel"})))))},et=(0,_.Z)(Se=>({contentWrapper:{display:"flex",flexDirection:"column"},buttonBar:{display:"flex",flexDirection:"row",justifyContent:"right"},cancelButton:{marginRight:Se.spacing(1)},logsVisibilityButton:{marginRight:Se.spacing(1)}})),vt=Se=>{var H,Ee,de,st,k,j,Q,te;const{taskId:ke}=(0,$t.UO)(),Je=(0,G.tg)(Ot),He=(0,$t.s0)(),qe=(0,ie.u)(m.s),At=(0,p.WQ)(ke),dn=et(),wt=(0,T.useMemo)(()=>{var sa,Aa;return(Aa=(sa=At.task)==null?void 0:sa.spec.steps.map(Sa=>{var ka;return{...Sa,...(ka=At==null?void 0:At.steps)==null?void 0:ka[Sa.id]}}))!=null?Aa:[]},[At]),[un,hn]=(0,T.useState)(!1),[En,kn]=(0,T.useState)(!0);(0,T.useEffect)(()=>{At.error&&hn(!0)},[At.error]),(0,T.useEffect)(()=>{At.completed&&!At.error&&kn(!1)},[At.error,At.completed]);const wn=(0,T.useMemo)(()=>{for(let sa=wt.length-1;sa>=0;sa--)if(wt[sa].status!=="open")return sa;return 0},[wt]),xn=(0,T.useCallback)(()=>{var sa,Aa,Sa,ka,Wa,Ba;const{namespace:Ra,name:ja}=(ka=(Sa=(Aa=(sa=At.task)==null?void 0:sa.spec.templateInfo)==null?void 0:Aa.entity)==null?void 0:Sa.metadata)!=null?ka:{},Na=(Ba=(Wa=At.task)==null?void 0:Wa.spec.parameters)!=null?Ba:{};!Ra||!ja||He({pathname:Je({namespace:Ra,templateName:ja}),search:`?${$().stringify({formData:JSON.stringify(Na)})}`})},[He,(H=At.task)==null?void 0:H.spec.parameters,(st=(de=(Ee=At.task)==null?void 0:Ee.spec.templateInfo)==null?void 0:de.entity)==null?void 0:st.metadata,Je]),[{status:Rn},{execute:On}]=(0,an.r)(async()=>{ke&&await qe.cancelTask(ke)}),pn=(k=Se.TemplateOutputsComponent)!=null?k:M.Iy,_n=(te=(Q=(j=At.task)==null?void 0:j.spec.templateInfo)==null?void 0:Q.entity)==null?void 0:te.metadata.name,aa=!(At.cancelled||At.completed);return T.createElement(We.T3,{themeId:"website"},T.createElement(We.h4,{pageTitleOverride:`Run of ${_n}`,title:T.createElement("div",null,"Run of ",T.createElement("code",null,_n)),subtitle:`Task ${ke}`},T.createElement(Be,{cancelEnabled:aa,logsVisible:un,buttonBarVisible:En,onStartOver:xn,onToggleLogs:hn,onToggleButtonBar:kn,taskId:ke})),T.createElement(We.VY,{className:dn.contentWrapper},At.error?T.createElement(be.Z,{paddingBottom:2},T.createElement(We.yu,{error:At.error,titleFormat:"markdown",title:At.error.message})):null,T.createElement(be.Z,{paddingBottom:2},T.createElement(M.Lp,{steps:wt,activeStep:wn,isComplete:At.completed,isError:Boolean(At.error)})),T.createElement(pn,{output:At.output}),En?T.createElement(be.Z,{paddingBottom:2},T.createElement(ee.Z,null,T.createElement(be.Z,{padding:2},T.createElement("div",{className:dn.buttonBar},T.createElement(oe.Z,{className:dn.cancelButton,disabled:!aa||Rn!=="not-executed",onClick:On,"data-testid":"cancel-button"},"Cancel"),T.createElement(oe.Z,{className:dn.logsVisibilityButton,color:"primary",variant:"outlined",onClick:()=>hn(!un)},un?"Hide Logs":"Show Logs"),T.createElement(oe.Z,{variant:"contained",color:"primary",disabled:aa,onClick:xn},"Start Over"))))):null,un?T.createElement(be.Z,{paddingBottom:2,height:"100%"},T.createElement(ee.Z,{style:{height:"100%"}},T.createElement(be.Z,{padding:2,height:"100%"},T.createElement(M.v9,{logs:At.stepLogs})))):null))}},31734:function($n,qt){var e,o,m;/** @license
* eventsource.js
* Available under MIT License (MIT)
* https://github.com/Yaffle/EventSource/
*/(function(p){"use strict";var z=p.setTimeout,B=p.clearTimeout,i=p.XMLHttpRequest,$=p.XDomainRequest,Qe=p.ActiveXObject,Ne=p.EventSource,a=p.document,xe=p.Promise,Te=p.fetch,ie=p.Response,G=p.TextDecoder,Ge=p.TextEncoder,ge=p.AbortController;if(typeof window!="undefined"&&typeof a!="undefined"&&!("readyState"in a)&&a.body==null&&(a.readyState="loading",window.addEventListener("load",function(D){a.readyState="complete"},!1)),i==null&&Qe!=null&&(i=function(){return new Qe("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(D){function U(){}return U.prototype=D,new U}),Date.now||(Date.now=function(){return new Date().getTime()}),ge==null){var be=Te;Te=function(D,U){var O=U.signal;return be(D,{headers:U.headers,credentials:U.credentials,cache:U.cache}).then(function(M){var ne=M.body.getReader();return O._reader=ne,O._aborted&&O._reader.cancel(),{status:M.status,statusText:M.statusText,headers:M.headers,body:{getReader:function(){return ne}}}})},ge=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function re(){this.bitsNeeded=0,this.codePoint=0}re.prototype.decode=function(D){function U(Mt,rn,Wt){if(Wt===1)return Mt>=128>>rn&&Mt<<rn<=2047;if(Wt===2)return Mt>=2048>>rn&&Mt<<rn<=55295||Mt>=57344>>rn&&Mt<<rn<=65535;if(Wt===3)return Mt>=65536>>rn&&Mt<<rn<=1114111;throw new Error}function O(Mt,rn){if(Mt===6*1)return rn>>6>15?3:rn>31?2:1;if(Mt===6*2)return rn>15?3:2;if(Mt===6*3)return 3;throw new Error}for(var M=65533,ne="",he=this.bitsNeeded,ze=this.codePoint,Ct=0;Ct<D.length;Ct+=1){var Ye=D[Ct];he!==0&&(Ye<128||Ye>191||!U(ze<<6|Ye&63,he-6,O(he,ze)))&&(he=0,ze=M,ne+=String.fromCharCode(ze)),he===0?(Ye>=0&&Ye<=127?(he=0,ze=Ye):Ye>=192&&Ye<=223?(he=6*1,ze=Ye&31):Ye>=224&&Ye<=239?(he=6*2,ze=Ye&15):Ye>=240&&Ye<=247?(he=6*3,ze=Ye&7):(he=0,ze=M),he!==0&&!U(ze,he,O(he,ze))&&(he=0,ze=M)):(he-=6,ze=ze<<6|Ye&63),he===0&&(ze<=65535?ne+=String.fromCharCode(ze):(ne+=String.fromCharCode(55296+(ze-65535-1>>10)),ne+=String.fromCharCode(56320+(ze-65535-1&1023))))}return this.bitsNeeded=he,this.codePoint=ze,ne};var Oe=function(){try{return new G().decode(new Ge().encode("test"),{stream:!0})==="test"}catch(D){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+D)}return!1};(G==null||Ge==null||!Oe())&&(G=re);var I=function(){};function c(D){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=I,this.onload=I,this.onerror=I,this.onreadystatechange=I,this._contentType="",this._xhr=D,this._sendTimeout=0,this._abort=I}c.prototype.open=function(D,U){this._abort(!0);var O=this,M=this._xhr,ne=1,he=0;this._abort=function(Wt){O._sendTimeout!==0&&(B(O._sendTimeout),O._sendTimeout=0),(ne===1||ne===2||ne===3)&&(ne=4,M.onload=I,M.onerror=I,M.onabort=I,M.onprogress=I,M.onreadystatechange=I,M.abort(),he!==0&&(B(he),he=0),Wt||(O.readyState=4,O.onabort(null),O.onreadystatechange())),ne=0};var ze=function(){if(ne===1){var Wt=0,ft="",we=void 0;if("contentType"in M)Wt=200,ft="OK",we=M.contentType;else try{Wt=M.status,ft=M.statusText,we=M.getResponseHeader("Content-Type")}catch{Wt=0,ft="",we=void 0}Wt!==0&&(ne=2,O.readyState=2,O.status=Wt,O.statusText=ft,O._contentType=we,O.onreadystatechange())}},Ct=function(){if(ze(),ne===2||ne===3){ne=3;var Wt="";try{Wt=M.responseText}catch{}O.readyState=3,O.responseText=Wt,O.onprogress()}},Ye=function(Wt,ft){if((ft==null||ft.preventDefault==null)&&(ft={preventDefault:I}),Ct(),ne===1||ne===2||ne===3){if(ne=4,he!==0&&(B(he),he=0),O.readyState=4,Wt==="load")O.onload(ft);else if(Wt==="error")O.onerror(ft);else if(Wt==="abort")O.onabort(ft);else throw new TypeError;O.onreadystatechange()}},Mt=function(Wt){M!=null&&(M.readyState===4?(!("onload"in M)||!("onerror"in M)||!("onabort"in M))&&Ye(M.responseText===""?"error":"load",Wt):M.readyState===3?"onprogress"in M||Ct():M.readyState===2&&ze())},rn=function(){he=z(function(){rn()},500),M.readyState===3&&Ct()};"onload"in M&&(M.onload=function(Wt){Ye("load",Wt)}),"onerror"in M&&(M.onerror=function(Wt){Ye("error",Wt)}),"onabort"in M&&(M.onabort=function(Wt){Ye("abort",Wt)}),"onprogress"in M&&(M.onprogress=Ct),"onreadystatechange"in M&&(M.onreadystatechange=function(Wt){Mt(Wt)}),("contentType"in M||!("ontimeout"in i.prototype))&&(U+=(U.indexOf("?")===-1?"?":"&")+"padding=true"),M.open(D,U,!0),"readyState"in M&&(he=z(function(){rn()},0))},c.prototype.abort=function(){this._abort(!1)},c.prototype.getResponseHeader=function(D){return this._contentType},c.prototype.setRequestHeader=function(D,U){var O=this._xhr;"setRequestHeader"in O&&O.setRequestHeader(D,U)},c.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},c.prototype.send=function(){if((!("ontimeout"in i.prototype)||!("sendAsBinary"in i.prototype)&&!("mozAnon"in i.prototype))&&a!=null&&a.readyState!=null&&a.readyState!=="complete"){var D=this;D._sendTimeout=z(function(){D._sendTimeout=0,D.send()},4);return}var U=this._xhr;"withCredentials"in U&&(U.withCredentials=this.withCredentials);try{U.send(void 0)}catch(O){throw O}};function R(D){return D.replace(/[A-Z]/g,function(U){return String.fromCharCode(U.charCodeAt(0)+32)})}function _(D){for(var U=Object.create(null),O=D.split(`\r
`),M=0;M<O.length;M+=1){var ne=O[M],he=ne.split(": "),ze=he.shift(),Ct=he.join(": ");U[R(ze)]=Ct}this._map=U}_.prototype.get=function(D){return this._map[R(D)]},i!=null&&i.HEADERS_RECEIVED==null&&(i.HEADERS_RECEIVED=2);function b(){}b.prototype.open=function(D,U,O,M,ne,he,ze){D.open("GET",ne);var Ct=0;D.onprogress=function(){var Mt=D.responseText,rn=Mt.slice(Ct);Ct+=rn.length,O(rn)},D.onerror=function(Mt){Mt.preventDefault(),M(new Error("NetworkError"))},D.onload=function(){M(null)},D.onabort=function(){M(null)},D.onreadystatechange=function(){if(D.readyState===i.HEADERS_RECEIVED){var Mt=D.status,rn=D.statusText,Wt=D.getResponseHeader("Content-Type"),ft=D.getAllResponseHeaders();U(Mt,rn,Wt,new _(ft))}},D.withCredentials=he;for(var Ye in ze)Object.prototype.hasOwnProperty.call(ze,Ye)&&D.setRequestHeader(Ye,ze[Ye]);return D.send(),D};function N(D){this._headers=D}N.prototype.get=function(D){return this._headers.get(D)};function _e(){}_e.prototype.open=function(D,U,O,M,ne,he,ze){var Ct=null,Ye=new ge,Mt=Ye.signal,rn=new G;return Te(ne,{headers:ze,credentials:he?"include":"same-origin",signal:Mt,cache:"no-store"}).then(function(Wt){return Ct=Wt.body.getReader(),U(Wt.status,Wt.statusText,Wt.headers.get("Content-Type"),new N(Wt.headers)),new xe(function(ft,we){var rt=function(){Ct.read().then(function(xt){if(xt.done)ft(void 0);else{var kt=rn.decode(xt.value,{stream:!0});O(kt),rt()}}).catch(function(xt){we(xt)})};rt()})}).catch(function(Wt){if(Wt.name!=="AbortError")return Wt}).then(function(Wt){M(Wt)}),{abort:function(){Ct!=null&&Ct.cancel(),Ye.abort()}}};function fe(){this._listeners=Object.create(null)}function ve(D){z(function(){throw D},0)}fe.prototype.dispatchEvent=function(D){D.target=this;var U=this._listeners[D.type];if(U!=null)for(var O=U.length,M=0;M<O;M+=1){var ne=U[M];try{typeof ne.handleEvent=="function"?ne.handleEvent(D):ne.call(this,D)}catch(he){ve(he)}}},fe.prototype.addEventListener=function(D,U){D=String(D);var O=this._listeners,M=O[D];M==null&&(M=[],O[D]=M);for(var ne=!1,he=0;he<M.length;he+=1)M[he]===U&&(ne=!0);ne||M.push(U)},fe.prototype.removeEventListener=function(D,U){D=String(D);var O=this._listeners,M=O[D];if(M!=null){for(var ne=[],he=0;he<M.length;he+=1)M[he]!==U&&ne.push(M[he]);ne.length===0?delete O[D]:O[D]=ne}};function Y(D){this.type=D,this.target=void 0}function v(D,U){Y.call(this,D),this.data=U.data,this.lastEventId=U.lastEventId}v.prototype=Object.create(Y.prototype);function ee(D,U){Y.call(this,D),this.status=U.status,this.statusText=U.statusText,this.headers=U.headers}ee.prototype=Object.create(Y.prototype);function oe(D,U){Y.call(this,D),this.error=U.error}oe.prototype=Object.create(Y.prototype);var Rt=-1,T=0,sn=1,me=2,Zt=-1,yt=0,mt=1,It=2,We=3,Pt=/^text\/event\-stream(;.*)?$/i,ot=1e3,zt=18e6,Tt=function(D,U){var O=D==null?U:parseInt(D,10);return O!==O&&(O=U),Ft(O)},Ft=function(D){return Math.min(Math.max(D,ot),zt)},ct=function(D,U,O){try{typeof U=="function"&&U.call(D,O)}catch(M){ve(M)}};function ht(D,U){fe.call(this),U=U||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,St(this,D,U)}function $t(){return i!=null&&"withCredentials"in i.prototype||$==null?new i:new $}var an=Te!=null&&ie!=null&&"body"in ie.prototype;function St(D,U,O){U=String(U);var M=Boolean(O.withCredentials),ne=O.lastEventIdQueryParameterName||"lastEventId",he=Ft(1e3),ze=Tt(O.heartbeatTimeout,45e3),Ct="",Ye=he,Mt=!1,rn=0,Wt=O.headers||{},ft=O.Transport,we=an&&ft==null?void 0:new c(ft!=null?new ft:$t()),rt=ft!=null&&typeof ft!="string"?new ft:we==null?new _e:new b,xt=void 0,kt=0,le=Rt,Ue="",Lt="",Yt="",se="",Ze=yt,pe=0,Me=0,nt=function(Le,P,W,J){if(le===T)if(Le===200&&W!=null&&Pt.test(W)){le=sn,Mt=Date.now(),Ye=he,D.readyState=sn;var it=new ee("open",{status:Le,statusText:P,headers:J});D.dispatchEvent(it),ct(D,D.onopen,it)}else{var ut="";Le!==200?(P&&(P=P.replace(/\s+/g," ")),ut="EventSource's response has a status "+Le+" "+P+" that is not 200. Aborting the connection."):ut="EventSource's response has a Content-Type specifying an unsupported type: "+(W==null?"-":W.replace(/\s+/g," "))+". Aborting the connection.",tn();var it=new ee("error",{status:Le,statusText:P,headers:J});D.dispatchEvent(it),ct(D,D.onerror,it),console.error(ut)}},pt=function(Le){if(le===sn){for(var P=-1,W=0;W<Le.length;W+=1){var J=Le.charCodeAt(W);(J===`
`.charCodeAt(0)||J==="\r".charCodeAt(0))&&(P=W)}var it=(P!==-1?se:"")+Le.slice(0,P+1);se=(P===-1?se:"")+Le.slice(P+1),Le!==""&&(Mt=Date.now(),rn+=Le.length);for(var ut=0;ut<it.length;ut+=1){var J=it.charCodeAt(ut);if(Ze===Zt&&J===`
`.charCodeAt(0))Ze=yt;else if(Ze===Zt&&(Ze=yt),J==="\r".charCodeAt(0)||J===`
`.charCodeAt(0)){if(Ze!==yt){Ze===mt&&(Me=ut+1);var Et=it.slice(pe,Me-1),Jt=it.slice(Me+(Me<ut&&it.charCodeAt(Me)===" ".charCodeAt(0)?1:0),ut);Et==="data"?(Ue+=`
`,Ue+=Jt):Et==="id"?Lt=Jt:Et==="event"?Yt=Jt:Et==="retry"?(he=Tt(Jt,he),Ye=he):Et==="heartbeatTimeout"&&(ze=Tt(Jt,ze),kt!==0&&(B(kt),kt=z(function(){Ce()},ze)))}if(Ze===yt){if(Ue!==""){Ct=Lt,Yt===""&&(Yt="message");var mn=new v(Yt,{data:Ue.slice(1),lastEventId:Lt});if(D.dispatchEvent(mn),Yt==="open"?ct(D,D.onopen,mn):Yt==="message"?ct(D,D.onmessage,mn):Yt==="error"&&ct(D,D.onerror,mn),le===me)return}Ue="",Yt=""}Ze=J==="\r".charCodeAt(0)?Zt:yt}else Ze===yt&&(pe=ut,Ze=mt),Ze===mt?J===":".charCodeAt(0)&&(Me=ut+1,Ze=It):Ze===It&&(Ze=We)}}},Bt=function(Le){if(le===sn||le===T){le=Rt,kt!==0&&(B(kt),kt=0),kt=z(function(){Ce()},Ye),Ye=Ft(Math.min(he*16,Ye*2)),D.readyState=T;var P=new oe("error",{error:Le});D.dispatchEvent(P),ct(D,D.onerror,P),Le!=null&&console.error(Le)}},tn=function(){le=me,xt!=null&&(xt.abort(),xt=void 0),kt!==0&&(B(kt),kt=0),D.readyState=me},Ce=function(){if(kt=0,le!==Rt){if(!Mt&&xt!=null)Bt(new Error("No activity within "+ze+" milliseconds. "+(le===T?"No response received.":rn+" chars received.")+" Reconnecting.")),xt!=null&&(xt.abort(),xt=void 0);else{var Le=Math.max((Mt||Date.now())+ze-Date.now(),1);Mt=!1,kt=z(function(){Ce()},Le)}return}Mt=!1,rn=0,kt=z(function(){Ce()},ze),le=T,Ue="",Yt="",Lt=Ct,se="",pe=0,Me=0,Ze=yt;var P=U;if(U.slice(0,5)!=="data:"&&U.slice(0,5)!=="blob:"&&Ct!==""){var W=U.indexOf("?");P=W===-1?U:U.slice(0,W+1)+U.slice(W+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(Jt,mn){return mn===ne?"":Jt}),P+=(U.indexOf("?")===-1?"?":"&")+ne+"="+encodeURIComponent(Ct)}var J=D.withCredentials,it={};it.Accept="text/event-stream";var ut=D.headers;if(ut!=null)for(var Et in ut)Object.prototype.hasOwnProperty.call(ut,Et)&&(it[Et]=ut[Et]);try{xt=rt.open(we,nt,pt,Bt,P,J,it)}catch(Jt){throw tn(),Jt}};D.url=U,D.readyState=T,D.withCredentials=M,D.headers=Wt,D._close=tn,Ce()}ht.prototype=Object.create(fe.prototype),ht.prototype.CONNECTING=T,ht.prototype.OPEN=sn,ht.prototype.CLOSED=me,ht.prototype.close=function(){this._close()},ht.CONNECTING=T,ht.OPEN=sn,ht.CLOSED=me,ht.prototype.withCredentials=void 0;var Gt=Ne;i!=null&&(Ne==null||!("withCredentials"in Ne.prototype))&&(Gt=ht),function(D){if(typeof $n.exports=="object"){var U=D(qt);U!==void 0&&($n.exports=U)}else o=[qt],e=D,m=typeof e=="function"?e.apply(qt,o):e,m!==void 0&&($n.exports=m)}(function(D){D.EventSourcePolyfill=ht,D.NativeEventSource=Ne,D.EventSource=Gt})})(typeof globalThis=="undefined"?typeof window!="undefined"?window:typeof self!="undefined"?self:this:globalThis)},42054:($n,qt,e)=>{"use strict";e.d(qt,{S:()=>I,b:()=>Te,c:()=>re});var o=e(2784),m=e(30705),p=e(79692),z=e(86136),B=e(49378),i=e(95544),$=e(38402),Qe=e(11776),Ne=e(90436),a=e(49558);const xe=(0,p.Z)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),Te=c=>{const{text:R,preTag:_,postTag:b}=c,N=xe(),_e=(0,o.useMemo)(()=>R.split(new RegExp(`(${_}.+?${b})`)),[b,_,R]);return o.createElement(o.Fragment,null,_e.map((fe,ve)=>fe.includes(_)?o.createElement("mark",{className:N.highlight,key:ve},fe.replace(new RegExp(`${_}|${b}`,"g"),"")):fe))},ie=({result:c,highlight:R,icon:_,secondaryAction:b,lineClamp:N=5})=>c?o.createElement(o.Fragment,null,_&&o.createElement(z.Z,null,_),o.createElement(B.Z,{primaryTypographyProps:{variant:"h6"},primary:o.createElement(a.rU,{noTrack:!0,to:c.location},R!=null&&R.fields.title?o.createElement(Te,{text:(R==null?void 0:R.fields.title)||"",preTag:(R==null?void 0:R.preTag)||"",postTag:(R==null?void 0:R.postTag)||""}):c.title),secondary:o.createElement(Ne.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:N,overflow:"hidden"},color:"textSecondary",variant:"body2"},R!=null&&R.fields.text?o.createElement(Te,{text:R.fields.text,preTag:R.preTag,postTag:R.postTag}):c.text)}),b&&o.createElement(i.Z,{alignItems:"flex-end"},b)):null,G=c=>o.createElement(m.fC,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},o.createElement(ie,{...c})),Ge="search.results.list.items.extensions.v1",ge=(c,R)=>{for(const _ of c){if(!(0,o.isValidElement)(_))continue;const b=(0,m.IY)(_,Ge);if(b!=null&&b(R))return(0,o.cloneElement)(_,{rank:R.rank,highlight:R.highlight,result:R.document,..._.props})}return null},be=c=>{const{rank:R,result:_,noTrack:b,children:N,alignItems:_e="flex-start",...fe}=c,ve=(0,m.z$)(),Y=(0,o.useCallback)(()=>{b||_&&ve.captureEvent("discover",_.title,{attributes:{to:_.location},value:R})},[R,_,b,ve]);return o.createElement($.Z,{divider:!0,alignItems:_e,onClickCapture:Y,...fe},N)},re=c=>{const{name:R,component:_,predicate:b=()=>!0}=c;return(0,m.YO)({name:R,component:{lazy:()=>_().then(N=>_e=>o.createElement(be,{rank:_e.rank,result:_e.result,noTrack:_e.noTrack},(0,o.createElement)(N,_e)))},data:{[Ge]:b}})},Oe=c=>{const R=(0,m.vJ)(c,_=>_.selectByComponentData({key:Ge}).getElements(),[c]);return(0,o.useCallback)((_,b)=>{const N=ge(R,_);return o.createElement(o.Fragment,{key:b},N!=null?N:o.createElement(be,{rank:_.rank,result:_.document},o.createElement(G,{rank:_.rank,highlight:_.highlight,result:_.document})))},[R])},I=c=>{const{results:R,children:_,...b}=c,N=Oe(_);return o.createElement(Qe.Z,{...b},R.map(N))}},92573:($n,qt,e)=>{"use strict";e.d(qt,{E1:()=>ct,GQ:()=>tn,Nd:()=>zt,Rx:()=>mt,US:()=>Ft,ay:()=>ze,gK:()=>me,lt:()=>xt,qO:()=>St,wy:()=>rn});var o=e(57032),m=e(30705),p=e(42054),z=e(50581),B=e(61837),i=e(86619),$=e(79692),Qe=e(4614),Ne=e(7089),a=e(42494),xe=e(84899),Te=e(5806),ie=e(21324),G=e(56939),Ge=e(73698),ge=e(12231),be=e(90436),re=e(28899),Oe=e(77277),I=e(21853),c=e(2784),R=e(48760),_=e(76635),b=e.n(_),N=e(64279),_e=e(1849),fe=e(18473),ve=e(88013),Y=e(69294),v=e(49558),ee=e(19126),oe=e.n(ee),Rt=e(27742),T=e(35352),sn=e(48834).Buffer;const me=(0,o.c)({id:"plugin.search.queryservice"});class Zt{constructor(Le){this.mockedResults=Le}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const yt=(0,fe.CT)("search-context"),mt=()=>{const Ce=(0,c.useContext)(yt);if(!Ce)throw new Error("useSearch must be used within a SearchContextProvider");const Le=Ce.atVersion(1);if(!Le)throw new Error("No SearchContext v1 found");return Le},It=()=>(0,c.useContext)(yt)!==void 0,We={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},Pt=(Ce=We)=>{var Le,P,W,J;const it=(0,o.u)(me),ut=(0,m.z$)(),[Et,Jt]=(0,c.useState)(Ce.term),[mn,An]=(0,c.useState)(Ce.types),[vn,Vn]=(0,c.useState)(Ce.filters),[Mn,Zn]=(0,c.useState)(Ce.pageLimit),[A,F]=(0,c.useState)(Ce.pageCursor),Pe=(0,_e.Z)(Et),gt=(0,_e.Z)(vn),Ot=(0,N.default)(async()=>{var nn,ln;const on=await it.query({term:Et,types:mn,filters:vn,pageLimit:Mn,pageCursor:A});return Et&&ut.captureEvent("search",Et,{value:(ln=(nn=Ot.value)==null?void 0:nn.numberOfResults)!=null?ln:void 0}),on},[Et,mn,vn,Mn,A]),Vt=!Ot.loading&&!Ot.error&&((Le=Ot.value)==null?void 0:Le.nextPageCursor),ae=!Ot.loading&&!Ot.error&&((P=Ot.value)==null?void 0:P.previousPageCursor),Ae=(0,c.useCallback)(()=>{var nn;F((nn=Ot.value)==null?void 0:nn.nextPageCursor)},[(W=Ot.value)==null?void 0:W.nextPageCursor]),je=(0,c.useCallback)(()=>{var nn;F((nn=Ot.value)==null?void 0:nn.previousPageCursor)},[(J=Ot.value)==null?void 0:J.previousPageCursor]);return(0,c.useEffect)(()=>{Pe!==void 0&&Et!==Pe&&F(void 0)},[Et,Pe,F]),(0,c.useEffect)(()=>{gt!==void 0&&!(0,_.isEqual)(vn,gt)&&F(void 0)},[vn,gt,F]),{result:Ot,term:Et,setTerm:Jt,types:mn,setTypes:An,filters:vn,setFilters:Vn,pageLimit:Mn,setPageLimit:Zn,pageCursor:A,setPageCursor:F,fetchNextPage:Vt?Ae:void 0,fetchPreviousPage:ae?je:void 0}},ot=Ce=>{const{initialState:Le,children:P}=Ce,W=Pt(Le);return c.createElement(m.fC,{attributes:{searchTypes:W.types.sort().join(",")}},c.createElement(yt.Provider,{value:(0,fe.EI)({1:W})},P))},zt=Ce=>{const{initialState:Le,inheritParentContextIfAvailable:P,children:W}=Ce,J=It(),it=(0,o.u)(o.p),ut=Le!=null?Le:{},Et=it.has("search.query.pageLimit")?{pageLimit:it.getNumber("search.query.pageLimit")}:{},Jt={...We,...ut,...Et};return J&&P?c.createElement(c.Fragment,null,W):c.createElement(ot,{initialState:Jt},W)};function Tt(Ce){return(0,c.forwardRef)((Le,P)=>c.createElement(zt,{inheritParentContextIfAvailable:!0},c.createElement(Ce,{...Le,ref:P})))}const Ft=Tt((0,c.forwardRef)((Ce,Le)=>{const{onChange:P,onKeyDown:W=()=>{},onClear:J=()=>{},onSubmit:it=()=>{},debounceTime:ut=200,clearButton:Et=!0,fullWidth:Jt=!0,value:mn,label:An,placeholder:vn,inputProps:Vn={},InputProps:Mn={},endAdornment:Zn,...A}=Ce,F=(0,o.u)(o.p),[Pe,gt]=(0,c.useState)(""),Ot=(0,c.useRef)("");(0,c.useEffect)(()=>{gt(on=>on===Ot.current?String(mn):on)},[mn,Ot]),(0,R.Z)(()=>{Ot.current=Pe,P(Pe)},ut,[Pe]);const Vt=(0,c.useCallback)(on=>{gt(on.target.value)},[gt]),ae=(0,c.useCallback)(on=>{W&&W(on),it&&on.key==="Enter"&&it()},[W,it]),Ae=(0,c.useCallback)(()=>{Ot.current="",P(""),gt(""),J&&J()},[P,J]),je=An?void 0:"Search",Ht=vn!=null?vn:`Search in ${F.getOptionalString("app.title")||"Backstage"}`,nn=c.createElement(z.Z,{position:"start"},c.createElement(B.Z,{"aria-label":"Query",size:"small",disabled:!0},c.createElement(I.Z,null))),ln=c.createElement(z.Z,{position:"end"},c.createElement(Oe.Z,{"aria-label":"Clear",size:"small",onClick:Ae,onKeyDown:on=>{on.key==="Enter"&&on.stopPropagation()}},"Clear"));return c.createElement(i.Z,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:Le,value:Pe,label:An,placeholder:Ht,InputProps:{startAdornment:nn,endAdornment:Et?ln:Zn,...Mn},inputProps:{"aria-label":je,...Vn},fullWidth:Jt,onChange:Vt,onKeyDown:ae,...A})})),ct=Tt((0,c.forwardRef)((Ce,Le)=>{const{value:P="",onChange:W,...J}=Ce,{term:it,setTerm:ut}=mt();(0,c.useEffect)(()=>{P&&ut(String(P))},[P,ut]);const Et=(0,c.useCallback)(Jt=>{W?W(Jt):ut(Jt)},[W,ut]);return c.createElement(m.fC,{attributes:{pluginId:"search",extension:"SearchBar"}},c.createElement(Ft,{...J,ref:Le,value:it,onChange:Et}))})),ht=(0,$.Z)(Ce=>({loading:{right:Ce.spacing(1),position:"absolute"}})),$t=Ce=>Le=>c.createElement(zt,{inheritParentContextIfAvailable:!0},c.createElement(Ce,{...Le})),an=()=>{const Ce=ht();return c.createElement(Qe.Z,{className:Ce.loading,"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20})},St=$t(function(Le){const{loading:P,value:W,onChange:J=()=>{},options:it=[],getOptionLabel:ut=Ot=>String(Ot),inputPlaceholder:Et,inputDebounceTime:Jt,freeSolo:mn=!0,fullWidth:An=!0,clearOnBlur:vn=!1,"data-testid":Vn="search-autocomplete",...Mn}=Le,{setTerm:Zn}=mt(),A=(0,c.useCallback)(Ot=>Ot?typeof Ot=="string"?Ot:ut(Ot):"",[ut]),F=(0,c.useMemo)(()=>A(W),[W,A]),Pe=(0,c.useCallback)((Ot,Vt,ae,Ae)=>{Zn(A(Vt)),J(Ot,Vt,ae,Ae)},[A,Zn,J]),gt=(0,c.useCallback)(({InputProps:{ref:Ot,className:Vt,endAdornment:ae},InputLabelProps:Ae,...je})=>c.createElement(ct,{...je,ref:Ot,clearButton:!1,value:F,placeholder:Et,debounceTime:Jt,endAdornment:P?c.createElement(an,null):ae,InputProps:{className:Vt}}),[P,F,Et,Jt]);return c.createElement(ve.ZP,{...Mn,"data-testid":Vn,value:W,onChange:Pe,options:it,getOptionLabel:ut,renderInput:gt,freeSolo:mn,fullWidth:An,clearOnBlur:vn})}),Gt=Ce=>{const{icon:Le,primaryText:P,primaryTextTypographyProps:W,secondaryText:J,secondaryTextTypographyProps:it,disableTextTypography:ut}=Ce;return React.createElement(React.Fragment,null,Le?React.createElement(ListItemIcon,null,Le):null,React.createElement(ListItemText,{primary:P,primaryTypographyProps:W,secondary:J,secondaryTypographyProps:it,disableTypography:ut}))},D=(Ce,Le,P=[],W=250)=>{const J=(0,c.useRef)({}),it=Ce||(()=>Promise.resolve([])),[ut,Et]=(0,Y.default)(it,[Le],{loading:!0});if((0,R.Z)(()=>{J.current[Le]===void 0&&(J.current[Le]=Et(Le).then(mn=>(J.current[Le]=mn,mn)))},W,[Et,Le]),P.length)return{loading:!1,value:P};const Jt=J.current[Le];return Array.isArray(Jt)?{loading:!1,value:Jt}:ut},U=(Ce,Le)=>{const{setFilters:P}=mt();(0,c.useEffect)(()=>{Le&&[Le].flat().length>0&&P(W=>({...W,[Ce]:Le}))},[])},O=Ce=>{const{className:Le,defaultValue:P,name:W,values:J,valuesDebounceMs:it,label:ut,filterSelectedOptions:Et,limitTags:Jt,multiple:mn}=Ce,[An,vn]=(0,c.useState)("");U(W,P);const Vn=typeof J=="function"?J:void 0,Mn=typeof J=="function"?void 0:J,{value:Zn,loading:A}=D(Vn,An,Mn,it),{filters:F,setFilters:Pe}=mt(),gt=F[W]||(mn?[]:null),Ot=(Ae,je)=>{Pe(Ht=>{const{[W]:nn,...ln}=Ht;return je?{...ln,[W]:je}:{...ln}})},Vt=Ae=>c.createElement(i.Z,{...Ae,name:"search",variant:"outlined",label:ut,fullWidth:!0}),ae=(Ae,je)=>Ae.map((Ht,nn)=>c.createElement(Ne.Z,{label:Ht,color:"primary",...je({index:nn})}));return c.createElement(ve.ZP,{filterSelectedOptions:Et,limitTags:Jt,multiple:mn,className:Le,id:`${mn?"multi-":""}select-filter-${W}--select`,options:Zn||[],loading:A,value:gt,onChange:Ot,onInputChange:(Ae,je)=>vn(je),renderInput:Vt,renderTags:ae})},M=(0,$.Z)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),ne=Ce=>{const{className:Le,defaultValue:P,label:W,name:J,values:it=[],valuesDebounceMs:ut}=Ce,Et=M(),{filters:Jt,setFilters:mn}=mt();U(J,P);const An=typeof it=="function"?it:void 0,vn=typeof it=="function"?void 0:it,{value:Vn=[],loading:Mn}=D(An,"",vn,ut),Zn=A=>{const{target:{value:F,checked:Pe}}=A;mn(gt=>{const{[J]:Ot,...Vt}=gt,ae=(Ot||[]).filter(je=>je!==F),Ae=Pe?[...ae,F]:ae;return Ae.length?{...Vt,[J]:Ae}:Vt})};return c.createElement(a.Z,{className:Le,disabled:Mn,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},W?c.createElement(xe.Z,{className:Et.label},W):null,Vn.map(A=>{var F;return c.createElement(Te.Z,{key:A,classes:{root:Et.checkboxWrapper,label:Et.textWrapper},label:A,control:c.createElement(ie.Z,{color:"primary",inputProps:{"aria-labelledby":A},value:A,name:A,onChange:Zn,checked:((F=Jt[J])!=null?F:[]).includes(A)})})}))},he=Ce=>{const{className:Le,defaultValue:P,label:W,name:J,values:it,valuesDebounceMs:ut}=Ce,Et=M();U(J,P);const Jt=typeof it=="function"?it:void 0,mn=typeof it=="function"?void 0:it,{value:An=[],loading:vn}=D(Jt,"",mn,ut),{filters:Vn,setFilters:Mn}=mt(),Zn=A=>{const{target:{value:F}}=A;Mn(Pe=>{const{[J]:gt,...Ot}=Pe;return F?{...Ot,[J]:F}:Ot})};return c.createElement(a.Z,{disabled:vn,className:Le,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},W?c.createElement(G.Z,{className:Et.label,margin:"dense"},W):null,c.createElement(Ge.Z,{variant:"outlined",value:Vn[J]||"",onChange:Zn},c.createElement(ge.Z,{value:""},c.createElement("em",null,"All")),An.map(A=>c.createElement(ge.Z,{key:A,value:A},c.createElement(be.Z,{variant:"inherit",noWrap:!0},A)))))},ze=Ce=>{const{component:Le,...P}=Ce;return c.createElement(Le,{...P})};ze.Checkbox=Ce=>c.createElement(ze,{...Ce,component:ne}),ze.Select=Ce=>c.createElement(ze,{...Ce,component:he}),ze.Autocomplete=Ce=>c.createElement(ze,{...Ce,component:O});const Ct=Ce=>sn.from(Ce.toString(),"utf-8").toString("base64"),Ye=Ce=>Ce?Number(sn.from(Ce,"base64").toString("utf-8")):0,Mt=Ce=>{const{total:Le=-1,cursor:P,hasNextPage:W,onCursorChange:J,limit:it=25,limitLabel:ut="Results per page:",limitText:Et=({from:Zn,to:A})=>Le>0?`of ${Le}`:`${Zn}-${A}`,limitOptions:Jt,onLimitChange:mn,...An}=Ce,vn=(0,c.useMemo)(()=>Ye(P),[P]),Vn=(0,c.useCallback)((Zn,A)=>{J==null||J(Ct(A))},[J]),Mn=(0,c.useCallback)(Zn=>{const A=Zn.target.value;mn==null||mn(parseInt(A,10))},[mn]);return c.createElement(re.Z,{...An,component:"div",count:Le,page:vn,nextIconButtonProps:{...W!==void 0&&{disabled:!W}},onPageChange:Vn,rowsPerPage:it,labelRowsPerPage:ut,labelDisplayedRows:Et,rowsPerPageOptions:Jt,onRowsPerPageChange:Mn})},rn=Ce=>{const{pageLimit:Le,setPageLimit:P,pageCursor:W,setPageCursor:J,fetchNextPage:it}=mt(),ut=(0,c.useCallback)(Et=>{P(Et),J(void 0)},[P,J]);return c.createElement(Mt,{...Ce,hasNextPage:!!it,limit:Le,onLimitChange:ut,cursor:W,onCursorChange:J})},Wt=Ce=>{const{children:Le}=Ce,P=mt(),{result:W,...J}=P;return Le(W,J)},ft=Ce=>{const{query:Le,children:P}=Ce,W=(0,o.u)(me),J=(0,N.default)(()=>{const{term:it="",types:ut=[],filters:Et={},...Jt}=Le;return W.query({...Jt,term:it,types:ut,filters:Et})},[Le]);return P(J,Le)},we=Ce=>{const{query:Le,children:P}=Ce;return Le?c.createElement(ft,{query:Le},P):c.createElement(Wt,null,P)},rt=Ce=>{const{query:Le,children:P,noResultsComponent:W=c.createElement(v.ub,{missing:"data",title:"Sorry, no results were found"}),...J}=Ce;return c.createElement(we,{query:Le},({loading:it,error:ut,value:Et})=>it?c.createElement(v.Ex,null):ut?c.createElement(v.Gk,{title:"Error encountered while fetching search results",error:ut}):Et!=null&&Et.results.length?(0,_.isFunction)(P)?P(Et):c.createElement(p.S,{...J,results:Et.results},P):W)},xt=Ce=>c.createElement(m.fC,{attributes:{pluginId:"search",extension:"SearchResult"}},c.createElement(rt,{...Ce})),kt=Ce=>{const{error:Le,loading:P,resultItems:W,renderResultItem:J=Jt=>React.createElement(HigherOrderDefaultResultListItem,{key:Jt.document.location,result:Jt.document}),disableRenderingWithNoResults:it,noResultsComponent:ut=it?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...Et}=Ce;return P?React.createElement(Progress,null):Le?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:Le}):W!=null&&W.length?React.createElement(List,{...Et},W.map(J)):React.createElement(React.Fragment,null,ut)},le=Ce=>{const{query:Le,renderResultItem:P,children:W,...J}=Ce,it=useSearchResultListItemExtensions(W);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(we,{query:Le},({loading:ut,error:Et,value:Jt})=>React.createElement(kt,{...J,error:Et,loading:ut,resultItems:Jt==null?void 0:Jt.results,renderResultItem:P!=null?P:it})))},Ue=(0,$.Z)(Ce=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:Ce.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:Ce.palette.text.secondary,margin:Ce.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:Ce.palette.text.secondary,margin:Ce.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:Ce.spacing(.5)}})),Lt=Ce=>{const Le=Ue(),{label:P,children:W,...J}=Ce;return React.createElement(Chip,{...J,className:Le.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,P,": ",W)})},Yt=()=>null,se=(0,$.Z)(Ce=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:Ce.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:Ce.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),Ze=Ce=>{const Le=se(),{label:P,value:W="None",onChange:J,onDelete:it}=Ce,ut=useCallback(Et=>{J(Et.target.value)},[J]);return React.createElement(Lt,{label:P,onDelete:it},React.createElement(Typography,{role:"textbox",component:"span",className:Le.root,onChange:ut,contentEditable:!0,suppressContentEditableWarning:!0},W==null?void 0:W.toString()))},pe=(0,$.Z)(Ce=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:Ce.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),Me=Ce=>{const Le=pe(),{label:P,value:W="none",onChange:J,onDelete:it,children:ut}=Ce,Et=useCallback(Jt=>{J(Jt.target.value)},[J]);return React.createElement(Lt,{label:P,onDelete:it},React.createElement(Select,{className:Le.root,value:W,onChange:Et,input:React.createElement(InputBase,null),IconComponent:Yt},React.createElement(MenuItem,{value:"none"},"None"),ut))};function nt(Ce){const Le=Ue(),[P,W]=useState(null),{error:J,loading:it,icon:ut,title:Et,titleProps:Jt={},link:mn=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowRightIcon,{className:Le.listSubheaderLinkIcon})),linkProps:An={},filterOptions:vn,renderFilterOption:Vn=Ae=>React.createElement(MenuItem,{key:String(Ae),value:String(Ae)},String(Ae)),filterFields:Mn,renderFilterField:Zn,resultItems:A,renderResultItem:F=Ae=>React.createElement(HigherOrderDefaultResultListItem,{key:Ae.document.location,result:Ae.document}),disableRenderingWithNoResults:Pe,noResultsComponent:gt=Pe?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...Ot}=Ce,Vt=useCallback(Ae=>{W(Ae.currentTarget)},[]),ae=useCallback(()=>{W(null)},[]);return it?React.createElement(Progress,null):J?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:J}):A!=null&&A.length?React.createElement(List,{...Ot},React.createElement(ListSubheader,{className:Le.listSubheader},ut,React.createElement(Typography,{className:Le.listSubheaderName,component:"strong",...Jt},Et),vn?React.createElement(Chip,{className:Le.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:Vt}):null,vn?React.createElement(Menu,{id:"filters-menu",anchorEl:P,open:Boolean(P),onClose:ae,onClick:ae,keepMounted:!0},vn.map(Vn)):null,Mn==null?void 0:Mn.map(Ae=>{var je;return(je=Zn==null?void 0:Zn(Ae))!=null?je:null}),React.createElement(Link,{className:Le.listSubheaderLink,to:"/search",...An},mn)),A.map(F)):React.createElement(React.Fragment,null,gt)}function pt(Ce){const{query:Le,children:P,renderResultItem:W,linkProps:J={},...it}=Ce,ut=useSearchResultListItemExtensions(P);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(we,{query:Le},({loading:Et,error:Jt,value:mn},{term:An,types:vn,pageCursor:Vn,filters:Mn={}})=>{const Zn=`/search?${qs.stringify({term:An,types:vn,filters:Mn,pageCursor:Vn,query:An},{arrayFormat:"brackets"})}`;return React.createElement(nt,{...it,error:Jt,loading:Et,linkProps:{to:Zn,...J},filterFields:Object.keys(Mn),resultItems:mn==null?void 0:mn.results,renderResultItem:W!=null?W:ut})}))}const Bt=(0,$.Z)(Ce=>({root:{display:"flex",justifyContent:"space-between",gap:Ce.spacing(2),margin:Ce.spacing(2,0)}})),tn=()=>{const{fetchNextPage:Ce,fetchPreviousPage:Le}=mt(),P=Bt();return!Ce&&!Le?c.createElement(c.Fragment,null):c.createElement("nav",{"aria-label":"pagination navigation",className:P.root},c.createElement(Oe.Z,{"aria-label":"previous page",disabled:!Le,onClick:Le,startIcon:c.createElement(T.Z,null)},"Previous"),c.createElement(Oe.Z,{"aria-label":"next page",disabled:!Ce,onClick:Ce,endIcon:c.createElement(Rt.Z,null)},"Next"))}},81024:($n,qt,e)=>{"use strict";e.d(qt,{S:()=>zt,a:()=>an,b:()=>It,c:()=>We,r:()=>yt});var o=e(32272),m=e(19126),p=e.n(m),z=e(92573),B=e(30705),i=e(57032),$=e(2784),Qe=e(1849),Ne=e(73557),a=e(79692),xe=e(94339),Te=e(32552),ie=e(24579),G=e(27616),Ge=e(8284),ge=e(70660),be=e(11776),re=e(85256),Oe=e(38402),I=e(86136),c=e(49378),R=e(99152),_=e(6487),b=e(42494),N=e(56939),_e=e(73698),fe=e(7089),ve=e(12231),Y=e(21324),v=e(62155),ee=e(38016),oe=e(90548),Rt=e(64279),T=Object.defineProperty,sn=(St,Gt,D)=>Gt in St?T(St,Gt,{enumerable:!0,configurable:!0,writable:!0,value:D}):St[Gt]=D,me=(St,Gt,D)=>(sn(St,typeof Gt!="symbol"?Gt+"":Gt,D),D);class Zt{constructor(Gt){me(this,"discoveryApi"),me(this,"identityApi"),this.discoveryApi=Gt.discoveryApi,this.identityApi=Gt.identityApi}async query(Gt){const{token:D}=await this.identityApi.getCredentials(),U=p().stringify(Gt),O=`${await this.discoveryApi.getBaseUrl("search")}/query?${U}`,M=await fetch(O,{headers:D?{Authorization:`Bearer ${D}`}:{}});if(!M.ok)throw await o.VL.fromResponse(M);return M.json()}}const yt=(0,B.NT)({id:"search"}),mt=(0,B.rx)({id:"search",apis:[(0,B.ni)({api:z.gK,deps:{discoveryApi:i.q,identityApi:i.t},factory:({discoveryApi:St,identityApi:Gt})=>new Zt({discoveryApi:St,identityApi:Gt})})],routes:{root:yt}}),It=mt.provide((0,B.P4)({name:"SearchPage",component:()=>e.e(3509).then(e.bind(e,53509)).then(St=>St.SearchPage),mountPoint:yt})),We=mt.provide((0,B.CO)({name:"SidebarSearchModal",component:{lazy:()=>e.e(8742).then(e.bind(e,38742)).then(St=>St.SidebarSearchModal)}})),Pt=mt.provide((0,B.CO)({name:"HomePageSearchBar",component:{lazy:()=>e.e(8622).then(e.bind(e,8622)).then(St=>St.HomePageSearchBar)}})),ot=()=>{const St=(0,Ne.TH)(),{term:Gt,setTerm:D,types:U,setTypes:O,pageCursor:M,setPageCursor:ne,filters:he,setFilters:ze}=(0,z.Rx)(),Ct=(0,Qe.Z)(St.search);return(0,$.useEffect)(()=>{if(St.search===Ct)return;const Ye=p().parse(St.search.substring(1),{arrayLimit:0})||{};Ye.filters&&ze(Ye.filters),Ye.query&&D(Ye.query),Ye.pageCursor&&ne(Ye.pageCursor),Ye.types&&O(Ye.types)},[Ct,St,D,O,ne,ze]),(0,$.useEffect)(()=>{const Ye=p().stringify({query:Gt,types:U,pageCursor:M,filters:he},{arrayFormat:"brackets"}),Mt=`${window.location.pathname}?${Ye}`;window.history.replaceState(null,document.title,Mt)},[Gt,U,M,he]),null},zt=()=>{const St=(0,Ne.pC)();return $.createElement(z.Nd,null,$.createElement(ot,null),St)},Tt=(0,a.Z)(St=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:St.spacing(1)},icon:{color:St.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:St.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:St.spacing(2,0),"&.Mui-expanded":{margin:St.spacing(2,0)}},accordionDetails:{padding:St.spacing(0,0,1)}})),Ft=St=>{const Gt=Tt(),{filters:D,setPageCursor:U,setTypes:O,term:M,types:ne}=(0,z.Rx)(),he=(0,i.u)(z.gK),[ze,Ct]=(0,$.useState)(!0),{defaultValue:Ye,name:Mt,showCounts:rn,types:Wt}=St,ft=()=>Ct(le=>!le),we=le=>()=>{O(le!==""?[le]:[]),U(void 0),Ct(!1)};(0,$.useEffect)(()=>{Ye&&O([Ye])},[]);const rt=[{value:"",name:"All",icon:$.createElement(oe.Z,null)},...Wt],xt=ne[0]||"",{value:kt}=(0,Rt.default)(async()=>{if(!rn)return{};const le=await Promise.all(rt.map(Ue=>Ue.value).map(async Ue=>{const{numberOfResults:Lt}=await he.query({term:M,types:Ue?[Ue]:[],filters:ne.includes(Ue)||!ne.length&&!Ue?D:{},pageLimit:0});return[Ue,Lt!==void 0?`${Lt>=1e4?">10000":Lt} results`:" -- "]}));return Object.fromEntries(le)},[D,rn,M,ne]);return $.createElement(xe.Z,{className:Gt.card},$.createElement(Te.Z,{title:Mt,titleTypographyProps:{variant:"overline"}}),$.createElement(ie.Z,{className:Gt.cardContent},$.createElement(G.Z,{className:Gt.accordion,expanded:ze,onChange:ft},$.createElement(Ge.Z,{classes:{root:Gt.accordionSummary,content:Gt.accordionSummaryContent},expandIcon:$.createElement(ee.Z,{className:Gt.icon}),IconButtonProps:{size:"small"}},ze?"Collapse":rt.filter(le=>le.value===xt)[0].name),$.createElement(ge.Z,{classes:{root:Gt.accordionDetails}},$.createElement(be.Z,{className:Gt.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},rt.map(le=>$.createElement($.Fragment,{key:le.value},$.createElement(re.Z,null),$.createElement(Oe.Z,{selected:ne[0]===le.value||ne.length===0&&le.value==="",onClick:we(le.value),button:!0},$.createElement(I.Z,null,(0,$.cloneElement)(le.icon,{className:Gt.listItemIcon})),$.createElement(c.Z,{primary:le.name,secondary:kt&&kt[le.value]})))))))))},ct=(0,a.Z)(St=>({tabs:{borderBottom:`1px solid ${St.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:St.typography.fontWeightBold,fontSize:St.typography.pxToRem(13),color:St.palette.text.primary,minWidth:"130px"}})),ht=St=>{const Gt=ct(),{setPageCursor:D,setTypes:U,types:O}=(0,z.Rx)(),{defaultValue:M,types:ne}=St,he=(Ct,Ye)=>{U(Ye!==""?[Ye]:[]),D(void 0)};(0,$.useEffect)(()=>{M&&U([M])},[]);const ze=[{value:"",name:"All"},...ne];return $.createElement(R.Z,{"aria-label":"List of search types tabs",className:Gt.tabs,indicatorColor:"primary",value:O.length===0?"":O[0],onChange:he},ze.map((Ct,Ye)=>$.createElement(_.Z,{key:Ye,className:Gt.tab,label:Ct.name,value:Ct.value})))},$t=(0,a.Z)(St=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:St.spacing(1)},chip:{margin:2}})),an=St=>{const{className:Gt,defaultValue:D,name:U,values:O=[]}=St,M=$t(),{types:ne,setTypes:he}=(0,z.Rx)();(0,v.default)(()=>{ne.length||(D&&Array.isArray(D)?he(D):D&&he([D]))});const ze=Ct=>{const Ye=Ct.target.value;he(Ye)};return $.createElement(b.Z,{className:Gt,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},$.createElement(N.Z,{className:M.label,margin:"dense"},U),$.createElement(_e.Z,{multiple:!0,variant:"outlined",value:ne,onChange:ze,placeholder:"All Results",renderValue:Ct=>$.createElement("div",{className:M.chips},Ct.map(Ye=>$.createElement(fe.Z,{key:Ye,label:Ye,className:M.chip,size:"small"})))},O.map(Ct=>$.createElement(ve.Z,{key:Ct,value:Ct},$.createElement(Y.Z,{checked:ne.indexOf(Ct)>-1}),$.createElement(c.Z,{primary:Ct})))))};an.Accordion=St=>$.createElement(Ft,{...St}),an.Tabs=St=>$.createElement(ht,{...St})},7310:($n,qt,e)=>{"use strict";e.d(qt,{M:()=>z,T:()=>Te,a:()=>p});var o=e(57032),m=e(30705);const p=(0,o.c)({id:"plugin.techradar.service"});var z=(ie=>(ie[ie.Down=-1]="Down",ie[ie.NoChange=0]="NoChange",ie[ie.Up=1]="Up",ie))(z||{});const B=new Array;B.push({id:"adopt",name:"ADOPT",color:"#5BA300",description:"Commodi accusantium culpa sed itaque excepturi rem eum nulla possimus."}),B.push({id:"trial",name:"TRIAL",color:"#009EB0",description:"Recusandae possimus ipsum dolores."}),B.push({id:"assess",name:"ASSESS",color:"#C7BA00",description:"In asperiores repellat error recusandae et adipisci laborum porro."}),B.push({id:"hold",name:"HOLD",color:"#E09B96",description:"Esse mollitia in."});const i=new Array;i.push({id:"infrastructure",name:"Infrastructure"}),i.push({id:"frameworks",name:"Frameworks"}),i.push({id:"languages",name:"Languages"}),i.push({id:"process",name:"Process"});const $=new Array;$.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",links:[{url:"https://www.javascript.com/",title:"Learn more"},{url:"https://www.typescriptlang.org/",title:"TypeScript"}],description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),$.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),$.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],links:[{url:"https://webpack.js.org/",title:"Learn more"}],key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),$.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],links:[{url:"https://reactjs.org/",title:"Learn more"}],key:"react",id:"react",title:"React",quadrant:"frameworks"}),$.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),$.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),$.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),$.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),$.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"},{ringId:"trial",date:new Date("2020-07-05"),description:"long description"}],links:[{url:"https://github.com",title:"Learn more"}],key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const Qe={entries:$,quadrants:i,rings:B};class Ne{async load(){return Qe}}const a=(0,m.NT)({id:"tech-radar"}),Te=(0,m.rx)({id:"tech-radar",routes:{root:a},apis:[(0,m.ni)(p,new Ne)]}).provide((0,m.P4)({name:"TechRadarPage",component:()=>e.e(8272).then(e.bind(e,88272)).then(function(ie){return ie.b}).then(ie=>ie.RadarPage),mountPoint:a}))},65609:($n,qt,e)=>{"use strict";e.d(qt,{EU:()=>Mt});var o=e(57032),m=e(30705),p=e(66565),z=e(2784),B=e(12576),i=e(15459),$=e(77277),Qe=e(79692),Ne=e(8560),a=e(27556),xe=e(11433),Te=e(60364),ie=e(12231),G=e(49378),Ge=e(90436),ge=e(95544),be=e(61837),re=e(51209),Oe=e(38016),I=e(82717),c=e.n(I),R=e(1854),_=e(49462),b=e(31654),N=e(49558),_e=e(65549),fe=e(17373),ve=e(85224),Y=e(96103);const v=".md-nav__item--nested .md-toggle",ee="@backstage/techdocs-addons/nav-expanded",oe=(0,i.Z)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})($.Z),Rt=(0,i.Z)({root:{height:"20px",width:"20px"}})(re.Z),T=(0,i.Z)({root:{height:"20px",width:"20px"}})(Oe.Z),sn=()=>{const ft={expandAllNestedNavs:!1},{value:we,set:rt}=(0,B.Z)(ee,{defaultValue:ft}),[xt,kt]=(0,z.useState)(!1),[...le]=(0,p.pV)([v]),Ue=(0,z.useCallback)(Yt=>{const se=Yt.checked,Ze=we==null?void 0:we.expandAllNestedNavs;return!!(Ze&&!se||!Ze&&se)},[we]);(0,z.useEffect)(()=>{le!=null&&le.length&&(kt(!0),le.forEach(Yt=>{Ue(Yt)&&Yt.click()}))},[we,Ue,le]);const Lt=()=>{rt(Yt=>({expandAllNestedNavs:!(Yt!=null&&Yt.expandAllNestedNavs)}))};return z.createElement(z.Fragment,null,xt?z.createElement(oe,{size:"small",onClick:Lt,"aria-label":we!=null&&we.expandAllNestedNavs?"collapse-nav":"expand-nav"},we!=null&&we.expandAllNestedNavs?z.createElement(T,null):z.createElement(Rt,null)):null)},me="techdocs-report-issue",Zt=`#${me}`,yt='[title^="Edit this page"]',mt='[title^="Leave feedback for"]',It='[data-md-component="main"] .md-content',We=(ft,we)=>we==="github"?(0,R.BT)(ft,"blob"):we==="gitlab"?(0,R.ah)(ft,"blob"):(console.error(`Invalid SCM type ${we} found in ReportIssue addon for URL ${ft}!`),ft),Pt=ft=>{const we=ft.toString().substring(0,70),rt=we.length===70?"...":"";return`Documentation feedback: ${we}${rt}`},ot=(ft,we,rt)=>{const xt="## Documentation Feedback \u{1F4DD}",kt="#### The highlighted text:",le="#### The comment on the text:",Ue="_>replace this line with your comment<_",Lt=ft.toString().trim().split(`
`).map(se=>`> ${se.trim()}`).join(`
`),Yt=[`${rt} URL: <${window.location.href}> 
Markdown URL: <${we}>`];return`${xt}

 ${kt} 

 ${Lt}

 ${le} 
 ${Ue}

 ___
${Yt}`},zt=ft=>{var we,rt;const xt={title:"",body:""},kt=(0,p.oi)(ft),[le]=(0,p.pV)([yt]),Ue=(we=le==null?void 0:le.href)!=null?we:"",Lt=(0,o.u)(_.q3),se=(0,o.u)(o.p).getOptionalString("app.title")||"Backstage";if(!kt||!Ue)return xt;const Ze=(rt=Lt.byUrl(Ue))==null?void 0:rt.type;return Ze?{title:Pt(kt),body:ot(kt,We(Ue,Ze),se)}:xt},Tt=()=>{var ft,we;const rt=(0,o.u)(_.q3),[xt]=(0,p.pV)([yt]),kt=(ft=xt==null?void 0:xt.href)!=null?ft:"";if(!kt)return null;const le=(we=rt.byUrl(kt))==null?void 0:we.type;return le?{...c()(We(kt,le)),type:le}:null},Ft=(0,Qe.Z)(ft=>({root:{display:"grid",gridGap:ft.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:ft.palette.common.black,fontSize:ft.typography.button.fontSize}})),ct=({type:ft})=>ft==="github"?N.fy:b.Z,ht=({type:ft})=>ft==="github"?"Github":"Gitlab",$t=(ft,we)=>{const{title:rt,body:xt}=we,kt=encodeURIComponent(rt),le=encodeURIComponent(xt),{protocol:Ue,resource:Lt,owner:Yt,name:se,type:Ze}=ft,pe=`${Ue}://${Lt}/${Yt}/${se}`,Me=encodeURI(pe);return Ze==="github"?`${Me}/issues/new?title=${kt}&body=${le}`:`${Me}/issues/new?issue[title]=${kt}&issue[description]=${le}`},an=({template:ft,repository:we})=>{const rt=Ft(),xt=ct(we),kt=$t(we,ft);return z.createElement(N.rU,{className:rt.root,to:kt,target:"_blank"},z.createElement(xt,null)," Open new ",ht(we)," issue")},St=(0,Qe.Z)(ft=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:ft.spacing(1),zIndex:ft.zIndex.tooltip,background:ft.palette.common.white}})),Gt=({debounceTime:ft=500,templateBuilder:we})=>{const rt=St(),[xt,kt]=(0,z.useState)(),le=Tt(),Ue=zt(ft),Lt=(0,p.oi)(ft),[Yt,se]=(0,p.pV)([It,mt]);let[Ze]=(0,p.pV)([Zt]);return se&&(se.style.display="none"),(0,z.useEffect)(()=>{if(!le||!Lt||!Lt.containsNode(Yt,!0)||Lt!=null&&Lt.containsNode(Ze,!0))return;const pe=Yt.getBoundingClientRect(),Me=Lt.getRangeAt(0).getBoundingClientRect();kt({top:`${Me.top-pe.top-16}px`,left:`${Me.left+Me.width/2}px`})},[Lt,Yt,Ze]),!Lt||!le||!["github","gitlab"].includes(le.type)?null:(Ze||(Ze=document.createElement("div"),Ze.setAttribute("id",me),Yt.prepend(Ze)),z.createElement(Ne.Z,{container:Ze},z.createElement(a.Z,{"data-testid":"report-issue-addon",className:rt.root,style:xt},z.createElement(an,{repository:le,template:we?we({selection:Lt}):Ue}))))},D="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",U=(0,i.Z)(ft=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:ft.palette.common.white,boxShadow:D,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:D}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:ft.palette.common.black,fontSize:ft.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(xe.Z),O={key:"techdocs.addons.settings.textsize",defaultValue:100},M=[{value:90},{value:100},{value:115},{value:130},{value:150}],ne=(0,Qe.Z)(ft=>({container:{color:ft.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:ft.spacing(1)},increaseButton:{marginLeft:ft.spacing(1)}})),he=()=>{const ft=ne(),we=(0,Te.Z)(),[rt]=(0,p.pV)(["body"]),[xt,kt]=(0,z.useState)(()=>{const nt=localStorage==null?void 0:localStorage.getItem(O.key);return nt?parseInt(nt,10):O.defaultValue}),le=(0,z.useMemo)(()=>M.map(nt=>nt.value),[]),Ue=(0,z.useMemo)(()=>le.indexOf(xt),[le,xt]),Lt=(0,z.useMemo)(()=>le[0],[le]),Yt=(0,z.useMemo)(()=>le[le.length-1],[le]),se=(0,z.useCallback)(()=>`${xt}%`,[xt]),Ze=(0,z.useCallback)((nt,pt)=>{Array.isArray(pt)||(kt(pt),localStorage==null||localStorage.setItem(O.key,String(pt)))},[kt]),pe=(0,z.useCallback)(nt=>{Ze(nt,le[Ue-1])},[Ue,le,Ze]),Me=(0,z.useCallback)(nt=>{Ze(nt,le[Ue+1])},[Ue,le,Ze]);return(0,z.useEffect)(()=>{var nt,pt;if(!rt)return;const Bt=(pt=(nt=we.typography)==null?void 0:nt.htmlFontSize)!=null?pt:16;rt.style.setProperty("--md-typeset-font-size",`${Bt*(xt/100)}px`)},[rt,xt,we]),z.createElement(ie.Z,{className:ft.menuItem,button:!0,disableRipple:!0},z.createElement(G.Z,{primary:z.createElement(Ge.Z,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:z.createElement(ge.Z,{className:ft.container},z.createElement(be.Z,{className:ft.decreaseButton,size:"small",edge:"start",disabled:xt===Lt,onClick:pe,"aria-label":"Decrease text size"},z.createElement(fe.Z,null)),z.createElement(U,{value:xt,"aria-labelledby":"text-size-slider",getAriaValueText:se,valueLabelDisplay:"on",valueLabelFormat:se,marks:M,step:null,min:Lt,max:Yt,onChangeCommitted:Ze}),z.createElement(be.Z,{className:ft.increaseButton,size:"small",edge:"end",disabled:xt===Yt,onClick:Me,"aria-label":"Increase text size"},z.createElement(_e.Z,null))),disableTypography:!0}))},ze=()=>{const ft=(0,p.pV)(["img"]);return(0,z.useEffect)(()=>{let we=null,rt=new ve.Z({pswpModule:Y.Z,initialZoomLevel:1,secondaryZoomLevel:xt=>{const kt=xt.elementSize.x,le=xt.elementSize.y,Ue=xt.panAreaSize.x,Lt=xt.panAreaSize.y,Yt=Ue/kt,se=Lt/le;return Math.min(Yt,se)},wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:`<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomIcon" aria-label="fontSize large">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" id="photoswipe-zoom-icon-zoomin-path"></path><path d="M12 10H 7 V 9 H 12 Z" id="photoswipe-zoom-icon-zoomout-path">
        </svg>`});return ft.forEach((xt,kt)=>{xt.onclick=()=>(we===null&&(we=ft.map(le=>({element:le,src:le.src,msrc:le.src,alt:le.alt,width:le.clientWidth,height:le.clientHeight}))),rt.loadAndOpen(kt,we),!1)}),rt.init(),()=>{rt.destroy(),rt=null}},[ft]),null},Ct=(0,m.rx)({id:"techdocsModuleAddonsContrib"}),Ye=Ct.provide((0,p.KY)({name:"ExpandableNavigation",location:p.oZ.PrimarySidebar,component:sn})),Mt=Ct.provide((0,p.KY)({name:"ReportIssue",location:p.oZ.Content,component:Gt})),rn=Ct.provide((0,p.KY)({name:"TextSize",location:p.oZ.Settings,component:he})),Wt=Ct.provide((0,p.KY)({name:"LightBox",location:p.oZ.Content,component:ze}))},66565:($n,qt,e)=>{"use strict";e.d(qt,{$L:()=>_,DR:()=>be,Dl:()=>N,KY:()=>Oe,Ox:()=>Rt,VA:()=>me,ZS:()=>v,Zz:()=>ge,gT:()=>b,jM:()=>Ge,oZ:()=>oe,oi:()=>It,pV:()=>yt,ux:()=>sn,x1:()=>ee});var o=e(2784),m=e(73557),p=e(30705),z=e(57032),B=e(64279),i=e(77446),$=e(34520),Qe=e(18473),Ne=e(70882),a=e(50236),xe=e(19219),Te=e(49558),ie=e(54073),G=e.n(ie);const Ge="techdocs.addons.addon.v1",ge="techdocs.addons.wrapper.v1",be=()=>null;(0,p.R5)(be,ge,!0);const re=We=>`${Ge}.${We.toLocaleLowerCase("en-US")}`;function Oe(We){const{name:Pt,component:ot}=We;return(0,p.YO)({name:Pt,component:{sync:zt=>o.createElement(ot,{...zt})},data:{[Ge]:We,[re(Pt)]:!0}})}const I=(We,Pt)=>We.selectByComponentData({key:Pt}).getElements()[0],c=We=>We.selectByComponentData({key:ge}).selectByComponentData({key:Ge}),R=We=>We.selectByComponentData({key:ge}).findComponentData({key:Ge}),_=()=>{const We=(0,m.pC)(),Pt=(0,p.vJ)(We,c),ot=(0,p.vJ)(We,R),zt=(0,o.useCallback)(ct=>{var ht;if(!Pt||!ct)return null;const $t=re(ct.name);return(ht=I(Pt,$t))!=null?ht:null},[Pt]),Tt=(0,o.useCallback)(ct=>{const ht=ot.find($t=>$t.name===ct);return ht?zt(ht):null},[ot,zt]),Ft=(0,o.useCallback)(ct=>{const ht=ot.filter($t=>$t.location===ct);return ht.length?ht.map(zt):null},[ot,zt]);return{renderComponentByName:Tt,renderComponentsByLocation:Ft}},b=(0,z.c)({id:"plugin.techdocs.service"}),N=(0,z.c)({id:"plugin.techdocs.storageservice"});function _e(We,Pt){return Pt.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(We.kind=We.kind.toLocaleLowerCase(),We.name=We.name.toLocaleLowerCase(),We.namespace=We.namespace.toLocaleLowerCase()),We}const fe=(We,Pt)=>(0,$.eE)(We)===(0,$.eE)(Pt),ve={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},Y=(0,Qe.CT)("techdocs-reader-page-context"),v=(0,o.memo)(We=>{const{entityRef:Pt,children:ot}=We,zt=(0,z.u)(b),Tt=(0,z.u)(z.p),Ft=(0,B.default)(async()=>zt.getEntityMetadata(Pt),[Pt]),ct=(0,i.Z)(async()=>zt.getTechDocsMetadata(Pt),[Pt]),[ht,$t]=(0,o.useState)(ve.title),[an,St]=(0,o.useState)(ve.subtitle),[Gt,D]=(0,o.useState)(ve.shadowRoot);(0,o.useEffect)(()=>{Gt&&!ct.value&&!ct.loading&&ct.retry()},[ct.value,ct.loading,Gt,ct.retry,ct]);const U={metadata:ct,entityRef:_e(Pt,Tt),entityMetadata:Ft,shadowRoot:Gt,setShadowRoot:D,title:ht,setTitle:$t,subtitle:an,setSubtitle:St},O=(0,Qe.EI)({1:U});return o.createElement(p.fC,{attributes:{entityRef:(0,$.eE)(Pt)}},o.createElement(Y.Provider,{value:O},ot instanceof Function?ot(U):ot))},(We,Pt)=>fe(We.entityRef,Pt.entityRef)),ee=()=>{const We=(0,o.useContext)(Y);if(We===void 0)return ve;const Pt=We.atVersion(1);if(Pt===void 0)throw new Error("No context found for version 1.");return Pt},oe=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),Rt="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",T=We=>{(0,o.useEffect)(()=>{var Pt;if(!We)return()=>{};const ot=We.querySelectorAll('head > link[rel="stylesheet"]');let zt=(Pt=ot==null?void 0:ot.length)!=null?Pt:0;const Tt=new CustomEvent(Rt);if(!zt)return We.dispatchEvent(Tt),()=>{};const Ft=()=>{--zt===0&&We.dispatchEvent(Tt)};return ot==null||ot.forEach(ct=>{ct.addEventListener("load",Ft)}),()=>{ot==null||ot.forEach(ct=>{ct.removeEventListener("load",Ft)})}},[We])},sn=We=>{const[Pt,ot]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(!We)return()=>{};ot(!0);const zt=We.style;zt.setProperty("opacity","0");const Tt=()=>{ot(!1),zt.setProperty("opacity","1")};return We.addEventListener(Rt,Tt),()=>{We.removeEventListener(Rt,Tt)}},[We]),Pt},me=We=>{const{element:Pt,onAppend:ot,children:zt}=We,[Tt,Ft]=(0,o.useState)((0,Ne.Ue)({...(0,a.Z)(),insertionPoint:void 0}));T(Pt);const ct=sn(Pt),ht=(0,o.useCallback)($t=>{if(!Pt||!$t)return;Ft((0,Ne.Ue)({...(0,a.Z)(),insertionPoint:Pt.querySelector("head")||void 0}));let an=$t.shadowRoot;an||(an=$t.attachShadow({mode:"open"})),an.replaceChildren(Pt),typeof ot=="function"&&ot(an)},[Pt,ot]);return o.createElement(o.Fragment,null,ct&&o.createElement(Te.Ex,null),o.createElement(xe.ZP,{jss:Tt,sheetsManager:new Map},o.createElement("div",{ref:ht,"data-testid":"techdocs-native-shadowroot"}),zt))},Zt=()=>{const{shadowRoot:We}=ee();return We},yt=We=>{const Pt=Zt();return Pt?We.map(ot=>Pt==null?void 0:Pt.querySelectorAll(ot)).filter(ot=>ot.length).map(ot=>Array.from(ot)).flat():[]},mt=We=>We.toString()&&We.rangeCount&&We.getRangeAt(0).getBoundingClientRect().top,It=(We=0)=>{const Pt=Zt(),[ot,zt]=(0,o.useState)(null),Tt=(0,o.useMemo)(()=>G()(()=>{const Ft=Pt,ct=Ft.getSelection?Ft.getSelection():document.getSelection();ct&&mt(ct)?zt(ct):zt(null)},We),[Pt,zt,We]);return(0,o.useEffect)(()=>(window.document.addEventListener("selectionchange",Tt),()=>{Tt.cancel(),window.document.removeEventListener("selectionchange",Tt)}),[Tt]),ot}},78832:($n,qt,e)=>{"use strict";e.d(qt,{E:()=>Ge,a:()=>be,c:()=>re,d:()=>Oe,t:()=>ie});var o=e(2784),m=e(73557),p=e(34520),z=e(66565),B=e(67266),i=e(30705),$=e(57032),Qe=e(42054),Ne=e(33019),a=e(38334),xe=e(78373),Te=e(73495);const ie=(0,i.rx)({id:"techdocs",apis:[(0,i.ni)({api:z.Dl,deps:{configApi:$.p,discoveryApi:$.q,identityApi:$.t,fetchApi:$.s},factory:({configApi:ve,discoveryApi:Y,identityApi:v,fetchApi:ee})=>new B.a({configApi:ve,discoveryApi:Y,identityApi:v,fetchApi:ee})}),(0,i.ni)({api:z.gT,deps:{configApi:$.p,discoveryApi:$.q,fetchApi:$.s},factory:({configApi:ve,discoveryApi:Y,fetchApi:v})=>new B.T({configApi:ve,discoveryApi:Y,fetchApi:v})})],routes:{root:B.r,docRoot:B.b,entityContent:B.c}}),G=ie.provide((0,i.P4)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return fe}).then(ve=>ve.Router),mountPoint:B.r})),Ge=ie.provide((0,i.P4)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return fe}).then(ve=>ve.EmbeddedDocsRouter),mountPoint:B.c})),ge=ie.provide((0,i.P4)({name:"TechDocsCustomHome",component:()=>e.e(979).then(e.bind(e,979)).then(ve=>ve.TechDocsCustomHome),mountPoint:B.r})),be=ie.provide((0,i.P4)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(e.bind(e,38334)).then(function(ve){return ve.d}).then(ve=>ve.TechDocsIndexPage),mountPoint:B.r})),re=ie.provide((0,i.P4)({name:"TechDocsReaderPage",component:()=>e.e(4376).then(e.bind(e,34376)).then(ve=>ve.TechDocsReaderPage),mountPoint:B.b})),Oe=ie.provide((0,Qe.c)({name:"TechDocsSearchResultListItem",component:()=>Promise.resolve().then(e.bind(e,77529)).then(ve=>ve.TechDocsSearchResultListItem),predicate:ve=>ve.type==="techdocs"})),I="backstage.io/techdocs-entity",c=({entity:ve})=>{var Y,v;let ee=(0,p.iB)(ve);if((Y=ve.metadata.annotations)!=null&&Y[I])try{ee=(0,p.of)((v=ve.metadata.annotations)==null?void 0:v[I])}catch{}return o.createElement(re,{entityRef:ee},o.createElement(Ne.d,null),o.createElement(Ne.c,{withSearch:!1}))},R="backstage.io/techdocs-ref",_="backstage.io/techdocs-entity";var fe=Object.freeze({__proto__:null,isTechDocsAvailable:ve=>{var Y,v,ee,oe;return Boolean((v=(Y=ve==null?void 0:ve.metadata)==null?void 0:Y.annotations)==null?void 0:v[R])||Boolean((oe=(ee=ve==null?void 0:ve.metadata)==null?void 0:ee.annotations)==null?void 0:oe[_])},Router:()=>o.createElement(m.Z5,null,o.createElement(m.AW,{path:"/",element:o.createElement(a.c,null)}),o.createElement(m.AW,{path:"/:namespace/:kind/:name/*",element:o.createElement(Ne.f,null)})),EmbeddedDocsRouter:ve=>{var Y,v;const{children:ee}=ve,{entity:oe}=(0,xe.u)(),Rt=(0,m.V$)([{path:"/*",element:o.createElement(c,{entity:oe}),children:[{path:"*",element:ee}]}]);return((Y=oe.metadata.annotations)==null?void 0:Y[R])||((v=oe.metadata.annotations)==null?void 0:v[_])?Rt:o.createElement(Te.sk,{annotation:[R]})}})},38334:($n,qt,e)=>{"use strict";e.r(qt),e.d(qt,{D:()=>_,E:()=>b,T:()=>N,a:()=>ve,b:()=>fe,c:()=>Y,d:()=>v,t:()=>re});var o=e(2784),m=e(73557),p=e(49558),z=e(73495),B=e(78373),i=e(88285),$=e(30705),Qe=e(57032),Ne=e(95074),a=e(76635),xe=e.n(a),Te=e(34520),ie=e(67266),G=e(39981),Ge=e(2337),ge=e(11640),be=e(28347);function re(ee,oe){return oe.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?ee:ee.toLocaleLowerCase("en-US")}const Oe=(0,Ge.Z)({root:{color:"#f3ba37"}})(ge.Z),I={createCopyDocsUrlAction(ee){return oe=>({icon:()=>o.createElement(G.Z,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>ee(`${window.location.origin}${oe.resolved.docsUrl}`)})},createStarEntityAction(ee,oe){return Rt=>{const T=Rt.entity,sn=ee(T);return{cellStyle:{paddingLeft:"1em"},icon:()=>sn?o.createElement(Oe,null):o.createElement(be.Z,null),tooltip:sn?"Remove from favorites":"Add to favorites",onClick:()=>oe(T)}}}};function c(ee){return ee.metadata.title||ee.metadata.name}const R={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:ee=>o.createElement(p.uw,{value:o.createElement(p.rU,{to:ee.resolved.docsUrl},c(ee.entity)),subvalue:ee.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:ee})=>o.createElement(z.rI,{entityRefs:ee.ownedByRelations,defaultKind:"group"})}},createKindColumn(){return{title:"Kind",field:"entity.kind"}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},_=ee=>{const{entities:oe,title:Rt,loading:T,columns:sn,actions:me,options:Zt}=ee,[,yt]=(0,Ne.Z)(),mt=(0,$.tg)(ie.b),It=(0,Qe.u)(Qe.p);if(!oe)return null;const We=oe.map(Ft=>{var ct;const ht=(0,B.g)(Ft,Te.S4);return{entity:Ft,resolved:{docsUrl:mt({namespace:re((ct=Ft.metadata.namespace)!=null?ct:"default",It),kind:re(Ft.kind,It),name:re(Ft.metadata.name,It)}),ownedByRelations:ht,ownedByRelationsTitle:ht.map($t=>(0,z.$3)($t,{defaultKind:"group"})).join(", ")}}}),Pt=[R.createNameColumn(),R.createOwnerColumn(),R.createKindColumn(),R.createTypeColumn()],ot=[I.createCopyDocsUrlAction(yt)],zt=20,Tt=We&&We.length>zt;return o.createElement(o.Fragment,null,T||We&&We.length>0?o.createElement(p.iA,{isLoading:T,options:{paging:Tt,pageSize:zt,search:!0,actionsColumnIndex:-1,...Zt},data:We,columns:sn||Pt,actions:me||ot,title:Rt?`${Rt} (${We.length})`:`All (${We.length})`}):o.createElement(p.ub,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:o.createElement(p.Qj,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};_.columns=R,_.actions=I;const b=ee=>{var oe,Rt;const{columns:T,actions:sn,options:me}=ee,{loading:Zt,error:yt,entities:mt,filters:It}=(0,z.wp)(),{isStarredEntity:We,toggleStarredEntity:Pt}=(0,z.CR)(),[,ot]=(0,Ne.Z)(),zt=(0,a.capitalize)((Rt=(oe=It.user)==null?void 0:oe.value)!=null?Rt:"all"),Tt=[I.createCopyDocsUrlAction(ot),I.createStarEntityAction(We,Pt)];return yt?o.createElement(p.GB,{severity:"error",title:"Could not load available documentation."},o.createElement(p.Oi,{language:"text",text:yt.toString()})):o.createElement(_,{title:zt,entities:mt,loading:Zt,actions:sn||Tt,columns:T,options:me})};b.columns=R,b.actions=I;const N=ee=>{var oe;const{children:Rt}=ee,sn=`Documentation available in ${(oe=(0,Qe.u)(Qe.p).getOptionalString("organization.name"))!=null?oe:"Backstage"}`;return o.createElement(p.g9,{title:"Documentation",subtitle:sn,themeId:"documentation"},Rt)};class _e{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":i.n3}}}const fe=()=>{const{updateFilters:ee}=(0,z.wp)();return(0,o.useEffect)(()=>{ee({techdocs:new _e})},[ee]),null},ve=ee=>{const{initialFilter:oe="owned",columns:Rt,actions:T}=ee;return o.createElement(N,null,o.createElement(p.VY,null,o.createElement(p.yW,{title:""},o.createElement(p.qt,null,"Discover documentation in your ecosystem.")),o.createElement(z.UO,null,o.createElement(z._i,null,o.createElement(z._i.Filters,null,o.createElement(fe,null),o.createElement(z.EW,{initialFilter:oe}),o.createElement(z.dq,null),o.createElement(z.xE,null)),o.createElement(z._i.Content,null,o.createElement(b,{actions:T,columns:Rt}))))))},Y=ee=>(0,m.pC)()||o.createElement(ve,{...ee});var v=Object.freeze({__proto__:null,TechDocsIndexPage:Y})},33019:($n,qt,e)=>{"use strict";e.d(qt,{a:()=>Qn,c:()=>yn,d:()=>Pa,f:()=>Ea});var o=e(2784),m=e(73557),p=e(49558),z=e(66565),B=e(79692),i=e(12420),$=e(60905),Qe=e(90436),Ne=e(61837),a=e(77277),xe=e(4190),Te=e(4614),ie=e(41128),G=e(60364),Ge=e(15459),ge=e(80030),be=e(72379),re=e(41547),Oe=e(41156),I=e(8560),c=e(15223),R=e(95544),_=e(48348),b=e(92573),N=e(77529),_e=e(99688),fe=e(98069),ve=e(87685),Y=e(57032),v=e(30705),ee=e(64279),oe=e(77446),Rt=e(49462),T=e(35368),sn=e.n(T),me=e(1854),Zt=e(67097),yt=e(82717),mt=e.n(yt),It=e(44882),We=e(95074),Pt=e(18671),ot=e(73250),zt=e(78373),Tt=e(73495),Ft=e(34520),ct=e(76635),ht=e.n(ct),$t=e(67266),an=e(47603);function St({contentLoading:X,content:Be,activeSyncState:et}){return X||et==="BUILD_READY_RELOAD"||!Be&&et==="CHECKING"?"CHECKING":!Be&&et==="BUILDING"?"INITIAL_BUILD":Be?et==="BUILDING"?"CONTENT_STALE_REFRESHING":et==="BUILD_READY"?"CONTENT_STALE_READY":et==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function Gt(X,Be){const et={...X};switch(Be.type){case"sync":Be.state==="CHECKING"&&(et.buildLog=[]),et.activeSyncState=Be.state,et.syncError=Be.syncError;break;case"contentLoading":et.contentLoading=!0,et.contentError=void 0;break;case"content":typeof Be.path=="string"&&(et.path=Be.path),et.contentLoading=!1,et.content=Be.content,et.contentError=Be.contentError;break;case"buildLog":et.buildLog=et.buildLog.concat(Be.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(et.activeSyncState)&&["contentLoading","content"].includes(Be.type)&&(et.activeSyncState="UP_TO_DATE",et.buildLog=[]),et}function D(X,Be,et,vt){var Se,H;const[Ee,de]=(0,o.useReducer)(Gt,{activeSyncState:"CHECKING",path:vt,contentLoading:!0,buildLog:[]}),st=(0,Y.u)(z.Dl),{retry:k}=(0,oe.Z)(async()=>{de({type:"contentLoading"});try{const te=await st.getEntityDocs({kind:X,namespace:Be,name:et},vt);return de({type:"content",content:te,path:vt}),te}catch(te){de({type:"content",contentError:te,path:vt})}},[st,X,Be,et,vt]),j=(0,o.useRef)({content:void 0,reload:()=>{}});return j.current={content:Ee.content,reload:k},(0,ee.default)(async()=>{de({type:"sync",state:"CHECKING"});const te=setTimeout(()=>{de({type:"sync",state:"BUILDING"})},1e3);try{switch(await st.syncEntityDocs({kind:X,namespace:Be,name:et},Je=>{de({type:"buildLog",log:Je})})){case"updated":j.current.content?de({type:"sync",state:"BUILD_READY"}):(j.current.reload(),de({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":de({type:"sync",state:"UP_TO_DATE"});break;default:de({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(ke){de({type:"sync",state:"ERROR",syncError:ke})}finally{clearTimeout(te)}},[X,et,Be,st,de,j]),{state:(0,o.useMemo)(()=>St({activeSyncState:Ee.activeSyncState,contentLoading:Ee.contentLoading,content:Ee.content}),[Ee.activeSyncState,Ee.content,Ee.contentLoading]),contentReload:k,path:Ee.path,content:Ee.content,contentErrorMessage:(Se=Ee.contentError)==null?void 0:Se.toString(),syncErrorMessage:(H=Ee.syncError)==null?void 0:H.toString(),buildLog:Ee.buildLog}}const U=(0,o.createContext)({}),O=()=>(0,o.useContext)(U),M=X=>{const{children:Be}=X,{"*":et=""}=(0,m.UO)(),{entityRef:vt}=(0,z.x1)(),{kind:Se,namespace:H,name:Ee}=vt,de=D(Se,H,Ee,et);return o.createElement(U.Provider,{value:de},Be instanceof Function?Be(de):Be)},ne=X=>Be=>o.createElement(M,null,o.createElement(X,{...Be})),he=X=>X==null?void 0:X.document,ze=X=>{const{entityId:Be,entityTitle:et,debounceTime:vt=150}=X,[Se,H]=(0,o.useState)(!1),Ee=(0,m.s0)(),{setFilters:de,result:{loading:st,value:k}}=(0,b.Rx)(),[j,Q]=(0,o.useState)([]);(0,o.useEffect)(()=>{let qe=!0;if(qe&&k){const At=k.results.slice(0,10);Q(At)}return()=>{qe=!1}},[st,k]);const{kind:te,name:ke,namespace:Je}=Be;(0,o.useEffect)(()=>{de(qe=>({...qe,kind:te,namespace:Je,name:ke}))},[te,Je,ke,de]);const He=(qe,At)=>{if(he(At)){const{location:dn}=At.document;Ee(dn)}};return o.createElement(b.qO,{"data-testid":"techdocs-search-bar",size:"small",open:Se,getOptionLabel:()=>"",filterOptions:qe=>qe,onClose:()=>{H(!1)},onFocus:()=>{H(!0)},onChange:He,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:j,renderOption:({document:qe,highlight:At})=>o.createElement(N.TechDocsSearchResultListItem,{result:qe,lineClamp:3,asListItem:!1,asLink:!1,title:qe.title,highlight:At}),loading:st,inputDebounceTime:vt,inputPlaceholder:`Search ${et||Be.name} docs`,freeSolo:!1})},Ct=X=>{const Be={term:"",types:["techdocs"],pageCursor:"",filters:X.entityId};return o.createElement(b.Nd,{initialState:Be},o.createElement(ze,{...X}))},Ye=(0,B.Z)(X=>(0,i.Z)({paper:{width:"100%",[X.breakpoints.up("sm")]:{width:"75%"},[X.breakpoints.up("md")]:{width:"50%"},padding:X.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:X.palette.background.default}})),Mt=({buildLog:X,onClose:Be})=>{const et=Ye(),vt=X.length===0?"Waiting for logs...":X.join(`
`);return o.createElement($.Z,{container:!0,direction:"column",className:et.root,spacing:0,wrap:"nowrap"},o.createElement($.Z,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},o.createElement(Qe.Z,{variant:"h5"},"Build Details"),o.createElement(Ne.Z,{key:"dismiss",title:"Close the drawer",onClick:Be,color:"inherit"},o.createElement(ve.Z,null))),o.createElement($.Z,{item:!0,xs:!0},o.createElement(p.nU,{text:vt,classes:{root:et.logs}})))},rn=({buildLog:X})=>{const Be=Ye(),[et,vt]=(0,o.useState)(!1);return o.createElement(o.Fragment,null,o.createElement(a.Z,{color:"inherit",onClick:()=>vt(!0)},"Show Build Logs"),o.createElement(xe.ZP,{classes:{paper:Be.paper},anchor:"right",open:et,onClose:()=>vt(!1)},o.createElement(Mt,{buildLog:X,onClose:()=>vt(!1)})))},Wt=({errorMessage:X})=>{const Be=(0,Y.u)(Y.p).getOptionalString("techdocs.builder"),et=(0,v.z$)(),{entityRef:vt}=(0,z.x1)(),Se=(0,m.TH)();(0,o.useEffect)(()=>{const{pathname:Ee,search:de,hash:st}=Se;et.captureEvent("not-found",`${Ee}${de}${st}`,{attributes:vt})},[et,vt,Se]);let H="";return Be!=="local"&&(H="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),o.createElement(p.mf,{status:"404",statusMessage:X||"Documentation not found",additionalInfo:H})},ft=(0,B.Z)(X=>({root:{marginBottom:X.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),we=()=>{let X=null;const Be=ft(),{state:et,contentReload:vt,contentErrorMessage:Se,syncErrorMessage:H,buildLog:Ee}=O();return et==="INITIAL_BUILD"&&(X=o.createElement(_e.Z,{classes:{root:Be.root},variant:"outlined",severity:"info",icon:o.createElement(Te.Z,{size:"24px"}),action:o.createElement(rn,{buildLog:Ee})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),et==="CONTENT_STALE_REFRESHING"&&(X=o.createElement(_e.Z,{variant:"outlined",severity:"info",icon:o.createElement(Te.Z,{size:"24px"}),action:o.createElement(rn,{buildLog:Ee}),classes:{root:Be.root}},"A newer version of this documentation is being prepared and will be available shortly.")),et==="CONTENT_STALE_READY"&&(X=o.createElement(_e.Z,{variant:"outlined",severity:"success",action:o.createElement(a.Z,{color:"inherit",onClick:()=>vt()},"Refresh"),classes:{root:Be.root}},"A newer version of this documentation is now available, please refresh to view.")),et==="CONTENT_STALE_ERROR"&&(X=o.createElement(_e.Z,{variant:"outlined",severity:"error",action:o.createElement(rn,{buildLog:Ee}),classes:{root:Be.root,message:Be.message}},"Building a newer version of this documentation failed."," ",H)),et==="CONTENT_NOT_FOUND"&&(X=o.createElement(o.Fragment,null,H&&o.createElement(_e.Z,{variant:"outlined",severity:"error",action:o.createElement(rn,{buildLog:Ee}),classes:{root:Be.root,message:Be.message}},"Building a newer version of this documentation failed."," ",H),o.createElement(Wt,{errorMessage:Se}))),X},rt=/main\.[A-Fa-f0-9]{8}\.min\.css$/,xt=/^https:\/\/fonts\.googleapis\.com/,kt=/^https:\/\/fonts\.gstatic\.com/,le=X=>X.nodeName==="LINK",Ue=X=>{const Be=(X==null?void 0:X.getAttribute("href"))||"",et=Be.match(rt),vt=Be.match(xt),Se=Be.match(kt);return et||vt||Se},Lt=X=>(le(X)&&!Ue(X)&&X.remove(),X),Yt=X=>X.nodeName==="IFRAME",se=(X,Be)=>{const et=X.getAttribute("src")||"";try{const{host:vt}=new URL(et);return Be.includes(vt)}catch{return!1}},Ze=X=>Be=>(Yt(Be)&&!se(Be,X)&&Be.remove(),Be),pe=()=>{const X=(0,Y.u)(Y.p);return(0,o.useMemo)(()=>X.getOptionalConfig("techdocs.sanitizer"),[X])},Me=()=>{const X=pe();return(0,o.useCallback)(async Be=>{const et=X==null?void 0:X.getOptionalStringArray("allowedIframeHosts");sn().addHook("beforeSanitizeElements",Lt);const vt=["link"];return et&&(vt.push("iframe"),sn().addHook("beforeSanitizeElements",Ze(et))),sn().sanitize(Be.outerHTML,{ADD_TAGS:vt,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[X])};var nt=({theme:X})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${X.palette.text.primary};
  --md-default-fg-color--light: ${X.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,ie.$n)(X.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,ie.$n)(X.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${X.palette.background.default};
  --md-default-bg-color--light: ${X.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,ie.$n)(X.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,ie.$n)(X.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${X.palette.primary.main};
  --md-primary-fg-color--light: ${X.palette.primary.light};
  --md-primary-fg-color--dark: ${X.palette.primary.dark};
  --md-primary-bg-color: ${X.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,ie.$n)(X.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${X.shadows[1]};
  --md-shadow-z2: ${X.shadows[2]};
  --md-shadow-z3: ${X.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${X.palette.text.primary};
  --md-code-bg-color: ${X.palette.background.paper};
  --md-code-hl-color: ${(0,ie.Fq)(X.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${X.palette.type==="dark"?X.palette.primary.light:X.palette.primary.dark};
  --md-code-hl-function-color: ${X.palette.type==="dark"?X.palette.secondary.light:X.palette.secondary.dark};
  --md-code-hl-string-color: ${X.palette.type==="dark"?X.palette.success.light:X.palette.success.dark};
  --md-code-hl-number-color: ${X.palette.type==="dark"?X.palette.error.light:X.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: ${X.palette.link};
  --md-typeset-table-color: ${X.palette.text.primary};
  --md-typeset-del-color: ${X.palette.type==="dark"?(0,ie.Fq)(X.palette.error.dark,.5):(0,ie.Fq)(X.palette.error.light,.5)};
  --md-typeset-ins-color: ${X.palette.type==="dark"?(0,ie.Fq)(X.palette.success.dark,.5):(0,ie.Fq)(X.palette.success.light,.5)};
  --md-typeset-mark-color: ${X.palette.type==="dark"?(0,ie.Fq)(X.palette.warning.dark,.5):(0,ie.Fq)(X.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,pt=({theme:X})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${X.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const Bt="224px";var tn=({theme:X,sidebar:Be})=>`
/*==================  Layout  ==================*/

/* mkdocs material v9 compat */
.md-nav__title {
  color: var(--md-default-fg-color);
}

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${X.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${X.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
  pointer-events: none;
}

.md-footer-nav__link, .md-footer__link {
  pointer-events: all;
}

.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link, .md-footer__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${Be.isPinned?`calc(-12.1rem + ${Bt})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}


@media print {
  .md-sidebar,
  #toggle-sidebar {
    display: none;
  }
  
  .md-content {
    margin: 0;
    width: 100%;
    max-width: 100%;
  }
}
`;const Ce=["h1","h2","h3","h4","h5","h6"];var Le=({theme:X})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${Ce.reduce((Be,et)=>{var vt;const Se=(vt=X.typography.htmlFontSize)!=null?vt:16,H=X.typography[et],{lineHeight:Ee,fontFamily:de,fontWeight:st,fontSize:k}=H,j=Q=>{let te=1;return typeof Q=="number"&&(te=Q/Se*.6),typeof Q=="string"&&(te=Q.replace("rem","")),`calc(${te} * var(--md-typeset-font-size))`};return Be.concat(`
    .md-typeset ${et} {
      color: var(--md-default-fg-color);
      line-height: ${Ee};
      font-family: ${de};
      font-weight: ${st};
      font-size: ${j(k)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${X.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}
`,P=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,W=({theme:X})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${X.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${X.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${X.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${X.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${X.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const J=[nt,pt,tn,Le,P,W],it=()=>(0,p.Pf)(),ut=()=>{const X=it(),Be=(0,G.Z)();return(0,o.useMemo)(()=>{const et={theme:Be,sidebar:X};return J.reduce((vt,Se)=>vt+Se(et),"")},[Be,X])},Et=()=>{const X=ut();return(0,o.useCallback)(Be=>(Be.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${X}</style>`),Be),[X])},Jt=(X,Be,et)=>{const vt=X==="src"&&Be.endsWith(".svg"),Se=!Be.match(/^([a-z]*:)?\/\//i),H=Be.startsWith(et);return vt&&(Se||H)},mn=({techdocsStorageApi:X,entityId:Be,path:et})=>async vt=>{const Se=await X.getApiOrigin(),H=async(Ee,de)=>{for(const st of Ee)if(st.hasAttribute(de)){const k=st.getAttribute(de);if(!k)return;const j=await X.getBaseUrl(k,Be,et);if(Jt(de,k,Se))try{const te=await(await fetch(j,{credentials:"include"})).text();st.setAttribute(de,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(te)))}`)}catch{st.setAttribute("alt",`Error: ${k}`)}else st.setAttribute(de,j)}};return await Promise.all([H(vt.querySelectorAll("img"),"src"),H(vt.querySelectorAll("script"),"src"),H(vt.querySelectorAll("source"),"src"),H(vt.querySelectorAll("link"),"href"),H(vt.querySelectorAll("a[download]"),"href")]),vt};let An;An=Promise.resolve().then(e.t.bind(e,17029,19));function vn(X,Be){An.then(et=>{"createRoot"in et?et.createRoot(Be).render(X):et.render(X,Be)})}const Vn=X=>Be=>{var et;const vt=Be.querySelector('[title="Edit this page"]');if(!vt||!vt.href)return Be;const Se=new URL(vt.href),H=X.byUrl(Se);if((H==null?void 0:H.type)!=="github"&&(H==null?void 0:H.type)!=="gitlab")return Be;const Ee=((et=Be.querySelector("article>h1"))==null?void 0:et.childNodes[0].textContent)||"",de=encodeURIComponent(`Documentation Feedback: ${Ee}`),st=encodeURIComponent(`Page source:
${vt.href}

Feedback:`),k=(H==null?void 0:H.type)==="github"?(0,me.BT)(Se.href,"blob"):Se.href,j=mt()(k),Q=`/${j.organization}/${j.name}`,te=vt.cloneNode();switch(H==null?void 0:H.type){case"gitlab":te.href=`${Se.origin}${Q}/issues/new?issue[title]=${de}&issue[description]=${st}`;break;case"github":te.href=`${Se.origin}${Q}/issues/new?title=${de}&body=${st}`;break;default:return Be}return vn(o.createElement(Zt.Z),te),te.style.paddingLeft="5px",te.title="Leave feedback for this page",te.id="git-feedback-link",vt==null||vt.insertAdjacentElement("beforebegin",te),Be},Mn=()=>X=>{const Be=X.querySelector('.md-header label[for="__drawer"]'),et=X.querySelector("article");if(!Be||!et)return X;const vt=Be.cloneNode();return vn(o.createElement(It.Z),vt),vt.id="toggle-sidebar",vt.title="Toggle Sidebar",vt.classList.add("md-content__button"),vt.style.setProperty("padding","0 0 0 5px"),vt.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),et==null||et.prepend(vt),X},Zn=()=>X=>(((et,vt)=>{Array.from(et).filter(Se=>Se.hasAttribute(vt)).forEach(Se=>{const H=Se.getAttribute(vt);if(H){H.match(/^https?:\/\//i)&&Se.setAttribute("target","_blank");try{const Ee=A(window.location.href);Se.setAttribute(vt,new URL(H,Ee).toString())}catch{Se.replaceWith(Se.textContent||H)}}})})(Array.from(X.getElementsByTagName("a")),"href"),X);function A(X){const Be=new URL(X);return!Be.pathname.endsWith("/")&&!Be.pathname.endsWith(".html")&&(Be.pathname+="/"),Be.toString()}const F=({baseUrl:X,onClick:Be})=>et=>(Array.from(et.getElementsByTagName("a")).forEach(vt=>{vt.addEventListener("click",Se=>{const Ee=vt.getAttribute("href");Ee&&Ee.startsWith(X)&&!vt.hasAttribute("download")&&(Se.preventDefault(),Be(Se,Ee))})}),et),Pe=(0,Ge.Z)(X=>({tooltip:{fontSize:"inherit",color:X.palette.text.primary,margin:0,padding:X.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(ge.ZP),gt=()=>o.createElement(be.Z,null,o.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),Ot=({text:X})=>{const[Be,et]=(0,o.useState)(!1),[,vt]=(0,We.Z)(),Se=(0,o.useCallback)(()=>{vt(X),et(!0)},[X,vt]),H=(0,o.useCallback)(()=>{et(!1)},[et]);return o.createElement(Pe,{title:"Copied to clipboard",placement:"left",open:Be,onClose:H,leaveDelay:1e3},o.createElement(Ne.Z,{style:{color:"inherit"},className:"md-clipboard md-icon",onClick:Se},o.createElement(gt,null)))},Vt=X=>Be=>{var et;const vt=Be.querySelectorAll("pre > code");for(const Se of vt){const H=Se.textContent||"",Ee=document.createElement("div");(et=Se==null?void 0:Se.parentElement)==null||et.prepend(Ee),vn(o.createElement(re.Z,{theme:X},o.createElement(Ot,{text:H})),Ee)}return Be},ae=()=>X=>{var Be;return(Be=X.querySelector(".md-header"))==null||Be.remove(),X},Ae=()=>X=>{var Be,et;return(Be=X.querySelector(".md-footer .md-copyright"))==null||Be.remove(),(et=X.querySelector(".md-footer-copyright"))==null||et.remove(),X},je=({onLoading:X,onLoaded:Be})=>et=>(X(),et.addEventListener(z.Ox,function vt(){Be(),et.removeEventListener(z.Ox,vt)}),et),Ht=()=>X=>(setTimeout(()=>{const Be=X==null?void 0:X.querySelectorAll("li.md-nav__item--active");Be.length!==0&&(Be.forEach(vt=>{const Se=vt==null?void 0:vt.querySelector("input");Se!=null&&Se.checked||Se==null||Se.click()}),Be[Be.length-1].scrollIntoView())},200),X),nn=async(X,Be)=>{let et;if(typeof X=="string")et=new DOMParser().parseFromString(X,"text/html").documentElement;else if(X instanceof Element)et=X;else throw new Error("dom is not a recognized type");for(const vt of Be)et=await vt(et);return et};function ln(X,Be){const et=new URL(Be),vt=`${et.origin}${et.pathname.replace(/\/$/,"")}`,Se=X.replace(vt,"").replace(/^\/+/,""),H=new URL(`http://localhost/${Se}`);return`${H.pathname}${H.search}${H.hash}`}function on(){const X=(0,m.s0)(),et=(0,Y.u)(Y.p).getOptionalString("app.baseUrl");return(0,o.useCallback)(Se=>{let H=Se;if(et)try{H=ln(Se,et)}catch{}X(H)},[X,et])}const In="screen and (max-width: 76.1875em)",Bn=X=>{const Be=on(),et=(0,G.Z)(),vt=(0,Oe.Z)(In),Se=Me(),H=Et(),Ee=(0,v.z$)(),de=(0,Y.u)(z.Dl),st=(0,Y.u)(Rt.q3),{state:k,path:j,content:Q}=O(),[te,ke]=(0,o.useState)(null),Je=(0,z.ux)(te),He=(0,o.useCallback)(()=>{if(!te)return;te.querySelectorAll(".md-sidebar").forEach(un=>{var hn,En,kn;if(vt)un.style.top="0px";else{const wn=document==null?void 0:document.querySelector(".techdocs-reader-page"),xn=(hn=wn==null?void 0:wn.getBoundingClientRect().top)!=null?hn:0;let Rn=(En=te.getBoundingClientRect().top)!=null?En:0;const On=te.querySelector(".md-container > .md-tabs"),pn=(kn=On==null?void 0:On.getBoundingClientRect().height)!=null?kn:0;Rn<xn&&(Rn=xn),un.style.top=`${Math.max(Rn,0)+pn}px`}un.style.setProperty("opacity","1")})},[te,vt]);(0,o.useEffect)(()=>(window.addEventListener("resize",He),window.addEventListener("scroll",He,!0),()=>{window.removeEventListener("resize",He),window.removeEventListener("scroll",He,!0)}),[te,He]);const qe=(0,o.useCallback)(()=>{if(!te)return;const wt=te.querySelector(".md-footer");wt&&(wt.style.width=`${te.getBoundingClientRect().width}px`)},[te]);(0,o.useEffect)(()=>(window.addEventListener("resize",qe),()=>{window.removeEventListener("resize",qe)}),[te,qe]),(0,o.useEffect)(()=>{Je||(qe(),He())},[k,Je,qe,He]);const At=(0,o.useCallback)((wt,un)=>nn(wt,[Se,mn({techdocsStorageApi:de,entityId:X,path:un}),Zn(),Mn(),ae(),Ae(),Vn(st),H]),[X,st,de,Se,H]),dn=(0,o.useCallback)(async wt=>nn(wt,[Ht(),Vt(et),F({baseUrl:window.location.origin,onClick:(un,hn)=>{var En,kn;const wn=un.ctrlKey||un.metaKey,xn=new URL(hn),Rn=((En=un.target)==null?void 0:En.innerText)||hn,On=hn.replace(window.location.origin,"");Ee.captureEvent("click",Rn,{attributes:{to:On}}),xn.hash?wn?window.open(hn,"_blank"):(Be(hn),(kn=wt==null?void 0:wt.querySelector(`[id="${xn.hash.slice(1)}"]`))==null||kn.scrollIntoView()):wn?window.open(hn,"_blank"):Be(hn)}}),je({onLoading:()=>{},onLoaded:()=>{var un;(un=wt.querySelector(".md-nav__title"))==null||un.removeAttribute("for")}}),je({onLoading:()=>{Array.from(wt.querySelectorAll(".md-sidebar")).forEach(hn=>{hn.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[et,Be,Ee]);return(0,o.useEffect)(()=>{if(!Q)return()=>{};let wt=!0;return At(Q,j).then(async un=>{if(!(un!=null&&un.innerHTML)||!wt)return;window.scroll({top:0});const hn=await dn(un);ke(hn)}),()=>{wt=!1}},[Q,j,At,dn]),te},Hn=()=>{const X=(0,z.$L)(),{shadowRoot:Be}=(0,z.x1)(),et=Be==null?void 0:Be.querySelector('[data-md-component="content"]'),vt=Be==null?void 0:Be.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let Se=vt==null?void 0:vt.querySelector('[data-techdocs-addons-location="primary sidebar"]');Se||(Se=document.createElement("div"),Se.setAttribute("data-techdocs-addons-location","primary sidebar"),vt==null||vt.prepend(Se));const H=Be==null?void 0:Be.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let Ee=H==null?void 0:H.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return Ee||(Ee=document.createElement("div"),Ee.setAttribute("data-techdocs-addons-location","secondary sidebar"),H==null||H.prepend(Ee)),o.createElement(o.Fragment,null,o.createElement(I.Z,{container:Se},X.renderComponentsByLocation(z.oZ.PrimarySidebar)),o.createElement(I.Z,{container:et},X.renderComponentsByLocation(z.oZ.Content)),o.createElement(I.Z,{container:Ee},X.renderComponentsByLocation(z.oZ.SecondarySidebar)))},ra=(0,B.Z)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"},"@media print":{display:"none"}}}),yn=ne(X=>{var Be;const{withSearch:et=!0,onReady:vt}=X,Se=ra(),{entityMetadata:{value:H,loading:Ee},entityRef:de,setShadowRoot:st}=(0,z.x1)(),k=Bn(de),j=window.location.pathname,Q=window.location.hash,te=(0,z.ux)(k),[ke]=(0,z.pV)([`[id="${Q.slice(1)}"]`]);(0,o.useEffect)(()=>{var He;te||(Q?ke&&ke.scrollIntoView():(He=document==null?void 0:document.querySelector("header"))==null||He.scrollIntoView())},[j,Q,ke,te]);const Je=(0,o.useCallback)(He=>{st(He),vt instanceof Function&&vt()},[st,vt]);return Ee===!1&&!H?o.createElement(p.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}):k?o.createElement(p.VY,null,o.createElement($.Z,{container:!0},o.createElement($.Z,{xs:12,item:!0},o.createElement(we,null)),et&&o.createElement($.Z,{className:Se.search,xs:"auto",item:!0},o.createElement(Ct,{entityId:de,entityTitle:(Be=H==null?void 0:H.metadata)==null?void 0:Be.title})),o.createElement($.Z,{xs:12,item:!0},o.createElement(z.VA,{element:k,onAppend:Je},o.createElement(Hn,null))))):o.createElement(p.VY,null,o.createElement($.Z,{container:!0},o.createElement($.Z,{xs:12,item:!0},o.createElement(we,null))))}),na=null,ia=o.createElement(fe.Z,{animation:"wave",variant:"text",height:40}),oa=X=>{const{palette:{common:{white:Be}}}=(0,G.Z)(),{children:et}=X,vt=(0,z.$L)(),Se=(0,Y.u)(Y.p),{title:H,setTitle:Ee,subtitle:de,setSubtitle:st,entityRef:k,metadata:{value:j,loading:Q},entityMetadata:{value:te,loading:ke}}=(0,z.x1)();(0,o.useEffect)(()=>{j&&(Ee(j.site_name),st(()=>{let{site_description:wn}=j;return(!wn||wn==="None")&&(wn=""),wn}))},[j,Ee,st]);const Je=Se.getOptional("app.title")||"Backstage",He=[H,de,Je].filter(Boolean).join(" | "),{locationMetadata:qe,spec:At}=te||{},dn=At==null?void 0:At.lifecycle,wt=te?(0,zt.g)(te,Ft.S4):[],un=(0,v.tg)($t.r)(),hn=o.createElement(o.Fragment,null,o.createElement(p.i9,{label:(0,ct.capitalize)((te==null?void 0:te.kind)||"entity"),value:o.createElement(Tt.dx,{color:"inherit",entityRef:k,title:te==null?void 0:te.metadata.title,defaultKind:"Component"})}),wt.length>0&&o.createElement(p.i9,{label:"Owner",value:o.createElement(Tt.rI,{color:"inherit",entityRefs:wt,defaultKind:"group"})}),dn?o.createElement(p.i9,{label:"Lifecycle",value:String(dn)}):null,qe&&qe.type!=="dir"&&qe.type!=="file"?o.createElement(p.i9,{label:"",value:o.createElement($.Z,{container:!0,direction:"column",alignItems:"center",style:{color:Be}},o.createElement($.Z,{style:{padding:0},item:!0},o.createElement(ot.Z,{style:{marginTop:"-25px"}})),o.createElement($.Z,{style:{padding:0},item:!0},"Source")),url:qe.target}):null);return!ke&&te===void 0||!Q&&j===void 0?null:o.createElement(p.h4,{type:"Documentation",typeLink:un,title:H||ia,subtitle:de===""?void 0:de||ia},o.createElement(Pt.Z,{titleTemplate:"%s"},o.createElement("title",null,He)),hn,et,vt.renderComponentsByLocation(z.oZ.Header))},ua=(0,B.Z)(X=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:X.spacing(3,3,0),"@media print":{display:"none"}}})),Pa=X=>{const Be=ua(),[et,vt]=(0,o.useState)(null),Se=(0,o.useCallback)(Q=>{vt(Q.currentTarget)},[]),H=(0,o.useCallback)(()=>{vt(null)},[]),{entityMetadata:{value:Ee,loading:de}}=(0,z.x1)(),st=(0,z.$L)(),k=st.renderComponentsByLocation(z.oZ.Subheader),j=st.renderComponentsByLocation(z.oZ.Settings);return!k&&!j||de===!1&&!Ee?null:o.createElement(c.Z,{classes:Be,...X.toolbarProps},o.createElement(R.Z,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},k,j?o.createElement(o.Fragment,null,o.createElement(ge.ZP,{title:"Settings"},o.createElement(Ne.Z,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:Se},o.createElement(an.Z,null))),o.createElement(_.Z,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:et,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(et),onClose:H,keepMounted:!0},o.createElement("div",null,j))):null))},Qn=X=>{const{withSearch:Be,withHeader:et=!0}=X;return o.createElement(p.T3,{themeId:"documentation"},et&&o.createElement(oa,null),o.createElement(Pa,null),o.createElement(yn,{withSearch:Be}))},Ea=X=>{const{kind:Be,name:et,namespace:vt}=(0,v.Oi)($t.b),{children:Se,entityRef:H={kind:Be,name:et,namespace:vt}}=X,Ee=(0,m.pC)();if(!Se){const k=(Ee?o.Children.toArray(Ee.props.children):[]).flatMap(j=>{var Q,te;return(te=(Q=j==null?void 0:j.props)==null?void 0:Q.children)!=null?te:[]}).find(j=>!(0,v.IY)(j,z.Zz)&&!(0,v.IY)(j,z.jM));return o.createElement(z.ZS,{entityRef:H},k||o.createElement(Qn,null))}return o.createElement(z.ZS,{entityRef:H},({metadata:de,entityMetadata:st,onReady:k})=>o.createElement("div",{className:"techdocs-reader-page"},o.createElement(p.T3,{themeId:"documentation"},Se instanceof Function?Se({entityRef:H,techdocsMetadataValue:de.value,entityMetadataValue:st.value,onReady:k}):Se)))}},77529:($n,qt,e)=>{"use strict";e.r(qt),e.d(qt,{TechDocsSearchResultListItem:()=>Ne});var o=e(2784),m=e(79692),p=e(49378),z=e(86136),B=e(90436),i=e(49558),$=e(42054);const Qe=(0,m.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),Ne=a=>{const{result:xe,highlight:Te,lineClamp:ie=5,asListItem:G=!0,asLink:Ge=!0,title:ge,icon:be}=a,re=Qe(),Oe=({children:R})=>Ge?o.createElement(i.rU,{noTrack:!0,to:xe.location},R):o.createElement(o.Fragment,null,R),I=()=>{const R=Te!=null&&Te.fields.title?o.createElement($.b,{text:Te.fields.title,preTag:Te.preTag,postTag:Te.postTag}):xe.title,_=Te!=null&&Te.fields.entityTitle?o.createElement($.b,{text:Te.fields.entityTitle,preTag:Te.preTag,postTag:Te.postTag}):xe.entityTitle,b=Te!=null&&Te.fields.name?o.createElement($.b,{text:Te.fields.name,preTag:Te.preTag,postTag:Te.postTag}):xe.name;return xe?o.createElement(p.Z,{className:re.itemText,primaryTypographyProps:{variant:"h6"},primary:o.createElement(Oe,null,ge||o.createElement(o.Fragment,null,R," | ",_!=null?_:b," docs")),secondary:o.createElement(B.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:ie,overflow:"hidden"},color:"textSecondary",variant:"body2"},Te!=null&&Te.fields.text?o.createElement($.b,{text:Te.fields.text,preTag:Te.preTag,postTag:Te.postTag}):xe.text)}):null},c=({children:R})=>G?o.createElement(o.Fragment,null,be&&o.createElement(z.Z,null,typeof be=="function"?be(xe):be),o.createElement("div",{className:re.flexContainer},R)):o.createElement(o.Fragment,null,R);return o.createElement(c,null,o.createElement(I,null))}},67266:($n,qt,e)=>{"use strict";e.d(qt,{T:()=>Qe,a:()=>Ne,b:()=>xe,c:()=>Te,r:()=>a});var o=e(32272),m=e(76372),p=e.n(m),z=e(30705),B=Object.defineProperty,i=(ie,G,Ge)=>G in ie?B(ie,G,{enumerable:!0,configurable:!0,writable:!0,value:Ge}):ie[G]=Ge,$=(ie,G,Ge)=>(i(ie,typeof G!="symbol"?G+"":G,Ge),Ge);class Qe{constructor(G){$(this,"configApi"),$(this,"discoveryApi"),$(this,"fetchApi"),this.configApi=G.configApi,this.discoveryApi=G.discoveryApi,this.fetchApi=G.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(G){const{kind:Ge,namespace:ge,name:be}=G,Oe=`${await this.getApiOrigin()}/metadata/techdocs/${ge}/${Ge}/${be}`,I=await this.fetchApi.fetch(`${Oe}`);if(!I.ok)throw await o.VL.fromResponse(I);return await I.json()}async getEntityMetadata(G){const{kind:Ge,namespace:ge,name:be}=G,Oe=`${await this.getApiOrigin()}/metadata/entity/${ge}/${Ge}/${be}`,I=await this.fetchApi.fetch(`${Oe}`);if(!I.ok)throw await o.VL.fromResponse(I);return await I.json()}}class Ne{constructor(G){$(this,"configApi"),$(this,"discoveryApi"),$(this,"identityApi"),$(this,"fetchApi"),this.configApi=G.configApi,this.discoveryApi=G.discoveryApi,this.identityApi=G.identityApi,this.fetchApi=G.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var G;return(G=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?G:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(G,Ge){const{kind:ge,namespace:be,name:re}=G,I=`${await this.getStorageUrl()}/${be}/${ge}/${re}/${Ge}`,c=await this.fetchApi.fetch(`${I.endsWith("/")?I:`${I}/`}index.html`);let R="";switch(c.status){case 404:throw R="Page not found. ",Ge||(R+="This could be because there is no index.md file in the root of the docs directory of this repository."),new o.dR(R);case 500:throw R="Could not generate documentation or an error in the TechDocs backend. ",new Error(R)}return c.text()}async syncEntityDocs(G,Ge=()=>{}){const{kind:ge,namespace:be,name:re}=G,I=`${await this.getApiOrigin()}/sync/${be}/${ge}/${re}`,{token:c}=await this.identityApi.getCredentials();return new Promise((R,_)=>{const b=new m.EventSourcePolyfill(I,{withCredentials:!0,headers:c?{Authorization:`Bearer ${c}`}:{}});b.addEventListener("log",N=>{N.data&&Ge(JSON.parse(N.data))}),b.addEventListener("finish",N=>{let _e=!1;N.data&&({updated:_e}=JSON.parse(N.data)),R(_e?"updated":"cached")}),b.onerror=N=>{switch(b.close(),N.status){case 404:_(new o.dR(N.message));return;default:_(new Error(N.data));return}}})}async getBaseUrl(G,Ge,ge){const{kind:be,namespace:re,name:Oe}=Ge,c=`${await this.getApiOrigin()}/static/docs/${re}/${be}/${Oe}/${ge}`;return new URL(G,c.endsWith("/")?c:`${c}/`).toString()}}const a=(0,z.NT)({id:"techdocs:index-page"}),xe=(0,z.NT)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),Te=(0,z.NT)({id:"techdocs:catalog-reader-view"})},74369:($n,qt,e)=>{"use strict";e.d(qt,{L:()=>ft,S:()=>rt,a:()=>kt,e:()=>an});var o=e(73557),m=e(2784),p=e(90436),z=e(77277),B=e(79692),i=e(43434),$=e(38402),Qe=e(86136),Ne=e(49378),a=e(80030),xe=e(60905),Te=e(9520),ie=e(11776),G=e(82938),Ge=e(86619),ge=e(61837),be=e(48348),re=e(12231),Oe=e(49558),I=e(11640),c=e(57032),R=e(30705),_=e(33375),b=e(64279),N=e(71554),_e=e(43054),fe=e(72164),ve=e(59324),Y=e(13737),v=e(31168),ee=e(83487),oe=e(15241),Rt=e(73495);const T=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,sn=()=>m.createElement(Oe.ub,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:m.createElement(m.Fragment,null,m.createElement(p.Z,{variant:"body1"},"Open ",m.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),m.createElement(Oe.Oi,{text:T,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),m.createElement(z.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),me=(0,B.Z)(le=>({avatar:{width:({size:Ue})=>Ue,height:({size:Ue})=>Ue,fontSize:({size:Ue})=>Ue*.7,border:`1px solid ${le.palette.textSubtle}`}})),Zt=({size:le,picture:Ue})=>{const{iconSize:Lt}=Oe.sidebarConfig,Yt=me(le?{size:le}:{size:Lt});return m.createElement(i.Z,{src:Ue,className:Yt.avatar})},yt={},mt=le=>{const{title:Ue,description:Lt,icon:Yt,apiRef:se}=le,Ze=(0,c.u)(se),pe=(0,c.u)(c.r),[Me,nt]=(0,m.useState)(!1),[pt,Bt]=(0,m.useState)(yt);return(0,m.useEffect)(()=>{let tn=!1;const Ce=Ze.sessionState$().subscribe(Le=>{Le!==c.S.SignedIn&&(Bt(yt),nt(!1)),tn||Ze.getProfile({optional:!0}).then(P=>{tn||(Le===c.S.SignedIn&&nt(!0),P&&Bt(P))})});return()=>{tn=!0,Ce.unsubscribe()}},[Ze]),m.createElement($.Z,null,m.createElement(Qe.Z,null,m.createElement(Yt,null)),m.createElement(Ne.Z,{primary:Ue,secondary:m.createElement(a.ZP,{placement:"top",arrow:!0,title:Lt},m.createElement(xe.Z,{container:!0,spacing:6},m.createElement(xe.Z,{item:!0},m.createElement(Zt,{size:48,picture:pt.picture})),m.createElement(xe.Z,{item:!0,xs:12,sm:!0,container:!0},m.createElement(xe.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},m.createElement(xe.Z,{item:!0,xs:!0},m.createElement(p.Z,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},pt.displayName),m.createElement(p.Z,{variant:"body2",color:"textSecondary"},pt.email),m.createElement(p.Z,{variant:"body2",color:"textSecondary"},Lt)))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),m.createElement(Te.Z,null,m.createElement(a.ZP,{placement:"top",arrow:!0,title:Me?`Sign out from ${Ue}`:`Sign in to ${Ue}`},m.createElement(z.Z,{variant:"outlined",color:"primary",onClick:()=>{(Me?Ze.signOut():Ze.signIn()).catch(Ce=>pe.post(Ce))}},Me?"Sign out":"Sign in"))))},It=le=>{const{configuredProviders:Ue}=le;return m.createElement(m.Fragment,null,Ue.includes("google")&&m.createElement(mt,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:c.g,icon:I.Z}),Ue.includes("microsoft")&&m.createElement(mt,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:c.m,icon:I.Z}),Ue.includes("github")&&m.createElement(mt,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:c.d,icon:I.Z}),Ue.includes("gitlab")&&m.createElement(mt,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:c.e,icon:I.Z}),Ue.includes("okta")&&m.createElement(mt,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:c.o,icon:I.Z}),Ue.includes("bitbucket")&&m.createElement(mt,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:c.i,icon:I.Z}),Ue.includes("onelogin")&&m.createElement(mt,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:c.h,icon:I.Z}),Ue.includes("atlassian")&&m.createElement(mt,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:c.k,icon:I.Z}),Ue.includes("bitbucketServer")&&m.createElement(mt,{title:"Bitbucket Server",description:"Provides authentication towards Bitbucket Server APIs",apiRef:c.j,icon:I.Z}))},We=le=>{const{providerSettings:Ue}=le,Yt=(0,c.u)(c.p).getOptionalConfig("auth.providers"),se=(Yt==null?void 0:Yt.keys())||[],Ze=Ue!=null?Ue:m.createElement(It,{configuredProviders:se});return!Ue&&!(se!=null&&se.length)?m.createElement(sn,null):m.createElement(Oe.rJ,{title:"Available Providers"},m.createElement(ie.Z,{dense:!0},Ze))},Pt=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,ot=()=>m.createElement(Oe.ub,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:m.createElement(m.Fragment,null,m.createElement(p.Z,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),m.createElement(Oe.Oi,{text:Pt,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),m.createElement(z.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),zt=le=>le.description?le.description:le.pluginId?`Registered in ${le.pluginId} plugin`:"Registered in the application",Tt=({flag:le,enabled:Ue,toggleHandler:Lt})=>m.createElement($.Z,{divider:!0,button:!0,onClick:()=>Lt(le.name)},m.createElement(Qe.Z,null,m.createElement(a.ZP,{placement:"top",arrow:!0,title:Ue?"Disable":"Enable"},m.createElement(G.Z,{color:"primary",checked:Ue,name:le.name}))),m.createElement(Ne.Z,{primary:le.name,secondary:zt(le)})),Ft=(le,Ue)=>{const Lt=le.filter(se=>Ue.isActive(se.name)),Yt=le.filter(se=>!Ue.isActive(se.name));return[...Lt,...Yt]},ct=()=>{const le=(0,c.u)(c.f),Ue=m.useRef(),Lt=le.getRegisteredFlags(),Yt=Ft(Lt,le),[se]=(0,m.useState)(Yt),Ze=Object.fromEntries(se.map(({name:P})=>[P,le.isActive(P)])),[pe,Me]=(0,m.useState)(Ze),[nt,pt]=(0,m.useState)(""),Bt=(0,m.useCallback)(P=>{const W=le.isActive(P)?c.F.None:c.F.Active;le.save({states:{[P]:W},merge:!0}),Me(J=>({...J,[P]:W===c.F.Active}))},[le]);if(!se.length)return m.createElement(ot,null);const tn=()=>{var P;pt(""),(P=Ue==null?void 0:Ue.current)==null||P.focus()},Ce=se.filter(P=>P.name.toLocaleLowerCase("en-US").includes(nt.toLocaleLowerCase("en-US"))),Le=()=>m.createElement(xe.Z,{container:!0,style:{justifyContent:"space-between"}},m.createElement(xe.Z,{item:!0,xs:6,md:8},m.createElement(p.Z,{variant:"h5"},"Feature Flags"),m.createElement(p.Z,{variant:"subtitle1"},"Please refresh the page when toggling feature flags")),se.length>=10&&m.createElement(xe.Z,{item:!0,xs:6,md:4},m.createElement(Ge.Z,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:P=>P&&P.focus(),InputProps:{...nt.length&&{endAdornment:m.createElement(ge.Z,{"aria-label":"Clear filter",onClick:tn,edge:"end"},m.createElement(_.Z,null))}},onChange:P=>pt(P.target.value),value:nt})));return m.createElement(Oe.rJ,{title:m.createElement(Le,null)},m.createElement(ie.Z,{dense:!0},Ce.map(P=>{const W=Boolean(pe[P.name]);return m.createElement(Tt,{key:P.name,flag:P,enabled:W,toggleHandler:Bt})})))},ht=()=>{var le;const Ue=(0,c.u)(c.t),Lt=(0,c.u)(c.l),{value:Yt,loading:se,error:Ze}=(0,b.default)(async()=>({profile:await Ue.getProfileInfo(),identity:await Ue.getBackstageIdentity()}),[]);return(0,m.useEffect)(()=>{Ze&&Lt.post({message:`Failed to load user identity: ${Ze}`,severity:"error"})},[Ze,Lt]),se||Ze?{profile:{},displayName:"",loading:se}:{profile:Yt.profile,backstageIdentity:Yt.identity,displayName:(le=Yt.profile.displayName)!=null?le:Yt.identity.userEntityRef,loading:se}},$t=(0,B.Z)(le=>({avatar:{width:({size:Ue})=>Ue,height:({size:Ue})=>Ue,fontSize:({size:Ue})=>Ue*.7,border:`1px solid ${le.palette.textSubtle}`}})),an=le=>{const{size:Ue}=le,{iconSize:Lt}=Oe.sidebarConfig,Yt=$t(Ue?{size:Ue}:{size:Lt}),{profile:se}=ht();return m.createElement(i.Z,{src:se.picture,className:Yt.avatar,alt:"Profile picture"})},St=()=>{const le=(0,c.u)(c.r),Ue=(0,c.u)(c.t),[Lt,Yt]=m.useState(!1),[se,Ze]=m.useState(void 0),pe=nt=>{Ze(nt.currentTarget),Yt(!0)},Me=()=>{Ze(void 0),Yt(!1)};return m.createElement(m.Fragment,null,m.createElement(ge.Z,{"data-testid":"user-settings-menu","aria-label":"more",onClick:pe},m.createElement(_e.Z,null)),m.createElement(be.Z,{anchorEl:se,open:Lt,onClose:Me},m.createElement(re.Z,{"data-testid":"sign-out",onClick:()=>Ue.signOut().catch(nt=>le.post(nt))},m.createElement(Qe.Z,null,m.createElement(N.Z,null)),"Sign Out")))},Gt=()=>{const{profile:le,displayName:Ue}=ht();return m.createElement(Oe.rJ,{title:"Profile",variant:"gridItem"},m.createElement(xe.Z,{container:!0,spacing:6},m.createElement(xe.Z,{item:!0},m.createElement(an,{size:96})),m.createElement(xe.Z,{item:!0,xs:12,sm:!0,container:!0},m.createElement(xe.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},m.createElement(xe.Z,{item:!0,xs:!0},m.createElement(p.Z,{variant:"subtitle1",gutterBottom:!0},Ue),le.email&&m.createElement(p.Z,{variant:"body2",color:"textSecondary"},le.email))),m.createElement(xe.Z,{item:!0},m.createElement(St,null)))))},D=()=>{const{isPinned:le,toggleSidebarPinState:Ue}=(0,Oe.Pf)();return m.createElement($.Z,null,m.createElement(Ne.Z,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),m.createElement(Te.Z,null,m.createElement(a.ZP,{placement:"top",arrow:!0,title:`${le?"Unpin":"Pin"} Sidebar`},m.createElement(G.Z,{color:"primary",checked:le,onChange:()=>Ue(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},U=({id:le,activeId:Ue,icon:Lt})=>Lt?(0,m.cloneElement)(Lt,{color:Ue===le?"primary":void 0}):m.createElement(ve.Z,{color:Ue===le?"primary":void 0}),O=(0,B.Z)(le=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[le.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[le.breakpoints.down("xs")]:{paddingLeft:0}}})),M=({children:le,title:Ue,value:Lt,...Yt})=>m.createElement(a.ZP,{placement:"top",arrow:!0,title:Ue},m.createElement(Y.Z,{value:Lt,...Yt},le)),ne=()=>{const le=O(),Ue=(0,c.u)(c.n),Lt=(0,fe.Z)(Ue.activeThemeId$(),Ue.getActiveThemeId()),Yt=Ue.getInstalledThemes(),{t:se}=(0,ee.iH)(oe.a),Ze=(pe,Me)=>{Yt.some(nt=>nt.id===Me)?Ue.setActiveThemeId(Me):Ue.setActiveThemeId(void 0)};return m.createElement($.Z,{className:le.list,classes:{container:le.container}},m.createElement(Ne.Z,{className:le.listItemText,primary:se("themeToggle.title"),secondary:se("themeToggle.description")}),m.createElement(Te.Z,{className:le.listItemSecondaryAction},m.createElement(v.Z,{exclusive:!0,size:"small",value:Lt!=null?Lt:"auto",onChange:Ze},Yt.map(pe=>{const Me=pe.id,nt=pe.icon,pt=pe.title||(Me==="light"||Me==="dark"?se(`themeToggle.names.${Me}`):Me);return m.createElement(M,{key:Me,title:se("themeToggle.select",{theme:pt}),value:Me},m.createElement(m.Fragment,null,pt,"\xA0",m.createElement(U,{id:Me,icon:nt,activeId:Lt})))}),m.createElement(a.ZP,{placement:"top",arrow:!0,title:se("themeToggle.selectAuto")},m.createElement(Y.Z,{value:"auto",selected:Lt===void 0},se("themeToggle.names.auto"),"\xA0",m.createElement(ve.Z,{color:Lt===void 0?"primary":void 0}))))))},he=(0,B.Z)(le=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[le.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[le.breakpoints.down("xs")]:{paddingLeft:0}}})),ze=()=>{const le=he(),Ue=(0,c.u)(ee.IB),{t:Lt}=(0,ee.iH)(oe.a),[Yt]=(0,m.useState)(()=>Ue.language$()),{language:se}=(0,fe.Z)(Yt,Ue.getLanguage()),{languages:Ze}=Ue.getAvailableLanguages();if(Ze.length<=1)return null;const pe=nt=>{Ue.setLanguage(nt)},Me=nt=>{try{return new Intl.DisplayNames([nt],{type:"language"}).of(nt)||nt}catch{return nt}};return m.createElement($.Z,{className:le.list,classes:{container:le.container}},m.createElement(Ne.Z,{className:le.listItemText,primary:Lt("languageToggle.title"),secondary:Lt("languageToggle.description")}),m.createElement(Te.Z,{className:le.listItemSecondaryAction},m.createElement(Oe.Ph,{label:"",selected:se,items:Ze.map(nt=>({label:Me(nt),value:nt})),onChange:nt=>pe(nt)})))},Ct=()=>{const{isMobile:le}=(0,Oe.Pf)();return m.createElement(Oe.rJ,{title:"Appearance",variant:"gridItem"},m.createElement(ie.Z,{dense:!0},m.createElement(ne,null),m.createElement(ze,null),!le&&m.createElement(D,null)))},Ye=()=>{const{backstageIdentity:le}=ht();return le?m.createElement(xe.Z,{container:!0,spacing:1},m.createElement(xe.Z,{item:!0,xs:12},m.createElement(p.Z,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",m.createElement(Rt.rI,{entityRefs:[le.userEntityRef]}))),m.createElement(xe.Z,{item:!0,xs:12},m.createElement(p.Z,{variant:"subtitle1"},"Ownership Entities:"," ",m.createElement(Rt.rI,{entityRefs:le.ownershipEntityRefs})))):m.createElement(p.Z,null,"No Backstage Identity")},Mt=()=>m.createElement(Oe.rJ,{title:"Backstage Identity"},m.createElement(Ye,null)),rn=()=>m.createElement(xe.Z,{container:!0,direction:"row",spacing:3},m.createElement(xe.Z,{item:!0,xs:12,md:6},m.createElement(Gt,null)),m.createElement(xe.Z,{item:!0,xs:12,md:6},m.createElement(Ct,null)),m.createElement(xe.Z,{item:!0,xs:12,md:6},m.createElement(Mt,null))),Wt="plugin.user-settings.settingsLayout",ft="plugin.user-settings.settingsLayoutRoute",we=()=>null;(0,R.R5)(we,ft,!0),(0,R.R5)(we,"core.gatherMountPoints",!0);const rt=le=>{const{title:Ue,children:Lt}=le,{isMobile:Yt}=(0,Oe.Pf)(),se=(0,R.vJ)(Lt,Ze=>Ze.selectByComponentData({key:ft,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(pe=>pe.props));return m.createElement(Oe.T3,{themeId:"home"},!Yt&&m.createElement(Oe.h4,{title:Ue!=null?Ue:"Settings"}),m.createElement(Oe.tn,{routes:se}))};(0,R.R5)(rt,Wt,!0),rt.Route=we;const xt=le=>{const{providerSettings:Ue,tabs:Lt}=le;return m.createElement(rt,null,m.createElement(rt.Route,{path:"general",title:"General"},m.createElement(rn,null)),m.createElement(rt.Route,{path:"auth-providers",title:"Authentication Providers"},m.createElement(We,{providerSettings:Ue})),m.createElement(rt.Route,{path:"feature-flags",title:"Feature Flags"},m.createElement(ct,null)),Lt)},kt=le=>{const{providerSettings:Ue}=le,Lt=(0,o.pC)(),Yt=(0,R.vJ)(Lt,Ze=>Ze.selectByComponentData({key:Wt}).getElements()),se=(0,R.vJ)(Lt,Ze=>Ze.selectByComponentData({key:ft}).getElements());return m.createElement(m.Fragment,null,Yt.length!==0&&Yt||m.createElement(xt,{tabs:se,providerSettings:Ue}))}},15241:($n,qt,e)=>{"use strict";e.d(qt,{U:()=>B,a:()=>i,s:()=>p});var o=e(30705),m=e(83487);const p=(0,o.NT)({id:"user-settings"}),B=(0,o.rx)({id:"user-settings",routes:{settingsPage:p}}).provide((0,o.P4)({name:"UserSettingsPage",component:()=>e.e(751).then(e.bind(e,751)).then($=>$.SettingsPage),mountPoint:p})),i=(0,m.FB)({id:"user-settings",messages:{languageToggle:{title:"Language",description:"Change the language",select:"Select language {{language}}"},themeToggle:{title:"Theme",description:"Change the theme mode",select:"Select theme {{theme}}",selectAuto:"Select Auto Theme",names:{light:"Light",dark:"Dark",auto:"Auto"}}}})},43229:($n,qt,e)=>{"use strict";e.d(qt,{Zr:()=>Ge});var o=e(82394),m=e.n(o),p=e(15241),z=e(2784),B=e(47603),i=e(49558),$=e(30705),Qe=e(74369),Ne=Object.defineProperty,a=(re,Oe,I)=>Oe in re?Ne(re,Oe,{enumerable:!0,configurable:!0,writable:!0,value:I}):re[Oe]=I,xe=(re,Oe,I)=>(a(re,typeof Oe!="symbol"?Oe+"":Oe,I),I);const Te={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},ie=new Map;class G{constructor(Oe,I,c,R,_,b){this.namespace=Oe,this.fetchApi=I,this.discoveryApi=c,this.errorApi=R,this.identityApi=_,this.fallback=b,xe(this,"subscribers",new Set),xe(this,"observables",new Map)}static create(Oe){var I;return new G((I=Oe.namespace)!=null?I:"default",Oe.fetchApi,Oe.discoveryApi,Oe.errorApi,Oe.identityApi,WebStorage.create({namespace:Oe.namespace,errorApi:Oe.errorApi}))}forBucket(Oe){const I=`${this.namespace}.${Oe}`;return ie.has(I)||ie.set(I,new G(I,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),ie.get(I)}async remove(Oe){const I=await this.getFetchUrl(Oe),c=await this.fetchApi.fetch(I,{method:"DELETE"});if(!c.ok&&c.status!==404)throw await ResponseError.fromResponse(c);this.notifyChanges({key:Oe,presence:"absent"})}async set(Oe,I){if(!await this.isSignedIn()){await this.fallback.set(Oe,I),this.notifyChanges({key:Oe,presence:"present",value:I});return}const c=await this.getFetchUrl(Oe),R=await this.fetchApi.fetch(c,{method:"PUT",headers:Te,body:JSON.stringify({value:I})});if(!R.ok)throw await ResponseError.fromResponse(R);const{value:_}=await R.json();this.notifyChanges({key:Oe,value:_,presence:"present"})}observe$(Oe){return this.observables.has(Oe)||this.observables.set(Oe,new ObservableImpl(I=>(this.subscribers.add(I),Promise.resolve().then(()=>this.get(Oe)).then(c=>I.next(c)).catch(c=>this.errorApi.post(c)),()=>{this.subscribers.delete(I)})).filter(({key:I})=>I===Oe)),this.observables.get(Oe)}snapshot(Oe){return{key:Oe,presence:"unknown"}}async get(Oe){if(!await this.isSignedIn())return this.fallback.snapshot(Oe);const I=await this.getFetchUrl(Oe),c=await this.fetchApi.fetch(I);if(c.status===404)return{key:Oe,presence:"absent"};if(!c.ok)throw await ResponseError.fromResponse(c);try{const{value:R}=await c.json(),_=JSON.parse(JSON.stringify(R),(b,N)=>(typeof N=="object"&&N!==null&&Object.freeze(N),N));return{key:Oe,presence:"present",value:_}}catch{return{key:Oe,presence:"absent"}}}async getFetchUrl(Oe){const I=await this.discoveryApi.getBaseUrl("user-settings"),c=encodeURIComponent(this.namespace),R=encodeURIComponent(Oe);return`${I}/buckets/${c}/keys/${R}`}async notifyChanges(Oe){for(const I of this.subscribers)try{I.next(Oe)}catch{}}async isSignedIn(){try{const Oe=await this.identityApi.getCredentials();return!!(Oe!=null&&Oe.token)}catch{return!1}}}const Ge=re=>{const Oe=(0,$.tg)(p.s),I=re.icon?re.icon:B.Z;return z.createElement(i.R6,{text:"Settings",to:Oe(),icon:I})},ge=Qe.L,be=re=>z.createElement(Qe.S.Route,{path:re.path,title:re.title},z.createElement(z.Fragment,null,"props.children"));(0,$.R5)(be,ge,"UserSettingsTab")},18473:($n,qt,e)=>{"use strict";e.d(qt,{CT:()=>$,EI:()=>i,Vt:()=>Qe,uW:()=>B});var o=e(2784);function m(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const p=m(),z=a=>`__@backstage/${a}__`;function B(a,xe){const Te=z(a);let ie=p[Te];return ie||(ie=xe(),p[Te]=ie,ie)}function i(a){Object.freeze(a);const xe={atVersion(Te){return a[Te]}};return Object.defineProperty(xe,"$map",{configurable:!0,enumerable:!0,get(){return a}}),xe}function $(a){return B(a,()=>(0,o.createContext)(void 0))}function Qe(a){return(0,o.useContext)($(a))}function Ne(a){return{set(xe){globalThis[`__@backstage/${a}__`]=createContext(i(xe))},reset(){delete globalThis[`__@backstage/${a}__`]}}}}}]);})();

//# sourceMappingURL=module-backstage.0c868b6f.js.map
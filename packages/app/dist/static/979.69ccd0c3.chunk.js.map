{"version":3,"file":"static/979.69ccd0c3.chunk.js","mappings":"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","sources":["webpack://app/../../node_modules/@backstage/plugin-techdocs/dist/esm/DocsCardGrid-66754d32.esm.js","webpack://app/../../node_modules/@backstage/plugin-techdocs/dist/esm/TechDocsCustomHome-114f3198.esm.js"],"sourcesContent":["import { b as rootDocsRouteRef } from './routes-691e552c.esm.js';\nimport { t as toLowerMaybe } from './TechDocsIndexPage-a43a1a1c.esm.js';\nimport { useRouteRef, useApi, configApiRef } from '@backstage/core-plugin-api';\nimport { ItemCardGrid, ItemCardHeader, LinkButton } from '@backstage/core-components';\nimport { Card, CardMedia, CardContent, CardActions } from '@material-ui/core';\nimport React from 'react';\n\nconst DocsCardGrid = (props) => {\n  const { entities } = props;\n  const getRouteToReaderPageFor = useRouteRef(rootDocsRouteRef);\n  const config = useApi(configApiRef);\n  if (!entities)\n    return null;\n  return /* @__PURE__ */ React.createElement(ItemCardGrid, { \"data-testid\": \"docs-explore\" }, !(entities == null ? void 0 : entities.length) ? null : entities.map((entity, index) => {\n    var _a, _b;\n    return /* @__PURE__ */ React.createElement(Card, { key: index }, /* @__PURE__ */ React.createElement(CardMedia, null, /* @__PURE__ */ React.createElement(\n      ItemCardHeader,\n      {\n        title: (_a = entity.metadata.title) != null ? _a : entity.metadata.name\n      }\n    )), /* @__PURE__ */ React.createElement(CardContent, null, entity.metadata.description), /* @__PURE__ */ React.createElement(CardActions, null, /* @__PURE__ */ React.createElement(\n      LinkButton,\n      {\n        to: getRouteToReaderPageFor({\n          namespace: toLowerMaybe(\n            (_b = entity.metadata.namespace) != null ? _b : \"default\",\n            config\n          ),\n          kind: toLowerMaybe(entity.kind, config),\n          name: toLowerMaybe(entity.metadata.name, config)\n        }),\n        color: \"primary\",\n        \"data-testid\": \"read_docs\"\n      },\n      \"Read Docs\"\n    )));\n  }));\n};\n\nexport { DocsCardGrid as D };\n//# sourceMappingURL=DocsCardGrid-66754d32.esm.js.map\n","import React, { useState } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport { makeStyles } from '@material-ui/core';\nimport { catalogApiRef, CATALOG_FILTER_EXISTS, useEntityOwnership } from '@backstage/plugin-catalog-react';\nimport { T as TechDocsPageWrapper, D as DocsTable } from './TechDocsIndexPage-a43a1a1c.esm.js';\nimport { D as DocsCardGrid } from './DocsCardGrid-66754d32.esm.js';\nimport { Content, Progress, WarningPanel, CodeSnippet, HeaderTabs, ContentHeader, SupportButton } from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\nimport 'react-router-dom';\nimport 'react-use/lib/useCopyToClipboard';\nimport 'lodash';\nimport '@backstage/catalog-model';\nimport './routes-691e552c.esm.js';\nimport '@backstage/errors';\nimport 'event-source-polyfill';\nimport '@material-ui/icons/Share';\nimport '@material-ui/styles';\nimport '@material-ui/icons/Star';\nimport '@material-ui/icons/StarBorder';\n\nconst panels = {\n  DocsTable,\n  DocsCardGrid\n};\nconst CustomPanel = ({\n  config,\n  entities,\n  index\n}) => {\n  const useStyles = makeStyles({\n    panelContainer: {\n      marginBottom: \"2rem\",\n      ...config.panelCSS ? config.panelCSS : {}\n    }\n  });\n  const classes = useStyles();\n  const { loading: loadingOwnership, isOwnedEntity } = useEntityOwnership();\n  const Panel = panels[config.panelType];\n  const shownEntities = entities.filter((entity) => {\n    if (config.filterPredicate === \"ownedByUser\") {\n      if (loadingOwnership) {\n        return false;\n      }\n      return isOwnedEntity(entity);\n    }\n    return typeof config.filterPredicate === \"function\" && config.filterPredicate(entity);\n  });\n  return /* @__PURE__ */ React.createElement(React.Fragment, null, /* @__PURE__ */ React.createElement(ContentHeader, { title: config.title, description: config.description }, index === 0 ? /* @__PURE__ */ React.createElement(SupportButton, null, \"Discover documentation in your ecosystem.\") : null), /* @__PURE__ */ React.createElement(\"div\", { className: classes.panelContainer }, /* @__PURE__ */ React.createElement(Panel, { \"data-testid\": \"techdocs-custom-panel\", entities: shownEntities })));\n};\nconst TechDocsCustomHome = (props) => {\n  const { tabsConfig } = props;\n  const [selectedTab, setSelectedTab] = useState(0);\n  const catalogApi = useApi(catalogApiRef);\n  const {\n    value: entities,\n    loading,\n    error\n  } = useAsync(async () => {\n    const response = await catalogApi.getEntities({\n      filter: {\n        \"metadata.annotations.backstage.io/techdocs-ref\": CATALOG_FILTER_EXISTS\n      },\n      fields: [\n        \"apiVersion\",\n        \"kind\",\n        \"metadata\",\n        \"relations\",\n        \"spec.owner\",\n        \"spec.type\"\n      ]\n    });\n    return response.items.filter((entity) => {\n      var _a;\n      return !!((_a = entity.metadata.annotations) == null ? void 0 : _a[\"backstage.io/techdocs-ref\"]);\n    });\n  });\n  const currentTabConfig = tabsConfig[selectedTab];\n  if (loading) {\n    return /* @__PURE__ */ React.createElement(TechDocsPageWrapper, null, /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(Progress, null)));\n  }\n  if (error) {\n    return /* @__PURE__ */ React.createElement(TechDocsPageWrapper, null, /* @__PURE__ */ React.createElement(Content, null, /* @__PURE__ */ React.createElement(\n      WarningPanel,\n      {\n        severity: \"error\",\n        title: \"Could not load available documentation.\"\n      },\n      /* @__PURE__ */ React.createElement(CodeSnippet, { language: \"text\", text: error.toString() })\n    )));\n  }\n  return /* @__PURE__ */ React.createElement(TechDocsPageWrapper, null, /* @__PURE__ */ React.createElement(\n    HeaderTabs,\n    {\n      selectedIndex: selectedTab,\n      onChange: (index) => setSelectedTab(index),\n      tabs: tabsConfig.map(({ label }, index) => ({\n        id: index.toString(),\n        label\n      }))\n    }\n  ), /* @__PURE__ */ React.createElement(Content, { \"data-testid\": \"techdocs-content\" }, currentTabConfig.panels.map((config, index) => /* @__PURE__ */ React.createElement(\n    CustomPanel,\n    {\n      key: index,\n      config,\n      entities: !!entities ? entities : [],\n      index\n    }\n  ))));\n};\n\nexport { TechDocsCustomHome };\n//# sourceMappingURL=TechDocsCustomHome-114f3198.esm.js.map\n"],"names":["DocsCardGrid","props","entities","getRouteToReaderPageFor","config","entity","index","_a","_b","Card","CardMedia","CardContent","CardActions","panels","CustomPanel","classes","makeStyles","loadingOwnership","isOwnedEntity","Panel","shownEntities","TechDocsCustomHome","tabsConfig","selectedTab","setSelectedTab","catalogApi","loading","error","useAsync","currentTabConfig","label"],"sourceRoot":""}
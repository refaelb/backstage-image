{"version":3,"file":"index.esm.js","sources":["../src/components/EntityGridItem/EntityGridItem.tsx","../src/devApp/SidebarThemeSwitcher.tsx","../src/devApp/render.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Entity } from '@backstage/catalog-model';\nimport { EntityProvider } from '@backstage/plugin-catalog-react';\nimport { Grid, GridProps, Theme, makeStyles } from '@material-ui/core';\nimport React from 'react';\n\nconst useStyles = makeStyles<Theme, { entity: Entity }>(theme => ({\n  root: ({ entity }) => ({\n    position: 'relative',\n\n    '&::before': {\n      content: `\"${entity.metadata.name}\"`,\n      top: -theme.typography.fontSize + 4,\n      display: 'block',\n      position: 'absolute',\n      color: theme.palette.textSubtle,\n    },\n  }),\n}));\n\n/** @public */\nexport const EntityGridItem = (\n  props: Omit<GridProps, 'item' | 'container'> & { entity: Entity },\n): JSX.Element => {\n  const { entity, classes, ...rest } = props;\n  const itemClasses = useStyles({ entity });\n\n  return (\n    <EntityProvider entity={entity}>\n      <Grid classes={{ root: itemClasses.root, ...classes }} {...rest} item />\n    </EntityProvider>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { SidebarItem } from '@backstage/core-components';\nimport { appThemeApiRef, useApi } from '@backstage/core-plugin-api';\nimport { ListItemIcon, ListItemText, Menu, MenuItem } from '@material-ui/core';\nimport AutoIcon from '@material-ui/icons/BrightnessAuto';\nimport React, { cloneElement, useCallback, useState } from 'react';\nimport useObservable from 'react-use/lib/useObservable';\n\ntype ThemeIconProps = {\n  active?: boolean;\n  icon: JSX.Element | undefined;\n};\n\nconst ThemeIcon = ({ active, icon }: ThemeIconProps) =>\n  icon ? (\n    cloneElement(icon, {\n      color: active ? 'primary' : undefined,\n    })\n  ) : (\n    <AutoIcon color={active ? 'primary' : undefined} />\n  );\n\nexport const SidebarThemeSwitcher = () => {\n  const appThemeApi = useApi(appThemeApiRef);\n  const themeId = useObservable(\n    appThemeApi.activeThemeId$(),\n    appThemeApi.getActiveThemeId(),\n  );\n  const themeIds = appThemeApi.getInstalledThemes();\n  const activeTheme = themeIds.find(t => t.id === themeId);\n\n  const [anchorEl, setAnchorEl] = useState<Element | undefined>();\n  const open = Boolean(anchorEl);\n\n  const handleOpen = (event: React.MouseEvent) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleSelectTheme = (newThemeId: string | undefined) => {\n    if (themeIds.some(t => t.id === newThemeId)) {\n      appThemeApi.setActiveThemeId(newThemeId);\n    } else {\n      appThemeApi.setActiveThemeId(undefined);\n    }\n\n    setAnchorEl(undefined);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(undefined);\n  };\n\n  const ActiveIcon = useCallback(\n    () => <ThemeIcon icon={activeTheme?.icon} />,\n    [activeTheme],\n  );\n\n  return (\n    <>\n      <SidebarItem\n        icon={ActiveIcon}\n        text=\"Switch Theme\"\n        id=\"theme-button\"\n        aria-haspopup=\"listbox\"\n        aria-controls=\"theme-menu\"\n        aria-label=\"switch theme\"\n        aria-expanded={open ? 'true' : undefined}\n        onClick={handleOpen}\n      />\n\n      <Menu\n        id=\"theme-menu\"\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleClose}\n        MenuListProps={{\n          'aria-labelledby': 'theme-button',\n          role: 'listbox',\n        }}\n      >\n        <MenuItem disabled>Choose a theme</MenuItem>\n        <MenuItem\n          selected={themeId === undefined}\n          onClick={() => handleSelectTheme(undefined)}\n        >\n          <ListItemIcon>\n            <ThemeIcon icon={undefined} active={themeId === undefined} />\n          </ListItemIcon>\n          <ListItemText>Auto</ListItemText>\n        </MenuItem>\n\n        {themeIds.map(theme => {\n          const active = theme.id === themeId;\n          return (\n            <MenuItem\n              key={theme.id}\n              selected={active}\n              aria-selected={active}\n              onClick={() => handleSelectTheme(theme.id)}\n            >\n              <ListItemIcon>\n                <ThemeIcon icon={theme.icon} active={active} />\n              </ListItemIcon>\n              <ListItemText>{theme.title}</ListItemText>\n            </MenuItem>\n          );\n        })}\n      </Menu>\n    </>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createApp } from '@backstage/app-defaults';\nimport { AppRouter, FlatRoutes } from '@backstage/core-app-api';\nimport {\n  AlertDisplay,\n  OAuthRequestDialog,\n  Sidebar,\n  SidebarDivider,\n  SidebarItem,\n  SidebarPage,\n  SidebarSpace,\n  SidebarSpacer,\n} from '@backstage/core-components';\nimport {\n  AnyApiFactory,\n  ApiFactory,\n  AppTheme,\n  attachComponentData,\n  BackstagePlugin,\n  configApiRef,\n  createApiFactory,\n  createRouteRef,\n  IconComponent,\n  RouteRef,\n} from '@backstage/core-plugin-api';\nimport {\n  ScmIntegrationsApi,\n  scmIntegrationsApiRef,\n} from '@backstage/integration-react';\nimport { Box } from '@material-ui/core';\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\nimport React, { ComponentType, ReactNode, PropsWithChildren } from 'react';\nimport { createRoutesFromChildren, Route } from 'react-router-dom';\nimport { SidebarThemeSwitcher } from './SidebarThemeSwitcher';\nimport 'react-dom';\n\nlet ReactDOMPromise: Promise<\n  typeof import('react-dom') | typeof import('react-dom/client')\n>;\nif (process.env.HAS_REACT_DOM_CLIENT) {\n  ReactDOMPromise = import('react-dom/client');\n} else {\n  ReactDOMPromise = import('react-dom');\n}\n\nexport function isReactRouterBeta(): boolean {\n  const [obj] = createRoutesFromChildren(<Route index element={<div />} />);\n  return !obj.index;\n}\n\nconst MaybeGatheringRoute: (props: {\n  path: string;\n  element: JSX.Element;\n  children?: ReactNode;\n}) => JSX.Element = ({ element }) => element;\n\nif (isReactRouterBeta()) {\n  attachComponentData(MaybeGatheringRoute, 'core.gatherMountPoints', true);\n}\n\n/** @public */\nexport type DevAppPageOptions = {\n  path?: string;\n  element: JSX.Element;\n  children?: JSX.Element;\n  title?: string;\n  icon?: IconComponent;\n};\n\n/**\n * DevApp builder that is similar to the App builder API, but creates an App\n * with the purpose of developing one or more plugins inside it.\n *\n * @public\n */\nexport class DevAppBuilder {\n  private readonly plugins = new Array<BackstagePlugin>();\n  private readonly apis = new Array<AnyApiFactory>();\n  private readonly rootChildren = new Array<ReactNode>();\n  private readonly routes = new Array<JSX.Element>();\n  private readonly sidebarItems = new Array<JSX.Element>();\n\n  private defaultPage?: string;\n  private themes?: Array<AppTheme>;\n\n  /**\n   * Register one or more plugins to render in the dev app\n   */\n  registerPlugin(...plugins: BackstagePlugin[]): DevAppBuilder {\n    this.plugins.push(...plugins);\n    return this;\n  }\n\n  /**\n   * Register an API factory to add to the app\n   */\n  registerApi<\n    Api,\n    Impl extends Api,\n    Deps extends { [name in string]: unknown },\n  >(factory: ApiFactory<Api, Impl, Deps>): DevAppBuilder {\n    this.apis.push(factory);\n    return this;\n  }\n\n  /**\n   * Adds a React node to place just inside the App Provider.\n   *\n   * Useful for adding more global components like the AlertDisplay.\n   */\n  addRootChild(node: ReactNode): DevAppBuilder {\n    this.rootChildren.push(node);\n    return this;\n  }\n\n  /**\n   * Adds a page component along with accompanying sidebar item.\n   *\n   * If no path is provided one will be generated.\n   * If no title is provided, no sidebar item will be created.\n   */\n  addPage(opts: DevAppPageOptions): DevAppBuilder {\n    const path = opts.path ?? `/page-${this.routes.length + 1}`;\n\n    if (!this.defaultPage || path === '/') {\n      this.defaultPage = path;\n    }\n\n    if (opts.title) {\n      this.sidebarItems.push(\n        <SidebarItem\n          key={path}\n          to={path}\n          text={opts.title}\n          icon={opts.icon ?? BookmarkIcon}\n        />,\n      );\n    }\n    this.routes.push(\n      <MaybeGatheringRoute\n        key={path}\n        path={path}\n        element={opts.element}\n        children={opts.children}\n      />,\n    );\n    return this;\n  }\n\n  /**\n   * Adds an array of themes to override the default theme.\n   */\n  addThemes(themes: AppTheme[]) {\n    this.themes = themes;\n    return this;\n  }\n\n  /**\n   * Build a DevApp component using the resources registered so far\n   */\n  build(): ComponentType<PropsWithChildren<{}>> {\n    const fakeRouteRef = createRouteRef({ id: 'fake' });\n    const FakePage = () => <Box p={3}>Page belonging to another plugin.</Box>;\n    attachComponentData(FakePage, 'core.mountPoint', fakeRouteRef);\n\n    const apis = [...this.apis];\n    if (!apis.some(api => api.api.id === scmIntegrationsApiRef.id)) {\n      apis.push(\n        createApiFactory({\n          api: scmIntegrationsApiRef,\n          deps: { configApi: configApiRef },\n          factory: ({ configApi }) => ScmIntegrationsApi.fromConfig(configApi),\n        }),\n      );\n    }\n\n    const app = createApp({\n      apis,\n      plugins: this.plugins,\n      themes: this.themes,\n      bindRoutes: ({ bind }) => {\n        for (const plugin of this.plugins ?? []) {\n          const targets: Record<string, RouteRef<any>> = {};\n          for (const routeKey of Object.keys(plugin.externalRoutes)) {\n            targets[routeKey] = fakeRouteRef;\n          }\n          bind(plugin.externalRoutes, targets);\n        }\n      },\n    });\n\n    const DevApp = (\n      <>\n        <AlertDisplay />\n        <OAuthRequestDialog />\n        {this.rootChildren}\n        <AppRouter>\n          <SidebarPage>\n            <Sidebar>\n              <SidebarSpacer />\n              {this.sidebarItems}\n              <SidebarSpace />\n              <SidebarDivider />\n              <SidebarThemeSwitcher />\n            </Sidebar>\n            <FlatRoutes>\n              {this.routes}\n              <Route path=\"/_external_route\" element={<FakePage />} />\n            </FlatRoutes>\n          </SidebarPage>\n        </AppRouter>\n      </>\n    );\n\n    return app.createRoot(DevApp);\n  }\n\n  /**\n   * Build and render directory to #root element, with react hot loading.\n   */\n  render(): void {\n    const DevApp = this.build();\n\n    if (\n      window.location.pathname === '/' &&\n      this.defaultPage &&\n      this.defaultPage !== '/'\n    ) {\n      window.location.pathname = this.defaultPage;\n    }\n\n    ReactDOMPromise.then(ReactDOM => {\n      if ('createRoot' in ReactDOM) {\n        ReactDOM.createRoot(document.getElementById('root')!).render(\n          <DevApp />,\n        );\n      } else {\n        ReactDOM.render(<DevApp />, document.getElementById('root'));\n      }\n    });\n  }\n}\n\n// TODO(rugvip): Figure out patterns for how to allow in-house apps to build upon\n// this to provide their own plugin dev wrappers.\n\n/**\n * Creates a dev app for rendering one or more plugins and exposing the touch points of the plugin.\n *\n * @public\n */\nexport function createDevApp() {\n  return new DevAppBuilder();\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAqBA,MAAM,SAAA,GAAY,WAAsC,CAAU,KAAA,MAAA;AAAA,EAChE,IAAM,EAAA,CAAC,EAAE,MAAA,EAAc,MAAA;AAAA,IACrB,QAAU,EAAA,UAAA;AAAA,IAEV,WAAa,EAAA;AAAA,MACX,OAAS,EAAA,CAAA,CAAA,EAAI,MAAO,CAAA,QAAA,CAAS,IAAI,CAAA,CAAA,CAAA;AAAA,MACjC,GAAK,EAAA,CAAC,KAAM,CAAA,UAAA,CAAW,QAAW,GAAA,CAAA;AAAA,MAClC,OAAS,EAAA,OAAA;AAAA,MACT,QAAU,EAAA,UAAA;AAAA,MACV,KAAA,EAAO,MAAM,OAAQ,CAAA,UAAA;AAAA,KACvB;AAAA,GACF,CAAA;AACF,CAAE,CAAA,CAAA,CAAA;AAGW,MAAA,cAAA,GAAiB,CAC5B,KACgB,KAAA;AAChB,EAAA,MAAM,EAAE,MAAA,EAAQ,OAAS,EAAA,GAAG,MAAS,GAAA,KAAA,CAAA;AACrC,EAAA,MAAM,WAAc,GAAA,SAAA,CAAU,EAAE,MAAA,EAAQ,CAAA,CAAA;AAExC,EAAA,2CACG,cAAe,EAAA,EAAA,MAAA,EAAA,kBACb,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,EAAK,SAAS,EAAE,IAAA,EAAM,WAAY,CAAA,IAAA,EAAM,GAAG,OAAQ,EAAA,EAAI,GAAG,IAAM,EAAA,IAAA,EAAI,MAAC,CACxE,CAAA,CAAA;AAEJ;;ACpBA,MAAM,SAAA,GAAY,CAAC,EAAE,MAAA,EAAQ,MAC3B,KAAA,IAAA,GACE,aAAa,IAAM,EAAA;AAAA,EACjB,KAAA,EAAO,SAAS,SAAY,GAAA,KAAA,CAAA;AAC9B,CAAC,oBAEA,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,EAAS,KAAO,EAAA,MAAA,GAAS,YAAY,KAAW,CAAA,EAAA,CAAA,CAAA;AAG9C,MAAM,uBAAuB,MAAM;AACxC,EAAM,MAAA,WAAA,GAAc,OAAO,cAAc,CAAA,CAAA;AACzC,EAAA,MAAM,OAAU,GAAA,aAAA;AAAA,IACd,YAAY,cAAe,EAAA;AAAA,IAC3B,YAAY,gBAAiB,EAAA;AAAA,GAC/B,CAAA;AACA,EAAM,MAAA,QAAA,GAAW,YAAY,kBAAmB,EAAA,CAAA;AAChD,EAAA,MAAM,cAAc,QAAS,CAAA,IAAA,CAAK,CAAK,CAAA,KAAA,CAAA,CAAE,OAAO,OAAO,CAAA,CAAA;AAEvD,EAAA,MAAM,CAAC,QAAA,EAAU,WAAW,CAAA,GAAI,QAA8B,EAAA,CAAA;AAC9D,EAAM,MAAA,IAAA,GAAO,QAAQ,QAAQ,CAAA,CAAA;AAE7B,EAAM,MAAA,UAAA,GAAa,CAAC,KAA4B,KAAA;AAC9C,IAAA,WAAA,CAAY,MAAM,aAAa,CAAA,CAAA;AAAA,GACjC,CAAA;AAEA,EAAM,MAAA,iBAAA,GAAoB,CAAC,UAAmC,KAAA;AAC5D,IAAA,IAAI,SAAS,IAAK,CAAA,CAAA,CAAA,KAAK,CAAE,CAAA,EAAA,KAAO,UAAU,CAAG,EAAA;AAC3C,MAAA,WAAA,CAAY,iBAAiB,UAAU,CAAA,CAAA;AAAA,KAClC,MAAA;AACL,MAAA,WAAA,CAAY,iBAAiB,KAAS,CAAA,CAAA,CAAA;AAAA,KACxC;AAEA,IAAA,WAAA,CAAY,KAAS,CAAA,CAAA,CAAA;AAAA,GACvB,CAAA;AAEA,EAAA,MAAM,cAAc,MAAM;AACxB,IAAA,WAAA,CAAY,KAAS,CAAA,CAAA,CAAA;AAAA,GACvB,CAAA;AAEA,EAAA,MAAM,UAAa,GAAA,WAAA;AAAA,IACjB,sBAAM,KAAA,CAAA,aAAA,CAAC,SAAU,EAAA,EAAA,IAAA,EAAM,2CAAa,IAAM,EAAA,CAAA;AAAA,IAC1C,CAAC,WAAW,CAAA;AAAA,GACd,CAAA;AAEA,EAAA,uBAEI,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,WAAA;AAAA,IAAA;AAAA,MACC,IAAM,EAAA,UAAA;AAAA,MACN,IAAK,EAAA,cAAA;AAAA,MACL,EAAG,EAAA,cAAA;AAAA,MACH,eAAc,EAAA,SAAA;AAAA,MACd,eAAc,EAAA,YAAA;AAAA,MACd,YAAW,EAAA,cAAA;AAAA,MACX,eAAA,EAAe,OAAO,MAAS,GAAA,KAAA,CAAA;AAAA,MAC/B,OAAS,EAAA,UAAA;AAAA,KAAA;AAAA,GAGX,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,IAAA;AAAA,IAAA;AAAA,MACC,EAAG,EAAA,YAAA;AAAA,MACH,QAAA;AAAA,MACA,IAAA;AAAA,MACA,OAAS,EAAA,WAAA;AAAA,MACT,aAAe,EAAA;AAAA,QACb,iBAAmB,EAAA,cAAA;AAAA,QACnB,IAAM,EAAA,SAAA;AAAA,OACR;AAAA,KAAA;AAAA,oBAEC,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,EAAS,QAAQ,EAAA,IAAA,EAAA,EAAC,gBAAc,CAAA;AAAA,oBACjC,KAAA,CAAA,aAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QACC,UAAU,OAAY,KAAA,KAAA,CAAA;AAAA,QACtB,OAAA,EAAS,MAAM,iBAAA,CAAkB,KAAS,CAAA,CAAA;AAAA,OAAA;AAAA,sBAE1C,KAAA,CAAA,aAAA,CAAC,oCACE,KAAA,CAAA,aAAA,CAAA,SAAA,EAAA,EAAU,MAAM,KAAW,CAAA,EAAA,MAAA,EAAQ,OAAY,KAAA,KAAA,CAAA,EAAW,CAC7D,CAAA;AAAA,sBACA,KAAA,CAAA,aAAA,CAAC,oBAAa,MAAI,CAAA;AAAA,KACpB;AAAA,IAEC,QAAA,CAAS,IAAI,CAAS,KAAA,KAAA;AACrB,MAAM,MAAA,MAAA,GAAS,MAAM,EAAO,KAAA,OAAA,CAAA;AAC5B,MACE,uBAAA,KAAA,CAAA,aAAA;AAAA,QAAC,QAAA;AAAA,QAAA;AAAA,UACC,KAAK,KAAM,CAAA,EAAA;AAAA,UACX,QAAU,EAAA,MAAA;AAAA,UACV,eAAe,EAAA,MAAA;AAAA,UACf,OAAS,EAAA,MAAM,iBAAkB,CAAA,KAAA,CAAM,EAAE,CAAA;AAAA,SAAA;AAAA,wBAEzC,KAAA,CAAA,aAAA,CAAC,oCACE,KAAA,CAAA,aAAA,CAAA,SAAA,EAAA,EAAU,MAAM,KAAM,CAAA,IAAA,EAAM,QAAgB,CAC/C,CAAA;AAAA,wBACA,KAAA,CAAA,aAAA,CAAC,YAAc,EAAA,IAAA,EAAA,KAAA,CAAM,KAAM,CAAA;AAAA,OAC7B,CAAA;AAAA,KAEH,CAAA;AAAA,GAEL,CAAA,CAAA;AAEJ,CAAA;;;;;;;;ACzEA,IAAI,eAAA,CAAA;AAGJ,IAAI,OAAA,CAAQ,IAAI,oBAAsB,EAAA;AACpC,EAAA,eAAA,GAAkB,OAAO,kBAAkB,CAAA,CAAA;AAC7C,CAAO,MAAA;AACL,EAAA,eAAA,GAAkB,OAAO,WAAW,CAAA,CAAA;AACtC,CAAA;AAEO,SAAS,iBAA6B,GAAA;AAC3C,EAAA,MAAM,CAAC,GAAG,CAAI,GAAA,wBAAA,iBAA0B,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAM,KAAK,EAAA,IAAA,EAAC,OAAS,kBAAA,KAAA,CAAA,aAAA,CAAC,KAAI,EAAA,IAAA,CAAA,EAAI,CAAE,CAAA,CAAA;AACxE,EAAA,OAAO,CAAC,GAAI,CAAA,KAAA,CAAA;AACd,CAAA;AAEA,MAAM,mBAIc,GAAA,CAAC,EAAE,OAAA,EAAc,KAAA,OAAA,CAAA;AAErC,IAAI,mBAAqB,EAAA;AACvB,EAAoB,mBAAA,CAAA,mBAAA,EAAqB,0BAA0B,IAAI,CAAA,CAAA;AACzE,CAAA;AAiBO,MAAM,aAAc,CAAA;AAAA,EAApB,WAAA,GAAA;AACL,IAAiB,aAAA,CAAA,IAAA,EAAA,SAAA,EAAU,IAAI,KAAuB,EAAA,CAAA,CAAA;AACtD,IAAiB,aAAA,CAAA,IAAA,EAAA,MAAA,EAAO,IAAI,KAAqB,EAAA,CAAA,CAAA;AACjD,IAAiB,aAAA,CAAA,IAAA,EAAA,cAAA,EAAe,IAAI,KAAiB,EAAA,CAAA,CAAA;AACrD,IAAiB,aAAA,CAAA,IAAA,EAAA,QAAA,EAAS,IAAI,KAAmB,EAAA,CAAA,CAAA;AACjD,IAAiB,aAAA,CAAA,IAAA,EAAA,cAAA,EAAe,IAAI,KAAmB,EAAA,CAAA,CAAA;AAEvD,IAAQ,aAAA,CAAA,IAAA,EAAA,aAAA,CAAA,CAAA;AACR,IAAQ,aAAA,CAAA,IAAA,EAAA,QAAA,CAAA,CAAA;AAAA,GAAA;AAAA;AAAA;AAAA;AAAA,EAKR,kBAAkB,OAA2C,EAAA;AAC3D,IAAK,IAAA,CAAA,OAAA,CAAQ,IAAK,CAAA,GAAG,OAAO,CAAA,CAAA;AAC5B,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AAAA;AAAA;AAAA;AAAA,EAKA,YAIE,OAAqD,EAAA;AACrD,IAAK,IAAA,CAAA,IAAA,CAAK,KAAK,OAAO,CAAA,CAAA;AACtB,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,aAAa,IAAgC,EAAA;AAC3C,IAAK,IAAA,CAAA,YAAA,CAAa,KAAK,IAAI,CAAA,CAAA;AAC3B,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,QAAQ,IAAwC,EAAA;AAxIlD,IAAA,IAAA,EAAA,EAAA,EAAA,CAAA;AAyII,IAAM,MAAA,IAAA,GAAA,CAAO,UAAK,IAAL,KAAA,IAAA,GAAA,EAAA,GAAa,SAAS,IAAK,CAAA,MAAA,CAAO,SAAS,CAAC,CAAA,CAAA,CAAA;AAEzD,IAAA,IAAI,CAAC,IAAA,CAAK,WAAe,IAAA,IAAA,KAAS,GAAK,EAAA;AACrC,MAAA,IAAA,CAAK,WAAc,GAAA,IAAA,CAAA;AAAA,KACrB;AAEA,IAAA,IAAI,KAAK,KAAO,EAAA;AACd,MAAA,IAAA,CAAK,YAAa,CAAA,IAAA;AAAA,wBAChB,KAAA,CAAA,aAAA;AAAA,UAAC,WAAA;AAAA,UAAA;AAAA,YACC,GAAK,EAAA,IAAA;AAAA,YACL,EAAI,EAAA,IAAA;AAAA,YACJ,MAAM,IAAK,CAAA,KAAA;AAAA,YACX,IAAA,EAAA,CAAM,EAAK,GAAA,IAAA,CAAA,IAAA,KAAL,IAAa,GAAA,EAAA,GAAA,YAAA;AAAA,WAAA;AAAA,SACrB;AAAA,OACF,CAAA;AAAA,KACF;AACA,IAAA,IAAA,CAAK,MAAO,CAAA,IAAA;AAAA,sBACV,KAAA,CAAA,aAAA;AAAA,QAAC,mBAAA;AAAA,QAAA;AAAA,UACC,GAAK,EAAA,IAAA;AAAA,UACL,IAAA;AAAA,UACA,SAAS,IAAK,CAAA,OAAA;AAAA,UACd,UAAU,IAAK,CAAA,QAAA;AAAA,SAAA;AAAA,OACjB;AAAA,KACF,CAAA;AACA,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AAAA;AAAA;AAAA;AAAA,EAKA,UAAU,MAAoB,EAAA;AAC5B,IAAA,IAAA,CAAK,MAAS,GAAA,MAAA,CAAA;AACd,IAAO,OAAA,IAAA,CAAA;AAAA,GACT;AAAA;AAAA;AAAA;AAAA,EAKA,KAA8C,GAAA;AAC5C,IAAA,MAAM,YAAe,GAAA,cAAA,CAAe,EAAE,EAAA,EAAI,QAAQ,CAAA,CAAA;AAClD,IAAA,MAAM,WAAW,sBAAM,KAAA,CAAA,aAAA,CAAC,GAAI,EAAA,EAAA,CAAA,EAAG,KAAG,mCAAiC,CAAA,CAAA;AACnE,IAAoB,mBAAA,CAAA,QAAA,EAAU,mBAAmB,YAAY,CAAA,CAAA;AAE7D,IAAA,MAAM,IAAO,GAAA,CAAC,GAAG,IAAA,CAAK,IAAI,CAAA,CAAA;AAC1B,IAAI,IAAA,CAAC,KAAK,IAAK,CAAA,CAAA,GAAA,KAAO,IAAI,GAAI,CAAA,EAAA,KAAO,qBAAsB,CAAA,EAAE,CAAG,EAAA;AAC9D,MAAK,IAAA,CAAA,IAAA;AAAA,QACH,gBAAiB,CAAA;AAAA,UACf,GAAK,EAAA,qBAAA;AAAA,UACL,IAAA,EAAM,EAAE,SAAA,EAAW,YAAa,EAAA;AAAA,UAChC,SAAS,CAAC,EAAE,WAAgB,KAAA,kBAAA,CAAmB,WAAW,SAAS,CAAA;AAAA,SACpE,CAAA;AAAA,OACH,CAAA;AAAA,KACF;AAEA,IAAA,MAAM,MAAM,SAAU,CAAA;AAAA,MACpB,IAAA;AAAA,MACA,SAAS,IAAK,CAAA,OAAA;AAAA,MACd,QAAQ,IAAK,CAAA,MAAA;AAAA,MACb,UAAY,EAAA,CAAC,EAAE,IAAA,EAAW,KAAA;AAnMhC,QAAA,IAAA,EAAA,CAAA;AAoMQ,QAAA,KAAA,MAAW,MAAU,IAAA,CAAA,EAAA,GAAA,IAAA,CAAK,OAAL,KAAA,IAAA,GAAA,EAAA,GAAgB,EAAI,EAAA;AACvC,UAAA,MAAM,UAAyC,EAAC,CAAA;AAChD,UAAA,KAAA,MAAW,QAAY,IAAA,MAAA,CAAO,IAAK,CAAA,MAAA,CAAO,cAAc,CAAG,EAAA;AACzD,YAAA,OAAA,CAAQ,QAAQ,CAAI,GAAA,YAAA,CAAA;AAAA,WACtB;AACA,UAAK,IAAA,CAAA,MAAA,CAAO,gBAAgB,OAAO,CAAA,CAAA;AAAA,SACrC;AAAA,OACF;AAAA,KACD,CAAA,CAAA;AAED,IAAM,MAAA,MAAA,6EAED,KAAA,CAAA,aAAA,CAAA,YAAA,EAAA,IAAa,mBACb,KAAA,CAAA,aAAA,CAAA,kBAAA,EAAA,IAAmB,GACnB,IAAK,CAAA,YAAA,sCACL,SACC,EAAA,IAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,mCACE,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,IAAA,sCACE,aAAc,EAAA,IAAA,CAAA,EACd,IAAK,CAAA,YAAA,kBACL,KAAA,CAAA,aAAA,CAAA,YAAA,EAAA,IAAa,mBACb,KAAA,CAAA,aAAA,CAAA,cAAA,EAAA,IAAe,mBACf,KAAA,CAAA,aAAA,CAAA,oBAAA,EAAA,IAAqB,CACxB,CACA,kBAAA,KAAA,CAAA,aAAA,CAAC,kBACE,IAAK,CAAA,MAAA,sCACL,KAAM,EAAA,EAAA,IAAA,EAAK,oBAAmB,OAAS,kBAAA,KAAA,CAAA,aAAA,CAAC,cAAS,CAAI,EAAA,CACxD,CACF,CACF,CACF,CAAA,CAAA;AAGF,IAAO,OAAA,GAAA,CAAI,WAAW,MAAM,CAAA,CAAA;AAAA,GAC9B;AAAA;AAAA;AAAA;AAAA,EAKA,MAAe,GAAA;AACb,IAAM,MAAA,MAAA,GAAS,KAAK,KAAM,EAAA,CAAA;AAE1B,IACE,IAAA,MAAA,CAAO,SAAS,QAAa,KAAA,GAAA,IAC7B,KAAK,WACL,IAAA,IAAA,CAAK,gBAAgB,GACrB,EAAA;AACA,MAAO,MAAA,CAAA,QAAA,CAAS,WAAW,IAAK,CAAA,WAAA,CAAA;AAAA,KAClC;AAEA,IAAA,eAAA,CAAgB,KAAK,CAAY,QAAA,KAAA;AAC/B,MAAA,IAAI,gBAAgB,QAAU,EAAA;AAC5B,QAAA,QAAA,CAAS,UAAW,CAAA,QAAA,CAAS,cAAe,CAAA,MAAM,CAAE,CAAE,CAAA,MAAA;AAAA,8CACnD,MAAO,EAAA,IAAA,CAAA;AAAA,SACV,CAAA;AAAA,OACK,MAAA;AACL,QAAA,QAAA,CAAS,uBAAQ,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA,IAAO,GAAI,QAAS,CAAA,cAAA,CAAe,MAAM,CAAC,CAAA,CAAA;AAAA,OAC7D;AAAA,KACD,CAAA,CAAA;AAAA,GACH;AACF,CAAA;AAUO,SAAS,YAAe,GAAA;AAC7B,EAAA,OAAO,IAAI,aAAc,EAAA,CAAA;AAC3B;;;;"}
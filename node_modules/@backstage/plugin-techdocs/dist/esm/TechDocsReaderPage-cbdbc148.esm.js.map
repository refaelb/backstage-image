{"version":3,"file":"TechDocsReaderPage-cbdbc148.esm.js","sources":["../../src/reader/components/useReaderState.ts","../../src/reader/components/TechDocsReaderProvider.tsx","../../src/search/components/TechDocsSearch.tsx","../../src/reader/components/TechDocsBuildLogs.tsx","../../src/reader/components/TechDocsNotFound.tsx","../../src/reader/components/TechDocsStateIndicator.tsx","../../src/reader/transformers/html/hooks/links.ts","../../src/reader/transformers/html/hooks/iframes.ts","../../src/reader/transformers/html/transformer.ts","../../src/reader/transformers/styles/rules/variables.ts","../../src/reader/transformers/styles/rules/reset.ts","../../src/reader/transformers/styles/rules/layout.ts","../../src/reader/transformers/styles/rules/typeset.ts","../../src/reader/transformers/styles/rules/animations.ts","../../src/reader/transformers/styles/rules/extensions.ts","../../src/reader/transformers/styles/rules/rules.ts","../../src/reader/transformers/styles/transformer.ts","../../src/reader/transformers/addBaseUrl.ts","../../src/reader/transformers/renderReactElement.ts","../../src/reader/transformers/addGitFeedbackLink.ts","../../src/reader/transformers/addSidebarToggle.ts","../../src/reader/transformers/rewriteDocLinks.ts","../../src/reader/transformers/addLinkClickListener.ts","../../src/reader/transformers/copyToClipboard.tsx","../../src/reader/transformers/removeMkdocsHeader.ts","../../src/reader/transformers/simplifyMkdocsFooter.ts","../../src/reader/transformers/onCssReady.ts","../../src/reader/transformers/scrollIntoNavigation.ts","../../src/reader/transformers/transformer.ts","../../src/reader/components/TechDocsReaderPageContent/useNavigateUrl.tsx","../../src/reader/components/TechDocsReaderPageContent/dom.tsx","../../src/reader/components/TechDocsReaderPageContent/TechDocsReaderPageContentAddons.tsx","../../src/reader/components/TechDocsReaderPageContent/TechDocsReaderPageContent.tsx","../../src/reader/components/TechDocsReaderPageHeader/TechDocsReaderPageHeader.tsx","../../src/reader/components/TechDocsReaderPageSubheader/TechDocsReaderPageSubheader.tsx","../../src/reader/components/TechDocsReaderPage/TechDocsReaderPage.tsx"],"sourcesContent":["/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApi } from '@backstage/core-plugin-api';\nimport { useMemo, useReducer, useRef } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\nimport useAsyncRetry from 'react-use/lib/useAsyncRetry';\nimport { techdocsStorageApiRef } from '@backstage/plugin-techdocs-react';\n\n/**\n * @public\n * A state representation that is used to configure the UI of <Reader />\n */\nexport type ContentStateTypes =\n  /** There is nothing to display but a loading indicator */\n  | 'CHECKING'\n\n  /** There is no content yet -> present a full screen loading page */\n  | 'INITIAL_BUILD'\n\n  /** There is content, but the backend is about to update it */\n  | 'CONTENT_STALE_REFRESHING'\n\n  /** There is content, but after a reload, the content will be different */\n  | 'CONTENT_STALE_READY'\n\n  /** There is content, the backend tried to update it, but failed */\n  | 'CONTENT_STALE_ERROR'\n\n  /** There is nothing to see but a \"not found\" page. Is also shown on page load errors */\n  | 'CONTENT_NOT_FOUND'\n\n  /** There is only the latest and greatest content */\n  | 'CONTENT_FRESH';\n\n/**\n * Calculate the state that should be reported to the display component.\n */\nexport function calculateDisplayState({\n  contentLoading,\n  content,\n  activeSyncState,\n}: Pick<\n  ReducerState,\n  'contentLoading' | 'content' | 'activeSyncState'\n>): ContentStateTypes {\n  // we have nothing to display yet\n  if (contentLoading) {\n    return 'CHECKING';\n  }\n\n  // the build is ready, but it triggered a content reload and the content variable is not trusted\n  if (activeSyncState === 'BUILD_READY_RELOAD') {\n    return 'CHECKING';\n  }\n\n  // there is no content, but the sync process is still evaluating\n  if (!content && activeSyncState === 'CHECKING') {\n    return 'CHECKING';\n  }\n\n  // there is no content yet so we assume that we are building it for the first time\n  if (!content && activeSyncState === 'BUILDING') {\n    return 'INITIAL_BUILD';\n  }\n\n  // if there is still no content after building, it might just not exist\n  if (!content) {\n    return 'CONTENT_NOT_FOUND';\n  }\n\n  // we are still building, but we already show stale content\n  if (activeSyncState === 'BUILDING') {\n    return 'CONTENT_STALE_REFRESHING';\n  }\n\n  // the build is ready, but the content is still stale\n  if (activeSyncState === 'BUILD_READY') {\n    return 'CONTENT_STALE_READY';\n  }\n\n  // the build failed, but the content is still stale\n  if (activeSyncState === 'ERROR') {\n    return 'CONTENT_STALE_ERROR';\n  }\n\n  // seems like the content is up-to-date (or we don't know yet and the sync process is still evaluating in the background)\n  return 'CONTENT_FRESH';\n}\n\n/**\n * The state of the synchronization task. It checks whether the docs are\n * up-to-date. If they aren't, it triggers a build.\n */\ntype SyncStates =\n  /** Checking if it should be synced */\n  | 'CHECKING'\n\n  /** Building the documentation */\n  | 'BUILDING'\n\n  /** Finished building the documentation */\n  | 'BUILD_READY'\n\n  /**\n   * Finished building the documentation and triggered a content reload.\n   * This state is left toward UP_TO_DATE when the content loading has finished.\n   */\n  | 'BUILD_READY_RELOAD'\n\n  /** No need for a sync. The content was already up-to-date. */\n  | 'UP_TO_DATE'\n\n  /** An error occurred */\n  | 'ERROR';\n\ntype ReducerActions =\n  | {\n      type: 'sync';\n      state: SyncStates;\n      syncError?: Error;\n    }\n  | { type: 'contentLoading' }\n  | {\n      type: 'content';\n      path?: string;\n      content?: string;\n      contentError?: Error;\n    }\n  | { type: 'buildLog'; log: string };\n\ntype ReducerState = {\n  /**\n   * The path of the current page\n   */\n  path: string;\n\n  /**\n   * The current sync state\n   */\n  activeSyncState: SyncStates;\n\n  /**\n   * If true, the content is downloading from the storage.\n   */\n  contentLoading: boolean;\n  /**\n   * The content that has been downloaded and should be displayed.\n   */\n  content?: string;\n\n  contentError?: Error;\n  syncError?: Error;\n\n  /**\n   * A list of log messages that were emitted by the build process.\n   */\n  buildLog: string[];\n};\n\nexport function reducer(\n  oldState: ReducerState,\n  action: ReducerActions,\n): ReducerState {\n  const newState = { ...oldState };\n\n  switch (action.type) {\n    case 'sync':\n      // reset the build log when a new check starts\n      if (action.state === 'CHECKING') {\n        newState.buildLog = [];\n      }\n\n      newState.activeSyncState = action.state;\n      newState.syncError = action.syncError;\n      break;\n\n    case 'contentLoading':\n      newState.contentLoading = true;\n\n      // only reset errors but keep the old content until it is replaced by the 'content' action\n      newState.contentError = undefined;\n      break;\n\n    case 'content':\n      // only override the path if it is part of the action\n      if (typeof action.path === 'string') {\n        newState.path = action.path;\n      }\n\n      newState.contentLoading = false;\n      newState.content = action.content;\n      newState.contentError = action.contentError;\n      break;\n\n    case 'buildLog':\n      newState.buildLog = newState.buildLog.concat(action.log);\n      break;\n\n    default:\n      throw new Error();\n  }\n\n  // a content update loads fresh content so the build is updated to being up-to-date\n  if (\n    ['BUILD_READY', 'BUILD_READY_RELOAD'].includes(newState.activeSyncState) &&\n    ['contentLoading', 'content'].includes(action.type)\n  ) {\n    newState.activeSyncState = 'UP_TO_DATE';\n    newState.buildLog = [];\n  }\n\n  return newState;\n}\n/**\n * @public shared reader state\n */\nexport type ReaderState = {\n  state: ContentStateTypes;\n  path: string;\n  contentReload: () => void;\n  content?: string;\n  contentErrorMessage?: string;\n  syncErrorMessage?: string;\n  buildLog: string[];\n};\n\nexport function useReaderState(\n  kind: string,\n  namespace: string,\n  name: string,\n  path: string,\n): ReaderState {\n  const [state, dispatch] = useReducer(reducer, {\n    activeSyncState: 'CHECKING',\n    path,\n    contentLoading: true,\n    buildLog: [],\n  });\n\n  const techdocsStorageApi = useApi(techdocsStorageApiRef);\n\n  // try to load the content. the function will fire events and we don't care for the return values\n  const { retry: contentReload } = useAsyncRetry(async () => {\n    dispatch({ type: 'contentLoading' });\n\n    try {\n      const entityDocs = await techdocsStorageApi.getEntityDocs(\n        { kind, namespace, name },\n        path,\n      );\n\n      // update content and path at the same time\n      dispatch({ type: 'content', content: entityDocs, path });\n\n      return entityDocs;\n    } catch (e) {\n      dispatch({ type: 'content', contentError: e, path });\n    }\n\n    return undefined;\n  }, [techdocsStorageApi, kind, namespace, name, path]);\n\n  // create a ref that holds the latest content. This provides a useAsync hook\n  // with the latest content without restarting the useAsync hook.\n  const contentRef = useRef<{ content?: string; reload: () => void }>({\n    content: undefined,\n    reload: () => {},\n  });\n  contentRef.current = { content: state.content, reload: contentReload };\n\n  // try to derive the state. the function will fire events and we don't care for the return values\n  useAsync(async () => {\n    dispatch({ type: 'sync', state: 'CHECKING' });\n\n    // should only switch to BUILDING if the request takes more than 1 seconds\n    const buildingTimeout = setTimeout(() => {\n      dispatch({ type: 'sync', state: 'BUILDING' });\n    }, 1000);\n\n    try {\n      const result = await techdocsStorageApi.syncEntityDocs(\n        {\n          kind,\n          namespace,\n          name,\n        },\n        log => {\n          dispatch({ type: 'buildLog', log });\n        },\n      );\n\n      switch (result) {\n        case 'updated':\n          // if there was no content prior to building, retry the loading\n          if (!contentRef.current.content) {\n            contentRef.current.reload();\n            dispatch({ type: 'sync', state: 'BUILD_READY_RELOAD' });\n          } else {\n            dispatch({ type: 'sync', state: 'BUILD_READY' });\n          }\n          break;\n        case 'cached':\n          dispatch({ type: 'sync', state: 'UP_TO_DATE' });\n          break;\n\n        default:\n          dispatch({\n            type: 'sync',\n            state: 'ERROR',\n            syncError: new Error('Unexpected return state'),\n          });\n          break;\n      }\n    } catch (e) {\n      dispatch({ type: 'sync', state: 'ERROR', syncError: e });\n    } finally {\n      // Cancel the timer that sets the state \"BUILDING\"\n      clearTimeout(buildingTimeout);\n    }\n  }, [kind, name, namespace, techdocsStorageApi, dispatch, contentRef]);\n\n  const displayState = useMemo(\n    () =>\n      calculateDisplayState({\n        activeSyncState: state.activeSyncState,\n        contentLoading: state.contentLoading,\n        content: state.content,\n      }),\n    [state.activeSyncState, state.content, state.contentLoading],\n  );\n\n  return {\n    state: displayState,\n    contentReload,\n    path: state.path,\n    content: state.content,\n    contentErrorMessage: state.contentError?.toString(),\n    syncErrorMessage: state.syncError?.toString(),\n    buildLog: state.buildLog,\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  ComponentType,\n  createContext,\n  useContext,\n  ReactNode,\n} from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useTechDocsReaderPage } from '@backstage/plugin-techdocs-react';\n\nimport { useReaderState, ReaderState } from './useReaderState';\n\nconst TechDocsReaderContext = createContext<ReaderState>({} as ReaderState);\n\nexport const useTechDocsReader = () => useContext(TechDocsReaderContext);\n\n/**\n * @public Render function for {@link TechDocsReaderProvider}\n */\nexport type TechDocsReaderProviderRenderFunction = (\n  value: ReaderState,\n) => JSX.Element;\n\n/**\n * @public Props for {@link TechDocsReaderProvider}\n */\nexport type TechDocsReaderProviderProps = {\n  children: TechDocsReaderProviderRenderFunction | ReactNode;\n};\n\n/**\n * Provides shared building process state to the reader page components.\n *\n * @public\n */\nexport const TechDocsReaderProvider = (props: TechDocsReaderProviderProps) => {\n  const { children } = props;\n\n  const { '*': path = '' } = useParams();\n  const { entityRef } = useTechDocsReaderPage();\n  const { kind, namespace, name } = entityRef;\n  const value = useReaderState(kind, namespace, name, path);\n\n  return (\n    <TechDocsReaderContext.Provider value={value}>\n      {children instanceof Function ? children(value) : children}\n    </TechDocsReaderContext.Provider>\n  );\n};\n\nexport const withTechDocsReaderProvider =\n  <T extends {}>(Component: ComponentType<T>) =>\n  (props: T) =>\n    (\n      <TechDocsReaderProvider>\n        <Component {...props} />\n      </TechDocsReaderProvider>\n    );\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CompoundEntityRef } from '@backstage/catalog-model';\nimport { ResultHighlight } from '@backstage/plugin-search-common';\nimport {\n  SearchAutocomplete,\n  SearchContextProvider,\n  useSearch,\n} from '@backstage/plugin-search-react';\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { TechDocsSearchResultListItem } from './TechDocsSearchResultListItem';\n\n/**\n * Props for {@link TechDocsSearch}\n *\n * @public\n */\nexport type TechDocsSearchProps = {\n  entityId: CompoundEntityRef;\n  entityTitle?: string;\n  debounceTime?: number;\n};\n\ntype TechDocsDoc = {\n  namespace: string;\n  kind: string;\n  name: string;\n  path: string;\n  location: string;\n  title: string;\n};\n\ntype TechDocsSearchResult = {\n  type: string;\n  document: TechDocsDoc;\n  highlight?: ResultHighlight;\n};\n\nconst isTechDocsSearchResult = (\n  option: any,\n): option is TechDocsSearchResult => {\n  return option?.document;\n};\n\nconst TechDocsSearchBar = (props: TechDocsSearchProps) => {\n  const { entityId, entityTitle, debounceTime = 150 } = props;\n  const [open, setOpen] = useState(false);\n  const navigate = useNavigate();\n  const {\n    setFilters,\n    result: { loading, value: searchVal },\n  } = useSearch();\n  const [options, setOptions] = useState<any[]>([]);\n  useEffect(() => {\n    let mounted = true;\n\n    if (mounted && searchVal) {\n      // TODO: Change this into getting only subset of search results from the BE in the first place\n      // once pagination is implemented for search engines\n      // See: https://github.com/backstage/backstage/issues/6062\n      const searchResults = searchVal.results.slice(0, 10);\n      setOptions(searchResults);\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [loading, searchVal]);\n\n  // Update the filter context when the entityId changes, e.g. when the search\n  // bar continues to be rendered, navigating between different TechDocs sites.\n  const { kind, name, namespace } = entityId;\n  useEffect(() => {\n    setFilters(prevFilters => {\n      return {\n        ...prevFilters,\n        kind,\n        namespace,\n        name,\n      };\n    });\n  }, [kind, namespace, name, setFilters]);\n\n  const handleSelection = (\n    _: any,\n    selection: TechDocsSearchResult | string | null,\n  ) => {\n    if (isTechDocsSearchResult(selection)) {\n      const { location } = selection.document;\n      navigate(location);\n    }\n  };\n\n  return (\n    <SearchAutocomplete\n      data-testid=\"techdocs-search-bar\"\n      size=\"small\"\n      open={open}\n      getOptionLabel={() => ''}\n      filterOptions={x => {\n        return x; // This is needed to get renderOption to be called after options change. Bug in material-ui?\n      }}\n      onClose={() => {\n        setOpen(false);\n      }}\n      onFocus={() => {\n        setOpen(true);\n      }}\n      onChange={handleSelection}\n      blurOnSelect\n      noOptionsText=\"No results found\"\n      value={null}\n      options={options}\n      renderOption={({ document, highlight }) => (\n        <TechDocsSearchResultListItem\n          result={document}\n          lineClamp={3}\n          asListItem={false}\n          asLink={false}\n          title={document.title}\n          highlight={highlight}\n        />\n      )}\n      loading={loading}\n      inputDebounceTime={debounceTime}\n      inputPlaceholder={`Search ${entityTitle || entityId.name} docs`}\n      freeSolo={false}\n    />\n  );\n};\n\n/**\n * Component used to render search bar on TechDocs page, scoped to\n *\n * @public\n */\nexport const TechDocsSearch = (props: TechDocsSearchProps) => {\n  const initialState = {\n    term: '',\n    types: ['techdocs'],\n    pageCursor: '',\n    filters: props.entityId,\n  };\n  return (\n    <SearchContextProvider initialState={initialState}>\n      <TechDocsSearchBar {...props} />\n    </SearchContextProvider>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LogViewer } from '@backstage/core-components';\nimport {\n  Button,\n  createStyles,\n  Drawer,\n  Grid,\n  IconButton,\n  makeStyles,\n  Theme,\n  Typography,\n} from '@material-ui/core';\nimport Close from '@material-ui/icons/Close';\nimport React, { useState } from 'react';\n\nconst useDrawerStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    paper: {\n      width: '100%',\n      [theme.breakpoints.up('sm')]: {\n        width: '75%',\n      },\n      [theme.breakpoints.up('md')]: {\n        width: '50%',\n      },\n      padding: theme.spacing(2.5),\n    },\n    root: {\n      height: '100%',\n      overflow: 'hidden',\n    },\n    logs: {\n      background: theme.palette.background.default,\n    },\n  }),\n);\n\nexport const TechDocsBuildLogsDrawerContent = ({\n  buildLog,\n  onClose,\n}: {\n  buildLog: string[];\n  onClose: () => void;\n}) => {\n  const classes = useDrawerStyles();\n  const logText =\n    buildLog.length === 0 ? 'Waiting for logs...' : buildLog.join('\\n');\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      className={classes.root}\n      spacing={0}\n      wrap=\"nowrap\"\n    >\n      <Grid\n        item\n        container\n        justifyContent=\"space-between\"\n        alignItems=\"center\"\n        spacing={0}\n        wrap=\"nowrap\"\n      >\n        <Typography variant=\"h5\">Build Details</Typography>\n        <IconButton\n          key=\"dismiss\"\n          title=\"Close the drawer\"\n          onClick={onClose}\n          color=\"inherit\"\n        >\n          <Close />\n        </IconButton>\n      </Grid>\n      <Grid item xs>\n        <LogViewer text={logText} classes={{ root: classes.logs }} />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport const TechDocsBuildLogs = ({ buildLog }: { buildLog: string[] }) => {\n  const classes = useDrawerStyles();\n  const [open, setOpen] = useState(false);\n\n  return (\n    <>\n      <Button color=\"inherit\" onClick={() => setOpen(true)}>\n        Show Build Logs\n      </Button>\n      <Drawer\n        classes={{ paper: classes.paper }}\n        anchor=\"right\"\n        open={open}\n        onClose={() => setOpen(false)}\n      >\n        <TechDocsBuildLogsDrawerContent\n          buildLog={buildLog}\n          onClose={() => setOpen(false)}\n        />\n      </Drawer>\n    </>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\nimport { useApi, configApiRef, useAnalytics } from '@backstage/core-plugin-api';\nimport { ErrorPage } from '@backstage/core-components';\nimport { useTechDocsReaderPage } from '@backstage/plugin-techdocs-react';\nimport { useLocation } from 'react-router-dom';\n\ntype Props = {\n  errorMessage?: string;\n};\n\nexport const TechDocsNotFound = ({ errorMessage }: Props) => {\n  const techdocsBuilder =\n    useApi(configApiRef).getOptionalString('techdocs.builder');\n  const analyticsApi = useAnalytics();\n  const { entityRef } = useTechDocsReaderPage();\n  const location = useLocation();\n\n  useEffect(() => {\n    const { pathname, search, hash } = location;\n    analyticsApi.captureEvent('not-found', `${pathname}${search}${hash}`, {\n      attributes: entityRef,\n    });\n  }, [analyticsApi, entityRef, location]);\n\n  let additionalInfo = '';\n  if (techdocsBuilder !== 'local') {\n    additionalInfo =\n      \"Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not \" +\n      \"generate docs if they are not found. Make sure the project's docs are generated and published by some external \" +\n      \"process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage \" +\n      'instance.';\n  }\n\n  return (\n    <ErrorPage\n      status=\"404\"\n      statusMessage={errorMessage || 'Documentation not found'}\n      additionalInfo={additionalInfo}\n    />\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { CircularProgress, Button, makeStyles } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\n\nimport { TechDocsBuildLogs } from './TechDocsBuildLogs';\nimport { TechDocsNotFound } from './TechDocsNotFound';\nimport { useTechDocsReader } from './TechDocsReaderProvider';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    marginBottom: theme.spacing(2),\n  },\n  message: {\n    // `word-break: break-word` is deprecated, but gives legacy support to browsers not supporting `overflow-wrap` yet\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/word-break\n    wordBreak: 'break-word',\n    overflowWrap: 'anywhere',\n  },\n}));\n\nexport const TechDocsStateIndicator = () => {\n  let StateAlert: JSX.Element | null = null;\n  const classes = useStyles();\n\n  const {\n    state,\n    contentReload,\n    contentErrorMessage,\n    syncErrorMessage,\n    buildLog,\n  } = useTechDocsReader();\n\n  if (state === 'INITIAL_BUILD') {\n    StateAlert = (\n      <Alert\n        classes={{ root: classes.root }}\n        variant=\"outlined\"\n        severity=\"info\"\n        icon={<CircularProgress size=\"24px\" />}\n        action={<TechDocsBuildLogs buildLog={buildLog} />}\n      >\n        Documentation is accessed for the first time and is being prepared. The\n        subsequent loads are much faster.\n      </Alert>\n    );\n  }\n\n  if (state === 'CONTENT_STALE_REFRESHING') {\n    StateAlert = (\n      <Alert\n        variant=\"outlined\"\n        severity=\"info\"\n        icon={<CircularProgress size=\"24px\" />}\n        action={<TechDocsBuildLogs buildLog={buildLog} />}\n        classes={{ root: classes.root }}\n      >\n        A newer version of this documentation is being prepared and will be\n        available shortly.\n      </Alert>\n    );\n  }\n\n  if (state === 'CONTENT_STALE_READY') {\n    StateAlert = (\n      <Alert\n        variant=\"outlined\"\n        severity=\"success\"\n        action={\n          <Button color=\"inherit\" onClick={() => contentReload()}>\n            Refresh\n          </Button>\n        }\n        classes={{ root: classes.root }}\n      >\n        A newer version of this documentation is now available, please refresh\n        to view.\n      </Alert>\n    );\n  }\n\n  if (state === 'CONTENT_STALE_ERROR') {\n    StateAlert = (\n      <Alert\n        variant=\"outlined\"\n        severity=\"error\"\n        action={<TechDocsBuildLogs buildLog={buildLog} />}\n        classes={{ root: classes.root, message: classes.message }}\n      >\n        Building a newer version of this documentation failed.{' '}\n        {syncErrorMessage}\n      </Alert>\n    );\n  }\n\n  if (state === 'CONTENT_NOT_FOUND') {\n    StateAlert = (\n      <>\n        {syncErrorMessage && (\n          <Alert\n            variant=\"outlined\"\n            severity=\"error\"\n            action={<TechDocsBuildLogs buildLog={buildLog} />}\n            classes={{ root: classes.root, message: classes.message }}\n          >\n            Building a newer version of this documentation failed.{' '}\n            {syncErrorMessage}\n          </Alert>\n        )}\n        <TechDocsNotFound errorMessage={contentErrorMessage} />\n      </>\n    );\n  }\n\n  return StateAlert;\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst MKDOCS_CSS = /main\\.[A-Fa-f0-9]{8}\\.min\\.css$/;\nconst GOOGLE_FONTS = /^https:\\/\\/fonts\\.googleapis\\.com/;\nconst GSTATIC_FONTS = /^https:\\/\\/fonts\\.gstatic\\.com/;\n\n/**\n * Checks whether a node is link or not.\n * @param node - can be any element.\n * @returns true when node is link.\n */\nconst isLink = (node: Element) => node.nodeName === 'LINK';\n\n/**\n * Checks whether a link is safe or not.\n * @param node - is an link element.\n * @returns true when link is mkdocs css, google fonts or gstatic fonts.\n */\nconst isSafe = (node: Element) => {\n  const href = node?.getAttribute('href') || '';\n  const isMkdocsCss = href.match(MKDOCS_CSS);\n  const isGoogleFonts = href.match(GOOGLE_FONTS);\n  const isGstaticFonts = href.match(GSTATIC_FONTS);\n  return isMkdocsCss || isGoogleFonts || isGstaticFonts;\n};\n\n/**\n * Function that removes unsafe link nodes.\n * @param node - can be any element.\n * @param hosts - list of allowed hosts.\n */\nexport const removeUnsafeLinks = (node: Element) => {\n  if (isLink(node) && !isSafe(node)) {\n    node.remove();\n  }\n  return node;\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Checks whether a node is iframe or not.\n * @param node - can be any element.\n * @returns true when node is iframe.\n */\nconst isIframe = (node: Element) => node.nodeName === 'IFRAME';\n\n/**\n * Checks whether a iframe is safe or not.\n * @param node - is an iframe element.\n * @param hosts - list of allowed hosts.\n * @returns true when iframe is included in hosts.\n */\nconst isSafe = (node: Element, hosts: string[]) => {\n  const src = node.getAttribute('src') || '';\n  try {\n    const { host } = new URL(src);\n    return hosts.includes(host);\n  } catch {\n    return false;\n  }\n};\n\n/**\n * Returns a function that removes unsafe iframe nodes.\n * @param node - can be any element.\n * @param hosts - list of allowed hosts.\n */\nexport const removeUnsafeIframes = (hosts: string[]) => (node: Element) => {\n  if (isIframe(node) && !isSafe(node, hosts)) {\n    node.remove();\n  }\n  return node;\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport DOMPurify from 'dompurify';\nimport { useCallback, useMemo } from 'react';\n\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\n\nimport { Transformer } from '../transformer';\nimport { removeUnsafeIframes, removeUnsafeLinks } from './hooks';\n\n/**\n * Returns html sanitizer configuration\n */\nconst useSanitizerConfig = () => {\n  const configApi = useApi(configApiRef);\n\n  return useMemo(() => {\n    return configApi.getOptionalConfig('techdocs.sanitizer');\n  }, [configApi]);\n};\n\n/**\n * Returns a transformer that sanitizes the dom\n */\nexport const useSanitizerTransformer = (): Transformer => {\n  const config = useSanitizerConfig();\n\n  return useCallback(\n    async (dom: Element) => {\n      const hosts = config?.getOptionalStringArray('allowedIframeHosts');\n\n      DOMPurify.addHook('beforeSanitizeElements', removeUnsafeLinks);\n      const tags = ['link'];\n\n      if (hosts) {\n        tags.push('iframe');\n        DOMPurify.addHook('beforeSanitizeElements', removeUnsafeIframes(hosts));\n      }\n\n      // using outerHTML as we want to preserve the html tag attributes (lang)\n      return DOMPurify.sanitize(dom.outerHTML, {\n        ADD_TAGS: tags,\n        FORBID_TAGS: ['style'],\n        WHOLE_DOCUMENT: true,\n        RETURN_DOM: true,\n      });\n    },\n    [config],\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { alpha, lighten } from '@material-ui/core';\nimport { RuleOptions } from './types';\n\nexport default ({ theme }: RuleOptions) => `\n/*==================  Variables  ==================*/\n/*\n  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.\n  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.\n*/\n\n:host {\n  /* FONT */\n  --md-default-fg-color: ${theme.palette.text.primary};\n  --md-default-fg-color--light: ${theme.palette.text.secondary};\n  --md-default-fg-color--lighter: ${lighten(theme.palette.text.secondary, 0.7)};\n  --md-default-fg-color--lightest: ${lighten(\n    theme.palette.text.secondary,\n    0.3,\n  )};\n\n  /* BACKGROUND */\n  --md-default-bg-color:${theme.palette.background.default};\n  --md-default-bg-color--light: ${theme.palette.background.paper};\n  --md-default-bg-color--lighter: ${lighten(\n    theme.palette.background.paper,\n    0.7,\n  )};\n  --md-default-bg-color--lightest: ${lighten(\n    theme.palette.background.paper,\n    0.3,\n  )};\n\n  /* PRIMARY */\n  --md-primary-fg-color: ${theme.palette.primary.main};\n  --md-primary-fg-color--light: ${theme.palette.primary.light};\n  --md-primary-fg-color--dark: ${theme.palette.primary.dark};\n  --md-primary-bg-color: ${theme.palette.primary.contrastText};\n  --md-primary-bg-color--light: ${lighten(\n    theme.palette.primary.contrastText,\n    0.7,\n  )};\n\n  /* ACCENT */\n  --md-accent-fg-color: var(--md-primary-fg-color);\n\n  /* SHADOW */\n  --md-shadow-z1: ${theme.shadows[1]};\n  --md-shadow-z2: ${theme.shadows[2]};\n  --md-shadow-z3: ${theme.shadows[3]};\n\n  /* EXTENSIONS */\n  --md-admonition-fg-color: var(--md-default-fg-color);\n  --md-admonition-bg-color: var(--md-default-bg-color);\n  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */\n  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z\"/></svg>');\n  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z\"/></svg>');\n  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z\"/></svg>');\n  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z\"/></svg>');\n  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z\"/></svg>');\n  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z\"/></svg>');\n  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z\"/></svg>');\n  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z\"/></svg>');\n  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z\"/></svg>');\n  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z\"/></svg>');\n  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z\"/></svg>');\n  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z\"/></svg>');\n  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/></svg>');\n  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/></svg>');\n  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z\"/></svg>');\n  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z\"/></svg>');\n  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z\"/></svg>');\n  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z\"/></svg>');\n  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z\"/></svg>');\n  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z\"/></svg>');\n  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z\"/></svg>');\n  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z\"/></svg>');\n  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z\"/></svg>');\n  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 320 512\"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d=\"m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z\"/></svg>');\n}\n\n:host > * {\n  /* CODE */\n  --md-code-fg-color: ${theme.palette.text.primary};\n  --md-code-bg-color: ${theme.palette.background.paper};\n  --md-code-hl-color: ${alpha(theme.palette.warning.main, 0.5)};\n  --md-code-hl-keyword-color: ${\n    theme.palette.type === 'dark'\n      ? theme.palette.primary.light\n      : theme.palette.primary.dark\n  };\n  --md-code-hl-function-color: ${\n    theme.palette.type === 'dark'\n      ? theme.palette.secondary.light\n      : theme.palette.secondary.dark\n  };\n  --md-code-hl-string-color: ${\n    theme.palette.type === 'dark'\n      ? theme.palette.success.light\n      : theme.palette.success.dark\n  };\n  --md-code-hl-number-color: ${\n    theme.palette.type === 'dark'\n      ? theme.palette.error.light\n      : theme.palette.error.dark\n  };\n  --md-code-hl-constant-color: var(--md-code-hl-function-color);\n  --md-code-hl-special-color: var(--md-code-hl-function-color);\n  --md-code-hl-name-color: var(--md-code-fg-color);\n  --md-code-hl-comment-color: var(--md-default-fg-color--light);\n  --md-code-hl-generic-color: var(--md-default-fg-color--light);\n  --md-code-hl-variable-color: var(--md-default-fg-color--light);\n  --md-code-hl-operator-color: var(--md-default-fg-color--light);\n  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);\n\n  /* TYPESET */\n  --md-typeset-font-size: 1rem;\n  --md-typeset-color: var(--md-default-fg-color);\n  --md-typeset-a-color: ${theme.palette.link};\n  --md-typeset-table-color: ${theme.palette.text.primary};\n  --md-typeset-del-color: ${\n    theme.palette.type === 'dark'\n      ? alpha(theme.palette.error.dark, 0.5)\n      : alpha(theme.palette.error.light, 0.5)\n  };\n  --md-typeset-ins-color: ${\n    theme.palette.type === 'dark'\n      ? alpha(theme.palette.success.dark, 0.5)\n      : alpha(theme.palette.success.light, 0.5)\n  };\n  --md-typeset-mark-color: ${\n    theme.palette.type === 'dark'\n      ? alpha(theme.palette.warning.dark, 0.5)\n      : alpha(theme.palette.warning.light, 0.5)\n  };\n}\n\n@media screen and (max-width: 76.1875em) {\n  :host > * {\n    /* TYPESET */\n    --md-typeset-font-size: .9rem;\n  }\n}\n\n@media screen and (max-width: 600px) {\n  :host > * {\n    /* TYPESET */\n    --md-typeset-font-size: .7rem;\n  }\n}\n`;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RuleOptions } from './types';\n\nexport default ({ theme }: RuleOptions) => `\n/*==================  Reset  ==================*/\n\nbody {\n  --md-text-color: var(--md-default-fg-color);\n  --md-text-link-color: var(--md-accent-fg-color);\n  --md-text-font-family: ${theme.typography.fontFamily};\n  font-family: var(--md-text-font-family);\n  background-color: unset;\n}\n`;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RuleOptions } from './types';\n\nconst SIDEBAR_WIDTH = '224px';\n\nexport default ({ theme, sidebar }: RuleOptions) => `\n/*==================  Layout  ==================*/\n\n/* mkdocs material v9 compat */\n.md-nav__title {\n  color: var(--md-default-fg-color);\n}\n\n.md-grid {\n  max-width: 100%;\n  margin: 0;\n}\n\n.md-nav {\n  font-size: calc(var(--md-typeset-font-size) * 0.9);\n}\n.md-nav__link {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.md-nav__icon {\n  height: 20px !important;\n  width: 20px !important;\n  margin-left:${theme.spacing(1)}px;\n}\n.md-nav__icon svg {\n  margin: 0;\n  width: 20px !important;\n  height: 20px !important;\n}\n.md-nav__icon:after {\n  width: 20px !important;\n  height: 20px !important;\n}\n\n.md-nav__item--active > .md-nav__link, a.md-nav__link--active {\n  text-decoration: underline;\n  color: var(--md-typeset-a-color);\n}\n\n.md-main__inner {\n  margin-top: 0;\n}\n\n.md-sidebar {\n  bottom: 75px;\n  position: fixed;\n  width: 16rem;\n  overflow-y: auto;\n  overflow-x: hidden;\n  scrollbar-color: rgb(193, 193, 193) #eee;\n  scrollbar-width: thin;\n}\n.md-sidebar .md-sidebar__scrollwrap {\n  width: calc(12.1rem);\n}\n.md-sidebar--secondary {\n  right: ${theme.spacing(3)}px;\n}\n.md-sidebar::-webkit-scrollbar {\n  width: 5px;\n}\n.md-sidebar::-webkit-scrollbar-button {\n  width: 5px;\n  height: 5px;\n}\n.md-sidebar::-webkit-scrollbar-track {\n  background: #eee;\n  border: 1 px solid rgb(250, 250, 250);\n  box-shadow: 0px 0px 3px #dfdfdf inset;\n  border-radius: 3px;\n}\n.md-sidebar::-webkit-scrollbar-thumb {\n  width: 5px;\n  background: rgb(193, 193, 193);\n  border: transparent;\n  border-radius: 3px;\n}\n.md-sidebar::-webkit-scrollbar-thumb:hover {\n  background: rgb(125, 125, 125);\n}\n\n.md-content {\n  max-width: calc(100% - 16rem * 2);\n  margin-left: 16rem;\n  margin-bottom: 50px;\n}\n\n.md-footer {\n  position: fixed;\n  bottom: 0px;\n  pointer-events: none;\n}\n\n.md-footer-nav__link, .md-footer__link {\n  pointer-events: all;\n}\n\n.md-footer__title {\n  background-color: unset;\n}\n.md-footer-nav__link, .md-footer__link {\n  width: 16rem;\n}\n\n.md-dialog {\n  background-color: unset;\n}\n\n@media screen and (min-width: 76.25em) {\n  .md-sidebar {\n    height: auto;\n  }\n}\n\n@media screen and (max-width: 76.1875em) {\n  .md-nav {\n    transition: none !important;\n    background-color: var(--md-default-bg-color)\n  }\n  .md-nav--primary .md-nav__title {\n    cursor: auto;\n    color: var(--md-default-fg-color);\n    font-weight: 700;\n    white-space: normal;\n    line-height: 1rem;\n    height: auto;\n    display: flex;\n    flex-flow: column;\n    row-gap: 1.6rem;\n    padding: 1.2rem .8rem .8rem;\n    background-color: var(--md-default-bg-color);\n  }\n  .md-nav--primary .md-nav__title~.md-nav__list {\n    box-shadow: none;\n  }\n  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {\n    border-top: none;\n  }\n  .md-nav--primary .md-nav__title .md-nav__button {\n    display: none;\n  }\n  .md-nav--primary .md-nav__title .md-nav__icon {\n    color: var(--md-default-fg-color);\n    position: static;\n    height: auto;\n    margin: 0 0 0 -0.2rem;\n  }\n  .md-nav--primary > .md-nav__title [for=\"none\"] {\n    padding-top: 0;\n  }\n  .md-nav--primary .md-nav__item {\n    border-top: none;\n  }\n  .md-nav--primary :is(.md-nav__title,.md-nav__item) {\n    font-size : var(--md-typeset-font-size);\n  }\n  .md-nav .md-source {\n    display: none;\n  }\n\n  .md-sidebar {\n    height: 100%;\n  }\n  .md-sidebar--primary {\n    width: 12.1rem !important;\n    z-index: 200;\n    left: ${\n      sidebar.isPinned\n        ? `calc(-12.1rem + ${SIDEBAR_WIDTH})`\n        : 'calc(-12.1rem + 72px)'\n    } !important;\n  }\n  .md-sidebar--secondary:not([hidden]) {\n    display: none;\n  }\n\n  .md-content {\n    max-width: 100%;\n    margin-left: 0;\n  }\n\n  .md-header__button {\n    margin: 0.4rem 0;\n    margin-left: 0.4rem;\n    padding: 0;\n  }\n\n  .md-overlay {\n    left: 0;\n  }\n\n  .md-footer {\n    position: static;\n    padding-left: 0;\n  }\n  .md-footer-nav__link {\n    /* footer links begin to overlap at small sizes without setting width */\n    width: 50%;\n  }\n}\n\n@media screen and (max-width: 600px) {\n  .md-sidebar--primary {\n    left: -12.1rem !important;\n    width: 12.1rem;\n  }\n}\n\n\n@media print {\n  .md-sidebar,\n  #toggle-sidebar {\n    display: none;\n  }\n  \n  .md-content {\n    margin: 0;\n    width: 100%;\n    max-width: 100%;\n  }\n}\n`;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RuleOptions } from './types';\n\ntype RuleTypography = RuleOptions['theme']['typography'];\n\ntype BackstageTypography = RuleTypography & {\n  htmlFontSize?: number;\n};\n\ntype TypographyHeadings = Pick<\n  RuleTypography,\n  'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6'\n>;\n\ntype TypographyHeadingsKeys = keyof TypographyHeadings;\n\nconst headings: TypographyHeadingsKeys[] = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\n\nexport default ({ theme }: RuleOptions) => `\n/*==================  Typeset  ==================*/\n\n.md-typeset {\n  font-size: var(--md-typeset-font-size);\n}\n\n${headings.reduce<string>((style, heading) => {\n  const htmlFontSize =\n    (theme.typography as BackstageTypography).htmlFontSize ?? 16;\n  const styles = theme.typography[heading];\n  const { lineHeight, fontFamily, fontWeight, fontSize } = styles;\n  const calculate = (value: typeof fontSize) => {\n    let factor: number | string = 1;\n    if (typeof value === 'number') {\n      // convert px to rem\n      // 60% of the size defined because it is too big\n      factor = (value / htmlFontSize) * 0.6;\n    }\n    if (typeof value === 'string') {\n      factor = value.replace('rem', '');\n    }\n    return `calc(${factor} * var(--md-typeset-font-size))`;\n  };\n  return style.concat(`\n    .md-typeset ${heading} {\n      color: var(--md-default-fg-color);\n      line-height: ${lineHeight};\n      font-family: ${fontFamily};\n      font-weight: ${fontWeight};\n      font-size: ${calculate(fontSize)};\n    }\n  `);\n}, '')}\n\n.md-typeset .md-content__button {\n  color: var(--md-default-fg-color);\n}\n\n.md-typeset hr {\n  border-bottom: 0.05rem dotted ${theme.palette.divider};\n}\n\n.md-typeset details {\n  font-size: var(--md-typeset-font-size) !important;\n}\n.md-typeset details summary {\n  padding-left: 2.5rem !important;\n}\n.md-typeset details summary:before,\n.md-typeset details summary:after {\n  top: 50% !important;\n  width: 20px !important;\n  height: 20px !important;\n  transform: rotate(0deg) translateY(-50%) !important;\n}\n.md-typeset details[open] > summary:after {\n  transform: rotate(90deg) translateX(-50%) !important;\n}\n\n.md-typeset blockquote {\n  color: var(--md-default-fg-color--light);\n  border-left: 0.2rem solid var(--md-default-fg-color--light);\n}\n\n.md-typeset table:not([class]) {\n  font-size: var(--md-typeset-font-size);\n  border: 1px solid var(--md-default-fg-color);\n  border-bottom: none;\n  border-collapse: collapse;\n}\n.md-typeset table:not([class]) th {\n  font-weight: bold;\n}\n.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {\n  border-bottom: 1px solid var(--md-default-fg-color);\n}\n\n.md-typeset pre > code::-webkit-scrollbar-thumb {\n  background-color: hsla(0, 0%, 0%, 0.32);\n}\n.md-typeset pre > code::-webkit-scrollbar-thumb:hover {\n  background-color: hsla(0, 0%, 0%, 0.87);\n}\n`;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport default () => `\n/*==================  Animations  ==================*/\n/*\n  Disable CSS animations on link colors as they lead to issues in dark mode.\n  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.\n*/\n.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {\n  transition: none;\n}\n`;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RuleOptions } from './types';\n\nexport default ({ theme }: RuleOptions) => `\n/*==================  Extensions  ==================*/\n\n/* HIGHLIGHT */\n.highlight .md-clipboard:after {\n  content: unset;\n}\n\n.highlight .nx {\n  color: ${theme.palette.type === 'dark' ? '#ff53a3' : '#ec407a'};\n}\n\n/* CODE HILITE */\n.codehilite .gd {\n  background-color: ${\n    theme.palette.type === 'dark' ? 'rgba(248,81,73,0.65)' : '#fdd'\n  };\n}\n\n.codehilite .gi {\n  background-color: ${\n    theme.palette.type === 'dark' ? 'rgba(46,160,67,0.65)' : '#dfd'\n  };\n}\n\n/* TABBED */\n.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),\n.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),\n.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),\n.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),\n.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),\n.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),\n.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),\n.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),\n.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),\n.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),\n.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),\n.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),\n.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),\n.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),\n.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),\n.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),\n.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),\n.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),\n.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),\n.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {\n  color: var(--md-accent-fg-color);\n  border-color: var(--md-accent-fg-color);\n}\n\n/* TASK-LIST */\n.task-list-control .task-list-indicator::before {\n  background-color: ${theme.palette.action.disabledBackground};\n}\n.task-list-control [type=\"checkbox\"]:checked + .task-list-indicator:before {\n background-color: ${theme.palette.success.main};\n}\n\n/* ADMONITION */\n.admonition {\n  font-size: var(--md-typeset-font-size) !important;\n}\n.admonition .admonition-title {\n  padding-left: 2.5rem !important;\n}\n\n.admonition .admonition-title:before {\n  top: 50% !important;\n  width: 20px !important;\n  height: 20px !important;\n  transform: translateY(-50%) !important;\n}\n`;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { default as variables } from './variables';\nimport { default as reset } from './reset';\nimport { default as layout } from './layout';\nimport { default as typeset } from './typeset';\nimport { default as animations } from './animations';\nimport { default as extensions } from './extensions';\n\n/**\n * A list of style rules that will be applied to an element in the order they were added.\n *\n * @remarks\n * The order of items is important, which means that a rule can override any other rule previously added to the list,\n * i.e. the rules will be applied from the first added to the last added.\n */\nexport const rules = [\n  variables,\n  reset,\n  layout,\n  typeset,\n  animations,\n  extensions,\n];\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useMemo } from 'react';\nimport { useTheme } from '@material-ui/core';\nimport { useSidebarPinState } from '@backstage/core-components';\nimport { Transformer } from '../transformer';\nimport { rules } from './rules';\n\n/**\n * Sidebar pinned state to be used in computing style injections.\n */\nconst useSidebar = () => useSidebarPinState();\n\n/**\n * Process all rules and concatenate their definitions into a single style.\n * @returns a string containing all processed style definitions.\n */\nconst useRuleStyles = () => {\n  const sidebar = useSidebar();\n  const theme = useTheme();\n\n  return useMemo(() => {\n    const options = { theme, sidebar };\n    return rules.reduce<string>((styles, rule) => styles + rule(options), '');\n  }, [theme, sidebar]);\n};\n\n/**\n * Returns a transformer that inserts all style rules into the given element's head tag.\n */\nexport const useStylesTransformer = (): Transformer => {\n  const styles = useRuleStyles();\n\n  return useCallback(\n    (dom: Element) => {\n      dom\n        .getElementsByTagName('head')[0]\n        .insertAdjacentHTML('beforeend', `<style>${styles}</style>`);\n      return dom;\n    },\n    [styles],\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { CompoundEntityRef } from '@backstage/catalog-model';\nimport { TechDocsStorageApi } from '../../api';\nimport type { Transformer } from './transformer';\n\ntype AddBaseUrlOptions = {\n  techdocsStorageApi: TechDocsStorageApi;\n  entityId: CompoundEntityRef;\n  path: string;\n};\n\n/**\n * TechDocs backend serves SVGs with text/plain content-type for security. This\n * helper determines if an SVG is being loaded from the backend, and thus needs\n * inlining to be displayed properly.\n */\nconst isSvgNeedingInlining = (\n  attrName: string,\n  attrVal: string,\n  apiOrigin: string,\n) => {\n  const isSrcToSvg = attrName === 'src' && attrVal.endsWith('.svg');\n  const isRelativeUrl = !attrVal.match(/^([a-z]*:)?\\/\\//i);\n  const pointsToOurBackend = attrVal.startsWith(apiOrigin);\n  return isSrcToSvg && (isRelativeUrl || pointsToOurBackend);\n};\n\nexport const addBaseUrl = ({\n  techdocsStorageApi,\n  entityId,\n  path,\n}: AddBaseUrlOptions): Transformer => {\n  return async dom => {\n    const apiOrigin = await techdocsStorageApi.getApiOrigin();\n\n    const updateDom = async <T extends Element>(\n      list: HTMLCollectionOf<T> | NodeListOf<T>,\n      attributeName: string,\n    ) => {\n      for (const elem of list) {\n        if (elem.hasAttribute(attributeName)) {\n          const elemAttribute = elem.getAttribute(attributeName);\n          if (!elemAttribute) return;\n\n          // Special handling for SVG images.\n          const newValue = await techdocsStorageApi.getBaseUrl(\n            elemAttribute,\n            entityId,\n            path,\n          );\n\n          if (isSvgNeedingInlining(attributeName, elemAttribute, apiOrigin)) {\n            try {\n              const svg = await fetch(newValue, { credentials: 'include' });\n              const svgContent = await svg.text();\n              elem.setAttribute(\n                attributeName,\n                `data:image/svg+xml;base64,${btoa(\n                  unescape(encodeURIComponent(svgContent)),\n                )}`,\n              );\n            } catch (e) {\n              elem.setAttribute('alt', `Error: ${elemAttribute}`);\n            }\n          } else {\n            elem.setAttribute(attributeName, newValue);\n          }\n        }\n      }\n    };\n\n    await Promise.all([\n      updateDom<HTMLImageElement>(dom.querySelectorAll('img'), 'src'),\n      updateDom<HTMLScriptElement>(dom.querySelectorAll('script'), 'src'),\n      updateDom<HTMLSourceElement>(dom.querySelectorAll('source'), 'src'),\n      updateDom<HTMLLinkElement>(dom.querySelectorAll('link'), 'href'),\n      updateDom<HTMLAnchorElement>(dom.querySelectorAll('a[download]'), 'href'),\n    ]);\n\n    return dom;\n  };\n};\n","/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet ReactDOMPromise: Promise<\n  typeof import('react-dom') | typeof import('react-dom/client')\n>;\nif (process.env.HAS_REACT_DOM_CLIENT) {\n  ReactDOMPromise = import('react-dom/client');\n} else {\n  ReactDOMPromise = import('react-dom');\n}\n\n/** @internal */\nexport function renderReactElement(element: JSX.Element, root: HTMLElement) {\n  ReactDOMPromise.then(ReactDOM => {\n    if ('createRoot' in ReactDOM) {\n      ReactDOM.createRoot(root).render(element);\n    } else {\n      ReactDOM.render(element, root);\n    }\n  });\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { Transformer } from './transformer';\nimport {\n  replaceGithubUrlType,\n  ScmIntegrationRegistry,\n} from '@backstage/integration';\nimport FeedbackOutlinedIcon from '@material-ui/icons/FeedbackOutlined';\nimport React from 'react';\nimport parseGitUrl from 'git-url-parse';\nimport { renderReactElement } from './renderReactElement';\n\n// requires repo\nexport const addGitFeedbackLink = (\n  scmIntegrationsApi: ScmIntegrationRegistry,\n): Transformer => {\n  return dom => {\n    // attempting to use selectors that are more likely to be static as MkDocs updates over time\n    const sourceAnchor = dom.querySelector(\n      '[title=\"Edit this page\"]',\n    ) as HTMLAnchorElement;\n\n    // don't show if edit link not available in raw page\n    if (!sourceAnchor || !sourceAnchor.href) {\n      return dom;\n    }\n\n    const sourceURL = new URL(sourceAnchor.href);\n    const integration = scmIntegrationsApi.byUrl(sourceURL);\n\n    // don't show if can't identify edit link hostname as a gitlab/github hosting\n    if (integration?.type !== 'github' && integration?.type !== 'gitlab') {\n      return dom;\n    }\n\n    // topmost h1 only contains title for whole page\n    const title =\n      (dom.querySelector('article>h1') as HTMLElement)?.childNodes[0]\n        .textContent || '';\n    const issueTitle = encodeURIComponent(`Documentation Feedback: ${title}`);\n    const issueDesc = encodeURIComponent(\n      `Page source:\\n${sourceAnchor.href}\\n\\nFeedback:`,\n    );\n\n    // Convert GitHub edit url to blob type so it can be parsed by git-url-parse correctly\n    const gitUrl =\n      integration?.type === 'github'\n        ? replaceGithubUrlType(sourceURL.href, 'blob')\n        : sourceURL.href;\n    const gitInfo = parseGitUrl(gitUrl);\n    const repoPath = `/${gitInfo.organization}/${gitInfo.name}`;\n\n    const feedbackLink = sourceAnchor.cloneNode() as HTMLAnchorElement;\n    switch (integration?.type) {\n      case 'gitlab':\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?issue[title]=${issueTitle}&issue[description]=${issueDesc}`;\n        break;\n      case 'github':\n        feedbackLink.href = `${sourceURL.origin}${repoPath}/issues/new?title=${issueTitle}&body=${issueDesc}`;\n        break;\n      default:\n        return dom;\n    }\n    renderReactElement(React.createElement(FeedbackOutlinedIcon), feedbackLink);\n    feedbackLink.style.paddingLeft = '5px';\n    feedbackLink.title = 'Leave feedback for this page';\n    feedbackLink.id = 'git-feedback-link';\n    sourceAnchor?.insertAdjacentElement('beforebegin', feedbackLink);\n    return dom;\n  };\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { Transformer } from './transformer';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport React from 'react';\nimport { renderReactElement } from './renderReactElement';\n\nexport const addSidebarToggle = (): Transformer => {\n  return dom => {\n    // attempting to use selectors that are more likely to be static as MkDocs updates over time\n    const mkdocsToggleSidebar = dom.querySelector(\n      '.md-header label[for=\"__drawer\"]',\n    ) as HTMLLabelElement;\n    const article = dom.querySelector('article') as HTMLElement;\n\n    // Fail gracefully\n    if (!mkdocsToggleSidebar || !article) {\n      return dom;\n    }\n\n    const toggleSidebar = mkdocsToggleSidebar.cloneNode() as HTMLLabelElement;\n    renderReactElement(React.createElement(MenuIcon), toggleSidebar);\n    toggleSidebar.id = 'toggle-sidebar';\n    toggleSidebar.title = 'Toggle Sidebar';\n    toggleSidebar.classList.add('md-content__button');\n    toggleSidebar.style.setProperty('padding', '0 0 0 5px');\n    toggleSidebar.style.setProperty('margin', '0.4rem 0 0.4rem 0.4rem');\n    article?.prepend(toggleSidebar);\n    return dom;\n  };\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { Transformer } from './transformer';\n\nexport const rewriteDocLinks = (): Transformer => {\n  return dom => {\n    const updateDom = <T extends Element>(\n      list: Array<T>,\n      attributeName: string,\n    ): void => {\n      Array.from(list)\n        .filter(elem => elem.hasAttribute(attributeName))\n        .forEach((elem: T) => {\n          const elemAttribute = elem.getAttribute(attributeName);\n          if (elemAttribute) {\n            // if link is external, add target to open in a new window or tab\n            if (elemAttribute.match(/^https?:\\/\\//i)) {\n              elem.setAttribute('target', '_blank');\n            }\n\n            try {\n              const normalizedWindowLocation = normalizeUrl(\n                window.location.href,\n              );\n              elem.setAttribute(\n                attributeName,\n                new URL(elemAttribute, normalizedWindowLocation).toString(),\n              );\n            } catch (_e) {\n              // Non-parseable links should be re-written as plain text.\n              elem.replaceWith(elem.textContent || elemAttribute);\n            }\n          }\n        });\n    };\n\n    updateDom(Array.from(dom.getElementsByTagName('a')), 'href');\n\n    return dom;\n  };\n};\n\n/** Make sure that the input url always ends with a '/' */\nexport function normalizeUrl(input: string): string {\n  const url = new URL(input);\n\n  if (!url.pathname.endsWith('/') && !url.pathname.endsWith('.html')) {\n    url.pathname += '/';\n  }\n\n  return url.toString();\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { Transformer } from './transformer';\n\ntype AddLinkClickListenerOptions = {\n  baseUrl: string;\n  onClick: (e: MouseEvent, newUrl: string) => void;\n};\n\nexport const addLinkClickListener = ({\n  baseUrl,\n  onClick,\n}: AddLinkClickListenerOptions): Transformer => {\n  return dom => {\n    Array.from(dom.getElementsByTagName('a')).forEach(elem => {\n      elem.addEventListener('click', (e: MouseEvent) => {\n        const target = elem as HTMLAnchorElement;\n        const href = target.getAttribute('href');\n\n        if (!href) return;\n        if (href.startsWith(baseUrl) && !elem.hasAttribute('download')) {\n          e.preventDefault();\n          onClick(e, href);\n        }\n      });\n    });\n\n    return dom;\n  };\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, useCallback } from 'react';\nimport { renderReactElement } from './renderReactElement';\nimport {\n  withStyles,\n  Theme,\n  ThemeProvider,\n  SvgIcon,\n  Tooltip,\n} from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport type { Transformer } from './transformer';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\n\nconst CopyToClipboardTooltip = withStyles(theme => ({\n  tooltip: {\n    fontSize: 'inherit',\n    color: theme.palette.text.primary,\n    margin: 0,\n    padding: theme.spacing(0.5),\n    backgroundColor: 'transparent',\n    boxShadow: 'none',\n  },\n}))(Tooltip);\n\nconst CopyToClipboardIcon = () => (\n  <SvgIcon>\n    <path d=\"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\" />\n  </SvgIcon>\n);\n\ntype CopyToClipboardButtonProps = {\n  text: string;\n};\n\nconst CopyToClipboardButton = ({ text }: CopyToClipboardButtonProps) => {\n  const [open, setOpen] = useState(false);\n  const [, copyToClipboard] = useCopyToClipboard();\n\n  const handleClick = useCallback(() => {\n    copyToClipboard(text);\n    setOpen(true);\n  }, [text, copyToClipboard]);\n\n  const handleClose = useCallback(() => {\n    setOpen(false);\n  }, [setOpen]);\n\n  return (\n    <CopyToClipboardTooltip\n      title=\"Copied to clipboard\"\n      placement=\"left\"\n      open={open}\n      onClose={handleClose}\n      leaveDelay={1000}\n    >\n      <IconButton\n        style={{ color: 'inherit' }}\n        className=\"md-clipboard md-icon\"\n        onClick={handleClick}\n      >\n        <CopyToClipboardIcon />\n      </IconButton>\n    </CopyToClipboardTooltip>\n  );\n};\n\n/**\n * Recreates copy-to-clipboard functionality attached to <code> snippets that\n * is native to mkdocs-material theme.\n */\nexport const copyToClipboard = (theme: Theme): Transformer => {\n  return dom => {\n    const codes = dom.querySelectorAll('pre > code');\n    for (const code of codes) {\n      const text = code.textContent || '';\n      const container = document.createElement('div');\n      code?.parentElement?.prepend(container);\n      renderReactElement(\n        <ThemeProvider theme={theme}>\n          <CopyToClipboardButton text={text} />\n        </ThemeProvider>,\n        container,\n      );\n    }\n    return dom;\n  };\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { Transformer } from './transformer';\n\nexport const removeMkdocsHeader = (): Transformer => {\n  return dom => {\n    // Remove the header\n    dom.querySelector('.md-header')?.remove();\n\n    return dom;\n  };\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { Transformer } from './transformer';\n\nexport const simplifyMkdocsFooter = (): Transformer => {\n  return dom => {\n    // Remove new mkdocs copyright\n    dom.querySelector('.md-footer .md-copyright')?.remove();\n    // Remove old mkdocs copyright\n    dom.querySelector('.md-footer-copyright')?.remove();\n    return dom;\n  };\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SHADOW_DOM_STYLE_LOAD_EVENT } from '@backstage/plugin-techdocs-react';\nimport type { Transformer } from './transformer';\n\ntype OnCssReadyOptions = {\n  onLoading: () => void;\n  onLoaded: () => void;\n};\n\nexport const onCssReady = ({\n  onLoading,\n  onLoaded,\n}: OnCssReadyOptions): Transformer => {\n  return dom => {\n    onLoading();\n    dom.addEventListener(\n      SHADOW_DOM_STYLE_LOAD_EVENT,\n      function handleShadowDomStyleLoad() {\n        onLoaded();\n        dom.removeEventListener(\n          SHADOW_DOM_STYLE_LOAD_EVENT,\n          handleShadowDomStyleLoad,\n        );\n      },\n    );\n    return dom;\n  };\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { Transformer } from './transformer';\n\nexport const scrollIntoNavigation = (): Transformer => {\n  return dom => {\n    setTimeout(() => {\n      const activeNavItems = dom?.querySelectorAll(`li.md-nav__item--active`);\n      if (activeNavItems.length !== 0) {\n        // expand all navigation items that are active\n        activeNavItems.forEach(activeNavItem => {\n          const checkbox = activeNavItem?.querySelector('input');\n          if (!checkbox?.checked) {\n            checkbox?.click();\n          }\n        });\n\n        const lastItem = activeNavItems[activeNavItems.length - 1];\n        lastItem.scrollIntoView();\n      }\n    }, 200);\n    return dom;\n  };\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport type Transformer = (dom: Element) => Element | Promise<Element>;\n\nexport const transform = async (\n  html: string | Element,\n  transformers: Transformer[],\n): Promise<Element> => {\n  let dom: Element;\n\n  if (typeof html === 'string') {\n    dom = new DOMParser().parseFromString(html, 'text/html').documentElement;\n  } else if (html instanceof Element) {\n    dom = html;\n  } else {\n    throw new Error('dom is not a recognized type');\n  }\n\n  for (const transformer of transformers) {\n    dom = await transformer(dom);\n  }\n\n  return dom;\n};\n","/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\nimport { useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\n/**\n * Resolve a URL to a relative URL given a base URL that may or may not include subpaths.\n * @param url - URL to parse into a relative url based on the baseUrl.\n * @param baseUrl - Application base url, where the application is currently hosted.\n * @returns relative path without any subpaths from website config.\n */\nexport function resolveUrlToRelative(url: string, baseUrl: string) {\n  const parsedAppUrl = new URL(baseUrl);\n  const appUrlPath = `${parsedAppUrl.origin}${parsedAppUrl.pathname.replace(\n    /\\/$/,\n    '',\n  )}`;\n\n  const relativeUrl = url\n    .replace(appUrlPath, '')\n    // Remove any leading slashes.\n    .replace(/^\\/+/, '');\n  const parsedUrl = new URL(`http://localhost/${relativeUrl}`);\n  return `${parsedUrl.pathname}${parsedUrl.search}${parsedUrl.hash}`;\n}\n\n/**\n * A helper hook that allows for full internal website urls to be processed through the navigate\n *  hook provided by `react-router-dom`.\n *\n * NOTE: This does not support routing to external URLs. That should be done with a `Link` or `a`\n *  element instead, or just `window.location.href`.\n *\n * TODO: Update this to use `useRouteRef` instead of `useApi`.\n *\n * @returns Navigation function that is a wrapper over `react-router-dom`'s\n *  to support passing full URLs for navigation.\n *\n * @public\n */\nexport function useNavigateUrl() {\n  const navigate = useNavigate();\n  const configApi = useApi(configApiRef);\n  const appBaseUrl = configApi.getOptionalString('app.baseUrl');\n  const navigateFn = useCallback(\n    (to: string) => {\n      let url = to;\n      /**\n       * This should always be true when running the application, this just allows\n       *    test cases that do not have the configApi set up to run still.\n       */\n      if (appBaseUrl) {\n        try {\n          url = resolveUrlToRelative(to, appBaseUrl);\n        } catch (err) {\n          // URL passed in was relative.\n        }\n      }\n      navigate(url);\n    },\n    [navigate, appBaseUrl],\n  );\n  return navigateFn;\n}\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useEffect, useState } from 'react';\n\nimport { useTheme, useMediaQuery } from '@material-ui/core';\n\nimport { CompoundEntityRef } from '@backstage/catalog-model';\nimport { useAnalytics, useApi } from '@backstage/core-plugin-api';\nimport { scmIntegrationsApiRef } from '@backstage/integration-react';\n\nimport {\n  techdocsStorageApiRef,\n  useShadowDomStylesLoading,\n} from '@backstage/plugin-techdocs-react';\n\nimport { useTechDocsReader } from '../TechDocsReaderProvider';\n\nimport {\n  addBaseUrl,\n  addGitFeedbackLink,\n  addLinkClickListener,\n  addSidebarToggle,\n  onCssReady,\n  removeMkdocsHeader,\n  rewriteDocLinks,\n  simplifyMkdocsFooter,\n  scrollIntoNavigation,\n  transform as transformer,\n  copyToClipboard,\n  useSanitizerTransformer,\n  useStylesTransformer,\n} from '../../transformers';\nimport { useNavigateUrl } from './useNavigateUrl';\n\nconst MOBILE_MEDIA_QUERY = 'screen and (max-width: 76.1875em)';\n\n/**\n * Hook that encapsulates the behavior of getting raw HTML and applying\n * transforms to it in order to make it function at a basic level in the\n * Backstage UI.\n */\nexport const useTechDocsReaderDom = (\n  entityRef: CompoundEntityRef,\n): Element | null => {\n  const navigate = useNavigateUrl();\n  const theme = useTheme();\n  const isMobileMedia = useMediaQuery(MOBILE_MEDIA_QUERY);\n  const sanitizerTransformer = useSanitizerTransformer();\n  const stylesTransformer = useStylesTransformer();\n  const analytics = useAnalytics();\n\n  const techdocsStorageApi = useApi(techdocsStorageApiRef);\n  const scmIntegrationsApi = useApi(scmIntegrationsApiRef);\n\n  const { state, path, content: rawPage } = useTechDocsReader();\n\n  const [dom, setDom] = useState<HTMLElement | null>(null);\n  const isStyleLoading = useShadowDomStylesLoading(dom);\n\n  const updateSidebarPosition = useCallback(() => {\n    if (!dom) return;\n\n    const sidebars = dom.querySelectorAll<HTMLElement>('.md-sidebar');\n\n    sidebars.forEach(element => {\n      // set sidebar position to render in correct position\n      if (isMobileMedia) {\n        element.style.top = '0px';\n      } else {\n        const page = document?.querySelector('.techdocs-reader-page');\n        const pageTop = page?.getBoundingClientRect().top ?? 0;\n        let domTop = dom.getBoundingClientRect().top ?? 0;\n\n        const tabs = dom.querySelector('.md-container > .md-tabs');\n        const tabsHeight = tabs?.getBoundingClientRect().height ?? 0;\n\n        // the sidebars should not scroll beyond the total height of the header and tabs\n        if (domTop < pageTop) {\n          domTop = pageTop;\n        }\n        element.style.top = `${Math.max(domTop, 0) + tabsHeight}px`;\n      }\n\n      // show the sidebar only after updating its position\n      element.style.setProperty('opacity', '1');\n    });\n  }, [dom, isMobileMedia]);\n\n  useEffect(() => {\n    window.addEventListener('resize', updateSidebarPosition);\n    window.addEventListener('scroll', updateSidebarPosition, true);\n    return () => {\n      window.removeEventListener('resize', updateSidebarPosition);\n      window.removeEventListener('scroll', updateSidebarPosition, true);\n    };\n  }, [dom, updateSidebarPosition]);\n\n  // dynamically set width of footer to accommodate for pinning of the sidebar\n  const updateFooterWidth = useCallback(() => {\n    if (!dom) return;\n    const footer = dom.querySelector<HTMLElement>('.md-footer');\n    if (footer) {\n      footer.style.width = `${dom.getBoundingClientRect().width}px`;\n    }\n  }, [dom]);\n\n  useEffect(() => {\n    window.addEventListener('resize', updateFooterWidth);\n    return () => {\n      window.removeEventListener('resize', updateFooterWidth);\n    };\n  }, [dom, updateFooterWidth]);\n\n  // an update to \"state\" might lead to an updated UI so we include it as a trigger\n  useEffect(() => {\n    if (!isStyleLoading) {\n      updateFooterWidth();\n      updateSidebarPosition();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [state, isStyleLoading, updateFooterWidth, updateSidebarPosition]);\n\n  // a function that performs transformations that are executed prior to adding it to the DOM\n  const preRender = useCallback(\n    (rawContent: string, contentPath: string) =>\n      transformer(rawContent, [\n        sanitizerTransformer,\n        addBaseUrl({\n          techdocsStorageApi,\n          entityId: entityRef,\n          path: contentPath,\n        }),\n        rewriteDocLinks(),\n        addSidebarToggle(),\n        removeMkdocsHeader(),\n        simplifyMkdocsFooter(),\n        addGitFeedbackLink(scmIntegrationsApi),\n        stylesTransformer,\n      ]),\n    [\n      // only add dependencies that are in state or memorized variables to avoid unnecessary calls between re-renders\n      entityRef,\n      scmIntegrationsApi,\n      techdocsStorageApi,\n      sanitizerTransformer,\n      stylesTransformer,\n    ],\n  );\n\n  // a function that performs transformations that are executed after adding it to the DOM\n  const postRender = useCallback(\n    async (transformedElement: Element) =>\n      transformer(transformedElement, [\n        scrollIntoNavigation(),\n        copyToClipboard(theme),\n        addLinkClickListener({\n          baseUrl: window.location.origin,\n          onClick: (event: MouseEvent, url: string) => {\n            // detect if CTRL or META keys are pressed so that links can be opened in a new tab with `window.open`\n            const modifierActive = event.ctrlKey || event.metaKey;\n            const parsedUrl = new URL(url);\n\n            // capture link clicks within documentation\n            const linkText =\n              (event.target as HTMLAnchorElement | undefined)?.innerText || url;\n            const to = url.replace(window.location.origin, '');\n            analytics.captureEvent('click', linkText, { attributes: { to } });\n\n            // hash exists when anchor is clicked on secondary sidebar\n            if (parsedUrl.hash) {\n              if (modifierActive) {\n                window.open(url, '_blank');\n              } else {\n                navigate(url);\n                // Scroll to hash if it's on the current page\n                transformedElement\n                  ?.querySelector(`[id=\"${parsedUrl.hash.slice(1)}\"]`)\n                  ?.scrollIntoView();\n              }\n            } else {\n              if (modifierActive) {\n                window.open(url, '_blank');\n              } else {\n                navigate(url);\n              }\n            }\n          },\n        }),\n        // disable MkDocs drawer toggling ('for' attribute => checkbox mechanism)\n        onCssReady({\n          onLoading: () => {},\n          onLoaded: () => {\n            transformedElement\n              .querySelector('.md-nav__title')\n              ?.removeAttribute('for');\n          },\n        }),\n        // hide sidebars until their positions are updated\n        onCssReady({\n          onLoading: () => {\n            const sidebars = Array.from(\n              transformedElement.querySelectorAll<HTMLElement>('.md-sidebar'),\n            );\n            sidebars.forEach(element => {\n              element.style.setProperty('opacity', '0');\n            });\n          },\n          onLoaded: () => {},\n        }),\n      ]),\n    [theme, navigate, analytics],\n  );\n\n  useEffect(() => {\n    if (!rawPage) return () => {};\n\n    // if false, there is already a newer execution of this effect\n    let shouldReplaceContent = true;\n\n    // Pre-render\n    preRender(rawPage, path).then(async preTransformedDomElement => {\n      if (!preTransformedDomElement?.innerHTML) {\n        return; // An unexpected error occurred\n      }\n\n      // don't manipulate the shadow dom if this isn't the latest effect execution\n      if (!shouldReplaceContent) {\n        return;\n      }\n\n      // Scroll to top after render\n      window.scroll({ top: 0 });\n\n      // Post-render\n      const postTransformedDomElement = await postRender(\n        preTransformedDomElement,\n      );\n      setDom(postTransformedDomElement as HTMLElement);\n    });\n\n    // cancel this execution\n    return () => {\n      shouldReplaceContent = false;\n    };\n  }, [rawPage, path, preRender, postRender]);\n\n  return dom;\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { Portal } from '@material-ui/core';\nimport {\n  useTechDocsAddons,\n  TechDocsAddonLocations as locations,\n  useTechDocsReaderPage,\n} from '@backstage/plugin-techdocs-react';\n\nexport const TechDocsReaderPageContentAddons = () => {\n  const addons = useTechDocsAddons();\n\n  const { shadowRoot } = useTechDocsReaderPage();\n\n  const contentElement = shadowRoot?.querySelector(\n    '[data-md-component=\"content\"]',\n  );\n\n  const primarySidebarElement = shadowRoot?.querySelector(\n    'div[data-md-component=\"sidebar\"][data-md-type=\"navigation\"], div[data-md-component=\"navigation\"]',\n  );\n  let primarySidebarAddonLocation = primarySidebarElement?.querySelector(\n    '[data-techdocs-addons-location=\"primary sidebar\"]',\n  );\n  if (!primarySidebarAddonLocation) {\n    primarySidebarAddonLocation = document.createElement('div');\n    primarySidebarAddonLocation.setAttribute(\n      'data-techdocs-addons-location',\n      'primary sidebar',\n    );\n    primarySidebarElement?.prepend(primarySidebarAddonLocation);\n  }\n\n  const secondarySidebarElement = shadowRoot?.querySelector(\n    'div[data-md-component=\"sidebar\"][data-md-type=\"toc\"], div[data-md-component=\"toc\"]',\n  );\n  let secondarySidebarAddonLocation = secondarySidebarElement?.querySelector(\n    '[data-techdocs-addons-location=\"secondary sidebar\"]',\n  );\n  if (!secondarySidebarAddonLocation) {\n    secondarySidebarAddonLocation = document.createElement('div');\n    secondarySidebarAddonLocation.setAttribute(\n      'data-techdocs-addons-location',\n      'secondary sidebar',\n    );\n    secondarySidebarElement?.prepend(secondarySidebarAddonLocation);\n  }\n\n  return (\n    <>\n      <Portal container={primarySidebarAddonLocation}>\n        {addons.renderComponentsByLocation(locations.PrimarySidebar)}\n      </Portal>\n      <Portal container={contentElement}>\n        {addons.renderComponentsByLocation(locations.Content)}\n      </Portal>\n      <Portal container={secondarySidebarAddonLocation}>\n        {addons.renderComponentsByLocation(locations.SecondarySidebar)}\n      </Portal>\n    </>\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useCallback, useEffect } from 'react';\n\nimport { makeStyles, Grid } from '@material-ui/core';\n\nimport {\n  TechDocsShadowDom,\n  useShadowDomStylesLoading,\n  useShadowRootElements,\n  useTechDocsReaderPage,\n} from '@backstage/plugin-techdocs-react';\nimport { CompoundEntityRef } from '@backstage/catalog-model';\nimport { Content, ErrorPage } from '@backstage/core-components';\n\nimport { TechDocsSearch } from '../../../search';\nimport { TechDocsStateIndicator } from '../TechDocsStateIndicator';\n\nimport { useTechDocsReaderDom } from './dom';\nimport { withTechDocsReaderProvider } from '../TechDocsReaderProvider';\nimport { TechDocsReaderPageContentAddons } from './TechDocsReaderPageContentAddons';\n\nconst useStyles = makeStyles({\n  search: {\n    width: '100%',\n    '@media (min-width: 76.1875em)': {\n      width: 'calc(100% - 34.4rem)',\n      margin: '0 auto',\n    },\n    '@media print': {\n      display: 'none',\n    },\n  },\n});\n\n/**\n * Props for {@link TechDocsReaderPageContent}\n * @public\n */\nexport type TechDocsReaderPageContentProps = {\n  /**\n   * @deprecated No need to pass down entityRef as property anymore. Consumes the entityName from `TechDocsReaderPageContext`. Use the {@link @backstage/plugin-techdocs-react#useTechDocsReaderPage} hook for custom reader page content.\n   */\n  entityRef?: CompoundEntityRef;\n  /**\n   * Show or hide the search bar, defaults to true.\n   */\n  withSearch?: boolean;\n  /**\n   * Callback called when the content is rendered.\n   */\n  onReady?: () => void;\n};\n\n/**\n * Renders the reader page content\n * @public\n */\nexport const TechDocsReaderPageContent = withTechDocsReaderProvider(\n  (props: TechDocsReaderPageContentProps) => {\n    const { withSearch = true, onReady } = props;\n    const classes = useStyles();\n\n    const {\n      entityMetadata: { value: entityMetadata, loading: entityMetadataLoading },\n      entityRef,\n      setShadowRoot,\n    } = useTechDocsReaderPage();\n    const dom = useTechDocsReaderDom(entityRef);\n    const path = window.location.pathname;\n    const hash = window.location.hash;\n    const isStyleLoading = useShadowDomStylesLoading(dom);\n    const [hashElement] = useShadowRootElements([`[id=\"${hash.slice(1)}\"]`]);\n\n    useEffect(() => {\n      if (isStyleLoading) return;\n\n      if (hash) {\n        if (hashElement) {\n          hashElement.scrollIntoView();\n        }\n      } else {\n        document?.querySelector('header')?.scrollIntoView();\n      }\n    }, [path, hash, hashElement, isStyleLoading]);\n\n    const handleAppend = useCallback(\n      (newShadowRoot: ShadowRoot) => {\n        setShadowRoot(newShadowRoot);\n        if (onReady instanceof Function) {\n          onReady();\n        }\n      },\n      [setShadowRoot, onReady],\n    );\n\n    // No entity metadata = 404. Don't render content at all.\n    if (entityMetadataLoading === false && !entityMetadata)\n      return <ErrorPage status=\"404\" statusMessage=\"PAGE NOT FOUND\" />;\n\n    // Do not return content until dom is ready; instead, render a state\n    // indicator, which handles progress and content errors on our behalf.\n    if (!dom) {\n      return (\n        <Content>\n          <Grid container>\n            <Grid xs={12} item>\n              <TechDocsStateIndicator />\n            </Grid>\n          </Grid>\n        </Content>\n      );\n    }\n\n    return (\n      <Content>\n        <Grid container>\n          <Grid xs={12} item>\n            <TechDocsStateIndicator />\n          </Grid>\n          {withSearch && (\n            <Grid className={classes.search} xs=\"auto\" item>\n              <TechDocsSearch\n                entityId={entityRef}\n                entityTitle={entityMetadata?.metadata?.title}\n              />\n            </Grid>\n          )}\n          <Grid xs={12} item>\n            {/* Centers the styles loaded event to avoid having multiple locations setting the opacity style in Shadow Dom causing the screen to flash multiple times */}\n            <TechDocsShadowDom element={dom} onAppend={handleAppend}>\n              <TechDocsReaderPageContentAddons />\n            </TechDocsShadowDom>\n          </Grid>\n        </Grid>\n      </Content>\n    );\n  },\n);\n\n/**\n * Props for {@link Reader}\n *\n * @public\n * @deprecated use `TechDocsReaderPageContentProps` instead.\n */\nexport type ReaderProps = TechDocsReaderPageContentProps;\n\n/**\n * Component responsible for rendering TechDocs documentation\n * @public\n * @deprecated use `TechDocsReaderPageContent` component instead.\n */\nexport const Reader = TechDocsReaderPageContent;\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren, useEffect } from 'react';\nimport Helmet from 'react-helmet';\n\nimport { Grid } from '@material-ui/core';\nimport { Skeleton } from '@material-ui/lab';\nimport { useTheme } from '@material-ui/core/styles';\nimport CodeIcon from '@material-ui/icons/Code';\n\nimport {\n  TechDocsAddonLocations as locations,\n  useTechDocsAddons,\n  useTechDocsReaderPage,\n  TechDocsEntityMetadata,\n  TechDocsMetadata,\n} from '@backstage/plugin-techdocs-react';\nimport {\n  EntityRefLink,\n  EntityRefLinks,\n  getEntityRelations,\n} from '@backstage/plugin-catalog-react';\nimport { RELATION_OWNED_BY, CompoundEntityRef } from '@backstage/catalog-model';\nimport { Header, HeaderLabel } from '@backstage/core-components';\nimport { useRouteRef, configApiRef, useApi } from '@backstage/core-plugin-api';\n\nimport { capitalize } from 'lodash';\n\nimport { rootRouteRef } from '../../../routes';\n\nconst skeleton = <Skeleton animation=\"wave\" variant=\"text\" height={40} />;\n\n/**\n * Props for {@link TechDocsReaderPageHeader}\n *\n * @public\n * @deprecated No need to pass down properties anymore. The component consumes data from `TechDocsReaderPageContext` instead. Use the {@link @backstage/plugin-techdocs-react#useTechDocsReaderPage} hook for custom header.\n */\nexport type TechDocsReaderPageHeaderProps = PropsWithChildren<{\n  entityRef?: CompoundEntityRef;\n  entityMetadata?: TechDocsEntityMetadata;\n  techDocsMetadata?: TechDocsMetadata;\n}>;\n\n/**\n * Renders the reader page header.\n * This component does not accept props, please use\n * the Tech Docs add-ons to customize it\n * @public\n */\nexport const TechDocsReaderPageHeader = (\n  props: TechDocsReaderPageHeaderProps,\n) => {\n  const {\n    palette: {\n      common: { white },\n    },\n  } = useTheme();\n  const { children } = props;\n  const addons = useTechDocsAddons();\n  const configApi = useApi(configApiRef);\n\n  const {\n    title,\n    setTitle,\n    subtitle,\n    setSubtitle,\n    entityRef,\n    metadata: { value: metadata, loading: metadataLoading },\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading },\n  } = useTechDocsReaderPage();\n\n  useEffect(() => {\n    if (!metadata) return;\n    setTitle(metadata.site_name);\n    setSubtitle(() => {\n      let { site_description } = metadata;\n      if (!site_description || site_description === 'None') {\n        site_description = '';\n      }\n      return site_description;\n    });\n  }, [metadata, setTitle, setSubtitle]);\n\n  const appTitle = configApi.getOptional('app.title') || 'Backstage';\n  const tabTitle = [title, subtitle, appTitle].filter(Boolean).join(' | ');\n\n  const { locationMetadata, spec } = entityMetadata || {};\n  const lifecycle = spec?.lifecycle;\n\n  const ownedByRelations = entityMetadata\n    ? getEntityRelations(entityMetadata, RELATION_OWNED_BY)\n    : [];\n\n  const docsRootLink = useRouteRef(rootRouteRef)();\n\n  const labels = (\n    <>\n      <HeaderLabel\n        label={capitalize(entityMetadata?.kind || 'entity')}\n        value={\n          <EntityRefLink\n            color=\"inherit\"\n            entityRef={entityRef}\n            title={entityMetadata?.metadata.title}\n            defaultKind=\"Component\"\n          />\n        }\n      />\n      {ownedByRelations.length > 0 && (\n        <HeaderLabel\n          label=\"Owner\"\n          value={\n            <EntityRefLinks\n              color=\"inherit\"\n              entityRefs={ownedByRelations}\n              defaultKind=\"group\"\n            />\n          }\n        />\n      )}\n      {lifecycle ? (\n        <HeaderLabel label=\"Lifecycle\" value={String(lifecycle)} />\n      ) : null}\n      {locationMetadata &&\n      locationMetadata.type !== 'dir' &&\n      locationMetadata.type !== 'file' ? (\n        <HeaderLabel\n          label=\"\"\n          value={\n            <Grid\n              container\n              direction=\"column\"\n              alignItems=\"center\"\n              style={{ color: white }}\n            >\n              <Grid style={{ padding: 0 }} item>\n                <CodeIcon style={{ marginTop: '-25px' }} />\n              </Grid>\n              <Grid style={{ padding: 0 }} item>\n                Source\n              </Grid>\n            </Grid>\n          }\n          url={locationMetadata.target}\n        />\n      ) : null}\n    </>\n  );\n\n  // If there is no entity or techdocs metadata, there's no reason to show the\n  // header (hides the header on 404 error pages).\n  const noEntMetadata = !entityMetadataLoading && entityMetadata === undefined;\n  const noTdMetadata = !metadataLoading && metadata === undefined;\n  if (noEntMetadata || noTdMetadata) return null;\n\n  return (\n    <Header\n      type=\"Documentation\"\n      typeLink={docsRootLink}\n      title={title || skeleton}\n      subtitle={subtitle === '' ? undefined : subtitle || skeleton}\n    >\n      <Helmet titleTemplate=\"%s\">\n        <title>{tabTitle}</title>\n      </Helmet>\n      {labels}\n      {children}\n      {addons.renderComponentsByLocation(locations.Header)}\n    </Header>\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { MouseEvent, useState, useCallback } from 'react';\n\nimport {\n  Box,\n  makeStyles,\n  Toolbar,\n  ToolbarProps,\n  Menu,\n  Tooltip,\n  IconButton,\n} from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nimport {\n  TechDocsAddonLocations as locations,\n  useTechDocsAddons,\n  useTechDocsReaderPage,\n} from '@backstage/plugin-techdocs-react';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    gridArea: 'pageSubheader',\n    flexDirection: 'column',\n    minHeight: 'auto',\n    padding: theme.spacing(3, 3, 0),\n    '@media print': {\n      display: 'none',\n    },\n  },\n}));\n\n/**\n * Renders the reader page subheader.\n * Please use the Tech Docs add-ons to customize it\n * @public\n */\nexport const TechDocsReaderPageSubheader = (props: {\n  toolbarProps?: ToolbarProps;\n}) => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\n  const handleClick = useCallback((event: MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  }, []);\n\n  const handleClose = useCallback(() => {\n    setAnchorEl(null);\n  }, []);\n\n  const {\n    entityMetadata: { value: entityMetadata, loading: entityMetadataLoading },\n  } = useTechDocsReaderPage();\n\n  const addons = useTechDocsAddons();\n\n  const subheaderAddons = addons.renderComponentsByLocation(\n    locations.Subheader,\n  );\n\n  const settingsAddons = addons.renderComponentsByLocation(locations.Settings);\n\n  if (!subheaderAddons && !settingsAddons) return null;\n\n  // No entity metadata = 404. Don't render subheader on 404.\n  if (entityMetadataLoading === false && !entityMetadata) return null;\n\n  return (\n    <Toolbar classes={classes} {...props.toolbarProps}>\n      <Box\n        display=\"flex\"\n        justifyContent=\"flex-end\"\n        width=\"100%\"\n        flexWrap=\"wrap\"\n      >\n        {subheaderAddons}\n        {settingsAddons ? (\n          <>\n            <Tooltip title=\"Settings\">\n              <IconButton\n                aria-controls=\"tech-docs-reader-page-settings\"\n                aria-haspopup=\"true\"\n                onClick={handleClick}\n              >\n                <SettingsIcon />\n              </IconButton>\n            </Tooltip>\n            <Menu\n              id=\"tech-docs-reader-page-settings\"\n              getContentAnchorEl={null}\n              anchorEl={anchorEl}\n              anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\n              open={Boolean(anchorEl)}\n              onClose={handleClose}\n              keepMounted\n            >\n              <div>{settingsAddons}</div>\n            </Menu>\n          </>\n        ) : null}\n      </Box>\n    </Toolbar>\n  );\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactNode, Children, ReactElement } from 'react';\nimport { useOutlet } from 'react-router-dom';\n\nimport { Page } from '@backstage/core-components';\nimport { CompoundEntityRef } from '@backstage/catalog-model';\nimport {\n  TECHDOCS_ADDONS_WRAPPER_KEY,\n  TECHDOCS_ADDONS_KEY,\n  TechDocsReaderPageProvider,\n} from '@backstage/plugin-techdocs-react';\n\nimport { TechDocsReaderPageRenderFunction } from '../../../types';\n\nimport { TechDocsReaderPageContent } from '../TechDocsReaderPageContent';\nimport { TechDocsReaderPageHeader } from '../TechDocsReaderPageHeader';\nimport { TechDocsReaderPageSubheader } from '../TechDocsReaderPageSubheader';\nimport { rootDocsRouteRef } from '../../../routes';\nimport {\n  getComponentData,\n  useRouteRefParams,\n} from '@backstage/core-plugin-api';\n\n/* An explanation for the multiple ways of customizing the TechDocs reader page\n\nPlease refer to this page on the microsite for the latest recommended approach:\nhttps://backstage.io/docs/features/techdocs/how-to-guides#how-to-customize-the-techdocs-reader-page\n\nThe <TechDocsReaderPage> component is responsible for rendering the <TechDocsReaderPageProvider> and\nits contained version of a <Page>, which in turn renders the <TechDocsReaderPageContent>.\n\nHistorically, there have been different approaches on how this <Page> can be customized, and how the\n<TechDocsReaderPageContent> inside could be exchanged for a custom implementation (which was not\npossible before). Also, the current implementation supports every scenario to avoid breaking default\nconfigurations of TechDocs.\n\nIn particular, there are 4 different TechDocs page configurations:\n\nCONFIGURATION 1: <TechDocsReaderPage> only, no children\n\n<Route path=\"/docs/:namespace/:kind/:name/*\" element={<TechDocsReaderPage />} >\n\nThis is the simplest way to use TechDocs. Only a full page is passed, assuming that it comes with\nits content inside. Since we allowed customizing it, we started providing <TechDocsReaderLayout> as\na default implementation (which contains <TechDocsReaderPageContent>).\n\nCONFIGURATION 2 (not advised): <TechDocsReaderPage> with element children\n\n<Route\n  path=\"/docs/:namespace/:kind/:name/*\"\n  element={\n    <TechDocsReaderPage>\n      {techdocsPage}\n    </TechDocsReaderPage>\n  }\n/>\n\nPreviously, there were two ways of passing children to <TechDocsReaderPage>: either as elements (as\nshown above), or as a render function (described below in CONFIGURATION 3). The \"techdocsPage\" is\nlocated in packages/app/src/components/techdocs and is the default implementation of the content\ninside.\n\nCONFIGURATION 3 (not advised): <TechDocsReaderPage> with render function as child\n\n<Route\n  path=\"/docs/:namespace/:kind/:name/*\"\n  element={\n    <TechDocsReaderPage>\n      {({ metadata, entityMetadata, onReady }) => (\n        techdocsPage\n      )}\n    </TechDocsReaderPage>\n  }\n/>\n\nSimilar to CONFIGURATION 2, the direct children will be passed to the <TechDocsReaderPage> but in\nthis case interpreted as render prop.\n\nCONFIGURATION 4: <TechDocsReaderPage> and provided content in <Route>\n\n<Route\n  path=\"/docs/:namespace/:kind/:name/*\"\n  element={<TechDocsReaderPage />}\n>\n  {techDocsPage}\n  <TechDocsAddons>\n    <ExpandableNavigation />\n    <ReportIssue />\n    <TextSize />\n    <LightBox />\n  </TechDocsAddons>\n</Route>\n\nThis is the current state in packages/app/src/App.tsx and moved the location of children from inside\nthe element prop in the <Route> to the children of the <Route>. Then, in <TechDocsReaderPage> they\nare retrieved using the useOutlet hook from React Router.\n\nNOTE: Render functions are no longer supported in this approach.\n*/\n\n/**\n * Props for {@link TechDocsReaderLayout}\n * @public\n */\nexport type TechDocsReaderLayoutProps = {\n  /**\n   * Show or hide the header, defaults to true.\n   */\n  withHeader?: boolean;\n  /**\n   * Show or hide the content search bar, defaults to true.\n   */\n  withSearch?: boolean;\n};\n\n/**\n * Default TechDocs reader page structure composed with a header and content\n * @public\n */\nexport const TechDocsReaderLayout = (props: TechDocsReaderLayoutProps) => {\n  const { withSearch, withHeader = true } = props;\n  return (\n    <Page themeId=\"documentation\">\n      {withHeader && <TechDocsReaderPageHeader />}\n      <TechDocsReaderPageSubheader />\n      <TechDocsReaderPageContent withSearch={withSearch} />\n    </Page>\n  );\n};\n\n/**\n * @public\n */\nexport type TechDocsReaderPageProps = {\n  entityRef?: CompoundEntityRef;\n  children?: TechDocsReaderPageRenderFunction | ReactNode;\n};\n\n/**\n * An addon-aware implementation of the TechDocsReaderPage.\n *\n * @public\n */\nexport const TechDocsReaderPage = (props: TechDocsReaderPageProps) => {\n  const { kind, name, namespace } = useRouteRefParams(rootDocsRouteRef);\n  const { children, entityRef = { kind, name, namespace } } = props;\n\n  const outlet = useOutlet();\n\n  if (!children) {\n    const childrenList = outlet ? Children.toArray(outlet.props.children) : [];\n\n    const grandChildren = childrenList.flatMap<ReactElement>(\n      child => (child as ReactElement)?.props?.children ?? [],\n    );\n\n    const page: React.ReactNode = grandChildren.find(\n      grandChild =>\n        !getComponentData(grandChild, TECHDOCS_ADDONS_WRAPPER_KEY) &&\n        !getComponentData(grandChild, TECHDOCS_ADDONS_KEY),\n    );\n\n    // As explained above, \"page\" is configuration 4 and <TechDocsReaderLayout> is 1\n    return (\n      <TechDocsReaderPageProvider entityRef={entityRef}>\n        {(page as JSX.Element) || <TechDocsReaderLayout />}\n      </TechDocsReaderPageProvider>\n    );\n  }\n\n  // As explained above, a render function is configuration 3 and React element is 2\n  return (\n    <TechDocsReaderPageProvider entityRef={entityRef}>\n      {({ metadata, entityMetadata, onReady }) => (\n        <div className=\"techdocs-reader-page\">\n          <Page themeId=\"documentation\">\n            {children instanceof Function\n              ? children({\n                  entityRef,\n                  techdocsMetadataValue: metadata.value,\n                  entityMetadataValue: entityMetadata.value,\n                  onReady,\n                })\n              : children}\n          </Page>\n        </div>\n      )}\n    </TechDocsReaderPageProvider>\n  );\n};\n"],"names":["useStyles","isSafe","copyToClipboard","IconButton","transformer","locations","_a","useTheme"],"mappings":"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"}
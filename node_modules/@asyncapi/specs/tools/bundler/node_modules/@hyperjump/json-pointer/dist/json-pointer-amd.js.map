{"version":3,"file":"json-pointer-amd.js","sources":["../node_modules/just-curry-it/index.js","../lib/index.js"],"sourcesContent":["module.exports = curry;\n\n/*\n  function add(a, b, c) {\n    return a + b + c;\n  }\n  curry(add)(1)(2)(3); // 6\n  curry(add)(1)(2)(2); // 5\n  curry(add)(2)(4, 3); // 9\n\n  function add(...args) {\n    return args.reduce((sum, n) => sum + n, 0)\n  }\n  var curryAdd4 = curry(add, 4)\n  curryAdd4(1)(2, 3)(4); // 10\n\n  function converter(ratio, input) {\n    return (input*ratio).toFixed(1);\n  }\n  const curriedConverter = curry(converter)\n  const milesToKm = curriedConverter(1.62);\n  milesToKm(35); // 56.7\n  milesToKm(10); // 16.2\n*/\n\nfunction curry(fn, arity) {\n  return function curried() {\n    if (arity == null) {\n      arity = fn.length;\n    }\n    var args = [].slice.call(arguments);\n    if (args.length >= arity) {\n      return fn.apply(this, args);\n    } else {\n      return function() {\n        return curried.apply(this, args.concat([].slice.call(arguments)));\n      };\n    }\n  };\n}\n","const curry = require(\"just-curry-it\");\n\n\nconst nil = \"\";\n\nconst compile = (pointer) => {\n  if (pointer.length > 0 && pointer[0] !== \"/\") {\n    throw Error(\"Invalid JSON Pointer\");\n  }\n\n  return pointer.split(\"/\").slice(1).map(unescape);\n};\n\nconst get = (pointer, value = undefined) => {\n  const ptr = compile(pointer);\n\n  const fn = (value) => ptr.reduce(([value, pointer], segment) => {\n    return [applySegment(value, segment, pointer), append(segment, pointer)];\n  }, [value, \"\"])[0];\n\n  return value === undefined ? fn : fn(value);\n};\n\nconst set = (pointer, subject = undefined, value = undefined) => {\n  const ptr = compile(pointer);\n  const fn = curry((subject, value) => _set(ptr, subject, value, nil));\n  return subject === undefined ? fn : fn(subject, value);\n};\n\nconst _set = (pointer, subject, value, cursor) => {\n  if (pointer.length === 0) {\n    return value;\n  } else if (pointer.length > 1) {\n    const segment = pointer.shift();\n    return { ...subject, [segment]: _set(pointer, applySegment(subject, segment, cursor), value, append(segment, cursor)) };\n  } else if (Array.isArray(subject)) {\n    const clonedSubject = [...subject];\n    const segment = computeSegment(subject, pointer[0]);\n    clonedSubject[segment] = value;\n    return clonedSubject;\n  } else if (typeof subject === \"object\" && subject !== null) {\n    return { ...subject, [pointer[0]]: value };\n  } else {\n    return applySegment(subject, pointer[0], cursor);\n  }\n};\n\nconst assign = (pointer, subject = undefined, value = undefined) => {\n  const ptr = compile(pointer);\n  const fn = curry((subject, value) => _assign(ptr, subject, value, nil));\n  return subject === undefined ? fn : fn(subject, value);\n};\n\nconst _assign = (pointer, subject, value, cursor) => {\n  if (pointer.length === 0) {\n    return;\n  } else if (pointer.length === 1 && !isScalar(subject)) {\n    const segment = computeSegment(subject, pointer[0]);\n    subject[segment] = value;\n  } else {\n    const segment = pointer.shift();\n    _assign(pointer, applySegment(subject, segment, cursor), value, append(segment, cursor));\n  }\n};\n\nconst unset = (pointer, subject = undefined) => {\n  const ptr = compile(pointer);\n  const fn = (subject) => _unset(ptr, subject, nil);\n  return subject === undefined ? fn : fn(subject);\n};\n\nconst _unset = (pointer, subject, cursor) => {\n  if (pointer.length == 0) {\n    return undefined;\n  } else if (pointer.length > 1) {\n    const segment = pointer.shift();\n    const value = applySegment(subject, segment, cursor);\n    return { ...subject, [segment]: _unset(pointer, value, append(segment, cursor)) };\n  } else if (Array.isArray(subject)) {\n    return subject.filter((_, ndx) => ndx != pointer[0]);\n  } else if (typeof subject === \"object\" && subject !== null) {\n    // eslint-disable-next-line no-unused-vars\n    const { [pointer[0]]: _, ...result } = subject;\n    return result;\n  } else {\n    return applySegment(subject, pointer[0], cursor);\n  }\n};\n\nconst remove = (pointer, subject = undefined) => {\n  const ptr = compile(pointer);\n  const fn = (subject) => _remove(ptr, subject, nil);\n  return subject === undefined ? fn : fn(subject);\n};\n\nconst _remove = (pointer, subject, cursor) => {\n  if (pointer.length === 0) {\n    return;\n  } else if (pointer.length > 1) {\n    const segment = pointer.shift();\n    const value = applySegment(subject, segment, cursor);\n    _remove(pointer, value, append(segment, cursor));\n  } else if (Array.isArray(subject)) {\n    subject.splice(pointer[0], 1);\n  } else if (typeof subject === \"object\" && subject !== null) {\n    delete subject[pointer[0]];\n  } else {\n    applySegment(subject, pointer[0], cursor);\n  }\n};\n\nconst append = curry((segment, pointer) => pointer + \"/\" + escape(segment));\n\nconst escape = (segment) => segment.toString().replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\nconst unescape = (segment) => segment.toString().replace(/~1/g, \"/\").replace(/~0/g, \"~\");\nconst computeSegment = (value, segment) => Array.isArray(value) && segment === \"-\" ? value.length : segment;\n\nconst applySegment = (value, segment, cursor = \"\") => {\n  if (value === undefined) {\n    throw TypeError(`Value at '${cursor}' is undefined and does not have property '${segment}'`);\n  } else if (value === null) {\n    throw TypeError(`Value at '${cursor}' is null and does not have property '${segment}'`);\n  } else if (isScalar(value)) {\n    throw TypeError(`Value at '${cursor}' is a ${typeof value} and does not have property '${segment}'`);\n  } else {\n    const computedSegment = computeSegment(value, segment);\n    return value[computedSegment];\n  }\n};\n\nconst isScalar = (value) => value === null || typeof value !== \"object\";\n\nmodule.exports = { nil, append, get, set, assign, unset, remove };\n"],"names":["curry","require$$0"],"mappings":"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"}
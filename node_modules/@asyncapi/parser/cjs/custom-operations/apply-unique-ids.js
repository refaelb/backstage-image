"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.applyUniqueIds = void 0;
const constants_1 = require("../constants");
/**
 * This function applies unique ids for objects whose key's function as ids, ensuring that the key is part of the value.
 *
 * For v3; Apply unique ids to channel's, and message's
 */
function applyUniqueIds(structure) {
    const asyncapiVersion = structure.asyncapi.charAt(0);
    switch (asyncapiVersion) {
        case '3':
            if (structure.channels) {
                for (const [channelId, channel] of Object.entries(structure.channels)) {
                    channel[constants_1.xParserObjectUniqueId] = channelId;
                    if (channel.messages) {
                        for (const [messageId, message] of Object.entries(channel.messages)) {
                            message[constants_1.xParserObjectUniqueId] = messageId;
                        }
                    }
                }
            }
            break;
    }
}
exports.applyUniqueIds = applyUniqueIds;

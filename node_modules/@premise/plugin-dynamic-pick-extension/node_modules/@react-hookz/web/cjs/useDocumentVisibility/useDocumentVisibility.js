"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useDocumentVisibility = void 0;
var react_1 = require("react");
var useEventListener_1 = require("../useEventListener/useEventListener");
var useMountEffect_1 = require("../useMountEffect/useMountEffect");
var const_1 = require("../util/const");
var isDocumentVisible = function () { return document.visibilityState === 'visible'; };
/**
 * Returns a boolean indicating whether the document is visible or not.
 *
 * @param initializeWithValue Whether to initialize state with the cookie value or `undefined`.
 *        _We suggest setting this to `false` during SSR._
 */
function useDocumentVisibility(initializeWithValue) {
    if (initializeWithValue === void 0) { initializeWithValue = true; }
    var _a = (0, react_1.useState)(const_1.isBrowser && initializeWithValue ? isDocumentVisible() : undefined), isVisible = _a[0], setIsVisible = _a[1];
    (0, useMountEffect_1.useMountEffect)(function () {
        if (!initializeWithValue) {
            setIsVisible(isDocumentVisible());
        }
    });
    (0, useEventListener_1.useEventListener)(const_1.isBrowser ? document : null, 'visibilitychange', function () {
        return setIsVisible(isDocumentVisible());
    });
    return isVisible;
}
exports.useDocumentVisibility = useDocumentVisibility;

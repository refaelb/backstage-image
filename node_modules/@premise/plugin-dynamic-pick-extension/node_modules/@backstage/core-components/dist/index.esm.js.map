{"version":3,"file":"index.esm.js","sources":["../src/components/AlertDisplay/AlertDisplay.tsx","../src/components/Avatar/utils.ts","../src/components/Avatar/Avatar.tsx","../src/components/Link/Link.tsx","../src/components/LinkButton/LinkButton.tsx","../src/components/CopyTextButton/CopyTextButton.tsx","../src/components/CodeSnippet/CodeSnippet.tsx","../src/components/CreateButton/CreateButton.tsx","../src/components/DependencyGraph/types.ts","../src/components/DependencyGraph/DefaultNode.tsx","../src/components/DependencyGraph/constants.ts","../src/components/DependencyGraph/Node.tsx","../src/components/DependencyGraph/DefaultLabel.tsx","../src/components/DependencyGraph/Edge.tsx","../src/components/DependencyGraph/DependencyGraph.tsx","../src/components/DismissableBanner/DismissableBanner.tsx","../src/components/EmptyState/EmptyStateImage.tsx","../src/components/EmptyState/EmptyState.tsx","../src/components/EmptyState/MissingAnnotationEmptyState.tsx","../src/components/WarningPanel/WarningPanel.tsx","../src/components/ErrorPanel/ErrorPanel.tsx","../src/components/ResponseErrorPanel/ResponseErrorPanel.tsx","../src/components/FeatureDiscovery/lib/usePortal.ts","../src/components/FeatureDiscovery/lib/useShowCallout.ts","../src/components/FeatureDiscovery/FeatureCalloutCircular.tsx","../src/components/HeaderIconLinkRow/IconLinkVertical.tsx","../src/components/HeaderIconLinkRow/HeaderIconLinkRow.tsx","../src/components/HorizontalScrollGrid/HorizontalScrollGrid.tsx","../src/components/Lifecycle/Lifecycle.tsx","../src/components/LogViewer/LogViewer.tsx","../src/components/MarkdownContent/MarkdownContent.tsx","../src/components/OAuthRequestDialog/LoginRequestListItem.tsx","../src/components/OAuthRequestDialog/OAuthRequestDialog.tsx","../src/components/OverflowTooltip/OverflowTooltip.tsx","../src/components/Progress/Progress.tsx","../src/layout/BottomLink/BottomLink.tsx","../src/layout/ErrorBoundary/ErrorBoundary.tsx","../src/layout/InfoCard/InfoCard.tsx","../src/components/ProgressBars/Gauge.tsx","../src/components/ProgressBars/GaugeCard.tsx","../src/components/ProgressBars/LinearGauge.tsx","../src/components/Select/static/ClosedDropdown.tsx","../src/components/Select/static/OpenedDropdown.tsx","../src/components/Select/Select.tsx","../src/components/SimpleStepper/SimpleStepper.tsx","../src/components/SimpleStepper/SimpleStepperFooter.tsx","../src/components/SimpleStepper/SimpleStepperStep.tsx","../src/components/Status/Status.tsx","../src/components/StructuredMetadataTable/MetadataTable.tsx","../src/components/StructuredMetadataTable/StructuredMetadataTable.tsx","../src/hooks/useQueryParamState.ts","../src/hooks/useSupportConfig.ts","../src/icons/icons.tsx","../src/components/SupportButton/SupportButton.tsx","../src/layout/Sidebar/config.ts","../src/layout/Sidebar/SidebarOpenStateContext.tsx","../src/layout/Sidebar/SidebarPinStateContext.tsx","../src/layout/Sidebar/SidebarGroup.tsx","../src/layout/Sidebar/MobileSidebar.tsx","../src/layout/Sidebar/localStorage.ts","../src/layout/Sidebar/Page.tsx","../src/layout/Sidebar/Bar.tsx","../src/layout/Sidebar/utils.ts","../src/layout/Sidebar/SidebarSubmenuItem.tsx","../src/layout/Sidebar/SidebarSubmenu.tsx","../src/layout/Sidebar/icons/DoubleArrowLeft.tsx","../src/layout/Sidebar/icons/DoubleArrowRight.tsx","../src/layout/Sidebar/Items.tsx","../src/layout/Sidebar/Intro.tsx","../src/layout/Content/Content.tsx","../src/layout/HeaderTabs/HeaderTabs.tsx","../src/components/TabbedLayout/RoutedTabs.tsx","../src/components/TabbedLayout/TabbedLayout.tsx","../src/components/Table/SubvalueCell.tsx","../src/components/Table/Filters.tsx","../src/components/Table/Table.tsx","../src/components/Tabs/utils.ts","../src/components/Tabs/TabPanel.tsx","../src/components/Tabs/TabIcon.tsx","../src/components/Tabs/Tab.tsx","../src/components/Tabs/TabBar.tsx","../src/components/Tabs/Tabs.tsx","../src/components/TrendLine/TrendLine.tsx","../src/layout/ContentHeader/ContentHeader.tsx","../src/layout/ErrorPage/MicDrop.tsx","../src/layout/ErrorPage/ErrorPage.tsx","../src/layout/Breadcrumbs/Breadcrumbs.tsx","../src/layout/Header/Header.tsx","../src/layout/HeaderActionMenu/HeaderActionMenu.tsx","../src/layout/HeaderLabel/HeaderLabel.tsx","../src/layout/ItemCard/ItemCardHeader.tsx","../src/layout/ItemCard/ItemCard.tsx","../src/layout/ItemCard/ItemCardGrid.tsx","../src/layout/Page/Page.tsx","../src/layout/Page/PageWithHeader.tsx","../src/layout/ProxiedSignInPage/types.ts","../src/layout/ProxiedSignInPage/ProxiedSignInIdentity.ts","../src/layout/ProxiedSignInPage/ProxiedSignInPage.tsx","../src/layout/SignInPage/GuestUserIdentity.ts","../src/layout/SignInPage/LegacyUserIdentity.ts","../src/layout/SignInPage/UserIdentity.ts","../src/layout/SignInPage/styles.tsx","../src/layout/SignInPage/commonProvider.tsx","../src/layout/SignInPage/guestProvider.tsx","../src/layout/SignInPage/customProvider.tsx","../src/layout/SignInPage/IdentityApiSignOutProxy.ts","../src/layout/SignInPage/providers.tsx","../src/layout/SignInPage/SignInPage.tsx","../src/layout/TabbedCard/TabbedCard.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { alertApiRef, AlertMessage, useApi } from '@backstage/core-plugin-api';\nimport IconButton from '@material-ui/core/IconButton';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { Alert } from '@material-ui/lab';\nimport pluralize from 'pluralize';\nimport React, { useEffect, useState } from 'react';\n\n/**\n * Properties for {@link AlertDisplay}\n *\n * @public\n */\nexport type AlertDisplayProps = {\n  anchorOrigin?: {\n    vertical: 'top' | 'bottom';\n    horizontal: 'left' | 'center' | 'right';\n  };\n  transientTimeoutMs?: number;\n};\n\n/**\n * Displays alerts from {@link @backstage/core-plugin-api#AlertApi}\n *\n * @public\n * @remarks\n *\n * Shown as SnackBar at the center top of the page by default. Configurable with props.\n *\n * @param anchorOrigin - The `vertical` property will set the vertical orientation of where the AlertDisplay will be located\n * and the `horizontal` property will set the horizontal orientation of where the AlertDisplay will be located\n * @param transientTimeoutMs - Number of milliseconds a transient alert will stay open for. Default value is 5000\n *\n * @example\n * Here's some examples:\n * ```\n * // This example shows the default usage, the SnackBar will show up at the top in the center and any transient messages will stay open for 5000ms\n * <AlertDisplay />\n *\n * // With this example the SnackBar will show up in the bottom right hand corner and any transient messages will stay open for 2500ms\n * <AlertDisplay transientTimeoutMs={2500} anchorOrigin={{vertical: 'bottom', horizontal: 'right'}}/>\n *\n * // If you want to just set the time a transientTimeoutMs, you can do that like this:\n * <AlertDisplay transientTimeoutMs={10000} />\n * ```\n */\nexport function AlertDisplay(props: AlertDisplayProps) {\n  const [messages, setMessages] = useState<Array<AlertMessage>>([]);\n  const alertApi = useApi(alertApiRef);\n\n  const {\n    anchorOrigin = { vertical: 'top', horizontal: 'center' },\n    transientTimeoutMs,\n  } = props;\n  const timeoutMs = transientTimeoutMs ?? 5000;\n\n  useEffect(() => {\n    const subscription = alertApi\n      .alert$()\n      .subscribe(message => setMessages(msgs => msgs.concat(message)));\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [alertApi]);\n\n  const [firstMessage] = messages;\n\n  useEffect(() => {\n    if (firstMessage && firstMessage.display === 'transient') {\n      const timeout = setTimeout(() => {\n        setMessages(msgs => {\n          const newMsgs = msgs.filter(msg => msg !== firstMessage);\n          return newMsgs.length === msgs.length ? msgs : newMsgs;\n        });\n      }, timeoutMs);\n      return () => clearTimeout(timeout);\n    }\n    return undefined;\n  }, [firstMessage, timeoutMs]);\n\n  if (messages.length === 0) {\n    return null;\n  }\n\n  const handleClose = () => {\n    setMessages(msgs => msgs.filter(msg => msg !== firstMessage));\n  };\n\n  return (\n    <Snackbar open anchorOrigin={anchorOrigin}>\n      <Alert\n        action={\n          <IconButton\n            color=\"inherit\"\n            size=\"small\"\n            onClick={handleClose}\n            data-testid=\"error-button-close\"\n          >\n            <CloseIcon />\n          </IconButton>\n        }\n        severity={firstMessage.severity}\n      >\n        <Typography component=\"span\">\n          {String(firstMessage.message)}\n          {messages.length > 1 && (\n            <em>{` (${messages.length - 1} older ${pluralize(\n              'message',\n              messages.length - 1,\n            )})`}</em>\n          )}\n        </Typography>\n      </Alert>\n    </Snackbar>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function stringToColor(str: string) {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    hash = str.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let color = '#';\n  for (let i = 0; i < 3; i++) {\n    const value = (hash >> (i * 8)) & 0xff;\n    color += `00${value.toString(16)}`.slice(-2);\n  }\n  return color;\n}\n\nexport function extractInitials(value: string) {\n  return value.match(/\\b\\w/g)?.join('').slice(0, 2);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport MaterialAvatar from '@material-ui/core/Avatar';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, { CSSProperties } from 'react';\n\nimport { extractInitials, stringToColor } from './utils';\n\n/** @public */\nexport type AvatarClassKey = 'avatar';\n\nconst useStyles = makeStyles(\n  (theme: Theme) => ({\n    avatar: {\n      width: '4rem',\n      height: '4rem',\n      color: theme.palette.common.white,\n    },\n    avatarText: {\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: '1px',\n      textTransform: 'uppercase',\n    },\n  }),\n  { name: 'BackstageAvatar' },\n);\n\n/**\n * Properties for {@link Avatar}.\n *\n * @public\n */\nexport interface AvatarProps {\n  /**\n   * A display name, which will be used to generate initials as a fallback in case a picture is not provided.\n   */\n  displayName?: string;\n  /**\n   * URL to avatar image source\n   */\n  picture?: string;\n  /**\n   * Custom styles applied to avatar\n   */\n  customStyles?: CSSProperties;\n}\n\n/**\n *  Component rendering an Avatar\n *\n * @public\n * @remarks\n *\n * Based on https://v4.mui.com/components/avatars/#avatar with some styling adjustment and two-letter initials\n */\nexport function Avatar(props: AvatarProps) {\n  const { displayName, picture, customStyles } = props;\n  const classes = useStyles();\n  let styles = { ...customStyles };\n  const fontStyles = {\n    fontFamily: styles.fontFamily,\n    fontSize: styles.fontSize,\n    fontWeight: styles.fontWeight,\n  };\n  // We only calculate the background color if there's not an avatar\n  // picture. If there is a picture, it might have a transparent\n  // background and we don't know whether the calculated background\n  // color will clash.\n  if (!picture) {\n    styles = {\n      backgroundColor: stringToColor(displayName || ''),\n      ...customStyles,\n    };\n  }\n  return (\n    <MaterialAvatar\n      alt={displayName}\n      src={picture}\n      className={classes.avatar}\n      style={styles}\n    >\n      {displayName && (\n        <Typography\n          variant=\"h6\"\n          component=\"span\"\n          className={classes.avatarText}\n          style={fontStyles}\n        >\n          {extractInitials(displayName)}\n        </Typography>\n      )}\n    </MaterialAvatar>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { configApiRef, useAnalytics, useApi } from '@backstage/core-plugin-api';\n// eslint-disable-next-line no-restricted-imports\nimport MaterialLink, {\n  LinkProps as MaterialLinkProps,\n} from '@material-ui/core/Link';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport classnames from 'classnames';\nimport { trimEnd } from 'lodash';\nimport React, { ElementType } from 'react';\nimport {\n  createRoutesFromChildren,\n  Link as RouterLink,\n  LinkProps as RouterLinkProps,\n  Route,\n} from 'react-router-dom';\n\nexport function isReactRouterBeta(): boolean {\n  const [obj] = createRoutesFromChildren(<Route index element={<div />} />);\n  return !obj.index;\n}\n\nconst useStyles = makeStyles(\n  {\n    visuallyHidden: {\n      clip: 'rect(0 0 0 0)',\n      clipPath: 'inset(50%)',\n      overflow: 'hidden',\n      position: 'absolute',\n      whiteSpace: 'nowrap',\n      height: 1,\n      width: 1,\n    },\n    externalLink: {\n      position: 'relative',\n    },\n  },\n  { name: 'Link' },\n);\n\nexport const isExternalUri = (uri: string) => /^([a-z+.-]+):/.test(uri);\n\n// See https://github.com/facebook/react/blob/f0cf832e1d0c8544c36aa8b310960885a11a847c/packages/react-dom-bindings/src/shared/sanitizeURL.js\nconst scriptProtocolPattern =\n  // eslint-disable-next-line no-control-regex\n  /^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*\\:/i;\n\n// We install this globally in order to prevent javascript: URL XSS attacks via window.open\nconst originalWindowOpen = window.open as typeof window.open & {\n  __backstage?: true;\n};\nif (originalWindowOpen && !originalWindowOpen.__backstage) {\n  const newOpen = function open(\n    this: Window,\n    ...args: Parameters<typeof window.open>\n  ) {\n    const url = String(args[0]);\n    if (scriptProtocolPattern.test(url)) {\n      throw new Error(\n        'Rejected window.open() with a javascript: URL as a security precaution',\n      );\n    }\n    return originalWindowOpen.apply(this, args);\n  };\n  newOpen.__backstage = true;\n  window.open = newOpen;\n}\n\nexport type LinkProps = Omit<MaterialLinkProps, 'to'> &\n  Omit<RouterLinkProps, 'to'> & {\n    to: string;\n    component?: ElementType<any>;\n    noTrack?: boolean;\n  };\n\n/**\n * Returns the app base url that could be empty if the Config API is not properly implemented.\n * The only cases there would be no Config API are in tests and in storybook stories, and in those cases, it's unlikely that callers would rely on this subpath behavior.\n */\nconst useBaseUrl = () => {\n  try {\n    const config = useApi(configApiRef);\n    return config.getOptionalString('app.baseUrl');\n  } catch {\n    return undefined;\n  }\n};\n\n/**\n * Get the app base path from the configured app baseUrl.\n * The returned path does not have a trailing slash.\n */\nconst useBasePath = () => {\n  // baseUrl can be specified as just a path\n  const base = 'http://sample.dev';\n  const url = useBaseUrl() ?? '/';\n  const { pathname } = new URL(url, base);\n  return trimEnd(pathname, '/');\n};\n\n/** @deprecated Remove once we no longer support React Router v6 beta */\nexport const useResolvedPath = (uri: LinkProps['to']) => {\n  let resolvedPath = String(uri);\n\n  const basePath = useBasePath();\n  const external = isExternalUri(resolvedPath);\n  const startsWithBasePath = resolvedPath.startsWith(basePath);\n\n  if (!external && !startsWithBasePath) {\n    resolvedPath = basePath.concat(resolvedPath);\n  }\n\n  return resolvedPath;\n};\n\n/**\n * Given a react node, try to retrieve its text content.\n */\nconst getNodeText = (node: React.ReactNode): string => {\n  // If the node is an array of children, recurse and join.\n  if (node instanceof Array) {\n    return node.map(getNodeText).join(' ').trim();\n  }\n\n  // If the node is a react element, recurse on its children.\n  if (typeof node === 'object' && node) {\n    return getNodeText((node as React.ReactElement)?.props?.children);\n  }\n\n  // Base case: the node is just text. Return it.\n  if (['string', 'number'].includes(typeof node)) {\n    return String(node);\n  }\n\n  // Base case: just return an empty string.\n  return '';\n};\n\n/**\n * Thin wrapper on top of material-ui's Link component, which...\n * - Makes the Link use react-router\n * - Captures Link clicks as analytics events.\n */\nexport const Link = React.forwardRef<any, LinkProps>(\n  ({ onClick, noTrack, ...props }, ref) => {\n    const classes = useStyles();\n    const analytics = useAnalytics();\n\n    // Adding the base path to URLs breaks react-router v6 stable, so we only\n    // do it for beta. The react router version won't change at runtime so it is\n    // fine to ignore the rules of hooks.\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const to = isReactRouterBeta() ? useResolvedPath(props.to) : props.to;\n    const linkText = getNodeText(props.children) || to;\n    const external = isExternalUri(to);\n    const newWindow = external && !!/^https?:/.exec(to);\n\n    if (scriptProtocolPattern.test(to)) {\n      throw new Error(\n        'Link component rejected javascript: URL as a security precaution',\n      );\n    }\n\n    const handleClick = (event: React.MouseEvent<any, MouseEvent>) => {\n      onClick?.(event);\n      if (!noTrack) {\n        analytics.captureEvent('click', linkText, { attributes: { to } });\n      }\n    };\n\n    return external ? (\n      // External links\n      <MaterialLink\n        {...(newWindow ? { target: '_blank', rel: 'noopener' } : {})}\n        {...props}\n        ref={ref}\n        href={to}\n        onClick={handleClick}\n        className={classnames(classes.externalLink, props.className)}\n      >\n        {props.children}\n        <Typography component=\"span\" className={classes.visuallyHidden}>\n          , Opens in a new window\n        </Typography>\n      </MaterialLink>\n    ) : (\n      // Interact with React Router for internal links\n      <MaterialLink\n        {...props}\n        ref={ref}\n        component={RouterLink}\n        to={to}\n        onClick={handleClick}\n      />\n    );\n  },\n) as (props: LinkProps) => JSX.Element;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport MaterialButton, {\n  ButtonProps as MaterialButtonProps,\n} from '@material-ui/core/Button';\nimport React from 'react';\nimport { Link, LinkProps } from '../Link';\n\n/**\n * Properties for {@link LinkButton}\n *\n * @public\n * @remarks\n *\n * See {@link https://v4.mui.com/api/button/#props | Material-UI Button Props} for all properties\n */\nexport type LinkButtonProps = MaterialButtonProps &\n  Omit<LinkProps, 'variant' | 'color'>;\n\n/**\n * This wrapper is here to reset the color of the Link and make typescript happy.\n */\nconst LinkWrapper = React.forwardRef<any, LinkProps>((props, ref) => (\n  <Link ref={ref} {...props} color=\"initial\" />\n));\n\n/**\n * Thin wrapper on top of material-ui's {@link https://v4.mui.com/components/buttons/ | Button} component\n *\n * @public\n * @remarks\n */\nexport const LinkButton = React.forwardRef<any, LinkButtonProps>(\n  (props, ref) => (\n    <MaterialButton ref={ref} component={LinkWrapper} {...props} />\n  ),\n) as (props: LinkButtonProps) => JSX.Element;\n\n/**\n * @public\n * @deprecated use LinkButton instead\n */\nexport const Button = LinkButton;\n\n/**\n * @public\n * @deprecated use LinkButtonProps instead\n */\nexport type ButtonProps = LinkButtonProps;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { errorApiRef, useApi } from '@backstage/core-plugin-api';\nimport IconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport CopyIcon from '@material-ui/icons/FileCopy';\nimport React, { MouseEventHandler, useEffect, useState } from 'react';\nimport useCopyToClipboard from 'react-use/lib/useCopyToClipboard';\n\n/**\n * Properties for {@link CopyTextButton}\n *\n * @public\n */\nexport interface CopyTextButtonProps {\n  /**\n   * The text to be copied\n   */\n  text: string;\n  /**\n   * Number of milliseconds that the tooltip is shown\n   *\n   * @remarks\n   *\n   * Default: 1000\n   */\n  tooltipDelay?: number;\n  /**\n   * Text to show in the tooltip when user has clicked the button\n   *\n   * @remarks\n   *\n   * Default: \"Text copied to clipboard\"\n   */\n  tooltipText?: string;\n\n  /**\n   * Text to use as aria-label prop on the button\n   *\n   * @remarks\n   *\n   * Default: \"Copy text\"\n   */\n  'aria-label'?: string;\n}\n\n/**\n * Copy text button with visual feedback\n *\n * @public\n * @remarks\n *\n * Visual feedback takes form of:\n *  - a hover color\n *  - click ripple\n *  - Tooltip shown when user has clicked\n *\n * @example\n *\n * ```\n * <CopyTextButton\n *   text=\"My text that I want to be copied to the clipboard\"\n *   arial-label=\"Accessible label for this button\" />\n * ```\n */\nexport function CopyTextButton(props: CopyTextButtonProps) {\n  const {\n    text,\n    tooltipDelay = 1000,\n    tooltipText = 'Text copied to clipboard',\n    'aria-label': ariaLabel = 'Copy text',\n  } = props;\n  const errorApi = useApi(errorApiRef);\n  const [open, setOpen] = useState(false);\n  const [{ error }, copyToClipboard] = useCopyToClipboard();\n\n  useEffect(() => {\n    if (error) {\n      errorApi.post(error);\n    }\n  }, [error, errorApi]);\n\n  const handleCopyClick: MouseEventHandler = e => {\n    e.stopPropagation();\n    setOpen(true);\n    copyToClipboard(text);\n  };\n\n  return (\n    <>\n      <Tooltip\n        id=\"copy-test-tooltip\"\n        title={tooltipText}\n        placement=\"top\"\n        leaveDelay={tooltipDelay}\n        onClose={() => setOpen(false)}\n        open={open}\n      >\n        <IconButton onClick={handleCopyClick} aria-label={ariaLabel}>\n          <CopyIcon />\n        </IconButton>\n      </Tooltip>\n    </>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { BackstageTheme } from '@backstage/theme';\nimport Box from '@material-ui/core/Box';\nimport { useTheme } from '@material-ui/core/styles';\nimport React from 'react';\nimport type {} from 'react-syntax-highlighter';\nimport LightAsync from 'react-syntax-highlighter/dist/esm/light-async';\nimport dark from 'react-syntax-highlighter/dist/esm/styles/hljs/dark';\nimport docco from 'react-syntax-highlighter/dist/esm/styles/hljs/docco';\n\nimport { CopyTextButton } from '../CopyTextButton';\n\n/**\n * Properties for {@link CodeSnippet}\n *\n * @public\n */\nexport interface CodeSnippetProps {\n  /**\n   * Code Snippet text\n   */\n  text: string;\n  /**\n   * Language used by {@link CodeSnippetProps.text}\n   */\n  language: string;\n  /**\n   * Whether to show line number\n   *\n   * @remarks\n   *\n   * Default: false\n   */\n  showLineNumbers?: boolean;\n  /**\n   * Whether to show button to copy code snippet\n   *\n   * @remarks\n   *\n   * Default: false\n   */\n  showCopyCodeButton?: boolean;\n  /**\n   * Array of line numbers to highlight\n   */\n  highlightedNumbers?: number[];\n  /**\n   * Custom styles applied to code\n   *\n   * @remarks\n   *\n   * Passed to {@link https://react-syntax-highlighter.github.io/react-syntax-highlighter/ | react-syntax-highlighter}\n   */\n  customStyle?: any;\n}\n\n/**\n * Thin wrapper on top of {@link https://react-syntax-highlighter.github.io/react-syntax-highlighter/ | react-syntax-highlighter}\n * providing consistent theming and copy code button\n *\n * @public\n */\nexport function CodeSnippet(props: CodeSnippetProps) {\n  const {\n    text,\n    language,\n    showLineNumbers = false,\n    highlightedNumbers,\n    customStyle,\n    showCopyCodeButton = false,\n  } = props;\n  const theme = useTheme<BackstageTheme>();\n  const mode = theme.palette.type === 'dark' ? dark : docco;\n  const highlightColor = theme.palette.type === 'dark' ? '#256bf3' : '#e6ffed';\n\n  return (\n    <Box position=\"relative\">\n      <LightAsync\n        customStyle={customStyle}\n        language={language}\n        style={mode}\n        showLineNumbers={showLineNumbers}\n        wrapLines\n        lineNumberStyle={{ color: theme.palette.textVerySubtle }}\n        lineProps={(lineNumber: number) =>\n          highlightedNumbers?.includes(lineNumber)\n            ? {\n                style: {\n                  backgroundColor: highlightColor,\n                },\n              }\n            : {}\n        }\n      >\n        {text}\n      </LightAsync>\n      {showCopyCodeButton && (\n        <Box position=\"absolute\" top={0} right={0}>\n          <CopyTextButton text={text} />\n        </Box>\n      )}\n    </Box>\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BackstageTheme } from '@backstage/theme';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport React from 'react';\nimport { Link as RouterLink, LinkProps } from 'react-router-dom';\nimport AddCircleOutline from '@material-ui/icons/AddCircleOutline';\n\n/**\n * Properties for {@link CreateButton}\n *\n * @public\n */\nexport type CreateButtonProps = {\n  title: string;\n} & Partial<Pick<LinkProps, 'to'>>;\n\n/**\n * Responsive Button giving consistent UX for creation of different things\n *\n * @public\n */\nexport function CreateButton(props: CreateButtonProps) {\n  const { title, to } = props;\n  const isXSScreen = useMediaQuery<BackstageTheme>(theme =>\n    theme.breakpoints.down('xs'),\n  );\n\n  if (!to) {\n    return null;\n  }\n\n  return isXSScreen ? (\n    <IconButton\n      component={RouterLink}\n      color=\"primary\"\n      title={title}\n      size=\"small\"\n      to={to}\n    >\n      <AddCircleOutline />\n    </IconButton>\n  ) : (\n    <Button component={RouterLink} variant=\"contained\" color=\"primary\" to={to}>\n      {title}\n    </Button>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Types used to customize and provide data to {@link DependencyGraph}\n *\n * @packageDocumentation\n */\n\nimport React from 'react';\n\n/**\n * Edge of {@link DependencyGraph}\n *\n * @public\n */\nexport type DependencyEdge<T = {}> = T & {\n  /**\n   * ID of {@link DependencyNode} from where the Edge start\n   */\n  from: string;\n  /**\n   * ID of {@link DependencyNode} to where the Edge goes to\n   */\n  to: string;\n  /**\n   * Label assigned and rendered with the Edge\n   */\n  label?: string;\n};\n\n/**\n * Properties of {@link DependencyGraphTypes.RenderLabelFunction} for {@link DependencyGraphTypes.DependencyEdge}\n */\nexport type RenderLabelProps<T = unknown> = { edge: DependencyEdge<T> };\n\n/**\n * Custom React component for edge labels\n */\nexport type RenderLabelFunction<T = {}> = (\n  props: RenderLabelProps<T>,\n) => React.ReactNode;\n\n/**\n * Node of {@link DependencyGraph}\n *\n * @public\n */\nexport type DependencyNode<T = {}> = T & {\n  id: string;\n};\n\n/**\n * Properties of {@link DependencyGraphTypes.RenderNodeFunction} for {@link DependencyGraphTypes.DependencyNode}\n */\nexport type RenderNodeProps<T = unknown> = { node: DependencyNode<T> };\n\n/**\n * Custom React component for graph {@link DependencyGraphTypes.DependencyNode}\n */\nexport type RenderNodeFunction<T = {}> = (\n  props: RenderNodeProps<T>,\n) => React.ReactNode;\n\n/**\n * Graph direction\n *\n * @public\n */\nexport enum Direction {\n  /**\n   * Top to Bottom\n   */\n  TOP_BOTTOM = 'TB',\n  /**\n   * Bottom to Top\n   */\n  BOTTOM_TOP = 'BT',\n  /**\n   * Left to Right\n   */\n  LEFT_RIGHT = 'LR',\n  /**\n   * Right to Left\n   */\n  RIGHT_LEFT = 'RL',\n}\n\n/**\n * Node alignment\n *\n * @public\n */\nexport enum Alignment {\n  /**\n   * Up Left\n   */\n  UP_LEFT = 'UL',\n  /**\n   * Up Right\n   */\n  UP_RIGHT = 'UR',\n  /**\n   * Down Left\n   */\n  DOWN_LEFT = 'DL',\n  /**\n   * Down Right\n   */\n  DOWN_RIGHT = 'DR',\n}\n\n/**\n * Algorithm used to rand nodes in graph\n */\nexport enum Ranker {\n  /**\n   * {@link https://en.wikipedia.org/wiki/Network_simplex_algorithm | Network Simplex} algorithm\n   */\n  NETWORK_SIMPLEX = 'network-simplex',\n  /**\n   * Tight Tree algorithm\n   */\n  TIGHT_TREE = 'tight-tree',\n  /**\n   * Longest path algorithm\n   *\n   * @remarks\n   *\n   * Simplest and fastest\n   */\n  LONGEST_PATH = 'longest-path',\n}\n\n/**\n * Position of label in relation to the edge\n *\n * @public\n */\nexport enum LabelPosition {\n  LEFT = 'l',\n  RIGHT = 'r',\n  CENTER = 'c',\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { BackstageTheme } from '@backstage/theme';\nimport { RenderNodeProps } from './types';\n\n/** @public */\nexport type DependencyGraphDefaultNodeClassKey = 'node' | 'text';\n\nconst useStyles = makeStyles(\n  (theme: BackstageTheme) => ({\n    node: {\n      fill: theme.palette.primary.light,\n      stroke: theme.palette.primary.light,\n    },\n    text: {\n      fill: theme.palette.primary.contrastText,\n    },\n  }),\n  { name: 'BackstageDependencyGraphDefaultNode' },\n);\n\n/** @public */\nexport function DefaultNode({ node: { id } }: RenderNodeProps) {\n  const classes = useStyles();\n  const [width, setWidth] = React.useState(0);\n  const [height, setHeight] = React.useState(0);\n  const idRef = React.useRef<SVGTextElement | null>(null);\n\n  React.useLayoutEffect(() => {\n    // set the width to the length of the ID\n    if (idRef.current) {\n      let { height: renderedHeight, width: renderedWidth } =\n        idRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setWidth(renderedWidth);\n        setHeight(renderedHeight);\n      }\n    }\n  }, [width, height]);\n\n  const padding = 10;\n  const paddedWidth = width + padding * 2;\n  const paddedHeight = height + padding * 2;\n\n  return (\n    <g>\n      <rect\n        className={classes.node}\n        width={paddedWidth}\n        height={paddedHeight}\n        rx={10}\n      />\n      <text\n        ref={idRef}\n        className={classes.text}\n        y={paddedHeight / 2}\n        x={paddedWidth / 2}\n        textAnchor=\"middle\"\n        alignmentBaseline=\"middle\"\n      >\n        {id}\n      </text>\n    </g>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const ARROW_MARKER_ID = 'arrow-marker';\n\nexport const NODE_TEST_ID = 'node';\nexport const EDGE_TEST_ID = 'edge';\nexport const LABEL_TEST_ID = 'label';\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { DefaultNode } from './DefaultNode';\nimport { RenderNodeFunction, RenderNodeProps, DependencyNode } from './types';\nimport { NODE_TEST_ID } from './constants';\nimport dagre from 'dagre';\n\n/** @public */\nexport type DependencyGraphNodeClassKey = 'node';\n\nconst useStyles = makeStyles(\n  theme => ({\n    node: {\n      transition: `${theme.transitions.duration.shortest}ms`,\n    },\n  }),\n  { name: 'BackstageDependencyGraphNode' },\n);\n\nexport type GraphNode<T> = dagre.Node<DependencyNode<T>>;\n\nexport type NodeComponentProps<T> = {\n  node: GraphNode<T>;\n  render?: RenderNodeFunction<T>;\n  setNode: dagre.graphlib.Graph['setNode'];\n};\n\nconst renderDefault = (props: RenderNodeProps) => <DefaultNode {...props} />;\n\nexport function Node<T>({\n  render = renderDefault,\n  setNode,\n  node,\n}: NodeComponentProps<T>) {\n  const { width, height, x = 0, y = 0 } = node;\n  const nodeProps: DependencyNode<T> = node;\n  const classes = useStyles();\n  const nodeRef = React.useRef<SVGGElement | null>(null);\n\n  React.useLayoutEffect(() => {\n    // set the node width to the actual rendered width to properly layout graph\n    if (nodeRef.current) {\n      let { height: renderedHeight, width: renderedWidth } =\n        nodeRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setNode(node.id, {\n          ...node,\n          height: renderedHeight,\n          width: renderedWidth,\n        });\n      }\n    }\n  }, [node, width, height, setNode]);\n\n  return (\n    <g\n      ref={nodeRef}\n      data-testid={NODE_TEST_ID}\n      className={classes.node}\n      transform={`translate(${x - width / 2},${y - height / 2})`}\n    >\n      {render({ node: nodeProps })}\n    </g>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { BackstageTheme } from '@backstage/theme';\nimport { RenderLabelProps } from './types';\n\n/** @public */\nexport type DependencyGraphDefaultLabelClassKey = 'text';\n\nconst useStyles = makeStyles(\n  (theme: BackstageTheme) => ({\n    text: {\n      fill: theme.palette.textContrast,\n    },\n  }),\n  { name: 'BackstageDependencyGraphDefaultLabel' },\n);\n\n/** @public */\nexport function DefaultLabel({ edge: { label } }: RenderLabelProps) {\n  const classes = useStyles();\n  return (\n    <text className={classes.text} textAnchor=\"middle\">\n      {label}\n    </text>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport * as d3Shape from 'd3-shape';\nimport isFinite from 'lodash/isFinite';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport { BackstageTheme } from '@backstage/theme';\nimport {\n  RenderLabelProps,\n  RenderLabelFunction,\n  DependencyEdge,\n  LabelPosition,\n} from './types';\nimport { EDGE_TEST_ID, LABEL_TEST_ID } from './constants';\nimport { DefaultLabel } from './DefaultLabel';\nimport dagre from 'dagre';\n\n/* Based on: https://github.com/dagrejs/dagre/wiki#configuring-the-layout  */\nexport type EdgeProperties = {\n  label?: string;\n  width?: number;\n  height?: number;\n  labeloffset?: number;\n  labelpos?: LabelPosition;\n  minlen?: number;\n  weight?: number;\n};\nexport type GraphEdge<T> = DependencyEdge<T> & dagre.GraphEdge & EdgeProperties;\n\n/** @public */\nexport type DependencyGraphEdgeClassKey = 'path' | 'label';\n\nconst useStyles = makeStyles(\n  (theme: BackstageTheme) => ({\n    path: {\n      strokeWidth: 1,\n      stroke: theme.palette.textSubtle,\n      fill: 'none',\n      transition: `${theme.transitions.duration.shortest}ms`,\n    },\n    label: {\n      transition: `${theme.transitions.duration.shortest}ms`,\n    },\n  }),\n  { name: 'BackstageDependencyGraphEdge' },\n);\n\ntype EdgePoint = dagre.GraphEdge['points'][0];\n\n/** @public */\nexport type EdgeComponentProps<T = unknown> = {\n  id: dagre.Edge;\n  edge: GraphEdge<T>;\n  render?: RenderLabelFunction<T>;\n  setEdge: (\n    id: dagre.Edge,\n    edge: DependencyEdge<T>,\n  ) => dagre.graphlib.Graph<{}>;\n  curve: 'curveStepBefore' | 'curveMonotoneX';\n};\n\nconst renderDefault = (props: RenderLabelProps<unknown>) => (\n  <DefaultLabel {...props} />\n);\n\nexport function Edge<EdgeData>({\n  render = renderDefault,\n  setEdge,\n  id,\n  edge,\n  curve,\n}: EdgeComponentProps<EdgeData>) {\n  const { x = 0, y = 0, width, height, points } = edge;\n  const labelProps: DependencyEdge<EdgeData> = edge;\n  const classes = useStyles();\n\n  const labelRef = React.useRef<SVGGElement>(null);\n\n  React.useLayoutEffect(() => {\n    // set the label width to the actual rendered width to properly layout graph\n    if (labelRef.current) {\n      let { height: renderedHeight, width: renderedWidth } =\n        labelRef.current.getBBox();\n      renderedHeight = Math.round(renderedHeight);\n      renderedWidth = Math.round(renderedWidth);\n\n      if (renderedHeight !== height || renderedWidth !== width) {\n        setEdge(id, {\n          ...edge,\n          height: renderedHeight,\n          width: renderedWidth,\n        });\n      }\n    }\n  }, [edge, height, width, setEdge, id]);\n\n  let path: string = '';\n\n  const createPath = React.useMemo(\n    () =>\n      d3Shape\n        .line<EdgePoint>()\n        .x(d => d.x)\n        .y(d => d.y)\n        .curve(d3Shape[curve]),\n    [curve],\n  );\n\n  if (points) {\n    const finitePoints = points.filter(\n      (point: EdgePoint) => isFinite(point.x) && isFinite(point.y),\n    );\n    path = createPath(finitePoints) || '';\n  }\n\n  return (\n    <>\n      {path && (\n        <path data-testid={EDGE_TEST_ID} className={classes.path} d={path} />\n      )}\n      {labelProps.label ? (\n        <g\n          ref={labelRef}\n          data-testid={LABEL_TEST_ID}\n          className={classes.label}\n          transform={`translate(${x},${y})`}\n        >\n          {render({ edge: labelProps })}\n        </g>\n      ) : null}\n    </>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport * as d3Zoom from 'd3-zoom';\nimport * as d3Selection from 'd3-selection';\nimport useTheme from '@material-ui/core/styles/useTheme';\nimport dagre from 'dagre';\nimport debounce from 'lodash/debounce';\nimport { BackstageTheme } from '@backstage/theme';\nimport {\n  DependencyEdge,\n  DependencyNode,\n  Direction,\n  Alignment,\n  Ranker,\n  RenderNodeFunction,\n  RenderLabelFunction,\n  LabelPosition,\n} from './types';\nimport { Node } from './Node';\nimport { Edge, GraphEdge } from './Edge';\nimport { ARROW_MARKER_ID } from './constants';\n\n/**\n * Properties of {@link DependencyGraph}\n *\n * @public\n * @remarks\n * `<NodeData>` and `<EdgeData>` are useful when rendering custom or edge labels\n */\nexport interface DependencyGraphProps<NodeData, EdgeData>\n  extends React.SVGProps<SVGSVGElement> {\n  /**\n   * Edges of graph\n   */\n  edges: DependencyEdge<EdgeData>[];\n  /**\n   * Nodes of Graph\n   */\n  nodes: DependencyNode<NodeData>[];\n  /**\n   * Graph {@link DependencyGraphTypes.Direction | direction}\n   *\n   * @remarks\n   *\n   * Default: `DependencyGraphTypes.Direction.TOP_BOTTOM`\n   */\n  direction?: Direction;\n  /**\n   * Node {@link DependencyGraphTypes.Alignment | alignment}\n   */\n  align?: Alignment;\n  /**\n   * Margin between nodes on each rank\n   *\n   * @remarks\n   *\n   * Default: 50\n   */\n  nodeMargin?: number;\n  /**\n   * Margin between edges\n   *\n   * @remarks\n   *\n   * Default: 10\n   */\n  edgeMargin?: number;\n  /**\n   * Margin between each rank\n   *\n   * @remarks\n   *\n   * Default: 50\n   */\n  rankMargin?: number;\n  /**\n   * Margin on left and right of whole graph\n   *\n   * @remarks\n   *\n   * Default: 0\n   */\n  paddingX?: number;\n  /**\n   * Margin on top and bottom of whole graph\n   *\n   * @remarks\n   *\n   * Default: 0\n   */\n  paddingY?: number;\n  /**\n   * Heuristic used to find set of edges that will make graph acyclic\n   */\n  acyclicer?: 'greedy';\n  /**\n   * {@link DependencyGraphTypes.Ranker | Algorithm} used to rank nodes\n   *\n   * @remarks\n   *\n   * Default: `DependencyGraphTypes.Ranker.NETWORK_SIMPLEX`\n   */\n  ranker?: Ranker;\n  /**\n   * {@link DependencyGraphTypes.LabelPosition | Position} of label in relation to edge\n   *\n   * @remarks\n   *\n   * Default: `DependencyGraphTypes.LabelPosition.RIGHT`\n   */\n  labelPosition?: LabelPosition;\n  /**\n   * How much to move label away from edge\n   *\n   * @remarks\n   *\n   * Applies only when {@link DependencyGraphProps.labelPosition} is `DependencyGraphTypes.LabelPosition.LEFT` or\n   * `DependencyGraphTypes.LabelPosition.RIGHT`\n   */\n  labelOffset?: number;\n  /**\n   * Minimum number of ranks to keep between connected nodes\n   */\n  edgeRanks?: number;\n  /**\n   * Weight applied to edges in graph\n   */\n  edgeWeight?: number;\n  /**\n   * Custom node rendering component\n   */\n  renderNode?: RenderNodeFunction<NodeData>;\n  /**\n   * Custom label rendering component\n   */\n  renderLabel?: RenderLabelFunction<EdgeData>;\n  /**\n   * {@link https://developer.mozilla.org/en-US/docs/Web/SVG/Element/defs | Defs} shared by rendered SVG to be used by\n   * {@link DependencyGraphProps.renderNode} and/or {@link DependencyGraphProps.renderLabel}\n   */\n  defs?: SVGDefsElement | SVGDefsElement[];\n  /**\n   * Controls zoom behavior of graph\n   *\n   * @remarks\n   *\n   * Default: `enabled`\n   */\n  zoom?: 'enabled' | 'disabled' | 'enable-on-click';\n  /**\n   * A factory for curve generators addressing both lines and areas.\n   *\n   * @remarks\n   *\n   * Default: 'curveMonotoneX'\n   */\n  curve?: 'curveStepBefore' | 'curveMonotoneX';\n  /**\n   * Controls if the graph should be contained or grow\n   *\n   * @remarks\n   *\n   * Default: 'grow'\n   */\n  fit?: 'grow' | 'contain';\n}\n\nconst WORKSPACE_ID = 'workspace';\n\n/**\n * Graph component used to visualize relations between entities\n *\n * @public\n */\nexport function DependencyGraph<NodeData, EdgeData>(\n  props: DependencyGraphProps<NodeData, EdgeData>,\n) {\n  const {\n    edges,\n    nodes,\n    renderNode,\n    direction = Direction.TOP_BOTTOM,\n    align,\n    nodeMargin = 50,\n    edgeMargin = 10,\n    rankMargin = 50,\n    paddingX = 0,\n    paddingY = 0,\n    acyclicer,\n    ranker = Ranker.NETWORK_SIMPLEX,\n    labelPosition = LabelPosition.RIGHT,\n    labelOffset = 10,\n    edgeRanks = 1,\n    edgeWeight = 1,\n    renderLabel,\n    defs,\n    zoom = 'enabled',\n    curve = 'curveMonotoneX',\n    fit = 'grow',\n    ...svgProps\n  } = props;\n  const theme: BackstageTheme = useTheme();\n  const [containerWidth, setContainerWidth] = React.useState<number>(100);\n  const [containerHeight, setContainerHeight] = React.useState<number>(100);\n\n  const graph = React.useRef<dagre.graphlib.Graph<DependencyNode<NodeData>>>(\n    new dagre.graphlib.Graph(),\n  );\n  const [graphWidth, setGraphWidth] = React.useState<number>(\n    graph.current.graph()?.width || 0,\n  );\n  const [graphHeight, setGraphHeight] = React.useState<number>(\n    graph.current.graph()?.height || 0,\n  );\n  const [graphNodes, setGraphNodes] = React.useState<string[]>([]);\n  const [graphEdges, setGraphEdges] = React.useState<dagre.Edge[]>([]);\n\n  const maxWidth = Math.max(graphWidth, containerWidth);\n  const maxHeight = Math.max(graphHeight, containerHeight);\n  const minHeight = Math.min(graphHeight, containerHeight);\n\n  const scalableHeight = fit === 'grow' ? maxHeight : minHeight;\n\n  const containerRef = React.useMemo(\n    () =>\n      debounce((node: SVGSVGElement) => {\n        if (!node) {\n          return;\n        }\n        // Set up zooming + panning\n        const container = d3Selection.select<SVGSVGElement, null>(node);\n        const workspace = d3Selection.select(node.getElementById(WORKSPACE_ID));\n\n        function enableZoom() {\n          container.call(\n            d3Zoom\n              .zoom<SVGSVGElement, null>()\n              .scaleExtent([1, 10])\n              .on('zoom', event => {\n                event.transform.x = Math.min(\n                  0,\n                  Math.max(\n                    event.transform.x,\n                    maxWidth - maxWidth * event.transform.k,\n                  ),\n                );\n                event.transform.y = Math.min(\n                  0,\n                  Math.max(\n                    event.transform.y,\n                    maxHeight - maxHeight * event.transform.k,\n                  ),\n                );\n                workspace.attr('transform', event.transform);\n              }),\n          );\n        }\n\n        if (zoom === 'enabled') {\n          enableZoom();\n        } else if (zoom === 'enable-on-click') {\n          container.on('click', () => enableZoom());\n        }\n\n        const { width: newContainerWidth, height: newContainerHeight } =\n          node.getBoundingClientRect();\n        if (containerWidth !== newContainerWidth) {\n          setContainerWidth(newContainerWidth);\n        }\n        if (containerHeight !== newContainerHeight) {\n          setContainerHeight(newContainerHeight);\n        }\n      }, 100),\n    [containerHeight, containerWidth, maxWidth, maxHeight, zoom],\n  );\n\n  const setNodesAndEdges = React.useCallback(() => {\n    // Cleaning up lingering nodes and edges\n    const currentGraphNodes = graph.current.nodes();\n    const currentGraphEdges = graph.current.edges();\n\n    currentGraphNodes.forEach(nodeId => {\n      const remainingNode = nodes.some(node => node.id === nodeId);\n      if (!remainingNode) {\n        graph.current.removeNode(nodeId);\n      }\n    });\n\n    currentGraphEdges.forEach(e => {\n      const remainingEdge = edges.some(\n        edge => edge.from === e.v && edge.to === e.w,\n      );\n      if (!remainingEdge) {\n        graph.current.removeEdge(e.v, e.w);\n      }\n    });\n\n    // Adding/updating nodes and edges\n    nodes.forEach(node => {\n      const existingNode = graph.current\n        .nodes()\n        .find(nodeId => node.id === nodeId);\n\n      if (existingNode && graph.current.node(existingNode)) {\n        const { width, height, x, y } = graph.current.node(existingNode);\n        graph.current.setNode(existingNode, { ...node, width, height, x, y });\n      } else {\n        graph.current.setNode(node.id, { ...node, width: 0, height: 0 });\n      }\n    });\n\n    edges.forEach(e => {\n      graph.current.setEdge(e.from, e.to, {\n        ...e,\n        label: e.label,\n        width: 0,\n        height: 0,\n        labelpos: labelPosition,\n        labeloffset: labelOffset,\n        weight: edgeWeight,\n        minlen: edgeRanks,\n      });\n    });\n  }, [edges, nodes, labelPosition, labelOffset, edgeWeight, edgeRanks]);\n\n  const updateGraph = React.useMemo(\n    () =>\n      debounce(\n        () => {\n          dagre.layout(graph.current);\n          const { height, width } = graph.current.graph();\n          const newHeight = Math.max(0, height || 0);\n          const newWidth = Math.max(0, width || 0);\n          setGraphWidth(newWidth);\n          setGraphHeight(newHeight);\n\n          setGraphNodes(graph.current.nodes());\n          setGraphEdges(graph.current.edges());\n        },\n        250,\n        { leading: true },\n      ),\n    [],\n  );\n\n  React.useEffect(() => {\n    graph.current.setGraph({\n      rankdir: direction,\n      align,\n      nodesep: nodeMargin,\n      edgesep: edgeMargin,\n      ranksep: rankMargin,\n      marginx: paddingX,\n      marginy: paddingY,\n      acyclicer,\n      ranker,\n    });\n\n    setNodesAndEdges();\n    updateGraph();\n\n    return updateGraph.cancel;\n  }, [\n    acyclicer,\n    align,\n    direction,\n    edgeMargin,\n    paddingX,\n    paddingY,\n    nodeMargin,\n    rankMargin,\n    ranker,\n    setNodesAndEdges,\n    updateGraph,\n  ]);\n\n  function setNode(id: string, node: DependencyNode<NodeData>) {\n    graph.current.setNode(id, node);\n    updateGraph();\n    return graph.current;\n  }\n\n  function setEdge(id: dagre.Edge, edge: DependencyEdge<EdgeData>) {\n    graph.current.setEdge(id, edge);\n    updateGraph();\n    return graph.current;\n  }\n\n  return (\n    <svg\n      ref={containerRef}\n      {...svgProps}\n      width=\"100%\"\n      height={scalableHeight}\n      viewBox={`0 0 ${maxWidth} ${maxHeight}`}\n    >\n      <defs>\n        <marker\n          id={ARROW_MARKER_ID}\n          viewBox=\"0 0 24 24\"\n          markerWidth=\"14\"\n          markerHeight=\"14\"\n          refX=\"16\"\n          refY=\"12\"\n          orient=\"auto\"\n          markerUnits=\"strokeWidth\"\n        >\n          <path\n            fill={theme.palette.textSubtle}\n            d=\"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\"\n          />\n        </marker>\n        {defs}\n      </defs>\n      <g id={WORKSPACE_ID}>\n        <svg\n          width={graphWidth}\n          height={graphHeight}\n          y={maxHeight / 2 - graphHeight / 2}\n          x={maxWidth / 2 - graphWidth / 2}\n          viewBox={`0 0 ${graphWidth} ${graphHeight}`}\n        >\n          {graphEdges.map(e => {\n            const edge = graph.current.edge(e) as GraphEdge<EdgeData>;\n            if (!edge) return null;\n            return (\n              <Edge\n                key={`${e.v}-${e.w}`}\n                id={e}\n                setEdge={setEdge}\n                render={renderLabel}\n                edge={edge}\n                curve={curve}\n              />\n            );\n          })}\n          {graphNodes.map((id: string) => {\n            const node = graph.current.node(id);\n            if (!node) return null;\n            return (\n              <Node\n                key={id}\n                setNode={setNode}\n                render={renderNode}\n                node={node}\n              />\n            );\n          })}\n        </svg>\n      </g>\n    </svg>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactNode, useState, useEffect } from 'react';\nimport { useApi, storageApiRef } from '@backstage/core-plugin-api';\nimport useObservable from 'react-use/lib/useObservable';\nimport classNames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { BackstageTheme } from '@backstage/theme';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport Close from '@material-ui/icons/Close';\n\n/** @public */\nexport type DismissableBannerClassKey =\n  | 'root'\n  | 'topPosition'\n  | 'icon'\n  | 'content'\n  | 'message'\n  | 'info'\n  | 'error';\n\n/**\n * @public\n * @deprecated This type contained a typo, please use DismissableBannerClassKey instead\n */\nexport type DismissbleBannerClassKey = DismissableBannerClassKey;\n\nconst useStyles = makeStyles(\n  (theme: BackstageTheme) => ({\n    root: {\n      padding: theme.spacing(0),\n      marginBottom: theme.spacing(0),\n      marginTop: theme.spacing(0),\n      display: 'flex',\n      flexFlow: 'row nowrap',\n    },\n    // showing on top\n    topPosition: {\n      position: 'relative',\n      marginBottom: theme.spacing(6),\n      marginTop: -theme.spacing(3),\n      zIndex: 'unset',\n    },\n    icon: {\n      fontSize: theme.typography.h6.fontSize,\n    },\n    content: {\n      width: '100%',\n      maxWidth: 'inherit',\n      flexWrap: 'nowrap',\n    },\n    message: {\n      display: 'flex',\n      alignItems: 'center',\n      color: theme.palette.banner.text,\n      '& a': {\n        color: theme.palette.banner.link,\n      },\n    },\n    info: {\n      backgroundColor: theme.palette.banner.info,\n    },\n    error: {\n      backgroundColor: theme.palette.banner.error,\n    },\n    warning: {\n      backgroundColor:\n        theme.palette.banner.warning ?? theme.palette.banner.error,\n    },\n  }),\n  { name: 'BackstageDismissableBanner' },\n);\n\nexport type Props = {\n  variant: 'info' | 'error' | 'warning';\n  message: ReactNode;\n  id: string;\n  fixed?: boolean;\n};\n\n/** @public */\nexport const DismissableBanner = (props: Props) => {\n  const { variant, message, id, fixed = false } = props;\n  const classes = useStyles();\n  const storageApi = useApi(storageApiRef);\n  const notificationsStore = storageApi.forBucket('notifications');\n  const rawDismissedBanners =\n    notificationsStore.snapshot<string[]>('dismissedBanners').value ?? [];\n\n  const [dismissedBanners, setDismissedBanners] = useState(\n    new Set(rawDismissedBanners),\n  );\n\n  const observedItems = useObservable(\n    notificationsStore.observe$<string[]>('dismissedBanners'),\n  );\n\n  useEffect(() => {\n    if (observedItems?.value) {\n      const currentValue = observedItems?.value ?? [];\n      setDismissedBanners(new Set(currentValue));\n    }\n  }, [observedItems?.value]);\n\n  const handleClick = () => {\n    notificationsStore.set('dismissedBanners', [...dismissedBanners, id]);\n  };\n\n  return (\n    <Snackbar\n      anchorOrigin={\n        fixed\n          ? { vertical: 'bottom', horizontal: 'center' }\n          : { vertical: 'top', horizontal: 'center' }\n      }\n      open={!dismissedBanners.has(id)}\n      classes={{\n        root: classNames(classes.root, !fixed && classes.topPosition),\n      }}\n    >\n      <SnackbarContent\n        classes={{\n          root: classNames(classes.content, classes[variant]),\n          message: classes.message,\n        }}\n        message={message}\n        action={[\n          <IconButton\n            key=\"dismiss\"\n            title=\"Permanently dismiss this message\"\n            color=\"inherit\"\n            onClick={handleClick}\n          >\n            <Close className={classes.icon} />\n          </IconButton>,\n        ]}\n      />\n    </Snackbar>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport missingAnnotation from './assets/missingAnnotation.svg';\nimport noInformation from './assets/noInformation.svg';\nimport createComponent from './assets/createComponent.svg';\nimport noBuild from './assets/noBuild.svg';\nimport { makeStyles } from '@material-ui/core/styles';\n\ntype Props = {\n  missing: 'field' | 'info' | 'content' | 'data';\n};\n\n/** @public */\nexport type EmptyStateImageClassKey = 'generalImg';\n\nconst useStyles = makeStyles(\n  {\n    generalImg: {\n      width: '95%',\n      zIndex: 2,\n      position: 'relative',\n      left: '50%',\n      top: '50%',\n      transform: 'translate(-50%, 15%)',\n    },\n  },\n  { name: 'BackstageEmptyStateImage' },\n);\n\n/** @public */\nexport const EmptyStateImage = ({ missing }: Props) => {\n  const classes = useStyles();\n  switch (missing) {\n    case 'field':\n      return (\n        <img\n          src={missingAnnotation}\n          className={classes.generalImg}\n          alt=\"annotation is missing\"\n        />\n      );\n    case 'info':\n      return (\n        <img\n          src={noInformation}\n          alt=\"no Information\"\n          className={classes.generalImg}\n        />\n      );\n    case 'content':\n      return (\n        <img\n          src={createComponent}\n          alt=\"create Component\"\n          className={classes.generalImg}\n        />\n      );\n    case 'data':\n      return (\n        <img src={noBuild} alt=\"no Build\" className={classes.generalImg} />\n      );\n    default:\n      return null;\n  }\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\nimport { EmptyStateImage } from './EmptyStateImage';\n\n/** @public */\nexport type EmptyStateClassKey = 'root' | 'action' | 'imageContainer';\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      backgroundColor: theme.palette.background.default,\n      padding: theme.spacing(2, 0, 0, 0),\n    },\n    action: {\n      marginTop: theme.spacing(2),\n    },\n    imageContainer: {\n      position: 'relative',\n    },\n  }),\n  { name: 'BackstageEmptyState' },\n);\n\ntype Props = {\n  title: string;\n  description?: string | JSX.Element;\n  missing: 'field' | 'info' | 'content' | 'data' | { customImage: JSX.Element };\n  action?: JSX.Element;\n};\n\n/**\n * Various placeholder views for empty state pages\n *\n * @public\n *\n */\nexport function EmptyState(props: Props) {\n  const { title, description, missing, action } = props;\n  const classes = useStyles();\n  return (\n    <Grid\n      container\n      direction=\"row\"\n      justifyContent=\"space-around\"\n      alignItems=\"flex-start\"\n      className={classes.root}\n      spacing={2}\n    >\n      <Grid item xs={12} md={6}>\n        <Grid container direction=\"column\">\n          <Grid item xs>\n            <Typography variant=\"h5\">{title}</Typography>\n          </Grid>\n          <Grid item xs>\n            <Typography variant=\"body1\">{description}</Typography>\n          </Grid>\n          <Grid item xs className={classes.action}>\n            {action}\n          </Grid>\n        </Grid>\n      </Grid>\n      <Grid item xs={12} md={6} className={classes.imageContainer}>\n        {typeof missing === 'string' ? (\n          <EmptyStateImage missing={missing} />\n        ) : (\n          missing.customImage\n        )}\n      </Grid>\n    </Grid>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { BackstageTheme } from '@backstage/theme';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\n\nimport { CodeSnippet } from '../CodeSnippet';\nimport { Link } from '../Link';\nimport { EmptyState } from './EmptyState';\n\nconst COMPONENT_YAML_TEMPLATE = `apiVersion: backstage.io/v1alpha1\nkind: Component\nmetadata:\n  name: example\n  description: example.com\n  annotations:\n    ANNOTATION: value\nspec:\n  type: website\n  lifecycle: production\n  owner: user:guest`;\n\nconst ANNOTATION_REGEXP = /^.*ANNOTATION.*$/m;\nconst ANNOTATION_YAML = COMPONENT_YAML_TEMPLATE.match(ANNOTATION_REGEXP)![0];\nconst ANNOTATION_LINE = COMPONENT_YAML_TEMPLATE.split('\\n').findIndex(line =>\n  ANNOTATION_REGEXP.test(line),\n);\n\ntype Props = {\n  annotation: string | string[];\n  readMoreUrl?: string;\n};\n\nexport type MissingAnnotationEmptyStateClassKey = 'code';\n\nconst useStyles = makeStyles<BackstageTheme>(\n  theme => ({\n    code: {\n      borderRadius: 6,\n      margin: `${theme.spacing(2)}px 0px`,\n      background:\n        theme.palette.type === 'dark' ? '#444' : theme.palette.common.white,\n    },\n  }),\n  { name: 'BackstageMissingAnnotationEmptyState' },\n);\n\nfunction generateLineNumbers(lineCount: number) {\n  return Array.from(Array(lineCount + 1).keys(), i => i + ANNOTATION_LINE);\n}\n\nfunction generateComponentYaml(annotations: string[]) {\n  const annotationYaml = annotations\n    .map(ann => ANNOTATION_YAML.replace('ANNOTATION', ann))\n    .join('\\n');\n\n  return COMPONENT_YAML_TEMPLATE.replace(ANNOTATION_YAML, annotationYaml);\n}\n\nfunction generateDescription(annotations: string[]) {\n  const isSingular = annotations.length <= 1;\n  return (\n    <>\n      The {isSingular ? 'annotation' : 'annotations'}{' '}\n      {annotations\n        .map(ann => <code>{ann}</code>)\n        .reduce((prev, curr) => (\n          <>\n            {prev}, {curr}\n          </>\n        ))}{' '}\n      {isSingular ? 'is' : 'are'} missing. You need to add the{' '}\n      {isSingular ? 'annotation' : 'annotations'} to your component if you want\n      to enable this tool.\n    </>\n  );\n}\n\nexport function MissingAnnotationEmptyState(props: Props) {\n  const { annotation, readMoreUrl } = props;\n  const annotations = Array.isArray(annotation) ? annotation : [annotation];\n  const url =\n    readMoreUrl ||\n    'https://backstage.io/docs/features/software-catalog/well-known-annotations';\n  const classes = useStyles();\n\n  return (\n    <EmptyState\n      missing=\"field\"\n      title=\"Missing Annotation\"\n      description={generateDescription(annotations)}\n      action={\n        <>\n          <Typography variant=\"body1\">\n            Add the annotation to your component YAML as shown in the\n            highlighted example below:\n          </Typography>\n          <Box className={classes.code}>\n            <CodeSnippet\n              text={generateComponentYaml(annotations)}\n              language=\"yaml\"\n              showLineNumbers\n              highlightedNumbers={generateLineNumbers(annotations.length)}\n              customStyle={{ background: 'inherit', fontSize: '115%' }}\n            />\n          </Box>\n          <Button color=\"primary\" component={Link} to={url}>\n            Read more\n          </Button>\n        </>\n      }\n    />\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { BackstageTheme } from '@backstage/theme';\nimport { makeStyles, darken, lighten } from '@material-ui/core/styles';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport ErrorOutline from '@material-ui/icons/ErrorOutline';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport React from 'react';\n\nconst getWarningTextColor = (\n  severity: NonNullable<WarningProps['severity']>,\n  theme: BackstageTheme,\n) => {\n  const getColor = theme.palette.type === 'light' ? darken : lighten;\n  return getColor(theme.palette[severity].light, 0.6);\n};\n\nconst getWarningBackgroundColor = (\n  severity: NonNullable<WarningProps['severity']>,\n  theme: BackstageTheme,\n) => {\n  const getBackgroundColor = theme.palette.type === 'light' ? lighten : darken;\n  return getBackgroundColor(theme.palette[severity].light, 0.9);\n};\n\nconst useErrorOutlineStyles = makeStyles<BackstageTheme>(theme => ({\n  root: {\n    marginRight: theme.spacing(1),\n    fill: ({ severity }: WarningProps) =>\n      getWarningTextColor(\n        severity as NonNullable<WarningProps['severity']>,\n        theme,\n      ),\n  },\n}));\n\nconst ErrorOutlineStyled = ({ severity }: Pick<WarningProps, 'severity'>) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return <ErrorOutline classes={classes} />;\n};\nconst ExpandMoreIconStyled = ({ severity }: Pick<WarningProps, 'severity'>) => {\n  const classes = useErrorOutlineStyles({ severity });\n  return <ExpandMoreIcon classes={classes} />;\n};\n\nexport type WarningPanelClassKey =\n  | 'panel'\n  | 'summary'\n  | 'summaryText'\n  | 'message'\n  | 'details';\n\nconst useStyles = makeStyles<BackstageTheme>(\n  theme => ({\n    panel: {\n      backgroundColor: ({ severity }: WarningProps) =>\n        getWarningBackgroundColor(\n          severity as NonNullable<WarningProps['severity']>,\n          theme,\n        ),\n      color: ({ severity }: WarningProps) =>\n        getWarningTextColor(\n          severity as NonNullable<WarningProps['severity']>,\n          theme,\n        ),\n      verticalAlign: 'middle',\n    },\n    summary: {\n      display: 'flex',\n      flexDirection: 'row',\n    },\n    summaryText: {\n      color: ({ severity }: WarningProps) =>\n        getWarningTextColor(\n          severity as NonNullable<WarningProps['severity']>,\n          theme,\n        ),\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    message: {\n      width: '100%',\n      display: 'block',\n      color: ({ severity }: WarningProps) =>\n        getWarningTextColor(\n          severity as NonNullable<WarningProps['severity']>,\n          theme,\n        ),\n      backgroundColor: ({ severity }: WarningProps) =>\n        getWarningBackgroundColor(\n          severity as NonNullable<WarningProps['severity']>,\n          theme,\n        ),\n    },\n    details: {\n      width: '100%',\n      display: 'block',\n      color: theme.palette.textContrast,\n      backgroundColor: theme.palette.background.default,\n      border: `1px solid ${theme.palette.border}`,\n      padding: theme.spacing(2.0),\n      fontFamily: 'sans-serif',\n    },\n  }),\n  { name: 'BackstageWarningPanel' },\n);\n\nexport type WarningProps = {\n  title?: string;\n  severity?: 'warning' | 'error' | 'info';\n  message?: React.ReactNode;\n  defaultExpanded?: boolean;\n  children?: React.ReactNode;\n};\n\nconst capitalize = (s: string) => {\n  return s.charAt(0).toLocaleUpperCase('en-US') + s.slice(1);\n};\n\n/**\n * Show a user friendly error message to a user similar to\n * ErrorPanel except that the warning panel only shows the warning message to\n * the user.\n *\n * @param severity - Ability to change the severity of the alert. Default value\n *        \"warning\"\n * @param title - A title for the warning. If not supplied, \"Warning\" will be\n *        used.\n * @param message - Optional more detailed user-friendly message elaborating on\n *        the cause of the error.\n * @param children - Objects to provide context, such as a stack trace or detailed\n *        error reporting. Will be available inside an unfolded accordion.\n */\nexport function WarningPanel(props: WarningProps) {\n  const {\n    severity = 'warning',\n    title,\n    message,\n    children,\n    defaultExpanded,\n  } = props;\n  const classes = useStyles({ severity });\n\n  // If no severity or title provided, the heading will read simply \"Warning\"\n  const subTitle = capitalize(severity) + (title ? `: ${title}` : '');\n\n  return (\n    <Accordion\n      defaultExpanded={defaultExpanded ?? false}\n      className={classes.panel}\n      role=\"alert\"\n    >\n      <AccordionSummary\n        expandIcon={<ExpandMoreIconStyled severity={severity} />}\n        className={classes.summary}\n      >\n        <ErrorOutlineStyled severity={severity} />\n        <Typography className={classes.summaryText} variant=\"subtitle1\">\n          {subTitle}\n        </Typography>\n      </AccordionSummary>\n      {(message || children) && (\n        <AccordionDetails>\n          <Grid container>\n            {message && (\n              <Grid item xs={12}>\n                <Typography className={classes.message} variant=\"body1\">\n                  {message}\n                </Typography>\n              </Grid>\n            )}\n            {children && (\n              <Grid item xs={12} className={classes.details}>\n                {children}\n              </Grid>\n            )}\n          </Grid>\n        </AccordionDetails>\n      )}\n    </Accordion>\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport React, { PropsWithChildren } from 'react';\nimport { CopyTextButton } from '../CopyTextButton';\nimport { WarningPanel } from '../WarningPanel';\n\n/** @public */\nexport type ErrorPanelClassKey = 'text' | 'divider';\n\nconst useStyles = makeStyles(\n  theme => ({\n    text: {\n      fontFamily: 'monospace',\n      whiteSpace: 'pre',\n      overflowX: 'auto',\n      marginRight: theme.spacing(2),\n    },\n    divider: {\n      margin: theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageErrorPanel' },\n);\n\ntype ErrorListProps = {\n  error: string;\n  message: string;\n  request?: string;\n  stack?: string;\n  json?: string;\n};\n\nconst ErrorList = ({\n  error,\n  message,\n  stack,\n  children,\n}: PropsWithChildren<ErrorListProps>) => {\n  const classes = useStyles();\n\n  return (\n    <List dense>\n      <ListItem alignItems=\"flex-start\">\n        <ListItemText\n          classes={{ secondary: classes.text }}\n          primary=\"Error\"\n          secondary={error}\n        />\n        <CopyTextButton text={error} />\n      </ListItem>\n\n      <ListItem alignItems=\"flex-start\">\n        <ListItemText\n          classes={{ secondary: classes.text }}\n          primary=\"Message\"\n          secondary={message}\n        />\n        <CopyTextButton text={message} />\n      </ListItem>\n\n      {stack && (\n        <ListItem alignItems=\"flex-start\">\n          <ListItemText\n            classes={{ secondary: classes.text }}\n            primary=\"Stack Trace\"\n            secondary={stack}\n          />\n          <CopyTextButton text={stack} />\n        </ListItem>\n      )}\n\n      {children}\n    </List>\n  );\n};\n\n/** @public */\nexport type ErrorPanelProps = {\n  error: Error;\n  defaultExpanded?: boolean;\n  title?: string;\n};\n\n/**\n * Renders a warning panel as the effect of an error.\n *\n * @public\n */\nexport function ErrorPanel(props: PropsWithChildren<ErrorPanelProps>) {\n  const { title, error, defaultExpanded, children } = props;\n  return (\n    <WarningPanel\n      severity=\"error\"\n      title={title ?? error.message}\n      defaultExpanded={defaultExpanded}\n    >\n      <ErrorList\n        error={error.name}\n        message={error.message}\n        stack={error.stack}\n        children={children}\n      />\n    </WarningPanel>\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ResponseError } from '@backstage/errors';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport React from 'react';\nimport { CodeSnippet } from '../CodeSnippet';\nimport { CopyTextButton } from '../CopyTextButton';\nimport { ErrorPanel, ErrorPanelProps } from '../ErrorPanel';\n\nexport type ResponseErrorPanelClassKey = 'text' | 'divider';\n\nconst useStyles = makeStyles(\n  theme => ({\n    text: {\n      fontFamily: 'monospace',\n      whiteSpace: 'pre',\n      overflowX: 'auto',\n      marginRight: theme.spacing(2),\n    },\n    divider: {\n      margin: theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageResponseErrorPanel' },\n);\n\n/**\n * Renders a warning panel as the effect of a failed server request.\n *\n * @remarks\n * Has special treatment for ResponseError errors, to display rich\n * server-provided information about what happened.\n */\nexport function ResponseErrorPanel(props: ErrorPanelProps) {\n  const { title, error, defaultExpanded } = props;\n  const classes = useStyles();\n\n  if (error.name !== 'ResponseError') {\n    return (\n      <ErrorPanel\n        title={title ?? error.message}\n        defaultExpanded={defaultExpanded}\n        error={error}\n      />\n    );\n  }\n\n  const { body, cause } = error as ResponseError;\n  const { request, response } = body;\n\n  const errorString = `${response.statusCode}: ${cause.name}`;\n  const requestString = request && `${request.method} ${request.url}`;\n  const messageString = cause.message.replace(/\\\\n/g, '\\n');\n  const stackString = cause.stack?.replace(/\\\\n/g, '\\n');\n  const jsonString = JSON.stringify(body, undefined, 2);\n\n  return (\n    <ErrorPanel\n      title={title ?? error.message}\n      defaultExpanded={defaultExpanded}\n      error={{ name: errorString, message: messageString, stack: stackString }}\n    >\n      {requestString && (\n        <ListItem alignItems=\"flex-start\">\n          <ListItemText\n            classes={{ secondary: classes.text }}\n            primary=\"Request\"\n            secondary={request ? `${requestString}` : undefined}\n          />\n          <CopyTextButton text={requestString} />\n        </ListItem>\n      )}\n      <>\n        <Divider component=\"li\" className={classes.divider} />\n        <ListItem alignItems=\"flex-start\">\n          <ListItemText\n            classes={{ secondary: classes.text }}\n            primary=\"Full Error as JSON\"\n          />\n        </ListItem>\n        <CodeSnippet language=\"json\" text={jsonString} showCopyCodeButton />\n      </>\n    </ErrorPanel>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { useRef, useEffect } from 'react';\n\n/**\n * Creates DOM element to be used as React root.\n */\nfunction createRootElement(id: string): Element {\n  const rootContainer = document.createElement('div');\n  rootContainer.setAttribute('id', id);\n  return rootContainer;\n}\n\n/**\n * Appends element as last child of body.\n */\nfunction addRootElement(rootElem: Element): void {\n  document.body.insertBefore(\n    rootElem,\n    document.body.lastElementChild!.nextElementSibling,\n  );\n}\n\n/**\n * Hook to create a React Portal.\n *\n * Automatically handles creating and tearing-down the root elements (no SRR\n * makes this trivial), so there is no need to ensure the parent target already\n * exists.\n *\n * @example\n * const target = usePortal(id, [id]);\n * return createPortal(children, target);\n *\n * @param id - The id of the target container, e.g 'modal' or 'spotlight'\n * @returns The DOM node to use as the Portal target.\n */\nexport function usePortal(id: string): HTMLElement {\n  const rootElemRef = useRef<HTMLElement | null>(null);\n\n  useEffect(\n    function setupElement() {\n      // Look for existing target dom element to append to\n      const existingParent = document.querySelector(`#${id}`);\n      // Parent is either a new root or the existing dom element\n      const parentElem = existingParent || createRootElement(id);\n\n      // If there is no existing DOM element, add a new one.\n      if (!existingParent) {\n        addRootElement(parentElem);\n      }\n\n      // Add the detached element to the parent\n      parentElem.appendChild(rootElemRef.current!);\n\n      return function removeElement() {\n        rootElemRef.current!.remove();\n        if (parentElem.childNodes.length === -1) {\n          parentElem.remove();\n        }\n      };\n    },\n    [id],\n  );\n\n  /**\n   * It's important we evaluate this lazily:\n   * - We need first render to contain the DOM element, so it shouldn't happen\n   *   in useEffect. We would normally put this in the constructor().\n   * - We can't do 'const rootElemRef = useRef(document.createElement('div))',\n   *   since this will run every single render (that's a lot).\n   * - We want the ref to consistently point to the same DOM element and only\n   *   ever run once.\n   * @link https://reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily\n   */\n  function getRootElem() {\n    if (!rootElemRef.current) {\n      rootElemRef.current = document.createElement('div');\n    }\n    return rootElemRef.current;\n  }\n\n  return getRootElem();\n}\n\nexport default usePortal;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useState } from 'react';\n\nconst STATES_LOCAL_STORAGE_KEY = 'core.calloutSeen';\n\nfunction useCalloutStates(): {\n  states: Record<string, boolean>;\n  setState: (key: string, value: boolean) => void;\n} {\n  const [states, setStates] = useState<Record<string, boolean>>(() => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    return raw ? JSON.parse(raw) : {};\n  });\n\n  const setState = useCallback((key: string, value: boolean) => {\n    const raw = localStorage.getItem(STATES_LOCAL_STORAGE_KEY);\n    const oldStates = raw ? JSON.parse(raw) : {};\n    const newStates = { ...oldStates, [key]: value };\n    setStates(newStates);\n    localStorage.setItem(STATES_LOCAL_STORAGE_KEY, JSON.stringify(newStates));\n  }, []);\n\n  return { states, setState };\n}\n\nfunction useCalloutHasBeenSeen(featureId: string): {\n  seen: boolean | undefined;\n  markSeen: () => void;\n} {\n  const { states, setState } = useCalloutStates();\n\n  const markSeen = useCallback(() => {\n    setState(featureId, true);\n  }, [setState, featureId]);\n\n  return { seen: states[featureId] === true, markSeen };\n}\n\nexport function useShowCallout(featureId: string): {\n  show: boolean;\n  hide: () => void;\n} {\n  const { seen, markSeen } = useCalloutHasBeenSeen(featureId);\n  return { show: seen === false, hide: markSeen };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Box from '@material-ui/core/Box';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, {\n  PropsWithChildren,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { createPortal } from 'react-dom';\n\nimport { usePortal } from './lib/usePortal';\nimport { useShowCallout } from './lib/useShowCallout';\n\n/** @public */\nexport type FeatureCalloutCircleClassKey =\n  | '@keyframes pulsateSlightly'\n  | '@keyframes pulsateAndFade'\n  | 'featureWrapper'\n  | 'backdrop'\n  | 'dot'\n  | 'pulseCircle'\n  | 'text';\n\nconst useStyles = makeStyles(\n  theme => ({\n    '@keyframes pulsateSlightly': {\n      '0%': { transform: 'scale(1.0)' },\n      '100%': { transform: 'scale(1.1)' },\n    },\n    '@keyframes pulsateAndFade': {\n      '0%': { transform: 'scale(1.0)', opacity: 0.9 },\n      '100%': { transform: 'scale(1.5)', opacity: 0 },\n    },\n    featureWrapper: {\n      position: 'relative',\n    },\n    backdrop: {\n      zIndex: 2000,\n      position: 'fixed',\n      overflow: 'hidden',\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n    },\n    dot: {\n      position: 'absolute',\n      backgroundColor: 'transparent',\n      borderRadius: '100%',\n      border: '1px solid rgba(103, 146, 180, 0.98)',\n      boxShadow: '0px 0px 0px 20000px rgba(0, 0, 0, 0.5)',\n      zIndex: 2001,\n      transformOrigin: 'center center',\n      animation:\n        '$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite',\n    },\n    pulseCircle: {\n      width: '100%',\n      height: '100%',\n      backgroundColor: 'transparent',\n      borderRadius: '100%',\n      border: `2px solid ${theme.palette.common.white}`,\n      zIndex: 2001,\n      transformOrigin: 'center center',\n      animation:\n        '$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite',\n    },\n    text: {\n      position: 'absolute',\n      color: theme.palette.common.white,\n      zIndex: 2003,\n    },\n  }),\n  { name: 'BackstageFeatureCalloutCircular' },\n);\n\nexport type Props = {\n  featureId: string;\n  title: string;\n  description: string;\n};\n\ntype Placement = {\n  dotLeft: number;\n  dotTop: number;\n  dotSize: number;\n  borderWidth: number;\n  textLeft: number;\n  textTop: number;\n  textWidth: number;\n};\n\n/**\n * One-time, round 'telescope' animation showing new feature.\n *\n * @public\n *\n */\nexport function FeatureCalloutCircular(props: PropsWithChildren<Props>) {\n  const { featureId, title, description, children } = props;\n  const { show, hide } = useShowCallout(featureId);\n  const portalElement = usePortal('core.callout');\n  const wrapperRef = useRef<HTMLDivElement>(null);\n  const [placement, setPlacement] = useState<Placement | undefined>();\n  const classes = useStyles();\n\n  const update = useCallback(() => {\n    if (wrapperRef.current) {\n      const wrapperBounds = wrapperRef.current.getBoundingClientRect();\n      const longest = Math.max(wrapperBounds.width, wrapperBounds.height);\n\n      const borderWidth = 800;\n      const dotLeft =\n        wrapperBounds.x - (longest - wrapperBounds.width) / 2 - borderWidth;\n      const dotTop =\n        wrapperBounds.y - (longest - wrapperBounds.height) / 2 - borderWidth;\n      const dotSize = longest + 2 * borderWidth;\n\n      const textWidth = 450;\n      const textLeft = wrapperBounds.x + wrapperBounds.width / 2 - textWidth;\n      const textTop =\n        wrapperBounds.y - (longest - wrapperBounds.height) / 2 + longest + 20;\n\n      setPlacement({\n        dotLeft,\n        dotTop,\n        dotSize,\n        borderWidth,\n        textTop,\n        textLeft,\n        textWidth,\n      });\n    }\n  }, []);\n\n  useEffect(() => {\n    window.addEventListener('resize', update);\n    window.addEventListener('scroll', update);\n    return () => {\n      window.removeEventListener('resize', update);\n      window.removeEventListener('scroll', update);\n    };\n  }, [update]);\n\n  useLayoutEffect(update, [wrapperRef.current, update]);\n\n  if (!show) {\n    return <>{children}</>;\n  }\n\n  return (\n    <>\n      <Box className={classes.featureWrapper} {...{ ref: wrapperRef }}>\n        {children}\n      </Box>\n      {createPortal(\n        <Box className={classes.backdrop}>\n          <ClickAwayListener onClickAway={hide}>\n            <>\n              <Box\n                className={classes.dot}\n                data-testid=\"dot\"\n                style={{\n                  left: placement?.dotLeft,\n                  top: placement?.dotTop,\n                  width: placement?.dotSize,\n                  height: placement?.dotSize,\n                  borderWidth: placement?.borderWidth,\n                }}\n                onClick={hide}\n                onKeyDown={hide}\n                role=\"button\"\n                tabIndex={0}\n              >\n                <Box className={classes.pulseCircle} />\n              </Box>\n              <Box\n                className={classes.text}\n                data-testid=\"text\"\n                style={{\n                  left: placement?.textLeft,\n                  top: placement?.textTop,\n                  width: placement?.textWidth,\n                }}\n              >\n                <Typography variant=\"h2\" paragraph>\n                  {title}\n                </Typography>\n                <Typography>{description}</Typography>\n              </Box>\n            </>\n          </ClickAwayListener>\n        </Box>,\n        portalElement,\n      )}\n    </>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport classnames from 'classnames';\nimport { makeStyles } from '@material-ui/core/styles';\nimport LinkIcon from '@material-ui/icons/Link';\nimport { Link } from '../Link';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\n\nexport type IconLinkVerticalProps = {\n  color?: 'primary' | 'secondary';\n  disabled?: boolean;\n  href?: string;\n  icon?: React.ReactNode;\n  label: string;\n  onClick?: React.MouseEventHandler<HTMLAnchorElement>;\n  title?: string;\n};\n\n/** @public */\nexport type IconLinkVerticalClassKey =\n  | 'link'\n  | 'disabled'\n  | 'primary'\n  | 'secondary'\n  | 'label';\n\nconst useIconStyles = makeStyles(\n  theme => ({\n    link: {\n      display: 'grid',\n      justifyItems: 'center',\n      gridGap: 4,\n      textAlign: 'center',\n    },\n    disabled: {\n      color: theme.palette.text.secondary,\n      cursor: 'default',\n    },\n    primary: {\n      color: theme.palette.primary.main,\n    },\n    secondary: {\n      color: theme.palette.secondary.main,\n    },\n    label: {\n      textTransform: 'uppercase',\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: 1.2,\n    },\n  }),\n  { name: 'BackstageIconLinkVertical' },\n);\n\n/** @public */\nexport function IconLinkVertical({\n  color = 'primary',\n  disabled = false,\n  href = '#',\n  icon = <LinkIcon />,\n  label,\n  onClick,\n  title,\n}: IconLinkVerticalProps) {\n  const classes = useIconStyles();\n\n  if (disabled) {\n    return (\n      <Box title={title} className={classnames(classes.link, classes.disabled)}>\n        {icon}\n        <Typography\n          variant=\"caption\"\n          component=\"span\"\n          className={classes.label}\n        >\n          {label}\n        </Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Link\n      title={title}\n      className={classnames(classes.link, classes[color])}\n      to={href}\n      onClick={onClick}\n    >\n      {icon}\n      <Typography variant=\"caption\" component=\"span\" className={classes.label}>\n        {label}\n      </Typography>\n    </Link>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\nimport { IconLinkVertical, IconLinkVerticalProps } from './IconLinkVertical';\n\n/** @public */\nexport type HeaderIconLinkRowClassKey = 'links';\n\nconst useStyles = makeStyles(\n  theme => ({\n    links: {\n      margin: theme.spacing(2, 0),\n      display: 'grid',\n      gridAutoFlow: 'column',\n      gridAutoColumns: 'min-content',\n      gridGap: theme.spacing(3),\n    },\n  }),\n  { name: 'BackstageHeaderIconLinkRow' },\n);\n\ntype Props = {\n  links: IconLinkVerticalProps[];\n};\n\n/**\n * HTML nav tag with links mapped inside\n *\n * @public\n *\n */\nexport function HeaderIconLinkRow(props: Props) {\n  const { links } = props;\n  const classes = useStyles();\n  return (\n    <nav className={classes.links}>\n      {links.map((link, index) => (\n        <IconLinkVertical key={index + 1} {...link} />\n      ))}\n    </nav>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport classNames from 'classnames';\nimport React, { PropsWithChildren } from 'react';\n\nconst generateGradientStops = (themeType: 'dark' | 'light') => {\n  // 97% corresponds to the theme.palette.background.default for the light theme\n  // 16% for the dark theme\n  const luminance = themeType === 'dark' ? '16%' : '97%';\n  // Generated with https://larsenwork.com/easing-gradients/\n  return `\n    hsl(0, 0%, ${luminance}) 0%,\n    hsla(0, 0%, ${luminance}, 0.987) 8.1%,\n    hsla(0, 0%, ${luminance}, 0.951) 15.5%,\n    hsla(0, 0%, ${luminance}, 0.896) 22.5%,\n    hsla(0, 0%, ${luminance}, 0.825) 29%,\n    hsla(0, 0%, ${luminance}, 0.741) 35.3%,\n    hsla(0, 0%, ${luminance}, 0.648) 41.2%,\n    hsla(0, 0%, ${luminance}, 0.55) 47.1%,\n    hsla(0, 0%, ${luminance}, 0.45) 52.9%,\n    hsla(0, 0%, ${luminance}, 0.352) 58.8%,\n    hsla(0, 0%, ${luminance}, 0.259) 64.7%,\n    hsla(0, 0%, ${luminance}, 0.175) 71%,\n    hsla(0, 0%, ${luminance}, 0.104) 77.5%,\n    hsla(0, 0%, ${luminance}, 0.049) 84.5%,\n    hsla(0, 0%, ${luminance}, 0.013) 91.9%,\n    hsla(0, 0%, ${luminance}, 0) 100%\n  `;\n};\n\nconst fadeSize = 100;\nconst fadePadding = 10;\n\ntype Props = {\n  scrollStep?: number;\n  scrollSpeed?: number; // lower is faster\n  minScrollDistance?: number; // limits how small steps the scroll can take in px\n};\n\n/** @public */\nexport type HorizontalScrollGridClassKey =\n  | 'root'\n  | 'container'\n  | 'fade'\n  | 'fadeLeft'\n  | 'fadeRight'\n  | 'fadeHidden'\n  | 'button'\n  | 'buttonLeft'\n  | 'buttonRight';\n\nconst useStyles = makeStyles<Theme>(\n  theme => ({\n    root: {\n      position: 'relative',\n      display: 'flex',\n      flexFlow: 'row nowrap',\n      alignItems: 'center',\n    },\n    container: {\n      overflow: 'auto',\n      scrollbarWidth: 0 as any, // hide in FF\n      '&::-webkit-scrollbar': {\n        display: 'none', // hide in Chrome\n      },\n    },\n    fade: {\n      position: 'absolute',\n      width: fadeSize,\n      height: `calc(100% + ${fadePadding}px)`,\n      transition: 'opacity 300ms',\n      pointerEvents: 'none',\n    },\n    fadeLeft: {\n      left: -fadePadding,\n      background: `linear-gradient(90deg, ${generateGradientStops(\n        theme.palette.type,\n      )})`,\n    },\n    fadeRight: {\n      right: -fadePadding,\n      background: `linear-gradient(270deg, ${generateGradientStops(\n        theme.palette.type,\n      )})`,\n    },\n    fadeHidden: {\n      opacity: 0,\n    },\n    button: {\n      position: 'absolute',\n    },\n    buttonLeft: {\n      left: -theme.spacing(2),\n    },\n    buttonRight: {\n      right: -theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageHorizontalScrollGrid' },\n);\n\n// Returns scroll distance from left and right\nfunction useScrollDistance(\n  ref: React.MutableRefObject<HTMLElement | undefined>,\n): [number, number] {\n  const [[scrollLeft, scrollRight], setScroll] = React.useState<\n    [number, number]\n  >([0, 0]);\n\n  React.useLayoutEffect(() => {\n    const el = ref.current;\n    if (!el) {\n      setScroll([0, 0]);\n      return;\n    }\n\n    const handleUpdate = () => {\n      const left = el.scrollLeft;\n      const right = el.scrollWidth - el.offsetWidth - el.scrollLeft;\n      setScroll([left, right]);\n    };\n\n    handleUpdate();\n\n    el.addEventListener('scroll', handleUpdate);\n    window.addEventListener('resize', handleUpdate);\n    // TODO(freben): Remove this eslint exception later\n    // It's here because @types/react-router-dom v5 pulls in @types/react that have the wrong signature\n    // eslint-disable-next-line consistent-return\n    return () => {\n      el.removeEventListener('scroll', handleUpdate);\n      window.removeEventListener('resize', handleUpdate);\n    };\n  }, [ref]);\n\n  return [scrollLeft, scrollRight];\n}\n\n// Used to animate scrolling. Returns a single setScrollTarget function, when called with e.g. 200,\n// the element pointer to by the ref will be scrolled 200px forwards over time.\nfunction useSmoothScroll(\n  ref: React.MutableRefObject<HTMLElement | undefined>,\n  speed: number,\n  minDistance: number,\n) {\n  const [scrollTarget, setScrollTarget] = React.useState<number>(0);\n\n  React.useLayoutEffect(() => {\n    if (scrollTarget === 0) {\n      return;\n    }\n\n    const startTime = window.performance.now();\n    const id = requestAnimationFrame(frameTime => {\n      if (!ref.current) {\n        return;\n      }\n      const frameDuration = frameTime - startTime;\n      const scrollDistance = (Math.abs(scrollTarget) * frameDuration) / speed;\n      const cappedScrollDistance = Math.max(minDistance, scrollDistance);\n      const scrollAmount = cappedScrollDistance * Math.sign(scrollTarget);\n\n      ref.current.scrollBy({ left: scrollAmount });\n\n      const newScrollTarget = scrollTarget - scrollAmount;\n      if (Math.sign(scrollTarget) !== Math.sign(newScrollTarget)) {\n        setScrollTarget(0);\n      } else {\n        setScrollTarget(newScrollTarget);\n      }\n    });\n\n    // TODO(freben): Remove this eslint exception later\n    // It's here because @types/react-router-dom v5 pulls in @types/react that have the wrong signature\n    // eslint-disable-next-line consistent-return\n    return () => cancelAnimationFrame(id);\n  }, [ref, scrollTarget, speed, minDistance]);\n\n  return setScrollTarget;\n}\n\n/**\n * Horizontal scrollable component with arrows to navigate\n *\n * @public\n *\n */\nexport function HorizontalScrollGrid(props: PropsWithChildren<Props>) {\n  const {\n    scrollStep = 100,\n    scrollSpeed = 50,\n    minScrollDistance = 5,\n    children,\n    ...otherProps\n  } = props;\n  const classes = useStyles(props);\n  const ref = React.useRef<HTMLElement>();\n\n  const [scrollLeft, scrollRight] = useScrollDistance(ref);\n  const setScrollTarget = useSmoothScroll(ref, scrollSpeed, minScrollDistance);\n\n  const handleScrollClick = (forwards: boolean) => {\n    const el = ref.current;\n    if (!el) {\n      return;\n    }\n    setScrollTarget(forwards ? scrollStep : -scrollStep);\n  };\n\n  return (\n    <Box {...otherProps} className={classes.root}>\n      <Grid\n        container\n        direction=\"row\"\n        wrap=\"nowrap\"\n        className={classes.container}\n        ref={ref as any}\n      >\n        {children}\n      </Grid>\n      <Box\n        className={classNames(classes.fade, classes.fadeLeft, {\n          [classes.fadeHidden]: scrollLeft === 0,\n        })}\n      />\n      <Box\n        className={classNames(classes.fade, classes.fadeRight, {\n          [classes.fadeHidden]: scrollRight === 0,\n        })}\n      />\n      {scrollLeft > 0 && (\n        <IconButton\n          title=\"Scroll Left\"\n          onClick={() => handleScrollClick(false)}\n          className={classNames(classes.button, classes.buttonLeft, {})}\n        >\n          <ChevronLeftIcon />\n        </IconButton>\n      )}\n      {scrollRight > 0 && (\n        <IconButton\n          title=\"Scroll Right\"\n          onClick={() => handleScrollClick(true)}\n          className={classNames(classes.button, classes.buttonRight, {})}\n        >\n          <ChevronRightIcon />\n        </IconButton>\n      )}\n    </Box>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport CSS from 'csstype';\nimport React from 'react';\n\ntype Props = CSS.Properties & {\n  shorthand?: boolean;\n  alpha?: boolean;\n};\n\nexport type LifecycleClassKey = 'alpha' | 'beta';\n\nconst useStyles = makeStyles(\n  theme => ({\n    alpha: {\n      color: theme.palette.common.white,\n      fontFamily: 'serif',\n      fontWeight: 'normal',\n      fontStyle: 'italic',\n    },\n    beta: {\n      color: '#4d65cc',\n      fontFamily: 'serif',\n      fontWeight: 'normal',\n      fontStyle: 'italic',\n    },\n  }),\n  { name: 'BackstageLifecycle' },\n);\n\nexport function Lifecycle(props: Props) {\n  const classes = useStyles(props);\n  const { shorthand, alpha } = props;\n  return shorthand ? (\n    <Typography\n      component=\"span\"\n      className={classes[alpha ? 'alpha' : 'beta']}\n      style={{ fontSize: '120%' }}\n    >\n      {alpha ? <>&alpha;</> : <>&beta;</>}\n    </Typography>\n  ) : (\n    <Typography component=\"span\" className={classes[alpha ? 'alpha' : 'beta']}>\n      {alpha ? 'Alpha' : 'Beta'}\n    </Typography>\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { lazy, Suspense } from 'react';\nimport { useApp } from '@backstage/core-plugin-api';\n\nconst RealLogViewer = lazy(() =>\n  import('./RealLogViewer').then(m => ({ default: m.RealLogViewer })),\n);\n\n/**\n * The properties for the LogViewer component.\n *\n * @public\n */\nexport interface LogViewerProps {\n  /**\n   * The text of the logs to display.\n   *\n   * The LogViewer component is optimized for appending content at the end of the text.\n   */\n  text: string;\n  /**\n   * Styling overrides for classes within the LogViewer component.\n   */\n  classes?: {\n    root?: string;\n  };\n}\n\n/**\n * A component that displays logs in a scrollable text area.\n *\n * @remarks\n * The LogViewer has support for search and filtering, as well as displaying\n * text content with ANSI color escape codes.\n *\n * Since the LogViewer uses windowing to avoid rendering all contents at once, the\n * log is sized automatically to fill the available vertical space. This means\n * it may often be needed to wrap the LogViewer in a container that provides it\n * with a fixed amount of space.\n *\n * @public\n */\nexport function LogViewer(props: LogViewerProps) {\n  const { Progress } = useApp().getComponents();\n  return (\n    <Suspense fallback={<Progress />}>\n      <RealLogViewer {...props} />\n    </Suspense>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport ReactMarkdown, { Options } from 'react-markdown';\nimport gfm from 'remark-gfm';\nimport React from 'react';\nimport { BackstageTheme } from '@backstage/theme';\nimport { CodeSnippet } from '../CodeSnippet';\nimport { HeadingProps } from 'react-markdown/lib/ast-to-react';\n\nexport type MarkdownContentClassKey = 'markdown';\n\nconst useStyles = makeStyles<BackstageTheme>(\n  theme => ({\n    markdown: {\n      '& table': {\n        borderCollapse: 'collapse',\n        border: `1px solid ${theme.palette.border}`,\n      },\n      '& th, & td': {\n        border: `1px solid ${theme.palette.border}`,\n        padding: theme.spacing(1),\n      },\n      '& td': {\n        wordBreak: 'break-word',\n        overflow: 'hidden',\n        verticalAlign: 'middle',\n        lineHeight: '1',\n        margin: 0,\n        padding: theme.spacing(3, 2, 3, 2.5),\n        borderBottom: 0,\n      },\n      '& th': {\n        backgroundColor: theme.palette.background.paper,\n      },\n      '& tr': {\n        backgroundColor: theme.palette.background.paper,\n      },\n      '& tr:nth-child(odd)': {\n        backgroundColor: theme.palette.background.default,\n      },\n\n      '& a': {\n        color: theme.palette.link,\n      },\n      '& img': {\n        maxWidth: '100%',\n      },\n    },\n  }),\n  { name: 'BackstageMarkdownContent' },\n);\n\ntype Props = {\n  content: string;\n  dialect?: 'gfm' | 'common-mark';\n  linkTarget?: Options['linkTarget'];\n  transformLinkUri?: (href: string) => string;\n  transformImageUri?: (href: string) => string;\n  className?: string;\n};\n\nconst flatten = (text: string, child: any): string => {\n  if (!child) return text;\n\n  return typeof child === 'string'\n    ? text + child\n    : React.Children.toArray(child.props.children).reduce(flatten, text);\n};\n\nconst headingRenderer = ({ level, children }: HeadingProps) => {\n  const childrenArray = React.Children.toArray(children);\n  const text = childrenArray.reduce(flatten, '');\n  const slug = text.toLocaleLowerCase('en-US').replace(/\\W/g, '-');\n  return React.createElement(`h${level}`, { id: slug }, children);\n};\n\nconst components: Options['components'] = {\n  code: ({ inline, className, children, ...props }) => {\n    const text = String(children).replace(/\\n+$/, '');\n    const match = /language-(\\w+)/.exec(className || '');\n    return !inline && match ? (\n      <CodeSnippet language={match[1]} text={text} />\n    ) : (\n      <code className={className} {...props}>\n        {children}\n      </code>\n    );\n  },\n  h1: headingRenderer,\n  h2: headingRenderer,\n  h3: headingRenderer,\n  h4: headingRenderer,\n  h5: headingRenderer,\n  h6: headingRenderer,\n};\n\n/**\n * Renders markdown with the default dialect {@link https://github.github.com/gfm/ | gfm - GitHub flavored Markdown} to backstage theme styled HTML.\n *\n * @remarks\n * If you just want to render to plain {@link https://commonmark.org/ | CommonMark}, set the dialect to `'common-mark'`\n */\nexport function MarkdownContent(props: Props) {\n  const {\n    content,\n    dialect = 'gfm',\n    linkTarget,\n    transformLinkUri,\n    transformImageUri,\n    className,\n  } = props;\n  const classes = useStyles();\n  return (\n    <ReactMarkdown\n      remarkPlugins={dialect === 'gfm' ? [gfm] : []}\n      className={`${classes.markdown} ${className}`}\n      children={content}\n      components={components}\n      linkTarget={linkTarget}\n      transformLinkUri={transformLinkUri}\n      transformImageUri={transformImageUri}\n    />\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport React, { useState } from 'react';\nimport { isError } from '@backstage/errors';\nimport { PendingOAuthRequest } from '@backstage/core-plugin-api';\n\nexport type LoginRequestListItemClassKey = 'root';\n\nconst useItemStyles = makeStyles<Theme>(\n  theme => ({\n    root: {\n      paddingLeft: theme.spacing(3),\n    },\n  }),\n  { name: 'BackstageLoginRequestListItem' },\n);\n\ntype RowProps = {\n  request: PendingOAuthRequest;\n  busy: boolean;\n  setBusy: (busy: boolean) => void;\n};\n\nconst LoginRequestListItem = ({ request, busy, setBusy }: RowProps) => {\n  const classes = useItemStyles();\n  const [error, setError] = useState<string>();\n\n  const handleContinue = async () => {\n    setBusy(true);\n    try {\n      await request.trigger();\n    } catch (e) {\n      setError(isError(e) ? e.message : 'An unspecified error occurred');\n    } finally {\n      setBusy(false);\n    }\n  };\n\n  const IconComponent = request.provider.icon;\n\n  return (\n    <ListItem disabled={busy} classes={{ root: classes.root }}>\n      <ListItemAvatar>\n        <IconComponent fontSize=\"large\" />\n      </ListItemAvatar>\n      <ListItemText\n        primary={request.provider.title}\n        secondary={error && <Typography color=\"error\">{error}</Typography>}\n      />\n      <Button color=\"primary\" variant=\"contained\" onClick={handleContinue}>\n        Log in\n      </Button>\n    </ListItem>\n  );\n};\n\nexport default LoginRequestListItem;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport List from '@material-ui/core/List';\nimport Button from '@material-ui/core/Button';\nimport React, { useMemo, useState } from 'react';\nimport useObservable from 'react-use/lib/useObservable';\nimport LoginRequestListItem from './LoginRequestListItem';\nimport { useApi, oauthRequestApiRef } from '@backstage/core-plugin-api';\nimport Typography from '@material-ui/core/Typography';\n\nexport type OAuthRequestDialogClassKey =\n  | 'dialog'\n  | 'title'\n  | 'contentList'\n  | 'actionButtons';\n\nconst useStyles = makeStyles<Theme>(\n  theme => ({\n    dialog: {\n      paddingTop: theme.spacing(1),\n    },\n    title: {\n      minWidth: 0,\n    },\n    titleHeading: {\n      fontSize: theme.typography.h6.fontSize,\n    },\n    contentList: {\n      padding: 0,\n    },\n    actionButtons: {\n      padding: theme.spacing(2, 0),\n    },\n  }),\n  { name: 'OAuthRequestDialog' },\n);\n\nexport function OAuthRequestDialog(_props: {}) {\n  const classes = useStyles();\n  const [busy, setBusy] = useState(false);\n  const oauthRequestApi = useApi(oauthRequestApiRef);\n  const requests = useObservable(\n    useMemo(() => oauthRequestApi.authRequest$(), [oauthRequestApi]),\n    [],\n  );\n\n  const handleRejectAll = () => {\n    requests.forEach(request => request.reject());\n  };\n\n  return (\n    <Dialog\n      open={Boolean(requests.length)}\n      fullWidth\n      maxWidth=\"xs\"\n      classes={{ paper: classes.dialog }}\n      aria-labelledby=\"oauth-req-dialog-title\"\n    >\n      <main>\n        <DialogTitle\n          classes={{ root: classes.title }}\n          id=\"oauth-req-dialog-title\"\n        >\n          <Typography className={classes.titleHeading} variant=\"h1\">\n            Login Required\n          </Typography>\n        </DialogTitle>\n\n        <DialogContent dividers classes={{ root: classes.contentList }}>\n          <List>\n            {requests.map(request => (\n              <LoginRequestListItem\n                key={request.provider.title}\n                request={request}\n                busy={busy}\n                setBusy={setBusy}\n              />\n            ))}\n          </List>\n        </DialogContent>\n      </main>\n\n      <DialogActions classes={{ root: classes.actionButtons }}>\n        <Button onClick={handleRejectAll}>Reject All</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip, { TooltipProps } from '@material-ui/core/Tooltip';\nimport React, { useState } from 'react';\nimport TextTruncate, { TextTruncateProps } from 'react-text-truncate';\nimport { useIsMounted } from '@react-hookz/web';\n\ntype Props = {\n  text: TextTruncateProps['text'];\n  line?: TextTruncateProps['line'];\n  element?: TextTruncateProps['element'];\n  title?: TooltipProps['title'];\n  placement?: TooltipProps['placement'];\n};\n\nexport type OverflowTooltipClassKey = 'container';\n\nconst useStyles = makeStyles(\n  {\n    container: {\n      overflow: 'visible !important',\n    },\n  },\n  { name: 'BackstageOverflowTooltip' },\n);\n\nexport function OverflowTooltip(props: Props) {\n  const [hover, setHover] = useState(false);\n  const isMounted = useIsMounted();\n  const classes = useStyles();\n\n  const handleToggled = (truncated: boolean) => {\n    if (isMounted()) {\n      setHover(truncated);\n    }\n  };\n\n  return (\n    <Tooltip\n      title={props.title ?? (props.text || '')}\n      placement={props.placement}\n      disableHoverListener={!hover}\n    >\n      <TextTruncate\n        text={props.text}\n        line={props.line}\n        onToggled={handleToggled}\n        containerClassName={classes.container}\n      />\n    </Tooltip>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { BackstageTheme } from '@backstage/theme';\nimport Box from '@material-ui/core/Box';\nimport LinearProgress, {\n  LinearProgressProps,\n} from '@material-ui/core/LinearProgress';\nimport { useTheme } from '@material-ui/core/styles';\nimport React, { PropsWithChildren, useEffect, useState } from 'react';\n\nexport function Progress(props: PropsWithChildren<LinearProgressProps>) {\n  const theme = useTheme<BackstageTheme>();\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    const handle = setTimeout(\n      () => setIsVisible(true),\n      theme.transitions.duration.short,\n    );\n    return () => clearTimeout(handle);\n  }, [theme.transitions.duration.short]);\n\n  return isVisible ? (\n    <LinearProgress {...props} data-testid=\"progress\" />\n  ) : (\n    <Box display=\"none\" />\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BackstageTheme } from '@backstage/theme';\nimport Box from '@material-ui/core/Box';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport ArrowIcon from '@material-ui/icons/ArrowForward';\nimport React from 'react';\nimport { Link } from '../../components/Link';\n\n/** @public */\nexport type BottomLinkClassKey = 'root' | 'boxTitle' | 'arrow';\n\nconst useStyles = makeStyles<BackstageTheme>(\n  theme => ({\n    root: {\n      maxWidth: 'fit-content',\n      padding: theme.spacing(2, 2, 2, 2.5),\n    },\n    boxTitle: {\n      margin: 0,\n      color: theme.palette.textSubtle,\n    },\n    arrow: {\n      color: theme.palette.textSubtle,\n    },\n  }),\n  { name: 'BackstageBottomLink' },\n);\n\n/** @public */\nexport type BottomLinkProps = {\n  link: string;\n  title: string;\n  onClick?: (event: React.MouseEvent<HTMLAnchorElement>) => void;\n};\n\n/**\n * Footer with link used in  {@link InfoCard } and {@link TabbedCard}\n *\n * @public\n *\n */\nexport function BottomLink(props: BottomLinkProps) {\n  const { link, title, onClick } = props;\n  const classes = useStyles();\n\n  return (\n    <Box>\n      <Divider />\n      <Link to={link} onClick={onClick} underline=\"none\">\n        <Box display=\"flex\" alignItems=\"center\" className={classes.root}>\n          <Box className={classes.boxTitle} fontWeight=\"fontWeightBold\" m={1}>\n            <Typography>\n              <strong>{title}</strong>\n            </Typography>\n          </Box>\n          <ArrowIcon className={classes.arrow} />\n        </Box>\n      </Link>\n    </Box>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Typography from '@material-ui/core/Typography';\nimport React, { ComponentClass, Component, ErrorInfo } from 'react';\nimport { LinkButton } from '../../components/LinkButton';\nimport { ErrorPanel } from '../../components/ErrorPanel';\n\ntype SlackChannel = {\n  name: string;\n  href?: string;\n};\n\n/** @public */\nexport type ErrorBoundaryProps = {\n  slackChannel?: string | SlackChannel;\n  onError?: (error: Error, errorInfo: string) => null;\n};\n\ntype State = {\n  error?: Error;\n  errorInfo?: ErrorInfo;\n};\n\nconst SlackLink = (props: { slackChannel?: string | SlackChannel }) => {\n  const { slackChannel } = props;\n\n  if (!slackChannel) {\n    return null;\n  } else if (typeof slackChannel === 'string') {\n    return <Typography>Please contact {slackChannel} for help.</Typography>;\n  } else if (!slackChannel.href) {\n    return (\n      <Typography>Please contact {slackChannel.name} for help.</Typography>\n    );\n  }\n\n  return (\n    <LinkButton to={slackChannel.href} variant=\"contained\">\n      {slackChannel.name}\n    </LinkButton>\n  );\n};\n\n/** @public */\nexport const ErrorBoundary: ComponentClass<\n  ErrorBoundaryProps,\n  State\n> = class ErrorBoundary extends Component<ErrorBoundaryProps, State> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = {\n      error: undefined,\n      errorInfo: undefined,\n    };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    // eslint-disable-next-line no-console\n    console.error(`ErrorBoundary, error: ${error}, info: ${errorInfo}`);\n    this.setState({ error, errorInfo });\n  }\n\n  render() {\n    const { slackChannel, children } = this.props;\n    const { error } = this.state;\n\n    if (!error) {\n      return children;\n    }\n\n    return (\n      <ErrorPanel title=\"Something Went Wrong\" error={error}>\n        <SlackLink slackChannel={slackChannel} />\n      </ErrorPanel>\n    );\n  }\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader, { CardHeaderProps } from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport React, { ReactNode } from 'react';\nimport { BottomLink, BottomLinkProps } from '../BottomLink';\nimport { ErrorBoundary, ErrorBoundaryProps } from '../ErrorBoundary';\n\n/** @public */\nexport type InfoCardClassKey =\n  | 'noPadding'\n  | 'header'\n  | 'headerTitle'\n  | 'headerSubheader'\n  | 'headerAvatar'\n  | 'headerAction'\n  | 'headerContent';\n\nconst useStyles = makeStyles(\n  theme => ({\n    noPadding: {\n      padding: 0,\n      '&:last-child': {\n        paddingBottom: 0,\n      },\n    },\n    header: {\n      padding: theme.spacing(2, 2, 2, 2.5),\n    },\n    headerTitle: {\n      fontWeight: theme.typography.fontWeightBold,\n    },\n    headerSubheader: {\n      paddingTop: theme.spacing(1),\n    },\n    headerAvatar: {},\n    headerAction: {},\n    headerContent: {},\n    subheader: {\n      display: 'flex',\n    },\n  }),\n  { name: 'BackstageInfoCard' },\n);\n\n/** @public */\nexport type CardActionsTopRightClassKey = 'root';\n\nconst CardActionsTopRight = withStyles(\n  theme => ({\n    root: {\n      display: 'inline-block',\n      padding: theme.spacing(8, 8, 0, 0),\n      float: 'right',\n    },\n  }),\n  { name: 'BackstageInfoCardCardActionsTopRight' },\n)(CardActions);\n\nconst VARIANT_STYLES = {\n  card: {\n    flex: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    fullHeight: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n    },\n    gridItem: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: 'calc(100% - 10px)', // for pages without content header\n      marginBottom: '10px',\n    },\n  },\n  cardContent: {\n    fullHeight: {\n      flex: 1,\n    },\n    gridItem: {\n      flex: 1,\n    },\n  },\n};\n\n/** @public */\nexport type InfoCardVariants = 'flex' | 'fullHeight' | 'gridItem';\n\n/**\n * InfoCard is used to display a paper-styled block on the screen, similar to a panel.\n *\n * You can custom style an InfoCard with the 'className' (outer container) and 'cardClassName' (inner container)\n * props. This is typically used with the material-ui makeStyles mechanism.\n *\n * The InfoCard serves as an error boundary. As a result, if you provide an 'errorBoundaryProps' property this\n * specifies the extra information to display in the error component that is displayed if an error occurs\n * in any descendent components.\n *\n * By default the InfoCard has no custom layout of its children, but is treated as a block element. A\n * couple common variants are provided and can be specified via the variant property:\n *\n * When the InfoCard is displayed as a grid item within a grid, you may want items to have the same height for all items.\n * Set to the 'gridItem' variant to display the InfoCard with full height suitable for Grid:\n *\n * `<InfoCard variant=\"gridItem\">...</InfoCard>`\n */\nexport type Props = {\n  title?: ReactNode;\n  subheader?: ReactNode;\n  divider?: boolean;\n  deepLink?: BottomLinkProps;\n  /** @deprecated Use errorBoundaryProps instead */\n  slackChannel?: string;\n  errorBoundaryProps?: ErrorBoundaryProps;\n  variant?: InfoCardVariants;\n  children?: ReactNode;\n  headerStyle?: object;\n  headerProps?: CardHeaderProps;\n  icon?: ReactNode;\n  action?: ReactNode;\n  actionsClassName?: string;\n  actions?: ReactNode;\n  cardClassName?: string;\n  actionsTopRight?: ReactNode;\n  className?: string;\n  noPadding?: boolean;\n  titleTypographyProps?: object;\n};\n\n/**\n * Material-ui card with header , content and actions footer\n *\n * @public\n *\n */\nexport function InfoCard(props: Props): JSX.Element {\n  const {\n    title,\n    subheader,\n    divider = true,\n    deepLink,\n    slackChannel,\n    errorBoundaryProps,\n    variant,\n    children,\n    headerStyle,\n    headerProps,\n    icon,\n    action,\n    actionsClassName,\n    actions,\n    cardClassName,\n    actionsTopRight,\n    className,\n    noPadding,\n    titleTypographyProps,\n  } = props;\n  const classes = useStyles();\n  /**\n   * If variant is specified, we build up styles for that particular variant for both\n   * the Card and the CardContent (since these need to be synced)\n   */\n  let calculatedStyle = {};\n  let calculatedCardStyle = {};\n  if (variant) {\n    const variants = variant.split(/[\\s]+/g);\n    variants.forEach(name => {\n      calculatedStyle = {\n        ...calculatedStyle,\n        ...VARIANT_STYLES.card[name as keyof (typeof VARIANT_STYLES)['card']],\n      };\n      calculatedCardStyle = {\n        ...calculatedCardStyle,\n        ...VARIANT_STYLES.cardContent[\n          name as keyof (typeof VARIANT_STYLES)['cardContent']\n        ],\n      };\n    });\n  }\n\n  const cardSubTitle = () => {\n    if (!subheader && !icon) {\n      return null;\n    }\n\n    return (\n      <div\n        className={classes.headerSubheader}\n        data-testid=\"info-card-subheader\"\n      >\n        {subheader && <div className={classes.subheader}>{subheader}</div>}\n        {icon}\n      </div>\n    );\n  };\n\n  const errProps: ErrorBoundaryProps =\n    errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n\n  return (\n    <Card style={calculatedStyle} className={className}>\n      <ErrorBoundary {...errProps}>\n        {title && (\n          <CardHeader\n            classes={{\n              root: classes.header,\n              title: classes.headerTitle,\n              subheader: classes.headerSubheader,\n              avatar: classes.headerAvatar,\n              action: classes.headerAction,\n              content: classes.headerContent,\n            }}\n            title={title}\n            subheader={cardSubTitle()}\n            action={action}\n            style={{ ...headerStyle }}\n            titleTypographyProps={titleTypographyProps}\n            {...headerProps}\n          />\n        )}\n        {actionsTopRight && (\n          <CardActionsTopRight>{actionsTopRight}</CardActionsTopRight>\n        )}\n        {divider && <Divider />}\n        <CardContent\n          className={classNames(cardClassName, {\n            [classes.noPadding]: noPadding,\n          })}\n          style={calculatedCardStyle}\n        >\n          {children}\n        </CardContent>\n        {actions && (\n          <CardActions className={actionsClassName}>{actions}</CardActions>\n        )}\n        {deepLink && <BottomLink {...deepLink} />}\n      </ErrorBoundary>\n    </Card>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BackstagePalette, BackstageTheme } from '@backstage/theme';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { Circle } from 'rc-progress';\nimport React, { ReactNode, useEffect, useState } from 'react';\nimport Box from '@material-ui/core/Box';\n\n/** @public */\nexport type GaugeClassKey =\n  | 'root'\n  | 'overlay'\n  | 'description'\n  | 'circle'\n  | 'colorUnknown';\n\nconst useStyles = makeStyles<BackstageTheme>(\n  theme => ({\n    root: {\n      position: 'relative',\n      lineHeight: 0,\n    },\n    overlay: {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      transform: 'translate(-50%, -60%)',\n      fontSize: theme.typography.pxToRem(45),\n      fontWeight: theme.typography.fontWeightBold,\n      color: theme.palette.textContrast,\n    },\n    description: {\n      fontSize: '100%',\n      top: '50%',\n      left: '50%',\n      transform: 'translate(-50%, -50%)',\n      position: 'absolute',\n      wordBreak: 'break-all',\n      display: 'inline-block',\n    },\n    circle: {\n      width: '80%',\n      transform: 'translate(10%, 0)',\n    },\n    colorUnknown: {},\n  }),\n  { name: 'BackstageGauge' },\n);\n\n/** @public */\nexport type GaugeProps = {\n  value: number;\n  fractional?: boolean;\n  inverse?: boolean;\n  unit?: string;\n  max?: number;\n  description?: ReactNode;\n  getColor?: GaugePropsGetColor;\n};\n\n/** @public */\nexport type GaugePropsGetColorOptions = {\n  palette: BackstagePalette;\n  value: number;\n  inverse?: boolean;\n  max?: number;\n};\n\n/** @public */\nexport type GaugePropsGetColor = (args: GaugePropsGetColorOptions) => string;\n\nconst defaultGaugeProps = {\n  fractional: true,\n  inverse: false,\n  unit: '%',\n  max: 100,\n};\n\nexport const getProgressColor: GaugePropsGetColor = ({\n  palette,\n  value,\n  inverse,\n  max,\n}) => {\n  if (isNaN(value)) {\n    return '#ddd';\n  }\n\n  const actualMax = max ? max : defaultGaugeProps.max;\n  const actualValue = inverse ? actualMax - value : value;\n\n  if (actualValue < actualMax / 3) {\n    return palette.status.error;\n  } else if (actualValue < actualMax * (2 / 3)) {\n    return palette.status.warning;\n  }\n\n  return palette.status.ok;\n};\n\n/**\n * Circular Progress Bar\n *\n * @public\n *\n */\n\nexport function Gauge(props: GaugeProps) {\n  const [hoverRef, setHoverRef] = useState<HTMLDivElement | null>(null);\n  const { getColor = getProgressColor } = props;\n  const classes = useStyles(props);\n  const { palette } = useTheme<BackstageTheme>();\n  const { value, fractional, inverse, unit, max, description } = {\n    ...defaultGaugeProps,\n    ...props,\n  };\n\n  const asPercentage = fractional ? Math.round(value * max) : value;\n  const asActual = max !== 100 ? Math.round(value) : asPercentage;\n\n  const [isHovering, setIsHovering] = useState(false);\n\n  useEffect(() => {\n    const node = hoverRef;\n    const handleMouseOver = () => setIsHovering(true);\n    const handleMouseOut = () => setIsHovering(false);\n    if (node && description) {\n      node.addEventListener('mouseenter', handleMouseOver);\n      node.addEventListener('mouseleave', handleMouseOut);\n\n      return () => {\n        node.removeEventListener('mouseenter', handleMouseOver);\n        node.removeEventListener('mouseleave', handleMouseOut);\n      };\n    }\n    return () => {\n      setIsHovering(false);\n    };\n  }, [description, hoverRef]);\n\n  return (\n    <Box {...{ ref: setHoverRef }} className={classes.root}>\n      <Circle\n        strokeLinecap=\"butt\"\n        percent={asPercentage}\n        strokeWidth={12}\n        trailWidth={12}\n        strokeColor={getColor({ palette, value: asActual, inverse, max })}\n        className={classes.circle}\n      />\n      {description && isHovering ? (\n        <Box className={classes.description}>{description}</Box>\n      ) : (\n        <Box className={classes.overlay}>\n          {isNaN(value) ? 'N/A' : `${asActual}${unit}`}\n        </Box>\n      )}\n    </Box>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { ReactNode } from 'react';\n\nimport { BottomLinkProps } from '../../layout/BottomLink';\nimport { InfoCard, InfoCardVariants } from '../../layout/InfoCard';\nimport { Gauge, GaugePropsGetColor } from './Gauge';\n\ntype Props = {\n  title: string;\n  subheader?: string;\n  variant?: InfoCardVariants;\n  /** Progress in % specified as decimal, e.g. \"0.23\" */\n  progress: number;\n  description?: ReactNode;\n  icon?: ReactNode;\n  inverse?: boolean;\n  deepLink?: BottomLinkProps;\n  getColor?: GaugePropsGetColor;\n};\n\n/** @public */\nexport type GaugeCardClassKey = 'root';\n\nconst useStyles = makeStyles(\n  {\n    root: {\n      height: '100%',\n      width: 250,\n    },\n  },\n  { name: 'BackstageGaugeCard' },\n);\n\n/**\n * {@link Gauge} with header, subheader and footer\n *\n * @public\n *\n */\nexport function GaugeCard(props: Props) {\n  const classes = useStyles(props);\n  const {\n    title,\n    subheader,\n    progress,\n    inverse,\n    deepLink,\n    description,\n    icon,\n    variant,\n    getColor,\n  } = props;\n\n  const gaugeProps = {\n    inverse,\n    description,\n    getColor,\n    value: progress,\n  };\n\n  return (\n    <Box className={classes.root}>\n      <InfoCard\n        title={title}\n        subheader={subheader}\n        deepLink={deepLink}\n        variant={variant}\n        icon={icon}\n      >\n        <Gauge {...gaugeProps} />\n      </InfoCard>\n    </Box>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { BackstageTheme } from '@backstage/theme';\nimport { useTheme } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport { Line } from 'rc-progress';\nimport React from 'react';\n\nimport { GaugePropsGetColor, getProgressColor } from './Gauge';\n\ntype Props = {\n  /**\n   * Progress value between 0.0 - 1.0.\n   */\n  value: number;\n  getColor?: GaugePropsGetColor;\n};\n\nexport function LinearGauge(props: Props) {\n  const { value, getColor = getProgressColor } = props;\n  const { palette } = useTheme<BackstageTheme>();\n  if (isNaN(value)) {\n    return null;\n  }\n  let percent = Math.round(value * 100 * 100) / 100;\n  if (percent > 100) {\n    percent = 100;\n  }\n  const strokeColor = getColor({\n    palette,\n    value: percent,\n    inverse: false,\n    max: 100,\n  });\n  return (\n    <Tooltip title={`${percent}%`}>\n      <Typography component=\"span\">\n        <Line\n          percent={percent}\n          strokeWidth={4}\n          trailWidth={4}\n          strokeColor={strokeColor}\n        />\n      </Typography>\n    </Tooltip>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n/** @public */\nexport type ClosedDropdownClassKey = 'icon';\n\nconst useStyles = makeStyles(\n  theme =>\n    createStyles({\n      icon: {\n        position: 'absolute',\n        right: theme.spacing(0.5),\n        pointerEvents: 'none',\n      },\n    }),\n  { name: 'BackstageClosedDropdown' },\n);\n\nconst ClosedDropdown = () => {\n  const classes = useStyles();\n  return (\n    <SvgIcon\n      className={classes.icon}\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z\"\n        fill=\"#616161\"\n      />\n    </SvgIcon>\n  );\n};\n\nexport default ClosedDropdown;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport type OpenedDropdownClassKey = 'icon';\n\nconst useStyles = makeStyles(\n  theme =>\n    createStyles({\n      icon: {\n        position: 'absolute',\n        right: theme.spacing(0.5),\n        pointerEvents: 'none',\n      },\n    }),\n  { name: 'BackstageOpenedDropdown' },\n);\n\nconst OpenedDropdown = () => {\n  const classes = useStyles();\n  return (\n    <SvgIcon\n      className={classes.icon}\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path\n        d=\"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z\"\n        fill=\"#616161\"\n      />\n    </SvgIcon>\n  );\n};\n\nexport default OpenedDropdown;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Box from '@material-ui/core/Box';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Chip from '@material-ui/core/Chip';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputBase from '@material-ui/core/InputBase';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  withStyles,\n} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, { useEffect, useState } from 'react';\n\nimport ClosedDropdown from './static/ClosedDropdown';\nimport OpenedDropdown from './static/OpenedDropdown';\n\n/** @public */\nexport type SelectInputBaseClassKey = 'root' | 'input';\n\nconst BootstrapInput = withStyles(\n  (theme: Theme) =>\n    createStyles({\n      root: {\n        'label + &': {\n          marginTop: theme.spacing(3),\n        },\n      },\n      input: {\n        borderRadius: theme.shape.borderRadius,\n        position: 'relative',\n        backgroundColor: theme.palette.background.paper,\n        border: '1px solid #ced4da',\n        fontSize: theme.typography.body1.fontSize,\n        padding: theme.spacing(1.25, 3.25, 1.25, 1.5),\n        transition: theme.transitions.create(['border-color', 'box-shadow']),\n        fontFamily: 'Helvetica Neue',\n        '&:focus': {\n          background: theme.palette.background.paper,\n          borderRadius: theme.shape.borderRadius,\n        },\n      },\n    }),\n  { name: 'BackstageSelectInputBase' },\n)(InputBase);\n\n/** @public */\nexport type SelectClassKey =\n  | 'formControl'\n  | 'label'\n  | 'chips'\n  | 'chip'\n  | 'checkbox'\n  | 'root';\n\nconst useStyles = makeStyles(\n  (theme: Theme) =>\n    createStyles({\n      formControl: {\n        margin: `${theme.spacing(1)} 0px`,\n        maxWidth: 300,\n      },\n      label: {\n        transform: 'initial',\n        fontWeight: 'bold',\n        fontSize: theme.typography.body2.fontSize,\n        fontFamily: theme.typography.fontFamily,\n        color: theme.palette.text.primary,\n        '&.Mui-focused': {\n          color: theme.palette.text.primary,\n        },\n      },\n      formLabel: {\n        transform: 'initial',\n        fontWeight: 'bold',\n        fontSize: theme.typography.body2.fontSize,\n        fontFamily: theme.typography.fontFamily,\n        color: theme.palette.text.primary,\n        '&.Mui-focused': {\n          color: theme.palette.text.primary,\n        },\n      },\n      chips: {\n        display: 'flex',\n        flexWrap: 'wrap',\n      },\n      chip: {\n        margin: 2,\n      },\n      checkbox: {},\n\n      root: {\n        display: 'flex',\n        flexDirection: 'column',\n      },\n    }),\n  { name: 'BackstageSelect' },\n);\n\n/** @public */\nexport type SelectItem = {\n  label: string;\n  value: string | number;\n};\n\n/** @public */\nexport type SelectedItems = string | string[] | number | number[];\n\nexport type SelectProps = {\n  multiple?: boolean;\n  items: SelectItem[];\n  label: string;\n  placeholder?: string;\n  selected?: SelectedItems;\n  onChange: (arg: SelectedItems) => void;\n  triggerReset?: boolean;\n  native?: boolean;\n  disabled?: boolean;\n  margin?: 'dense' | 'none';\n};\n\n/** @public */\nexport function SelectComponent(props: SelectProps) {\n  const {\n    multiple,\n    items,\n    label,\n    placeholder,\n    selected,\n    onChange,\n    triggerReset,\n    native = false,\n    disabled = false,\n    margin,\n  } = props;\n  const classes = useStyles();\n  const [value, setValue] = useState<SelectedItems>(\n    selected || (multiple ? [] : ''),\n  );\n  const [isOpen, setOpen] = useState(false);\n\n  useEffect(() => {\n    setValue(multiple ? [] : '');\n  }, [triggerReset, multiple]);\n\n  useEffect(() => {\n    if (selected !== undefined) {\n      setValue(selected);\n    }\n  }, [selected]);\n\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    setValue(event.target.value as SelectedItems);\n    onChange(event.target.value as SelectedItems);\n  };\n\n  const handleClick = (event: React.ChangeEvent<any>) => {\n    if (disabled) {\n      event.preventDefault();\n      return;\n    }\n    setOpen(previous => {\n      if (multiple && !(event.target instanceof HTMLElement)) {\n        return true;\n      }\n      return !previous;\n    });\n  };\n\n  const handleClickAway = () => {\n    setOpen(false);\n  };\n\n  const handleDelete = (selectedValue: string | number) => () => {\n    const newValue = (value as any[]).filter(chip => chip !== selectedValue);\n    setValue(newValue);\n    onChange(newValue);\n  };\n\n  return (\n    <Box className={classes.root}>\n      <ClickAwayListener onClickAway={handleClickAway}>\n        <FormControl className={classes.formControl}>\n          <InputLabel className={classes.formLabel}>{label}</InputLabel>\n          <Select\n            aria-label={label}\n            value={value}\n            native={native}\n            disabled={disabled}\n            data-testid=\"select\"\n            displayEmpty\n            multiple={multiple}\n            margin={margin}\n            onChange={handleChange}\n            onClick={handleClick}\n            open={isOpen}\n            input={<BootstrapInput />}\n            label={label}\n            tabIndex={0}\n            renderValue={s =>\n              multiple && (value as any[]).length !== 0 ? (\n                <Box className={classes.chips}>\n                  {(s as string[]).map(selectedValue => (\n                    <Chip\n                      key={items.find(el => el.value === selectedValue)?.value}\n                      label={\n                        items.find(el => el.value === selectedValue)?.label\n                      }\n                      clickable\n                      onDelete={handleDelete(selectedValue)}\n                      className={classes.chip}\n                    />\n                  ))}\n                </Box>\n              ) : (\n                <Typography>\n                  {(value as any[]).length === 0\n                    ? placeholder || ''\n                    : items.find(el => el.value === s)?.label}\n                </Typography>\n              )\n            }\n            IconComponent={() =>\n              !isOpen ? <ClosedDropdown /> : <OpenedDropdown />\n            }\n            MenuProps={{\n              anchorOrigin: {\n                vertical: 'bottom',\n                horizontal: 'left',\n              },\n              transformOrigin: {\n                vertical: 'top',\n                horizontal: 'left',\n              },\n              getContentAnchorEl: null,\n            }}\n          >\n            {placeholder && !multiple && (\n              <MenuItem value={[]}>{placeholder}</MenuItem>\n            )}\n            {native\n              ? items &&\n                items.map(item => (\n                  <option value={item.value} key={item.value}>\n                    {item.label}\n                  </option>\n                ))\n              : items &&\n                items.map(item => (\n                  <MenuItem key={item.value} value={item.value}>\n                    {multiple && (\n                      <Checkbox\n                        color=\"primary\"\n                        checked={(value as any[]).includes(item.value) || false}\n                        className={classes.checkbox}\n                      />\n                    )}\n                    {item.label}\n                  </MenuItem>\n                ))}\n          </Select>\n        </FormControl>\n      </ClickAwayListener>\n    </Box>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, {\n  Children,\n  isValidElement,\n  useState,\n  useEffect,\n  PropsWithChildren,\n} from 'react';\nimport MuiStepper from '@material-ui/core/Stepper';\n\ntype InternalState = {\n  stepperLength: number;\n  stepIndex: number;\n  setStepIndex: any;\n  stepHistory: number[];\n  setStepHistory: any;\n  onStepChange?: (prevIndex: number, nextIndex: number) => void;\n};\n\nconst noop = () => {};\nexport const VerticalStepperContext = React.createContext<InternalState>({\n  stepperLength: 0,\n  stepIndex: 0,\n  setStepIndex: noop,\n  stepHistory: [],\n  setStepHistory: noop,\n  onStepChange: noop,\n});\n\nexport interface StepperProps {\n  elevated?: boolean;\n  onStepChange?: (prevIndex: number, nextIndex: number) => void;\n  activeStep?: number;\n}\n\nexport function SimpleStepper(props: PropsWithChildren<StepperProps>) {\n  const { children, elevated, onStepChange, activeStep = 0 } = props;\n  const [stepIndex, setStepIndex] = useState<number>(activeStep);\n  const [stepHistory, setStepHistory] = useState<number[]>([0]);\n\n  useEffect(() => {\n    setStepIndex(activeStep);\n  }, [activeStep]);\n\n  const steps: React.ReactNode[] = [];\n  let endStep;\n  Children.forEach(children, child => {\n    if (isValidElement(child)) {\n      if (child.props.end) {\n        endStep = child;\n      } else {\n        steps.push(child);\n      }\n    }\n  });\n\n  return (\n    <>\n      <VerticalStepperContext.Provider\n        value={{\n          stepIndex,\n          setStepIndex,\n          stepHistory,\n          setStepHistory,\n          onStepChange,\n          stepperLength: Children.count(children),\n        }}\n      >\n        <MuiStepper\n          activeStep={stepIndex}\n          orientation=\"vertical\"\n          elevation={elevated ? 2 : 0}\n        >\n          {steps}\n        </MuiStepper>\n      </VerticalStepperContext.Provider>\n      {stepIndex >= Children.count(children) - 1 && endStep}\n    </>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { PropsWithChildren, ReactNode, useContext } from 'react';\n\nimport { VerticalStepperContext } from './SimpleStepper';\nimport { StepActions } from './types';\n\nexport type SimpleStepperFooterClassKey = 'root';\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      marginTop: theme.spacing(3),\n      '& button': {\n        marginRight: theme.spacing(1),\n      },\n    },\n  }),\n  { name: 'BackstageSimpleStepperFooter' },\n);\n\ninterface CommonBtnProps {\n  text?: string;\n  handleClick?: () => void;\n  stepIndex: number;\n}\ninterface RestartBtnProps extends CommonBtnProps {}\n\ninterface NextBtnProps extends CommonBtnProps {\n  disabled?: boolean;\n  last?: boolean;\n  stepIndex: number;\n}\ninterface SkipBtnProps extends CommonBtnProps {\n  disabled?: boolean;\n  stepIndex: number;\n}\ninterface BackBtnProps extends CommonBtnProps {\n  disabled?: boolean;\n  stepIndex: number;\n}\nexport const RestartBtn = ({ text, handleClick }: RestartBtnProps) => (\n  <Button onClick={handleClick}>{text || 'Reset'}</Button>\n);\n\nconst NextBtn = ({\n  text,\n  handleClick,\n  disabled,\n  last,\n  stepIndex,\n}: NextBtnProps) => (\n  <Button\n    variant=\"contained\"\n    color=\"primary\"\n    disabled={disabled}\n    data-testid={`nextButton-${stepIndex}`}\n    onClick={handleClick}\n  >\n    {text || (last ? 'Finish' : 'Next')}\n  </Button>\n);\n\nconst SkipBtn = ({ text, handleClick, disabled, stepIndex }: SkipBtnProps) => (\n  <Button\n    variant=\"outlined\"\n    color=\"primary\"\n    disabled={disabled}\n    data-testid={`skipButton-${stepIndex}`}\n    onClick={handleClick}\n  >\n    {text || 'Skip'}\n  </Button>\n);\n\nconst BackBtn = ({ text, handleClick, disabled, stepIndex }: BackBtnProps) => (\n  <Button\n    onClick={handleClick}\n    data-testid={`backButton-${stepIndex}`}\n    disabled={disabled}\n  >\n    {text || 'Back'}\n  </Button>\n);\n\nexport type SimpleStepperFooterProps = {\n  actions?: StepActions;\n  children?: ReactNode;\n};\n\nexport const SimpleStepperFooter = ({\n  actions = {},\n  children,\n}: PropsWithChildren<SimpleStepperFooterProps>) => {\n  const classes = useStyles();\n  const {\n    stepperLength,\n    stepIndex,\n    setStepIndex,\n    stepHistory,\n    setStepHistory,\n    onStepChange,\n  } = useContext(VerticalStepperContext);\n\n  const onChange = (newIndex: number, callback?: () => void) => {\n    if (callback) {\n      callback();\n    }\n    if (onStepChange) {\n      onStepChange(stepIndex, newIndex);\n    }\n\n    setStepIndex(newIndex);\n  };\n\n  const handleNext = () => {\n    const newIndex = actions.nextStep\n      ? actions.nextStep(stepIndex, stepperLength - 1)\n      : stepIndex + 1;\n    onChange(newIndex, actions.onNext);\n    setStepHistory([...stepHistory, newIndex]);\n  };\n  const handleBack = () => {\n    stepHistory.pop();\n    onChange(stepHistory[stepHistory.length - 1], actions.onBack);\n    setStepHistory([...stepHistory]);\n  };\n  const handleRestart = () => {\n    onChange(0, actions.onRestart);\n    setStepHistory([0]);\n  };\n\n  return (\n    <Box className={classes.root}>\n      {[undefined, true].includes(actions.showBack) && stepIndex !== 0 && (\n        <BackBtn\n          text={actions.backText}\n          handleClick={handleBack}\n          disabled={stepIndex === 0}\n          stepIndex={stepIndex}\n        />\n      )}\n      {actions.showSkip && (\n        <SkipBtn\n          text={actions.skipText}\n          handleClick={handleNext}\n          disabled={\n            (!!stepperLength && stepIndex >= stepperLength) ||\n            (!!actions.canSkip && !actions.canSkip())\n          }\n          stepIndex={stepIndex}\n        />\n      )}\n      {[undefined, true].includes(actions.showNext) && (\n        <NextBtn\n          text={actions.nextText}\n          handleClick={handleNext}\n          disabled={\n            (!!stepperLength && stepIndex >= stepperLength) ||\n            (!!actions.canNext && !actions.canNext())\n          }\n          stepIndex={stepIndex}\n        />\n      )}\n      {actions.showRestart && stepIndex !== 0 && (\n        <RestartBtn\n          text={actions.restartText}\n          handleClick={handleRestart}\n          stepIndex={stepIndex}\n        />\n      )}\n      {children}\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Box from '@material-ui/core/Box';\nimport MuiStep from '@material-ui/core/Step';\nimport StepContent from '@material-ui/core/StepContent';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, { PropsWithChildren } from 'react';\n\nimport { SimpleStepperFooter } from './SimpleStepperFooter';\nimport { StepProps } from './types';\n\nexport type SimpleStepperStepClassKey = 'end';\n\nconst useStyles = makeStyles(\n  theme => ({\n    end: {\n      padding: theme.spacing(3),\n    },\n  }),\n  { name: 'SimpleStepperStep' },\n);\n\nexport function SimpleStepperStep(props: PropsWithChildren<StepProps>) {\n  const { title, children, end, actions, ...muiProps } = props;\n  const classes = useStyles();\n\n  // The end step is not a part of the stepper\n  // It simply is the final screen with an option to have buttons such as reset or back\n  return end ? (\n    <Box className={classes.end}>\n      <Typography variant=\"h6\">{title}</Typography>\n      {children}\n      <SimpleStepperFooter actions={{ ...(actions || {}), showNext: false }} />\n    </Box>\n  ) : (\n    <MuiStep {...muiProps}>\n      <StepLabel>\n        <Typography variant=\"h6\">{title}</Typography>\n      </StepLabel>\n      <StepContent>\n        {children}\n        <SimpleStepperFooter actions={actions} />\n      </StepContent>\n    </MuiStep>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { BackstageTheme } from '@backstage/theme';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport classNames from 'classnames';\nimport React, { PropsWithChildren } from 'react';\n\nexport type StatusClassKey =\n  | 'status'\n  | 'ok'\n  | 'warning'\n  | 'error'\n  | 'pending'\n  | 'running'\n  | 'aborted';\n\nconst useStyles = makeStyles<BackstageTheme>(\n  theme => ({\n    status: {\n      fontWeight: theme.typography.fontWeightMedium,\n      '&::before': {\n        width: '0.7em',\n        height: '0.7em',\n        display: 'inline-block',\n        marginRight: theme.spacing(1),\n        borderRadius: '50%',\n        content: '\"\"',\n      },\n    },\n    ok: {\n      '&::before': {\n        backgroundColor: theme.palette.status.ok,\n      },\n    },\n    warning: {\n      '&::before': {\n        backgroundColor: theme.palette.status.warning,\n      },\n    },\n    error: {\n      '&::before': {\n        backgroundColor: theme.palette.status.error,\n      },\n    },\n    pending: {\n      '&::before': {\n        backgroundColor: theme.palette.status.pending,\n      },\n    },\n    running: {\n      '&::before': {\n        backgroundColor: theme.palette.status.running,\n      },\n    },\n    aborted: {\n      '&::before': {\n        backgroundColor: theme.palette.status.aborted,\n      },\n    },\n  }),\n  { name: 'BackstageStatus' },\n);\n\nexport function StatusOK(props: PropsWithChildren<{}>) {\n  const classes = useStyles(props);\n  return (\n    <Typography\n      component=\"span\"\n      className={classNames(classes.status, classes.ok)}\n      aria-label=\"Status ok\"\n      aria-hidden=\"true\"\n      {...props}\n    />\n  );\n}\n\nexport function StatusWarning(props: PropsWithChildren<{}>) {\n  const classes = useStyles(props);\n  return (\n    <Typography\n      component=\"span\"\n      className={classNames(classes.status, classes.warning)}\n      aria-label=\"Status warning\"\n      aria-hidden=\"true\"\n      {...props}\n    />\n  );\n}\n\nexport function StatusError(props: PropsWithChildren<{}>) {\n  const classes = useStyles(props);\n  return (\n    <Typography\n      component=\"span\"\n      className={classNames(classes.status, classes.error)}\n      aria-label=\"Status error\"\n      aria-hidden=\"true\"\n      {...props}\n    />\n  );\n}\n\nexport function StatusPending(props: PropsWithChildren<{}>) {\n  const classes = useStyles(props);\n  return (\n    <Typography\n      component=\"span\"\n      className={classNames(classes.status, classes.pending)}\n      aria-label=\"Status pending\"\n      aria-hidden=\"true\"\n      {...props}\n    />\n  );\n}\n\nexport function StatusRunning(props: PropsWithChildren<{}>) {\n  const classes = useStyles(props);\n  return (\n    <Typography\n      component=\"span\"\n      className={classNames(classes.status, classes.running)}\n      aria-label=\"Status running\"\n      aria-hidden=\"true\"\n      {...props}\n    />\n  );\n}\n\nexport function StatusAborted(props: PropsWithChildren<{}>) {\n  const classes = useStyles(props);\n  return (\n    <Typography\n      component=\"span\"\n      className={classNames(classes.status, classes.aborted)}\n      aria-label=\"Status aborted\"\n      aria-hidden=\"true\"\n      {...props}\n    />\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport {\n  createStyles,\n  Theme,\n  WithStyles,\n  withStyles,\n} from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport React from 'react';\n\nexport type MetadataTableTitleCellClassKey = 'root';\n\nconst tableTitleCellStyles = (theme: Theme) =>\n  createStyles({\n    root: {\n      fontWeight: theme.typography.fontWeightBold,\n      whiteSpace: 'nowrap',\n      paddingRight: theme.spacing(4),\n      border: '0',\n      verticalAlign: 'top',\n    },\n  });\n\nexport type MetadataTableCellClassKey = 'root';\n\nconst tableContentCellStyles = {\n  root: {\n    border: '0',\n    verticalAlign: 'top',\n  },\n};\n\nexport type MetadataTableListClassKey = 'root';\n\nconst listStyles = (theme: Theme) =>\n  createStyles({\n    root: {\n      margin: theme.spacing(0, 0, -1, 0),\n    },\n  });\n\nexport type MetadataTableListItemClassKey = 'root' | 'random';\n\nconst listItemStyles = (theme: Theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(0, 0, 1, 0),\n    },\n    random: {},\n  });\n\nconst TitleCell = withStyles(tableTitleCellStyles, {\n  name: 'BackstageMetadataTableTitleCell',\n})(TableCell);\nconst ContentCell = withStyles(tableContentCellStyles, {\n  name: 'BackstageMetadataTableCell',\n})(TableCell);\n\nexport const MetadataTable = ({\n  dense,\n  children,\n}: {\n  dense?: boolean;\n  children: React.ReactNode;\n}) => (\n  <Table size={dense ? 'small' : 'medium'}>\n    <TableBody>{children}</TableBody>\n  </Table>\n);\n\nexport const MetadataTableItem = ({\n  title,\n  children,\n  ...rest\n}: {\n  title: string;\n  children: React.ReactNode;\n}) => (\n  <TableRow>\n    {title && <TitleCell>{title}</TitleCell>}\n    <ContentCell colSpan={title ? 1 : 2} {...rest}>\n      {children}\n    </ContentCell>\n  </TableRow>\n);\n\ninterface StyleProps extends WithStyles {\n  children?: React.ReactNode;\n}\n\nexport const MetadataList = withStyles(listStyles, {\n  name: 'BackstageMetadataTableList',\n})(({ classes, children }: StyleProps) => (\n  <List disablePadding className={classes.root}>\n    {children}\n  </List>\n));\n\nexport const MetadataListItem = withStyles(listItemStyles, {\n  name: 'BackstageMetadataTableListItem',\n})(({ classes, children }: StyleProps) => (\n  <ListItem className={classes.root}>{children}</ListItem>\n));\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { Fragment, ReactElement } from 'react';\nimport {\n  withStyles,\n  createStyles,\n  WithStyles,\n  Theme,\n} from '@material-ui/core/styles';\nimport startCase from 'lodash/startCase';\nimport Typography from '@material-ui/core/Typography';\n\nimport {\n  MetadataTable,\n  MetadataTableItem,\n  MetadataList,\n  MetadataListItem,\n} from './MetadataTable';\n\nexport type StructuredMetadataTableListClassKey = 'root';\n\nconst listStyle = createStyles({\n  root: {\n    margin: '0 0',\n    listStyleType: 'none',\n  },\n});\n\nexport type StructuredMetadataTableNestedListClassKey = 'root';\n\nconst nestedListStyle = (theme: Theme) =>\n  createStyles({\n    root: {\n      ...listStyle.root,\n      paddingLeft: theme.spacing(1),\n    },\n  });\n\ninterface StyleProps extends WithStyles {\n  children?: React.ReactNode;\n}\n// Sub Components\nconst StyledList = withStyles(listStyle, {\n  name: 'BackstageStructuredMetadataTableList',\n})(({ classes, children }: StyleProps) => (\n  <MetadataList classes={classes}>{children}</MetadataList>\n));\nconst StyledNestedList = withStyles(nestedListStyle, {\n  name: 'BackstageStructuredMetadataTableNestedList',\n})(({ classes, children }: StyleProps) => (\n  <MetadataList classes={classes}>{children}</MetadataList>\n));\n\nfunction renderList(list: Array<any>, nested?: boolean) {\n  const values = list.map((item: any, index: number) => (\n    <MetadataListItem key={index}>{toValue(item)}</MetadataListItem>\n  ));\n  return nested ? (\n    <StyledNestedList>{values}</StyledNestedList>\n  ) : (\n    <StyledList>{values}</StyledList>\n  );\n}\n\nfunction renderMap(\n  map: { [key: string]: any },\n  nested?: boolean,\n  options?: any,\n) {\n  const values = Object.keys(map).map(key => {\n    const value = toValue(map[key], true);\n    const fmtKey =\n      options && options.titleFormat\n        ? options.titleFormat(key)\n        : startCase(key);\n    return (\n      <MetadataListItem key={key}>\n        <Typography variant=\"body2\" component=\"span\">\n          {`${fmtKey}: `}\n        </Typography>\n        {value}\n      </MetadataListItem>\n    );\n  });\n\n  return nested ? (\n    <StyledNestedList>{values}</StyledNestedList>\n  ) : (\n    <StyledList>{values}</StyledList>\n  );\n}\n\nfunction toValue(\n  value: ReactElement | object | Array<any> | boolean,\n  options?: any,\n  nested?: boolean,\n) {\n  if (React.isValidElement(value)) {\n    return <Fragment>{value}</Fragment>;\n  }\n\n  if (typeof value === 'object' && !Array.isArray(value)) {\n    return renderMap(value, options, nested);\n  }\n\n  if (Array.isArray(value)) {\n    return renderList(value, nested);\n  }\n\n  if (typeof value === 'boolean') {\n    return <Fragment>{value ? '✅' : '❌'}</Fragment>;\n  }\n\n  return (\n    <Typography variant=\"body2\" component=\"span\">\n      {value}\n    </Typography>\n  );\n}\nconst ItemValue = ({ value, options }: { value: any; options: any }) => (\n  <Fragment>{toValue(value, options)}</Fragment>\n);\n\nconst TableItem = ({\n  title,\n  value,\n  options,\n}: {\n  title: string;\n  value: any;\n  options: any;\n}) => {\n  return (\n    <MetadataTableItem\n      title={\n        options && options.titleFormat\n          ? options.titleFormat(title)\n          : startCase(title)\n      }\n    >\n      <ItemValue value={value} options={options} />\n    </MetadataTableItem>\n  );\n};\n\nfunction mapToItems(info: { [key: string]: string }, options: any) {\n  return Object.keys(info).map(key => (\n    <TableItem key={key} title={key} value={info[key]} options={options} />\n  ));\n}\n\ntype Props = {\n  metadata: { [key: string]: any };\n  dense?: boolean;\n  options?: any;\n};\n\nexport function StructuredMetadataTable(props: Props) {\n  const { metadata, dense = true, options } = props;\n  const metadataItems = mapToItems(metadata, options || {});\n  return <MetadataTable dense={dense}>{metadataItems}</MetadataTable>;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isEqual } from 'lodash';\nimport qs from 'qs';\nimport { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { useDebouncedEffect } from '@react-hookz/web';\n\nfunction stringify(queryParams: any): string {\n  // Even though these setting don't look nice (e.g. escaped brackets), we should keep\n  // them this way. The current syntax handles all cases, including variable types with\n  // arrays or strings.\n  return qs.stringify(queryParams, {\n    strictNullHandling: true,\n  });\n}\n\nfunction parse(queryString: string): any {\n  return qs.parse(queryString, {\n    ignoreQueryPrefix: true,\n    strictNullHandling: true,\n  });\n}\n\nfunction extractState(queryString: string, stateName: string): any | undefined {\n  const queryParams = parse(queryString);\n\n  return queryParams[stateName];\n}\n\nfunction joinQueryString(\n  queryString: string,\n  stateName: string,\n  state: any,\n): string {\n  const queryParams = {\n    ...parse(queryString),\n    [stateName]: state,\n  };\n  return stringify(queryParams);\n}\n\ntype SetQueryParams<T> = (params: T) => void;\n\nexport function useQueryParamState<T>(\n  stateName: string,\n  /** @deprecated Don't configure a custom debouceTime */\n  debounceTime: number = 250,\n): [T | undefined, SetQueryParams<T>] {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const searchParamsString = searchParams.toString();\n  const [queryParamState, setQueryParamState] = useState<T>(\n    extractState(searchParamsString, stateName),\n  );\n\n  useEffect(() => {\n    const newState = extractState(searchParamsString, stateName);\n\n    setQueryParamState(oldState =>\n      isEqual(newState, oldState) ? oldState : newState,\n    );\n  }, [searchParamsString, setQueryParamState, stateName]);\n\n  useDebouncedEffect(\n    () => {\n      const queryString = joinQueryString(\n        searchParamsString,\n        stateName,\n        queryParamState,\n      );\n\n      if (searchParamsString !== queryString) {\n        setSearchParams(queryString, { replace: true });\n      }\n    },\n    [setSearchParams, queryParamState, searchParamsString, stateName],\n    debounceTime,\n  );\n\n  return [queryParamState, setQueryParamState];\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApiHolder, configApiRef } from '@backstage/core-plugin-api';\n\nexport type SupportItemLink = {\n  url: string;\n  title: string;\n};\n\nexport type SupportItem = {\n  title: string;\n  icon?: string;\n  links: SupportItemLink[];\n};\n\nexport type SupportConfig = {\n  url: string;\n  items: SupportItem[];\n};\n\nconst DEFAULT_SUPPORT_CONFIG: SupportConfig = {\n  url: 'https://github.com/backstage/backstage/issues',\n  items: [\n    {\n      title: 'Support Not Configured',\n      icon: 'warning',\n      links: [\n        {\n          // TODO: Update to dedicated support page on backstage.io/docs\n          title: 'Add `app.support` config key',\n          url: 'https://github.com/backstage/backstage/blob/master/app-config.yaml',\n        },\n      ],\n    },\n  ],\n};\n\nexport function useSupportConfig(): SupportConfig {\n  const apiHolder = useApiHolder();\n  const config = apiHolder.get(configApiRef);\n  const supportConfig = config?.getOptionalConfig('app.support');\n\n  if (!supportConfig) {\n    return DEFAULT_SUPPORT_CONFIG;\n  }\n\n  return {\n    url: supportConfig.getString('url'),\n    items: supportConfig.getConfigArray('items').flatMap(itemConf => ({\n      title: itemConf.getString('title'),\n      icon: itemConf.getOptionalString('icon'),\n      links: (itemConf.getOptionalConfigArray('links') ?? []).flatMap(\n        linkConf => ({\n          url: linkConf.getString('url'),\n          title: linkConf.getString('title'),\n        }),\n      ),\n    })),\n  };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { IconComponent, useApp } from '@backstage/core-plugin-api';\nimport MuiBrokenImageIcon from '@material-ui/icons/BrokenImage';\nimport React, { ComponentProps } from 'react';\n\ntype IconComponentProps = ComponentProps<IconComponent>;\n\nfunction useSystemIcon(key: string, props: IconComponentProps) {\n  const app = useApp();\n  const Icon = app.getSystemIcon(key);\n  return Icon ? <Icon {...props} /> : <MuiBrokenImageIcon {...props} />;\n}\n\n// Should match the list of overridable system icon keys in @backstage/core-app-api\n/**\n * Broken Image Icon\n *\n * @public\n *\n */\nexport function BrokenImageIcon(props: IconComponentProps) {\n  return useSystemIcon('brokenImage', props);\n}\n/** @public */\nexport function CatalogIcon(props: IconComponentProps) {\n  return useSystemIcon('catalog', props);\n}\n/** @public */\nexport function ChatIcon(props: IconComponentProps) {\n  return useSystemIcon('chat', props);\n}\n/** @public */\nexport function DashboardIcon(props: IconComponentProps) {\n  return useSystemIcon('dashboard', props);\n}\n/** @public */\nexport function DocsIcon(props: IconComponentProps) {\n  return useSystemIcon('docs', props);\n}\n/** @public */\nexport function EmailIcon(props: IconComponentProps) {\n  return useSystemIcon('email', props);\n}\n/** @public */\nexport function GitHubIcon(props: IconComponentProps) {\n  return useSystemIcon('github', props);\n}\n/** @public */\nexport function GroupIcon(props: IconComponentProps) {\n  return useSystemIcon('group', props);\n}\n/** @public */\nexport function HelpIcon(props: IconComponentProps) {\n  return useSystemIcon('help', props);\n}\n/** @public */\nexport function UserIcon(props: IconComponentProps) {\n  return useSystemIcon('user', props);\n}\n/** @public */\nexport function WarningIcon(props: IconComponentProps) {\n  return useSystemIcon('warning', props);\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useApp } from '@backstage/core-plugin-api';\nimport { BackstageTheme } from '@backstage/theme';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Popover from '@material-ui/core/Popover';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport React, { MouseEventHandler, useState } from 'react';\nimport { SupportItem, SupportItemLink, useSupportConfig } from '../../hooks';\nimport { HelpIcon } from '../../icons';\nimport { Link } from '../Link';\n\ntype SupportButtonProps = {\n  title?: string;\n  items?: SupportItem[];\n  children?: React.ReactNode;\n};\n\nexport type SupportButtonClassKey = 'popoverList';\n\nconst useStyles = makeStyles(\n  {\n    popoverList: {\n      minWidth: 260,\n      maxWidth: 400,\n    },\n  },\n  { name: 'BackstageSupportButton' },\n);\n\nconst SupportIcon = ({ icon }: { icon: string | undefined }) => {\n  const app = useApp();\n  const Icon = icon ? app.getSystemIcon(icon) ?? HelpIcon : HelpIcon;\n  return <Icon />;\n};\n\nconst SupportLink = ({ link }: { link: SupportItemLink }) => (\n  <Link to={link.url}>{link.title ?? link.url}</Link>\n);\n\nconst SupportListItem = ({ item }: { item: SupportItem }) => {\n  return (\n    <ListItem>\n      <ListItemIcon>\n        <SupportIcon icon={item.icon} />\n      </ListItemIcon>\n      <ListItemText\n        primary={item.title}\n        secondary={item.links?.reduce<React.ReactNode[]>(\n          (prev, link, idx) => [\n            ...prev,\n            idx > 0 && <br key={idx} />,\n            <SupportLink link={link} key={link.url} />,\n          ],\n          [],\n        )}\n      />\n    </ListItem>\n  );\n};\n\nexport function SupportButton(props: SupportButtonProps) {\n  const { title, items, children } = props;\n  const { items: configItems } = useSupportConfig();\n\n  const [popoverOpen, setPopoverOpen] = useState(false);\n  const [anchorEl, setAnchorEl] = useState<Element | null>(null);\n  const classes = useStyles();\n  const isSmallScreen = useMediaQuery<BackstageTheme>(theme =>\n    theme.breakpoints.down('sm'),\n  );\n\n  const onClickHandler: MouseEventHandler = event => {\n    setAnchorEl(event.currentTarget);\n    setPopoverOpen(true);\n  };\n\n  const popoverCloseHandler = () => {\n    setPopoverOpen(false);\n  };\n\n  return (\n    <>\n      <Box display=\"flex\" ml={1}>\n        {isSmallScreen ? (\n          <IconButton\n            color=\"primary\"\n            size=\"small\"\n            onClick={onClickHandler}\n            data-testid=\"support-button\"\n            aria-label=\"Support\"\n          >\n            <HelpIcon />\n          </IconButton>\n        ) : (\n          <Button\n            data-testid=\"support-button\"\n            aria-label=\"Support\"\n            color=\"primary\"\n            onClick={onClickHandler}\n            startIcon={<HelpIcon />}\n          >\n            Support\n          </Button>\n        )}\n      </Box>\n      <Popover\n        data-testid=\"support-button-popover\"\n        open={popoverOpen}\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'right',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'right',\n        }}\n        onClose={popoverCloseHandler}\n      >\n        <List className={classes.popoverList}>\n          {title && (\n            <ListItem alignItems=\"flex-start\">\n              <Typography variant=\"subtitle1\">{title}</Typography>\n            </ListItem>\n          )}\n          {React.Children.map(children, (child, i) => (\n            <ListItem alignItems=\"flex-start\" key={`child-${i}`}>\n              {child}\n            </ListItem>\n          ))}\n          {(items ?? configItems).map((item, i) => (\n            <SupportListItem item={item} key={`item-${i}`} />\n          ))}\n        </List>\n        <DialogActions>\n          <Button\n            color=\"primary\"\n            onClick={popoverCloseHandler}\n            aria-label=\"Close\"\n          >\n            Close\n          </Button>\n        </DialogActions>\n      </Popover>\n    </>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, Dispatch, SetStateAction } from 'react';\n\nconst drawerWidthClosed = 72;\nconst iconPadding = 24;\nconst userBadgePadding = 18;\n\n/** @public */\nexport type SidebarOptions = {\n  drawerWidthClosed?: number;\n  drawerWidthOpen?: number;\n};\n\n/** @public */\nexport type SubmenuOptions = {\n  drawerWidthClosed?: number;\n  drawerWidthOpen?: number;\n};\n\n/** @internal */\nexport type SidebarConfig = {\n  drawerWidthClosed: number;\n  drawerWidthOpen: number;\n  defaultOpenDelayMs: number;\n  defaultCloseDelayMs: number;\n  defaultFadeDuration: number;\n  logoHeight: number;\n  iconContainerWidth: number;\n  iconSize: number;\n  iconPadding: number;\n  selectedIndicatorWidth: number;\n  userBadgePadding: number;\n  userBadgeDiameter: number;\n  mobileSidebarHeight: number;\n};\n\nexport const sidebarConfig = {\n  drawerWidthClosed,\n  drawerWidthOpen: 224,\n  // As per NN/g's guidance on timing for exposing hidden content\n  // See https://www.nngroup.com/articles/timing-exposing-content/\n  defaultOpenDelayMs: 100,\n  defaultCloseDelayMs: 0,\n  defaultFadeDuration: 200,\n  logoHeight: 32,\n  iconContainerWidth: drawerWidthClosed,\n  iconSize: drawerWidthClosed - iconPadding * 2,\n  iconPadding,\n  selectedIndicatorWidth: 3,\n  userBadgePadding,\n  userBadgeDiameter: drawerWidthClosed - userBadgePadding * 2,\n  mobileSidebarHeight: 56,\n};\n\nexport const makeSidebarConfig = (\n  customSidebarConfig: Partial<SidebarOptions>,\n) => ({\n  ...sidebarConfig,\n  ...customSidebarConfig,\n  iconContainerWidth: sidebarConfig.drawerWidthClosed,\n  iconSize: sidebarConfig.drawerWidthClosed - sidebarConfig.iconPadding * 2,\n  userBadgeDiameter:\n    sidebarConfig.drawerWidthClosed - sidebarConfig.userBadgePadding * 2,\n});\n\n/** @internal */\nexport type SubmenuConfig = {\n  drawerWidthClosed: number;\n  drawerWidthOpen: number;\n  defaultOpenDelayMs: number;\n};\n\nexport const submenuConfig = {\n  drawerWidthClosed: 0,\n  drawerWidthOpen: 202,\n  defaultOpenDelayMs: sidebarConfig.defaultOpenDelayMs + 200,\n};\n\nexport const makeSidebarSubmenuConfig = (\n  customSubmenuConfig: Partial<SubmenuOptions>,\n) => ({\n  ...submenuConfig,\n  ...customSubmenuConfig,\n});\n\nexport const SIDEBAR_INTRO_LOCAL_STORAGE =\n  '@backstage/core/sidebar-intro-dismissed';\n\nexport type SidebarConfigContextType = {\n  sidebarConfig: SidebarConfig;\n  submenuConfig: SubmenuConfig;\n};\n\nexport const SidebarConfigContext = createContext<SidebarConfigContextType>({\n  sidebarConfig,\n  submenuConfig,\n});\n\nexport type SidebarItemWithSubmenuContextType = {\n  isHoveredOn: boolean;\n  setIsHoveredOn: Dispatch<SetStateAction<boolean>>;\n};\n\nexport const SidebarItemWithSubmenuContext =\n  createContext<SidebarItemWithSubmenuContextType>({\n    isHoveredOn: false,\n    setIsHoveredOn: () => {},\n  });\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { createContext, ReactNode, useContext } from 'react';\nimport {\n  createVersionedContext,\n  createVersionedValueMap,\n} from '@backstage/version-bridge';\n\n/**\n * Types for the `SidebarContext`\n *\n * @public @deprecated\n * Use `SidebarOpenState` instead.\n */\nexport type SidebarContextType = {\n  isOpen: boolean;\n  setOpen: (open: boolean) => void;\n};\n\n/**\n * The open state of the sidebar.\n *\n * @public\n */\nexport type SidebarOpenState = {\n  /**\n   * Whether or not the sidebar is open and full-width. When `false`, the\n   * sidebar is \"closed\" and typically only shows icons with no text.\n   */\n  isOpen: boolean;\n\n  /**\n   * A function to set whether or not the sidebar is open. Pass `true` to open\n   * the sidebar. Pass `false` to close it.\n   */\n  setOpen: (open: boolean) => void;\n};\n\nconst defaultSidebarOpenStateContext = {\n  isOpen: false,\n  setOpen: () => {},\n};\n\n/**\n * Context whether the `Sidebar` is open\n *\n * @public @deprecated\n * Use `<SidebarOpenStateProvider>` + `useSidebarOpenState()` instead.\n */\nexport const LegacySidebarContext = createContext<SidebarContextType>(\n  defaultSidebarOpenStateContext,\n);\n\nconst VersionedSidebarContext = createVersionedContext<{\n  1: SidebarOpenState;\n}>('sidebar-open-state-context');\n\n/**\n * Provides context for reading and updating sidebar state.\n *\n * @public\n */\nexport function SidebarOpenStateProvider(props: {\n  children: ReactNode;\n  value: SidebarOpenState;\n}) {\n  const { children, value } = props;\n  return (\n    <LegacySidebarContext.Provider value={value}>\n      <VersionedSidebarContext.Provider\n        value={createVersionedValueMap({ 1: value })}\n      >\n        {children}\n      </VersionedSidebarContext.Provider>\n    </LegacySidebarContext.Provider>\n  );\n}\n\n/**\n * Hook to read and update the sidebar's open state, which controls whether or\n * not the sidebar is open and full-width, or closed and only displaying icons.\n *\n * @public\n */\nexport const useSidebarOpenState = (): SidebarOpenState => {\n  const versionedOpenStateContext = useContext(VersionedSidebarContext);\n  const legacyOpenStateContext = useContext(LegacySidebarContext);\n\n  // Invoked from outside a SidebarOpenStateProvider: check for the legacy\n  // context's value, but otherwise return the default.\n  if (versionedOpenStateContext === undefined) {\n    return legacyOpenStateContext || defaultSidebarOpenStateContext;\n  }\n\n  const openStateContext = versionedOpenStateContext.atVersion(1);\n  if (openStateContext === undefined) {\n    throw new Error('No context found for version 1.');\n  }\n\n  return openStateContext;\n};\n","/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  createVersionedContext,\n  createVersionedValueMap,\n} from '@backstage/version-bridge';\nimport React, { createContext, ReactNode, useContext } from 'react';\n\n/**\n * Type of `SidebarPinStateContext`\n *\n * @public\n * @deprecated Use `SidebarPinState` instead.\n */\nexport type SidebarPinStateContextType = {\n  isPinned: boolean;\n  toggleSidebarPinState: () => any;\n  isMobile?: boolean;\n};\n\n/**\n * The pin state of the sidebar.\n *\n * @public\n */\nexport type SidebarPinState = {\n  /**\n   * Whether or not the sidebar is pinned to the `open` state. When `isPinned`\n   * is `false`, the sidebar opens and closes on hover. When `true`, the\n   * sidebar is permanently opened, regardless of user interaction.\n   */\n  isPinned: boolean;\n\n  /**\n   * A function to toggle the pin state of the sidebar.\n   */\n  toggleSidebarPinState: () => any;\n\n  /**\n   * Whether or not the sidebar is or should be rendered in a mobile-optimized\n   * way.\n   */\n  isMobile?: boolean;\n};\n\nconst defaultSidebarPinStateContext = {\n  isPinned: true,\n  toggleSidebarPinState: () => {},\n  isMobile: false,\n};\n\n/**\n * Contains the state on how the `Sidebar` is rendered\n *\n * @public @deprecated\n * Use `<SidebarPinStateContextProvider>` + `useSidebarPinState()` instead.\n */\nexport const LegacySidebarPinStateContext =\n  createContext<SidebarPinStateContextType>(defaultSidebarPinStateContext);\n\nconst VersionedSidebarPinStateContext = createVersionedContext<{\n  1: SidebarPinState;\n}>('sidebar-pin-state-context');\n\n/**\n * Provides state for how the `Sidebar` is rendered\n *\n * @public\n */\nexport function SidebarPinStateProvider(props: {\n  children: ReactNode;\n  value: SidebarPinStateContextType;\n}) {\n  const { children, value } = props;\n  return (\n    <LegacySidebarPinStateContext.Provider value={value}>\n      <VersionedSidebarPinStateContext.Provider\n        value={createVersionedValueMap({ 1: value })}\n      >\n        {children}\n      </VersionedSidebarPinStateContext.Provider>\n    </LegacySidebarPinStateContext.Provider>\n  );\n}\n\n/**\n * Hook to read and update sidebar pin state, which controls whether or not the\n * sidebar is pinned open.\n *\n * @public\n */\nexport const useSidebarPinState = (): SidebarPinState => {\n  const versionedPinStateContext = useContext(VersionedSidebarPinStateContext);\n  const legacyPinStateContext = useContext(LegacySidebarPinStateContext);\n\n  // Invoked from outside a SidebarPinStateProvider: check for the legacy\n  // context's value, but otherwise return the default.\n  if (versionedPinStateContext === undefined) {\n    return legacyPinStateContext || defaultSidebarPinStateContext;\n  }\n\n  const pinStateContext = versionedPinStateContext.atVersion(1);\n  if (pinStateContext === undefined) {\n    throw new Error('No context found for version 1.');\n  }\n\n  return pinStateContext;\n};\n","/* eslint-disable @typescript-eslint/no-shadow */\n/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BackstageTheme } from '@backstage/theme';\nimport BottomNavigationAction, {\n  BottomNavigationActionProps,\n} from '@material-ui/core/BottomNavigationAction';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useContext } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { Link } from '../../components';\nimport { SidebarConfig, SidebarConfigContext } from './config';\nimport { MobileSidebarContext } from './MobileSidebar';\nimport { useSidebarPinState } from './SidebarPinStateContext';\n\n/**\n * Props for the `SidebarGroup`\n *\n * @public\n */\nexport interface SidebarGroupProps extends BottomNavigationActionProps {\n  /**\n   * If the `SidebarGroup` should be a `Link`, `to` should be a pathname to that location\n   */\n  to?: string;\n  /**\n   * If the `SidebarGroup`s should be in a different order than in the normal `Sidebar`, you can provide\n   * each `SidebarGroup` it's own priority to reorder them.\n   */\n  priority?: number;\n  /**\n   * React children\n   */\n  children?: React.ReactNode;\n}\n\nconst useStyles = makeStyles<BackstageTheme, { sidebarConfig: SidebarConfig }>(\n  theme => ({\n    root: {\n      flexGrow: 0,\n      margin: theme.spacing(0, 2),\n      color: theme.palette.navigation.color,\n    },\n\n    selected: props => ({\n      color: `${theme.palette.navigation.selectedColor}!important`,\n      borderTop: `solid ${props.sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n      marginTop: '-1px',\n    }),\n\n    label: {\n      display: 'none',\n    },\n  }),\n);\n\n/**\n * Returns a MUI `BottomNavigationAction`, which is aware of the current location & the selected item in the `BottomNavigation`,\n * such that it will highlight a `MobileSidebarGroup` either on location change or if the selected item changes.\n *\n * @param props `to`: pathname of link; `value`: index of the selected item\n * @internal\n */\nconst MobileSidebarGroup = (props: SidebarGroupProps) => {\n  const { to, label, icon, value } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles({ sidebarConfig });\n  const location = useLocation();\n  const { selectedMenuItemIndex, setSelectedMenuItemIndex } =\n    useContext(MobileSidebarContext);\n\n  const onChange = (_: React.ChangeEvent<{}>, value: number) => {\n    if (value === selectedMenuItemIndex) {\n      setSelectedMenuItemIndex(-1);\n    } else {\n      setSelectedMenuItemIndex(value);\n    }\n  };\n\n  const selected =\n    (value === selectedMenuItemIndex && selectedMenuItemIndex >= 0) ||\n    (!(value === selectedMenuItemIndex) &&\n      !(selectedMenuItemIndex >= 0) &&\n      to === location.pathname);\n\n  return (\n    // Material UI issue: https://github.com/mui-org/material-ui/issues/27820\n    <BottomNavigationAction\n      aria-label={label}\n      label={label}\n      icon={icon}\n      component={Link as any}\n      to={(to ? to : location.pathname) as any}\n      onChange={onChange}\n      value={value}\n      selected={selected}\n      classes={classes}\n    />\n  );\n};\n\n/**\n * Groups items of the `Sidebar` together.\n *\n * @remarks\n * On bigger screens, this won't have any effect at the moment.\n * On small screens, it will add an action to the bottom navigation - either triggering an overlay menu or acting as a link\n *\n * @public\n */\nexport const SidebarGroup = (props: SidebarGroupProps) => {\n  const { children, to, label, icon, value } = props;\n  const { isMobile } = useSidebarPinState();\n\n  return isMobile ? (\n    <MobileSidebarGroup to={to} label={label} icon={icon} value={value} />\n  ) : (\n    <>{children}</>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useElementFilter } from '@backstage/core-plugin-api';\nimport { BackstageTheme } from '@backstage/theme';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport Box from '@material-ui/core/Box';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport { orderBy } from 'lodash';\nimport React, { createContext, useEffect, useState, useContext } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { SidebarOpenStateProvider } from './SidebarOpenStateContext';\nimport { SidebarGroup } from './SidebarGroup';\nimport { SidebarConfigContext, SidebarConfig } from './config';\n\n/**\n * Type of `MobileSidebarContext`\n *\n * @internal\n */\nexport type MobileSidebarContextType = {\n  selectedMenuItemIndex: number;\n  setSelectedMenuItemIndex: React.Dispatch<React.SetStateAction<number>>;\n};\n\n/**\n * Props of MobileSidebar\n *\n * @public\n */\nexport type MobileSidebarProps = {\n  children?: React.ReactNode;\n};\n\n/**\n * @internal\n */\ntype OverlayMenuProps = {\n  label?: string;\n  onClose: () => void;\n  open: boolean;\n  children?: React.ReactNode;\n};\n\nconst useStyles = makeStyles<BackstageTheme, { sidebarConfig: SidebarConfig }>(\n  theme => ({\n    root: {\n      position: 'fixed',\n      backgroundColor: theme.palette.navigation.background,\n      color: theme.palette.navigation.color,\n      bottom: 0,\n      left: 0,\n      right: 0,\n      zIndex: theme.zIndex.snackbar,\n      // SidebarDivider color\n      borderTop: '1px solid #383838',\n    },\n\n    overlay: props => ({\n      background: theme.palette.navigation.background,\n      width: '100%',\n      bottom: `${props.sidebarConfig.mobileSidebarHeight}px`,\n      height: `calc(100% - ${props.sidebarConfig.mobileSidebarHeight}px)`,\n      flex: '0 1 auto',\n      overflow: 'auto',\n    }),\n\n    overlayHeader: {\n      display: 'flex',\n      color: theme.palette.text.primary,\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      padding: theme.spacing(2, 3),\n    },\n\n    overlayHeaderClose: {\n      color: theme.palette.text.primary,\n    },\n\n    marginMobileSidebar: props => ({\n      marginBottom: `${props.sidebarConfig.mobileSidebarHeight}px`,\n    }),\n  }),\n);\n\nconst sortSidebarGroupsForPriority = (children: React.ReactElement[]) =>\n  orderBy(\n    children,\n    ({ props: { priority } }) => (Number.isInteger(priority) ? priority : -1),\n    'desc',\n  );\n\nconst sidebarGroupType = React.createElement(SidebarGroup).type;\n\nconst OverlayMenu = ({\n  children,\n  label = 'Menu',\n  open,\n  onClose,\n}: OverlayMenuProps) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles({ sidebarConfig });\n\n  return (\n    <Drawer\n      anchor=\"bottom\"\n      open={open}\n      onClose={onClose}\n      ModalProps={{\n        BackdropProps: { classes: { root: classes.marginMobileSidebar } },\n      }}\n      classes={{\n        root: classes.marginMobileSidebar,\n        paperAnchorBottom: classes.overlay,\n      }}\n    >\n      <Box className={classes.overlayHeader}>\n        <Typography variant=\"h3\">{label}</Typography>\n        <IconButton\n          onClick={onClose}\n          classes={{ root: classes.overlayHeaderClose }}\n        >\n          <CloseIcon />\n        </IconButton>\n      </Box>\n      <Box component=\"nav\">{children}</Box>\n    </Drawer>\n  );\n};\n\n/**\n * Context on which `SidebarGroup` is currently selected\n *\n * @internal\n */\nexport const MobileSidebarContext = createContext<MobileSidebarContextType>({\n  selectedMenuItemIndex: -1,\n  setSelectedMenuItemIndex: () => {},\n});\n\n/**\n * A navigation component for mobile screens, which sticks to the bottom.\n *\n * @remarks\n * It alternates the normal sidebar by grouping the `SidebarItems` based on provided `SidebarGroup`s\n * either rendering them as a link or an overlay menu.\n * If no `SidebarGroup`s are provided the sidebar content is wrapped in an default overlay menu.\n *\n * @public\n */\nexport const MobileSidebar = (props: MobileSidebarProps) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { children } = props;\n  const classes = useStyles({ sidebarConfig });\n  const location = useLocation();\n  const [selectedMenuItemIndex, setSelectedMenuItemIndex] =\n    useState<number>(-1);\n\n  useEffect(() => {\n    setSelectedMenuItemIndex(-1);\n  }, [location.pathname]);\n\n  // Filter children for SidebarGroups\n  //\n  // Directly comparing child.type with SidebarSubmenu will not work with in\n  // combination with react-hot-loader\n  //\n  // https://github.com/gaearon/react-hot-loader/issues/304#issuecomment-456569720\n  let sidebarGroups = useElementFilter(children, elements =>\n    elements.getElements().filter(child => child.type === sidebarGroupType),\n  );\n\n  if (!children) {\n    // If Sidebar has no children the MobileSidebar won't be rendered\n    return null;\n  } else if (!sidebarGroups.length) {\n    // If Sidebar has no SidebarGroup as a children a default\n    // SidebarGroup with the complete Sidebar content will be created\n    sidebarGroups.push(\n      <SidebarGroup key=\"default_menu\" icon={<MenuIcon />}>\n        {children}\n      </SidebarGroup>,\n    );\n  } else {\n    // Sort SidebarGroups for the given Priority\n    sidebarGroups = sortSidebarGroupsForPriority(sidebarGroups);\n  }\n\n  const shouldShowGroupChildren =\n    selectedMenuItemIndex >= 0 &&\n    !sidebarGroups[selectedMenuItemIndex].props.to;\n\n  return (\n    <SidebarOpenStateProvider value={{ isOpen: true, setOpen: () => {} }}>\n      <MobileSidebarContext.Provider\n        value={{ selectedMenuItemIndex, setSelectedMenuItemIndex }}\n      >\n        <OverlayMenu\n          label={\n            sidebarGroups[selectedMenuItemIndex] &&\n            (sidebarGroups[selectedMenuItemIndex]!.props.label as string)\n          }\n          open={shouldShowGroupChildren}\n          onClose={() => setSelectedMenuItemIndex(-1)}\n        >\n          {sidebarGroups[selectedMenuItemIndex] &&\n            (sidebarGroups[selectedMenuItemIndex].props\n              .children as React.ReactChildren)}\n        </OverlayMenu>\n        <BottomNavigation\n          className={classes.root}\n          data-testid=\"mobile-sidebar-root\"\n          component=\"nav\"\n        >\n          {sidebarGroups}\n        </BottomNavigation>\n      </MobileSidebarContext.Provider>\n    </SidebarOpenStateProvider>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nenum LocalStorageKeys {\n  SIDEBAR_PIN_STATE = 'sidebarPinState',\n}\n\nexport const LocalStorage = {\n  getSidebarPinState(): boolean {\n    let value;\n    try {\n      value = JSON.parse(\n        window.localStorage.getItem(LocalStorageKeys.SIDEBAR_PIN_STATE) ||\n          'true',\n      );\n    } catch {\n      return true;\n    }\n    return !!value;\n  },\n  setSidebarPinState(state: boolean) {\n    return window.localStorage.setItem(\n      LocalStorageKeys.SIDEBAR_PIN_STATE,\n      JSON.stringify(state),\n    );\n  },\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { BackstageTheme } from '@backstage/theme';\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport React, {\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\n\nimport { SidebarConfig, SidebarConfigContext } from './config';\nimport { LocalStorage } from './localStorage';\nimport { SidebarPinStateProvider } from './SidebarPinStateContext';\n\nexport type SidebarPageClassKey = 'root';\n\nconst useStyles = makeStyles<\n  BackstageTheme,\n  { sidebarConfig: SidebarConfig; isPinned: boolean }\n>(\n  theme => ({\n    root: {\n      width: '100%',\n      transition: 'padding-left 0.1s ease-out',\n      isolation: 'isolate',\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: props =>\n          props.isPinned\n            ? props.sidebarConfig.drawerWidthOpen\n            : props.sidebarConfig.drawerWidthClosed,\n      },\n      [theme.breakpoints.down('xs')]: {\n        paddingBottom: props => props.sidebarConfig.mobileSidebarHeight,\n      },\n    },\n    content: {\n      zIndex: 0,\n      isolation: 'isolate',\n      '&:focus': {\n        outline: 0,\n      },\n    },\n  }),\n  { name: 'BackstageSidebarPage' },\n);\n\n/**\n * Props for SidebarPage\n *\n * @public\n */\nexport type SidebarPageProps = {\n  children?: React.ReactNode;\n};\n\ntype PageContextType = {\n  content: {\n    contentRef?: React.MutableRefObject<HTMLElement | null>;\n  };\n};\n\nconst PageContext = createContext<PageContextType>({\n  content: {\n    contentRef: undefined,\n  },\n});\nexport function SidebarPage(props: SidebarPageProps) {\n  const [isPinned, setIsPinned] = useState(() =>\n    LocalStorage.getSidebarPinState(),\n  );\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n\n  const contentRef = useRef(null);\n\n  const pageContext = useMemo(\n    () => ({\n      content: {\n        contentRef,\n      },\n    }),\n    [contentRef],\n  );\n\n  useEffect(() => {\n    LocalStorage.setSidebarPinState(isPinned);\n  }, [isPinned]);\n\n  const isMobile = useMediaQuery<BackstageTheme>(\n    theme => theme.breakpoints.down('xs'),\n    { noSsr: true },\n  );\n\n  const toggleSidebarPinState = () => setIsPinned(!isPinned);\n\n  const classes = useStyles({ isPinned, sidebarConfig });\n\n  return (\n    <SidebarPinStateProvider\n      value={{\n        isPinned,\n        toggleSidebarPinState,\n        isMobile,\n      }}\n    >\n      <PageContext.Provider value={pageContext}>\n        <Box className={classes.root}>{props.children}</Box>\n      </PageContext.Provider>\n    </SidebarPinStateProvider>\n  );\n}\n\n/**\n * This hook provides a react ref to the main content.\n * Allows to set an element as the main content and focus on that component.\n *\n * *Note: If `contentRef` is not set `focusContent` is noop. `Content` component sets this ref automatically*\n *\n * @public\n * @example\n * Focus current content\n * ```tsx\n *  const { focusContent} = useContent();\n * ...\n *  <Button onClick={focusContent}>\n *     focus main content\n *  </Button>\n * ```\n * @example\n * Set the reference to an Html element\n * ```\n *  const { contentRef } = useContent();\n * ...\n *  <article ref={contentRef} tabIndex={-1}>Main Content</article>\n * ```\n */\nexport function useContent() {\n  const { content } = useContext(PageContext);\n\n  const focusContent = useCallback(() => {\n    content?.contentRef?.current?.focus();\n  }, [content]);\n\n  return { focusContent, contentRef: content?.contentRef };\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { BackstageTheme } from '@backstage/theme';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport classnames from 'classnames';\nimport React, { useContext, useRef, useState } from 'react';\n\nimport {\n  makeSidebarConfig,\n  makeSidebarSubmenuConfig,\n  SidebarConfig,\n  SidebarConfigContext,\n  SidebarOptions,\n  SubmenuConfig,\n  SubmenuOptions,\n} from './config';\nimport { MobileSidebar } from './MobileSidebar';\nimport { useContent } from './Page';\nimport { SidebarOpenStateProvider } from './SidebarOpenStateContext';\nimport { useSidebarPinState } from './SidebarPinStateContext';\n\n/** @public */\nexport type SidebarClassKey = 'drawer' | 'drawerOpen';\nconst useStyles = makeStyles<BackstageTheme, { sidebarConfig: SidebarConfig }>(\n  theme => ({\n    drawer: props => ({\n      display: 'flex',\n      flexFlow: 'column nowrap',\n      alignItems: 'flex-start',\n      position: 'fixed',\n      left: 0,\n      top: 0,\n      bottom: 0,\n      zIndex: theme.zIndex.appBar,\n      background: theme.palette.navigation.background,\n      overflowX: 'hidden',\n      msOverflowStyle: 'none',\n      scrollbarWidth: 'none',\n      width: props.sidebarConfig.drawerWidthClosed,\n      transition: theme.transitions.create('width', {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shortest,\n      }),\n      '& > *': {\n        flexShrink: 0,\n      },\n      '&::-webkit-scrollbar': {\n        display: 'none',\n      },\n    }),\n    drawerOpen: props => ({\n      width: props.sidebarConfig.drawerWidthOpen,\n      transition: theme.transitions.create('width', {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.shorter,\n      }),\n    }),\n    visuallyHidden: {\n      top: 0,\n      position: 'absolute',\n      zIndex: 1000,\n      transform: 'translateY(-200%)',\n      '&:focus': {\n        transform: 'translateY(5px)',\n      },\n    },\n  }),\n  { name: 'BackstageSidebar' },\n);\n\nenum State {\n  Closed,\n  Idle,\n  Open,\n}\n\n/** @public */\nexport type SidebarProps = {\n  openDelayMs?: number;\n  closeDelayMs?: number;\n  sidebarOptions?: SidebarOptions;\n  submenuOptions?: SubmenuOptions;\n  disableExpandOnHover?: boolean;\n  children?: React.ReactNode;\n};\n\nexport type DesktopSidebarProps = {\n  openDelayMs?: number;\n  closeDelayMs?: number;\n  disableExpandOnHover?: boolean;\n  children?: React.ReactNode;\n};\n\n/**\n * Places the Sidebar & wraps the children providing context weather the `Sidebar` is open or not.\n *\n * Handles & delays hover events for expanding the `Sidebar`\n *\n * @param props `disableExpandOnHover` disables the default hover behaviour;\n * `openDelayMs` & `closeDelayMs` set delay until sidebar will open/close on hover\n * @returns\n * @internal\n */\nconst DesktopSidebar = (props: DesktopSidebarProps) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const {\n    openDelayMs = sidebarConfig.defaultOpenDelayMs,\n    closeDelayMs = sidebarConfig.defaultCloseDelayMs,\n    disableExpandOnHover,\n    children,\n  } = props;\n\n  const classes = useStyles({ sidebarConfig });\n  const isSmallScreen = useMediaQuery<BackstageTheme>(\n    theme => theme.breakpoints.down('md'),\n    { noSsr: true },\n  );\n  const [state, setState] = useState(State.Closed);\n  const hoverTimerRef = useRef<number>();\n  const { isPinned, toggleSidebarPinState } = useSidebarPinState();\n\n  const handleOpen = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = undefined;\n    }\n    if (state !== State.Open && !isSmallScreen) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = undefined;\n        setState(State.Open);\n      }, openDelayMs);\n\n      setState(State.Idle);\n    }\n  };\n\n  const handleClose = () => {\n    if (isPinned || disableExpandOnHover) {\n      return;\n    }\n    if (hoverTimerRef.current) {\n      clearTimeout(hoverTimerRef.current);\n      hoverTimerRef.current = undefined;\n    }\n    if (state === State.Idle) {\n      setState(State.Closed);\n    } else if (state === State.Open) {\n      hoverTimerRef.current = window.setTimeout(() => {\n        hoverTimerRef.current = undefined;\n        setState(State.Closed);\n      }, closeDelayMs);\n    }\n  };\n\n  const isOpen = (state === State.Open && !isSmallScreen) || isPinned;\n\n  /**\n   * Close/Open Sidebar directily without delays. Also toggles `SidebarPinState` to avoid hidden content behind Sidebar.\n   */\n  const setOpen = (open: boolean) => {\n    if (open) {\n      setState(State.Open);\n      toggleSidebarPinState();\n    } else {\n      setState(State.Closed);\n      toggleSidebarPinState();\n    }\n  };\n\n  return (\n    <nav style={{}} aria-label=\"sidebar nav\">\n      <A11ySkipSidebar />\n      <SidebarOpenStateProvider value={{ isOpen, setOpen }}>\n        <Box\n          className={classes.root}\n          data-testid=\"sidebar-root\"\n          onMouseEnter={disableExpandOnHover ? () => {} : handleOpen}\n          onFocus={disableExpandOnHover ? () => {} : handleOpen}\n          onMouseLeave={disableExpandOnHover ? () => {} : handleClose}\n          onBlur={disableExpandOnHover ? () => {} : handleClose}\n        >\n          <Box\n            className={classnames(classes.drawer, {\n              [classes.drawerOpen]: isOpen,\n            })}\n          >\n            {children}\n          </Box>\n        </Box>\n      </SidebarOpenStateProvider>\n    </nav>\n  );\n};\n\n/**\n * Passing children into the desktop or mobile sidebar depending on the context\n *\n * @public\n */\nexport const Sidebar = (props: SidebarProps) => {\n  const sidebarConfig: SidebarConfig = makeSidebarConfig(\n    props.sidebarOptions ?? {},\n  );\n  const submenuConfig: SubmenuConfig = makeSidebarSubmenuConfig(\n    props.submenuOptions ?? {},\n  );\n  const { children, disableExpandOnHover, openDelayMs, closeDelayMs } = props;\n  const { isMobile } = useSidebarPinState();\n\n  return isMobile ? (\n    <MobileSidebar>{children}</MobileSidebar>\n  ) : (\n    <SidebarConfigContext.Provider value={{ sidebarConfig, submenuConfig }}>\n      <DesktopSidebar\n        openDelayMs={openDelayMs}\n        closeDelayMs={closeDelayMs}\n        disableExpandOnHover={disableExpandOnHover}\n      >\n        {children}\n      </DesktopSidebar>\n    </SidebarConfigContext.Provider>\n  );\n};\n\nfunction A11ySkipSidebar() {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const { focusContent, contentRef } = useContent();\n  const classes = useStyles({ sidebarConfig });\n\n  if (!contentRef?.current) {\n    return null;\n  }\n  return (\n    <Button\n      onClick={focusContent}\n      variant=\"contained\"\n      className={classnames(classes.visuallyHidden)}\n    >\n      Skip to content\n    </Button>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Location, Path } from 'history';\nimport { isEqual, isMatch } from 'lodash';\nimport qs from 'qs';\n\nexport function isLocationMatch(currentLocation: Location, toLocation: Path) {\n  const toDecodedSearch = new URLSearchParams(toLocation.search).toString();\n  const toQueryParameters = qs.parse(toDecodedSearch);\n\n  const currentDecodedSearch = new URLSearchParams(\n    currentLocation.search,\n  ).toString();\n  const currentQueryParameters = qs.parse(currentDecodedSearch);\n\n  const matching =\n    isEqual(toLocation.pathname, currentLocation.pathname) &&\n    isMatch(currentQueryParameters, toQueryParameters);\n\n  return matching;\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useContext, useState } from 'react';\nimport { resolvePath, useLocation, useResolvedPath } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport { Link } from '../../components/Link';\nimport { IconComponent } from '@backstage/core-plugin-api';\nimport classnames from 'classnames';\nimport { BackstageTheme } from '@backstage/theme';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport { SidebarItemWithSubmenuContext } from './config';\nimport { isLocationMatch } from './utils';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\n\nconst useStyles = makeStyles<BackstageTheme>(\n  theme => ({\n    item: {\n      height: 48,\n      width: '100%',\n      '&:hover': {\n        background:\n          theme.palette.navigation.navItem?.hoverBackground || '#6f6f6f',\n        color: theme.palette.navigation.selectedColor,\n      },\n      display: 'flex',\n      alignItems: 'center',\n      color: theme.palette.navigation.color,\n      padding: theme.spacing(2.5),\n      cursor: 'pointer',\n      position: 'relative',\n      background: 'none',\n      border: 'none',\n    },\n    itemContainer: {\n      width: '100%',\n    },\n    selected: {\n      background: '#6f6f6f',\n      color: theme.palette.common.white,\n    },\n    label: {\n      margin: theme.spacing(1.75),\n      marginLeft: theme.spacing(1),\n      fontSize: theme.typography.body2.fontSize,\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      'text-overflow': 'ellipsis',\n      lineHeight: 1,\n    },\n    subtitle: {\n      fontSize: 10,\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      'text-overflow': 'ellipsis',\n    },\n    dropdownArrow: {\n      position: 'absolute',\n      right: 21,\n    },\n    dropdown: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'end',\n    },\n    dropdownItem: {\n      width: '100%',\n      padding: '10px 0 10px 0',\n      '&:hover': {\n        background:\n          theme.palette.navigation.navItem?.hoverBackground || '#6f6f6f',\n        color: theme.palette.navigation.selectedColor,\n      },\n    },\n    textContent: {\n      color: theme.palette.navigation.color,\n      paddingLeft: theme.spacing(4),\n      paddingRight: theme.spacing(1),\n      fontSize: theme.typography.body2.fontSize,\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      'text-overflow': 'ellipsis',\n    },\n  }),\n  { name: 'BackstageSidebarSubmenuItem' },\n);\n\n/**\n * Clickable item displayed when submenu item is clicked.\n * title: Text content of item\n * to: Path to navigate to when item is clicked\n *\n * @public\n */\nexport type SidebarSubmenuItemDropdownItem = {\n  title: string;\n  to: string;\n};\n/**\n * Holds submenu item content.\n *\n * @remarks\n * title: Text content of submenu item\n * subtitle: A subtitle displayed under the main title\n * to: Path to navigate to when item is clicked\n * icon: Icon displayed on the left of text content\n * dropdownItems: Optional array of dropdown items displayed when submenu item is clicked.\n *\n * @public\n */\nexport type SidebarSubmenuItemProps = {\n  title: string;\n  subtitle?: string;\n  to?: string;\n  icon?: IconComponent;\n  dropdownItems?: SidebarSubmenuItemDropdownItem[];\n};\n\n/**\n * Item used inside a submenu within the sidebar.\n *\n * @public\n */\nexport const SidebarSubmenuItem = (props: SidebarSubmenuItemProps) => {\n  const { title, subtitle, to, icon: Icon, dropdownItems } = props;\n  const classes = useStyles();\n  const { setIsHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const closeSubmenu = () => {\n    setIsHoveredOn(false);\n  };\n  const toLocation = useResolvedPath(to ?? '');\n  const currentLocation = useLocation();\n  let isActive = isLocationMatch(currentLocation, toLocation);\n\n  const [showDropDown, setShowDropDown] = useState(false);\n  const handleClickDropdown = () => {\n    setShowDropDown(!showDropDown);\n  };\n  if (dropdownItems !== undefined) {\n    dropdownItems.some(item => {\n      const resolvedPath = resolvePath(item.to);\n      isActive = isLocationMatch(currentLocation, resolvedPath);\n      return isActive;\n    });\n    return (\n      <Box className={classes.itemContainer}>\n        <Tooltip title={title} enterDelay={500} enterNextDelay={500}>\n          <Button\n            role=\"button\"\n            onClick={handleClickDropdown}\n            onTouchStart={e => e.stopPropagation()}\n            className={classnames(\n              classes.item,\n              isActive ? classes.selected : undefined,\n            )}\n          >\n            {Icon && <Icon fontSize=\"small\" />}\n            <Typography variant=\"subtitle1\" className={classes.label}>\n              {title}\n              <br />\n              {subtitle && (\n                <Typography variant=\"caption\" className={classes.subtitle}>\n                  {subtitle}\n                </Typography>\n              )}\n            </Typography>\n            {showDropDown ? (\n              <ArrowDropUpIcon className={classes.dropdownArrow} />\n            ) : (\n              <ArrowDropDownIcon className={classes.dropdownArrow} />\n            )}\n          </Button>\n        </Tooltip>\n        {dropdownItems && showDropDown && (\n          <Box className={classes.dropdown}>\n            {dropdownItems.map((object, key) => (\n              <Tooltip\n                key={key}\n                title={object.title}\n                enterDelay={500}\n                enterNextDelay={500}\n              >\n                <Link\n                  to={object.to}\n                  underline=\"none\"\n                  className={classes.dropdownItem}\n                  onClick={closeSubmenu}\n                  onTouchStart={e => e.stopPropagation()}\n                >\n                  <Typography className={classes.textContent}>\n                    {object.title}\n                  </Typography>\n                </Link>\n              </Tooltip>\n            ))}\n          </Box>\n        )}\n      </Box>\n    );\n  }\n\n  return (\n    <Box className={classes.itemContainer}>\n      <Tooltip title={title} enterDelay={500} enterNextDelay={500}>\n        <Link\n          to={to!}\n          underline=\"none\"\n          className={classnames(\n            classes.item,\n            isActive ? classes.selected : undefined,\n          )}\n          onClick={closeSubmenu}\n          onTouchStart={e => e.stopPropagation()}\n        >\n          {Icon && <Icon fontSize=\"small\" />}\n          <Typography variant=\"subtitle1\" className={classes.label}>\n            {title}\n            <br />\n            {subtitle && (\n              <Typography variant=\"caption\" className={classes.subtitle}>\n                {subtitle}\n              </Typography>\n            )}\n          </Typography>\n        </Link>\n      </Tooltip>\n    </Box>\n  );\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { BackstageTheme } from '@backstage/theme';\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport classnames from 'classnames';\nimport React, { ReactNode, useContext, useEffect, useState } from 'react';\n\nimport {\n  SidebarConfigContext,\n  SidebarItemWithSubmenuContext,\n  SubmenuConfig,\n} from './config';\nimport { useSidebarOpenState } from './SidebarOpenStateContext';\n\nconst useStyles = makeStyles<\n  BackstageTheme,\n  { submenuConfig: SubmenuConfig; left: number }\n>(\n  theme => ({\n    root: {\n      zIndex: 1000,\n      position: 'relative',\n      overflow: 'visible',\n      width: theme.spacing(7) + 1,\n    },\n    drawer: props => ({\n      display: 'flex',\n      flexFlow: 'column nowrap',\n      alignItems: 'flex-start',\n      position: 'fixed',\n      [theme.breakpoints.up('sm')]: {\n        marginLeft: props.left,\n        transition: theme.transitions.create('margin-left', {\n          easing: theme.transitions.easing.sharp,\n          duration: theme.transitions.duration.shortest,\n        }),\n      },\n      top: 0,\n      bottom: 0,\n      padding: 0,\n      background: theme.palette.navigation.submenu?.background ?? '#404040',\n      overflowX: 'hidden',\n      msOverflowStyle: 'none',\n      scrollbarWidth: 'none',\n      cursor: 'default',\n      width: props.submenuConfig.drawerWidthClosed,\n      transitionDelay: `${props.submenuConfig.defaultOpenDelayMs}ms`,\n      '& > *': {\n        flexShrink: 0,\n      },\n      '&::-webkit-scrollbar': {\n        display: 'none',\n      },\n    }),\n    drawerOpen: props => ({\n      width: props.submenuConfig.drawerWidthOpen,\n      [theme.breakpoints.down('xs')]: {\n        width: '100%',\n        position: 'relative',\n        paddingLeft: theme.spacing(3),\n        left: 0,\n        top: 0,\n      },\n    }),\n    title: {\n      fontSize: theme.typography.h5.fontSize,\n      fontWeight: theme.typography.fontWeightMedium,\n      color: theme.palette.common.white,\n      padding: theme.spacing(2.5),\n      [theme.breakpoints.down('xs')]: {\n        display: 'none',\n      },\n    },\n  }),\n  { name: 'BackstageSidebarSubmenu' },\n);\n\n/**\n * Holds a title for text Header of a sidebar submenu and children\n * components to be rendered inside SidebarSubmenu\n *\n * @public\n */\nexport type SidebarSubmenuProps = {\n  title?: string;\n  children: ReactNode;\n};\n\n/**\n * Used inside SidebarItem to display an expandable Submenu\n *\n * @public\n */\nexport const SidebarSubmenu = (props: SidebarSubmenuProps) => {\n  const { isOpen } = useSidebarOpenState();\n  const { sidebarConfig, submenuConfig } = useContext(SidebarConfigContext);\n  const left = isOpen\n    ? sidebarConfig.drawerWidthOpen\n    : sidebarConfig.drawerWidthClosed;\n  const classes = useStyles({ left, submenuConfig });\n\n  const { isHoveredOn } = useContext(SidebarItemWithSubmenuContext);\n  const [isSubmenuOpen, setIsSubmenuOpen] = useState(false);\n\n  useEffect(() => {\n    setIsSubmenuOpen(isHoveredOn);\n  }, [isHoveredOn]);\n\n  return (\n    <Box\n      className={classnames(classes.drawer, {\n        [classes.drawerOpen]: isSubmenuOpen,\n      })}\n    >\n      <Typography variant=\"h5\" className={classes.title}>\n        {props.title}\n      </Typography>\n      {props.children}\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport React from 'react';\n\nconst useStyles = makeStyles({\n  iconContainer: {\n    display: 'flex',\n    position: 'relative',\n    width: '100%',\n  },\n  arrow1: {\n    right: '6px',\n    position: 'absolute',\n  },\n});\n\nconst DoubleArrowLeft = () => {\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.iconContainer}>\n      <Box className={classes.arrow1}>\n        <ArrowBackIosIcon style={{ fontSize: '12px' }} />\n      </Box>\n      <Box>\n        <ArrowBackIosIcon style={{ fontSize: '12px' }} />\n      </Box>\n    </Box>\n  );\n};\n\nexport default DoubleArrowLeft;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport React from 'react';\n\nconst useStyles = makeStyles({\n  iconContainer: {\n    display: 'flex',\n    position: 'relative',\n    width: '100%',\n  },\n  arrow1: {\n    right: '6px',\n    position: 'absolute',\n  },\n});\n\nconst DoubleArrowRight = () => {\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.iconContainer}>\n      <Box className={classes.arrow1}>\n        <ArrowForwardIosIcon style={{ fontSize: '12px' }} />\n      </Box>\n      <Box>\n        <ArrowForwardIosIcon style={{ fontSize: '12px' }} />\n      </Box>\n    </Box>\n  );\n};\n\nexport default DoubleArrowRight;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { IconComponent, useElementFilter } from '@backstage/core-plugin-api';\nimport { BackstageTheme } from '@backstage/theme';\nimport Badge from '@material-ui/core/Badge';\nimport Box from '@material-ui/core/Box';\nimport { makeStyles, styled, Theme } from '@material-ui/core/styles';\nimport {\n  CreateCSSProperties,\n  StyledComponentProps,\n} from '@material-ui/core/styles/withStyles';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport ArrowDropDown from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUp from '@material-ui/icons/ArrowDropUp';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport SearchIcon from '@material-ui/icons/Search';\nimport classnames from 'classnames';\nimport { Location } from 'history';\nimport React, {\n  ComponentProps,\n  ComponentType,\n  CSSProperties,\n  forwardRef,\n  KeyboardEventHandler,\n  ReactNode,\n  useContext,\n  useMemo,\n  useState,\n} from 'react';\nimport {\n  Link,\n  NavLinkProps,\n  resolvePath,\n  useLocation,\n  useResolvedPath,\n} from 'react-router-dom';\n\nimport {\n  SidebarConfig,\n  SidebarConfigContext,\n  SidebarItemWithSubmenuContext,\n} from './config';\nimport DoubleArrowLeft from './icons/DoubleArrowLeft';\nimport DoubleArrowRight from './icons/DoubleArrowRight';\nimport { useSidebarOpenState } from './SidebarOpenStateContext';\nimport { SidebarSubmenu, SidebarSubmenuProps } from './SidebarSubmenu';\nimport { SidebarSubmenuItemProps } from './SidebarSubmenuItem';\nimport { isLocationMatch } from './utils';\nimport Button from '@material-ui/core/Button';\n\n/** @public */\nexport type SidebarItemClassKey =\n  | 'root'\n  | 'buttonItem'\n  | 'closed'\n  | 'open'\n  | 'highlightable'\n  | 'highlighted'\n  | 'label'\n  | 'iconContainer'\n  | 'searchRoot'\n  | 'searchField'\n  | 'searchFieldHTMLInput'\n  | 'searchContainer'\n  | 'secondaryAction'\n  | 'closedItemIcon'\n  | 'submenuArrow'\n  | 'expandButton'\n  | 'arrows'\n  | 'selected';\n\nconst makeSidebarStyles = (sidebarConfig: SidebarConfig) =>\n  makeStyles<BackstageTheme>(\n    theme => ({\n      root: {\n        color: theme.palette.navigation.color,\n        display: 'flex',\n        flexFlow: 'row nowrap',\n        alignItems: 'center',\n        height: 48,\n        cursor: 'pointer',\n      },\n      buttonItem: {\n        background: 'none',\n        border: 'none',\n        width: '100%',\n        margin: 0,\n        padding: 0,\n        textAlign: 'inherit',\n        font: 'inherit',\n        textTransform: 'none',\n      },\n      closed: {\n        width: sidebarConfig.drawerWidthClosed,\n        justifyContent: 'center',\n      },\n      open: {\n        [theme.breakpoints.up('sm')]: {\n          width: sidebarConfig.drawerWidthOpen,\n        },\n      },\n      highlightable: {\n        '&:hover': {\n          background:\n            theme.palette.navigation.navItem?.hoverBackground ?? '#404040',\n        },\n      },\n      highlighted: {\n        background:\n          theme.palette.navigation.navItem?.hoverBackground ?? '#404040',\n      },\n      label: {\n        // XXX (@koroeskohr): I can't seem to achieve the desired font-weight from the designs\n        fontWeight: 'bold',\n        whiteSpace: 'nowrap',\n        lineHeight: 'auto',\n        flex: '3 1 auto',\n        width: '110px',\n        overflow: 'hidden',\n        'text-overflow': 'ellipsis',\n      },\n      iconContainer: {\n        boxSizing: 'border-box',\n        height: '100%',\n        width: sidebarConfig.iconContainerWidth,\n        marginRight: -theme.spacing(2),\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        lineHeight: '0',\n      },\n      searchRoot: {\n        marginBottom: 12,\n      },\n      searchField: {\n        color: '#b5b5b5',\n        fontWeight: theme.typography.fontWeightBold,\n        fontSize: theme.typography.fontSize,\n      },\n      searchFieldHTMLInput: {\n        padding: theme.spacing(2, 0, 2),\n      },\n      searchContainer: {\n        width: sidebarConfig.drawerWidthOpen - sidebarConfig.iconContainerWidth,\n      },\n      secondaryAction: {\n        width: theme.spacing(6),\n        textAlign: 'center',\n        marginRight: theme.spacing(1),\n      },\n      closedItemIcon: {\n        width: '100%',\n        justifyContent: 'center',\n      },\n      submenuArrow: {\n        display: 'flex',\n      },\n      expandButton: {\n        background: 'none',\n        border: 'none',\n        color: theme.palette.navigation.color,\n        width: '100%',\n        cursor: 'pointer',\n        position: 'relative',\n        height: 48,\n      },\n      arrows: {\n        position: 'absolute',\n        right: 10,\n      },\n      selected: {\n        '&$root': {\n          borderLeft: `solid ${sidebarConfig.selectedIndicatorWidth}px ${theme.palette.navigation.indicator}`,\n          color: theme.palette.navigation.selectedColor,\n        },\n        '&$closed': {\n          width: sidebarConfig.drawerWidthClosed,\n        },\n        '& $closedItemIcon': {\n          paddingRight: sidebarConfig.selectedIndicatorWidth,\n        },\n        '& $iconContainer': {\n          marginLeft: -sidebarConfig.selectedIndicatorWidth,\n        },\n      },\n    }),\n    { name: 'BackstageSidebarItem' },\n  );\n\n// This is a workaround for this issue https://github.com/mui/material-ui/issues/15511\n// The styling of the `selected` elements doesn't work as expected when using a prop callback.\n// Don't use this pattern unless needed\nfunction useMemoStyles(sidebarConfig: SidebarConfig) {\n  const useStyles = useMemo(\n    () => makeSidebarStyles(sidebarConfig),\n    [sidebarConfig],\n  );\n  return useStyles();\n}\n\n/**\n * Evaluates the routes of the SubmenuItems & nested DropdownItems.\n * The reevaluation is only triggered, if the `locationPathname` changes, as `useElementFilter` uses memorization.\n *\n * @param submenu SidebarSubmenu component\n * @param location Location\n * @returns boolean\n */\nconst useLocationMatch = (\n  submenu: React.ReactElement<SidebarSubmenuProps>,\n  location: Location,\n): boolean =>\n  useElementFilter(\n    submenu.props.children,\n    elements => {\n      let active = false;\n      elements\n        .getElements()\n        .forEach(\n          ({\n            props: { to, dropdownItems },\n          }: {\n            props: Partial<SidebarSubmenuItemProps>;\n          }) => {\n            if (!active) {\n              if (dropdownItems?.length) {\n                dropdownItems.forEach(\n                  ({ to: _to }) =>\n                    (active =\n                      active || isLocationMatch(location, resolvePath(_to))),\n                );\n                return;\n              }\n              if (to) {\n                active = isLocationMatch(location, resolvePath(to));\n              }\n            }\n          },\n        );\n      return active;\n    },\n    [location.pathname],\n  );\n\ntype SidebarItemBaseProps = {\n  icon: IconComponent;\n  text?: string;\n  hasNotifications?: boolean;\n  hasSubmenu?: boolean;\n  disableHighlight?: boolean;\n  className?: string;\n};\n\ntype SidebarItemButtonProps = SidebarItemBaseProps & {\n  onClick: (ev: React.MouseEvent) => void;\n  children?: ReactNode;\n};\n\ntype SidebarItemLinkProps = SidebarItemBaseProps & {\n  to: string;\n  onClick?: (ev: React.MouseEvent) => void;\n} & NavLinkProps;\n\ntype SidebarItemWithSubmenuProps = SidebarItemBaseProps & {\n  to?: string;\n  onClick?: (ev: React.MouseEvent) => void;\n  children: ReactNode;\n};\n\n/**\n * SidebarItem with 'to' property will be a clickable link.\n * SidebarItem with 'onClick' property and without 'to' property will be a clickable button.\n * SidebarItem which wraps a SidebarSubmenu will be a clickable button which opens a submenu.\n */\ntype SidebarItemProps =\n  | SidebarItemLinkProps\n  | SidebarItemButtonProps\n  | SidebarItemWithSubmenuProps;\n\nfunction isButtonItem(\n  props: SidebarItemProps,\n): props is SidebarItemButtonProps {\n  return (props as SidebarItemLinkProps).to === undefined;\n}\n\nconst sidebarSubmenuType = React.createElement(SidebarSubmenu).type;\n\n// TODO(Rugvip): Remove this once NavLink is updated in react-router-dom.\n//               This is needed because react-router doesn't handle the path comparison\n//               properly yet, matching for example /foobar with /foo.\nexport const WorkaroundNavLink = React.forwardRef<\n  HTMLAnchorElement,\n  NavLinkProps & { activeStyle?: CSSProperties; activeClassName?: string }\n>(function WorkaroundNavLinkWithRef(\n  {\n    to,\n    end,\n    style,\n    className,\n    activeStyle,\n    caseSensitive,\n    activeClassName = 'active',\n    'aria-current': ariaCurrentProp = 'page',\n    ...rest\n  },\n  ref,\n) {\n  let { pathname: locationPathname } = useLocation();\n  let { pathname: toPathname } = useResolvedPath(to);\n\n  if (!caseSensitive) {\n    locationPathname = locationPathname.toLocaleLowerCase('en-US');\n    toPathname = toPathname.toLocaleLowerCase('en-US');\n  }\n\n  let isActive = locationPathname === toPathname;\n  if (!isActive && !end) {\n    // This is the behavior that is different from the original NavLink\n    isActive = locationPathname.startsWith(`${toPathname}/`);\n  }\n\n  const ariaCurrent = isActive ? ariaCurrentProp : undefined;\n\n  return (\n    <Link\n      {...rest}\n      to={to}\n      ref={ref}\n      aria-current={ariaCurrent}\n      style={{ ...style, ...(isActive ? activeStyle : undefined) }}\n      className={classnames([\n        className,\n        isActive ? activeClassName : undefined,\n      ])}\n    />\n  );\n});\n\n/**\n * Common component used by SidebarItem & SidebarItemWithSubmenu\n */\nconst SidebarItemBase = forwardRef<any, SidebarItemProps>((props, ref) => {\n  const {\n    icon: Icon,\n    text,\n    hasNotifications = false,\n    hasSubmenu = false,\n    disableHighlight = false,\n    onClick,\n    children,\n    className,\n    ...navLinkProps\n  } = props;\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  // XXX (@koroeskohr): unsure this is optimal. But I just really didn't want to have the item component\n  // depend on the current location, and at least have it being optionally forced to selected.\n  // Still waiting on a Q answered to fine tune the implementation\n  const { isOpen } = useSidebarOpenState();\n\n  const divStyle =\n    !isOpen && hasSubmenu\n      ? { display: 'flex', marginLeft: '20px' }\n      : { lineHeight: '0' };\n\n  const displayItemIcon = (\n    <Box style={divStyle}>\n      <Icon fontSize=\"small\" />\n      {!isOpen && hasSubmenu ? <ArrowRightIcon fontSize=\"small\" /> : <></>}\n    </Box>\n  );\n\n  const itemIcon = (\n    <Badge\n      color=\"secondary\"\n      variant=\"dot\"\n      overlap=\"circular\"\n      invisible={!hasNotifications}\n      className={classnames({ [classes.closedItemIcon]: !isOpen })}\n    >\n      {displayItemIcon}\n    </Badge>\n  );\n\n  const openContent = (\n    <>\n      <Box data-testid=\"login-button\" className={classes.iconContainer}>\n        {itemIcon}\n      </Box>\n      {text && (\n        <Typography variant=\"subtitle2\" className={classes.label}>\n          {text}\n        </Typography>\n      )}\n      <div className={classes.secondaryAction}>{children}</div>\n    </>\n  );\n\n  const content = isOpen ? openContent : itemIcon;\n\n  const childProps = {\n    onClick,\n    className: classnames(\n      className,\n      classes.root,\n      isOpen ? classes.open : classes.closed,\n      isButtonItem(props) && classes.buttonItem,\n      { [classes.highlightable]: !disableHighlight },\n    ),\n  };\n\n  if (isButtonItem(props)) {\n    return (\n      <Button role=\"button\" aria-label={text} {...childProps} ref={ref}>\n        {content}\n      </Button>\n    );\n  }\n\n  return (\n    <WorkaroundNavLink\n      {...childProps}\n      activeClassName={classes.selected}\n      to={props.to ? props.to : ''}\n      ref={ref}\n      aria-label={text ? text : props.to}\n      {...navLinkProps}\n    >\n      {content}\n    </WorkaroundNavLink>\n  );\n});\n\nconst SidebarItemWithSubmenu = ({\n  children,\n  ...props\n}: SidebarItemBaseProps & {\n  children: React.ReactElement<SidebarSubmenuProps>;\n}) => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const [isHoveredOn, setIsHoveredOn] = useState(false);\n  const location = useLocation();\n  const isActive = useLocationMatch(children, location);\n  const isSmallScreen = useMediaQuery<BackstageTheme>((theme: BackstageTheme) =>\n    theme.breakpoints.down('sm'),\n  );\n\n  const handleMouseEnter = () => {\n    setIsHoveredOn(true);\n  };\n  const handleMouseLeave = () => {\n    setIsHoveredOn(false);\n  };\n\n  const arrowIcon = () => {\n    if (isSmallScreen) {\n      return isHoveredOn ? (\n        <ArrowDropUp fontSize=\"small\" className={classes.submenuArrow} />\n      ) : (\n        <ArrowDropDown fontSize=\"small\" className={classes.submenuArrow} />\n      );\n    }\n    return (\n      !isHoveredOn && (\n        <ArrowRightIcon fontSize=\"small\" className={classes.submenuArrow} />\n      )\n    );\n  };\n\n  return (\n    <SidebarItemWithSubmenuContext.Provider\n      value={{\n        isHoveredOn,\n        setIsHoveredOn,\n      }}\n    >\n      <div\n        data-testid=\"item-with-submenu\"\n        onMouseLeave={handleMouseLeave}\n        onTouchStart={isHoveredOn ? handleMouseLeave : handleMouseEnter}\n        onMouseEnter={handleMouseEnter}\n        className={classnames(isHoveredOn && classes.highlighted)}\n      >\n        <SidebarItemBase\n          hasSubmenu\n          className={isActive ? classes.selected : ''}\n          {...props}\n        >\n          {arrowIcon()}\n        </SidebarItemBase>\n        {isHoveredOn && children}\n      </div>\n    </SidebarItemWithSubmenuContext.Provider>\n  );\n};\n\n/**\n * Creates a `SidebarItem`\n *\n * @remarks\n * If children contain a `SidebarSubmenu` component the `SidebarItem` will have a expandable submenu\n */\nexport const SidebarItem = forwardRef<any, SidebarItemProps>((props, ref) => {\n  // Filter children for SidebarSubmenu components\n  const [submenu] = useElementFilter(props.children, elements =>\n    // Directly comparing child.type with SidebarSubmenu will not work with in\n    // combination with react-hot-loader\n    //\n    // https://github.com/gaearon/react-hot-loader/issues/304#issuecomment-456569720\n    elements.getElements().filter(child => child.type === sidebarSubmenuType),\n  );\n\n  if (submenu) {\n    return (\n      <SidebarItemWithSubmenu {...props}>\n        {submenu as React.ReactElement<SidebarSubmenuProps>}\n      </SidebarItemWithSubmenu>\n    );\n  }\n\n  return <SidebarItemBase {...props} ref={ref} />;\n}) as (props: SidebarItemProps) => JSX.Element;\n\ntype SidebarSearchFieldProps = {\n  onSearch: (input: string) => void;\n  to?: string;\n  icon?: IconComponent;\n};\n\nexport function SidebarSearchField(props: SidebarSearchFieldProps) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const [input, setInput] = useState('');\n  const classes = useMemoStyles(sidebarConfig);\n  const Icon = props.icon ? props.icon : SearchIcon;\n\n  const search = () => {\n    props.onSearch(input);\n    setInput('');\n  };\n\n  const handleEnter: KeyboardEventHandler = ev => {\n    if (ev.key === 'Enter') {\n      ev.preventDefault();\n      search();\n    }\n  };\n\n  const handleInput = (ev: React.ChangeEvent<HTMLInputElement>) => {\n    setInput(ev.target.value);\n  };\n\n  const handleInputClick = (ev: React.MouseEvent<HTMLInputElement>) => {\n    // Clicking into the search fields shouldn't navigate to the search page\n    ev.preventDefault();\n    ev.stopPropagation();\n  };\n\n  const handleItemClick = (ev: React.MouseEvent) => {\n    // Clicking on the search icon while should execute a query with the current field content\n    search();\n    ev.preventDefault();\n  };\n\n  return (\n    <Box className={classes.searchRoot}>\n      <SidebarItem\n        icon={Icon}\n        to={props.to}\n        onClick={handleItemClick}\n        disableHighlight\n      >\n        <TextField\n          placeholder=\"Search\"\n          value={input}\n          onClick={handleInputClick}\n          onChange={handleInput}\n          onKeyDown={handleEnter}\n          className={classes.searchContainer}\n          InputProps={{\n            disableUnderline: true,\n            className: classes.searchField,\n          }}\n          inputProps={{\n            className: classes.searchFieldHTMLInput,\n          }}\n        />\n      </SidebarItem>\n    </Box>\n  );\n}\n\nexport type SidebarSpaceClassKey = 'root';\n\nexport const SidebarSpace = styled('div')(\n  {\n    flex: 1,\n  },\n  { name: 'BackstageSidebarSpace' },\n) as ComponentType<ComponentProps<'div'> & StyledComponentProps<'root'>>;\n\nexport type SidebarSpacerClassKey = 'root';\n\nexport const SidebarSpacer = styled('div')(\n  {\n    height: 8,\n  },\n  { name: 'BackstageSidebarSpacer' },\n) as ComponentType<ComponentProps<'div'> & StyledComponentProps<'root'>>;\n\nexport type SidebarDividerClassKey = 'root';\n\nexport const SidebarDivider = styled('hr')(\n  ({ theme }) => ({\n    height: 1,\n    width: '100%',\n    background: '#383838',\n    border: 'none',\n    margin: theme.spacing(1.2, 0),\n  }),\n  { name: 'BackstageSidebarDivider' },\n) as ComponentType<ComponentProps<'hr'> & StyledComponentProps<'root'>>;\n\nconst styledScrollbar = (theme: Theme): CreateCSSProperties => ({\n  overflowY: 'auto',\n  '&::-webkit-scrollbar': {\n    backgroundColor: theme.palette.background.default,\n    width: '5px',\n    borderRadius: '5px',\n  },\n  '&::-webkit-scrollbar-thumb': {\n    backgroundColor: theme.palette.text.hint,\n    borderRadius: '5px',\n  },\n});\n\nexport const SidebarScrollWrapper = styled('div')(({ theme }) => {\n  const scrollbarStyles = styledScrollbar(theme);\n  return {\n    flex: '0 1 auto',\n    overflowX: 'hidden',\n    // 5px space to the right of the scrollbar\n    width: 'calc(100% - 5px)',\n    // Display at least one item in the container\n    // Question: Can this be a config/theme variable - if so, which? :/\n    minHeight: '48px',\n    overflowY: 'hidden',\n    '@media (hover: none)': scrollbarStyles,\n    '&:hover': scrollbarStyles,\n  };\n}) as ComponentType<ComponentProps<'div'> & StyledComponentProps<'root'>>;\n\n/**\n * A button which allows you to expand the sidebar when clicked.\n *\n * @remarks\n * Use optionally to replace sidebar's expand-on-hover feature with expand-on-click.\n *\n * If you are using this you might want to set the `disableExpandOnHover` of the `Sidebar` to `true`.\n *\n * @public\n */\nexport const SidebarExpandButton = () => {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useMemoStyles(sidebarConfig);\n  const { isOpen, setOpen } = useSidebarOpenState();\n  const isSmallScreen = useMediaQuery<BackstageTheme>(\n    theme => theme.breakpoints.down('md'),\n    { noSsr: true },\n  );\n\n  if (isSmallScreen) {\n    return null;\n  }\n\n  const handleClick = () => {\n    setOpen(!isOpen);\n  };\n\n  return (\n    <Button\n      role=\"button\"\n      onClick={handleClick}\n      className={classes.expandButton}\n      aria-label=\"Expand Sidebar\"\n      data-testid=\"sidebar-expand-button\"\n    >\n      <Box className={classes.arrows}>\n        {isOpen ? <DoubleArrowLeft /> : <DoubleArrowRight />}\n      </Box>\n    </Button>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { BackstageTheme } from '@backstage/theme';\nimport Box from '@material-ui/core/Box';\nimport Collapse from '@material-ui/core/Collapse';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { useLocalStorageValue } from '@react-hookz/web';\nimport React, { useContext, useState } from 'react';\n\nimport {\n  SIDEBAR_INTRO_LOCAL_STORAGE,\n  SidebarConfig,\n  SidebarConfigContext,\n} from './config';\nimport { SidebarDivider } from './Items';\nimport { useSidebarOpenState } from './SidebarOpenStateContext';\n\n/** @public */\nexport type SidebarIntroClassKey =\n  | 'introCard'\n  | 'introDismiss'\n  | 'introDismissLink'\n  | 'introDismissText'\n  | 'introDismissIcon';\n\nconst useStyles = makeStyles<BackstageTheme, { sidebarConfig: SidebarConfig }>(\n  theme => ({\n    introCard: props => ({\n      color: '#b5b5b5',\n      // XXX (@koroeskohr): should I be using a Mui theme variable?\n      fontSize: 12,\n      width: props.sidebarConfig.drawerWidthOpen,\n      marginTop: theme.spacing(2.25),\n      marginBottom: theme.spacing(1.5),\n      paddingLeft: props.sidebarConfig.iconPadding,\n      paddingRight: props.sidebarConfig.iconPadding,\n    }),\n    introDismiss: {\n      display: 'flex',\n      justifyContent: 'flex-end',\n      alignItems: 'center',\n      marginTop: theme.spacing(1.5),\n    },\n    introDismissLink: {\n      color: '#dddddd',\n      display: 'flex',\n      alignItems: 'center',\n      marginBottom: theme.spacing(0.5),\n      '&:hover': {\n        color: theme.palette.linkHover,\n        transition: theme.transitions.create('color', {\n          easing: theme.transitions.easing.sharp,\n          duration: theme.transitions.duration.shortest,\n        }),\n      },\n    },\n    introDismissText: {\n      fontSize: '0.7rem',\n      fontWeight: 'bold',\n      textTransform: 'uppercase',\n      letterSpacing: 1,\n    },\n    introDismissIcon: {\n      width: 18,\n      height: 18,\n      marginRight: theme.spacing(1.5),\n    },\n  }),\n  { name: 'BackstageSidebarIntro' },\n);\n\ntype IntroCardProps = {\n  text: string;\n  onClose: () => void;\n};\n\n/**\n * Closable card with information from Navigation Sidebar\n *\n * @public\n *\n */\n\nexport function IntroCard(props: IntroCardProps) {\n  const { sidebarConfig } = useContext(SidebarConfigContext);\n  const classes = useStyles({ sidebarConfig });\n  const { text, onClose } = props;\n  const handleClose = () => onClose();\n\n  return (\n    <Box className={classes.introCard}>\n      <Typography variant=\"subtitle2\">{text}</Typography>\n      <Box className={classes.introDismiss}>\n        <IconButton onClick={handleClose} className={classes.introDismissLink}>\n          <CloseIcon className={classes.introDismissIcon} />\n          <Typography component=\"span\" className={classes.introDismissText}>\n            Dismiss\n          </Typography>\n        </IconButton>\n      </Box>\n    </Box>\n  );\n}\n\ntype SidebarIntroLocalStorage = {\n  starredItemsDismissed: boolean;\n  recentlyViewedItemsDismissed: boolean;\n};\n\ntype SidebarIntroCardProps = {\n  text: string;\n  onDismiss: () => void;\n};\n\nconst SidebarIntroCard = (props: SidebarIntroCardProps) => {\n  const { text, onDismiss } = props;\n  const [collapsing, setCollapsing] = useState(false);\n  const startDismissing = () => {\n    setCollapsing(true);\n  };\n  return (\n    <Collapse in={!collapsing} onExited={onDismiss}>\n      <IntroCard text={text} onClose={startDismissing} />\n    </Collapse>\n  );\n};\n\nconst starredIntroText = `Fun fact! As you explore all the awesome plugins in Backstage, you can actually pin them to this side nav.\nKeep an eye out for the little star icon (⭐) next to the plugin name and give it a click!`;\nconst recentlyViewedIntroText =\n  'And your recently viewed plugins will pop up here!';\n\nexport function SidebarIntro(_props: {}) {\n  const { isOpen } = useSidebarOpenState();\n  const defaultValue = {\n    starredItemsDismissed: false,\n    recentlyViewedItemsDismissed: false,\n  };\n  const { value: dismissedIntro, set: setDismissedIntro } =\n    useLocalStorageValue<SidebarIntroLocalStorage>(SIDEBAR_INTRO_LOCAL_STORAGE);\n\n  const { starredItemsDismissed, recentlyViewedItemsDismissed } =\n    dismissedIntro ?? {};\n\n  const dismissStarred = () => {\n    setDismissedIntro(state => ({\n      ...defaultValue,\n      ...state,\n      starredItemsDismissed: true,\n    }));\n  };\n  const dismissRecentlyViewed = () => {\n    setDismissedIntro(state => ({\n      ...defaultValue,\n      ...state,\n      recentlyViewedItemsDismissed: true,\n    }));\n  };\n\n  if (!isOpen) {\n    return null;\n  }\n\n  return (\n    <>\n      {!starredItemsDismissed && (\n        <>\n          <SidebarIntroCard\n            text={starredIntroText}\n            onDismiss={dismissStarred}\n          />\n          <SidebarDivider />\n        </>\n      )}\n      {!recentlyViewedItemsDismissed && (\n        <SidebarIntroCard\n          text={recentlyViewedIntroText}\n          onDismiss={dismissRecentlyViewed}\n        />\n      )}\n    </>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport React, { PropsWithChildren } from 'react';\nimport { useContent } from '../Sidebar';\n\n/** @public */\nexport type BackstageContentClassKey = 'root' | 'stretch' | 'noPadding';\n\nconst useStyles = makeStyles(\n  (theme: Theme) => ({\n    root: {\n      gridArea: 'pageContent',\n      minWidth: 0,\n      paddingTop: theme.spacing(3),\n      paddingBottom: theme.spacing(3),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n    },\n    stretch: {\n      display: 'flex',\n      flexDirection: 'column',\n      flexGrow: 1,\n    },\n    noPadding: {\n      padding: 0,\n    },\n  }),\n  { name: 'BackstageContent' },\n);\n\ntype Props = {\n  stretch?: boolean;\n  noPadding?: boolean;\n  className?: string;\n};\n\n/**\n * The main content part inside a {@link Page}.\n *\n * @public\n *\n */\n\nexport function Content(props: PropsWithChildren<Props>) {\n  const { className, stretch, noPadding, children, ...restProps } = props;\n\n  const { contentRef } = useContent();\n\n  const classes = useStyles();\n  return (\n    <article\n      ref={contentRef}\n      tabIndex={-1}\n      {...restProps}\n      className={classNames(classes.root, className, {\n        [classes.stretch]: stretch,\n        [classes.noPadding]: noPadding,\n      })}\n    >\n      {children}\n    </article>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TabUI, { TabProps } from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport React, { useCallback, useEffect, useState } from 'react';\n\n// TODO(blam): Remove this implementation when the Tabs are ready\n// This is just a temporary solution to implementing tabs for now\n\n/** @public */\nexport type HeaderTabsClassKey =\n  | 'tabsWrapper'\n  | 'defaultTab'\n  | 'selected'\n  | 'tabRoot';\n\nconst useStyles = makeStyles(\n  theme => ({\n    tabsWrapper: {\n      gridArea: 'pageSubheader',\n      backgroundColor: theme.palette.background.paper,\n      paddingLeft: theme.spacing(3),\n      minWidth: 0,\n    },\n    defaultTab: {\n      ...theme.typography.caption,\n      padding: theme.spacing(3, 3),\n      textTransform: 'uppercase',\n      fontWeight: theme.typography.fontWeightBold,\n      color: theme.palette.text.secondary,\n    },\n    selected: {\n      color: theme.palette.text.primary,\n    },\n    tabRoot: {\n      '&:hover': {\n        backgroundColor: theme.palette.background.default,\n        color: theme.palette.text.primary,\n      },\n    },\n  }),\n  { name: 'BackstageHeaderTabs' },\n);\n\nexport type Tab = {\n  id: string;\n  label: string;\n  tabProps?: TabProps<React.ElementType, { component?: React.ElementType }>;\n};\n\ntype HeaderTabsProps = {\n  tabs: Tab[];\n  onChange?: (index: number) => void;\n  selectedIndex?: number;\n};\n\n/**\n * Horizontal Tabs component\n *\n * @public\n *\n */\nexport function HeaderTabs(props: HeaderTabsProps) {\n  const { tabs, onChange, selectedIndex } = props;\n  const [selectedTab, setSelectedTab] = useState<number>(selectedIndex ?? 0);\n  const styles = useStyles();\n\n  const handleChange = useCallback(\n    (_: React.ChangeEvent<{}>, index: number) => {\n      if (selectedIndex === undefined) {\n        setSelectedTab(index);\n      }\n      if (onChange && selectedIndex !== index) onChange(index);\n    },\n    [selectedIndex, onChange],\n  );\n\n  useEffect(() => {\n    if (selectedIndex !== undefined) {\n      setSelectedTab(selectedIndex);\n    }\n  }, [selectedIndex]);\n\n  return (\n    <Box className={styles.tabsWrapper}>\n      <Tabs\n        selectionFollowsFocus\n        indicatorColor=\"primary\"\n        textColor=\"inherit\"\n        variant=\"scrollable\"\n        scrollButtons=\"auto\"\n        aria-label=\"tabs\"\n        onChange={handleChange}\n        value={selectedTab}\n      >\n        {tabs.map((tab, index) => (\n          <TabUI\n            {...tab.tabProps}\n            data-testid={`header-tab-${index}`}\n            label={tab.label}\n            key={tab.id}\n            value={index}\n            className={styles.defaultTab}\n            classes={{ selected: styles.selected, root: styles.tabRoot }}\n          />\n        ))}\n      </Tabs>\n    </Box>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useMemo } from 'react';\nimport { Helmet } from 'react-helmet';\nimport {\n  matchRoutes,\n  useNavigate,\n  useParams,\n  useRoutes,\n} from 'react-router-dom';\nimport { Content } from '../../layout/Content';\nimport { HeaderTabs } from '../../layout/HeaderTabs';\nimport { SubRoute } from './types';\n\nexport function useSelectedSubRoute(subRoutes: SubRoute[]): {\n  index: number;\n  route: SubRoute;\n  element: JSX.Element;\n} {\n  const params = useParams();\n\n  const routes = subRoutes.map(({ path, children }) => ({\n    caseSensitive: false,\n    path: `${path}/*`,\n    element: children,\n  }));\n\n  // TODO: remove once react-router updated\n  const sortedRoutes = routes.sort((a, b) =>\n    // remove \"/*\" symbols from path end before comparing\n    b.path.replace(/\\/\\*$/, '').localeCompare(a.path.replace(/\\/\\*$/, '')),\n  );\n\n  const element = useRoutes(sortedRoutes) ?? subRoutes[0].children;\n\n  // TODO(Rugvip): Once we only support v6 stable we can always prefix\n  // This avoids having a double / prefix for react-router v6 beta, which in turn breaks\n  // the tab highlighting when using relative paths for the tabs.\n  let currentRoute = params['*'] ?? '';\n  if (!currentRoute.startsWith('/')) {\n    currentRoute = `/${currentRoute}`;\n  }\n\n  const [matchedRoute] = matchRoutes(sortedRoutes, currentRoute) ?? [];\n  const foundIndex = matchedRoute\n    ? subRoutes.findIndex(t => `${t.path}/*` === matchedRoute.route.path)\n    : 0;\n\n  return {\n    index: foundIndex === -1 ? 0 : foundIndex,\n    element,\n    route: subRoutes[foundIndex] ?? subRoutes[0],\n  };\n}\n\nexport function RoutedTabs(props: { routes: SubRoute[] }) {\n  const { routes } = props;\n  const navigate = useNavigate();\n  const { index, route, element } = useSelectedSubRoute(routes);\n  const headerTabs = useMemo(\n    () =>\n      routes.map(t => ({\n        id: t.path,\n        label: t.title,\n        tabProps: t.tabProps,\n      })),\n    [routes],\n  );\n\n  const onTabChange = (tabIndex: number) => {\n    let { path } = routes[tabIndex];\n    // Remove trailing /*\n    path = path.replace(/\\/\\*$/, '');\n    // And remove leading / for relative navigation\n    path = path.replace(/^\\//, '');\n    // Note! route resolves relative to the position in the React tree,\n    // not relative to current location\n    navigate(path);\n  };\n  return (\n    <>\n      <HeaderTabs\n        tabs={headerTabs}\n        selectedIndex={index}\n        onChange={onTabChange}\n      />\n      <Content>\n        <Helmet title={route.title} />\n        {element}\n      </Content>\n    </>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { attachComponentData } from '@backstage/core-plugin-api';\nimport React, {\n  Children,\n  Fragment,\n  isValidElement,\n  PropsWithChildren,\n  ReactNode,\n} from 'react';\nimport { RoutedTabs } from './RoutedTabs';\nimport { TabProps } from '@material-ui/core/Tab';\n\ntype SubRoute = {\n  path: string;\n  title: string;\n  children: JSX.Element;\n  tabProps?: TabProps<React.ElementType, { component?: React.ElementType }>;\n};\n\nconst Route: (props: SubRoute) => null = () => null;\n\n// This causes all mount points that are discovered within this route to use the path of the route itself\nattachComponentData(Route, 'core.gatherMountPoints', true);\n\nexport function createSubRoutesFromChildren(\n  childrenProps: ReactNode,\n): SubRoute[] {\n  // Directly comparing child.type with Route will not work with in\n  // combination with react-hot-loader in storybook\n  // https://github.com/gaearon/react-hot-loader/issues/304\n  const routeType = (\n    <Route path=\"\" title=\"\">\n      <div />\n    </Route>\n  ).type;\n\n  return Children.toArray(childrenProps).flatMap(child => {\n    if (!isValidElement(child)) {\n      return [];\n    }\n\n    if (child.type === Fragment) {\n      return createSubRoutesFromChildren(child.props.children);\n    }\n\n    if (child.type !== routeType) {\n      throw new Error('Child of TabbedLayout must be an TabbedLayout.Route');\n    }\n\n    const { path, title, children, tabProps } = child.props;\n    return [{ path, title, children, tabProps }];\n  });\n}\n\n/**\n * TabbedLayout is a compound component, which allows you to define a layout for\n * pages using a sub-navigation mechanism.\n *\n * @remarks\n * Consists of two parts: TabbedLayout and TabbedLayout.Route\n *\n * @example\n * ```jsx\n * <TabbedLayout>\n *   <TabbedLayout.Route path=\"/example\" title=\"Example tab\">\n *     <div>This is rendered under /example/anything-here route</div>\n *   </TabbedLayout.Route>\n * </TabbedLayout>\n * ```\n */\nexport function TabbedLayout(props: PropsWithChildren<{}>) {\n  const routes = createSubRoutesFromChildren(props.children);\n\n  return <RoutedTabs routes={routes} />;\n}\n\nTabbedLayout.Route = Route;\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { BackstageTheme } from '@backstage/theme';\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\n\nexport type SubvalueCellClassKey = 'value' | 'subvalue';\n\nconst useSubvalueCellStyles = makeStyles<BackstageTheme>(\n  theme => ({\n    value: {\n      marginBottom: theme.spacing(0.75),\n    },\n    subvalue: {\n      color: theme.palette.textSubtle,\n      fontWeight: 'normal',\n    },\n  }),\n  { name: 'BackstageSubvalueCell' },\n);\n\ntype SubvalueCellProps = {\n  value: React.ReactNode;\n  subvalue: React.ReactNode;\n};\n\nexport function SubvalueCell(props: SubvalueCellProps) {\n  const { value, subvalue } = props;\n  const classes = useSubvalueCellStyles();\n\n  return (\n    <>\n      <Box className={classes.value}>{value}</Box>\n      <Box className={classes.subvalue}>{subvalue}</Box>\n    </>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { BackstageTheme } from '@backstage/theme';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useEffect, useState } from 'react';\n\nimport { Select } from '../Select';\nimport { SelectProps } from '../Select/Select';\n\nexport type TableFiltersClassKey = 'root' | 'value' | 'heder' | 'filters';\n\nconst useFilterStyles = makeStyles<BackstageTheme>(\n  theme => ({\n    root: {\n      height: '100%',\n      width: '315px',\n      display: 'flex',\n      flexDirection: 'column',\n      marginRight: theme.spacing(3),\n    },\n    value: {\n      fontWeight: 'bold',\n      fontSize: 18,\n    },\n    header: {\n      display: 'flex',\n      alignItems: 'center',\n      height: theme.spacing(7.5),\n      justifyContent: 'space-between',\n      borderBottom: `1px solid ${theme.palette.grey[500]}`,\n    },\n    filters: {\n      display: 'flex',\n      flexDirection: 'column',\n      '& > *': {\n        marginTop: theme.spacing(2),\n      },\n    },\n  }),\n  { name: 'BackstageTableFilters' },\n);\n\nexport type Without<T, K> = Pick<T, Exclude<keyof T, K>>;\n\nexport type Filter = {\n  type: 'select' | 'multiple-select';\n  element: Without<SelectProps, 'onChange'>;\n};\n\nexport type SelectedFilters = {\n  [key: string]: string | string[];\n};\n\ntype Props = {\n  filters: Filter[];\n  selectedFilters?: SelectedFilters;\n  onChangeFilters: (arg: any) => any;\n};\n\nexport const Filters = (props: Props) => {\n  const classes = useFilterStyles();\n\n  const { onChangeFilters } = props;\n\n  const [selectedFilters, setSelectedFilters] = useState<SelectedFilters>({\n    ...props.selectedFilters,\n  });\n  const [reset, triggerReset] = useState(false);\n\n  // Trigger re-rendering\n  const handleClick = () => {\n    setSelectedFilters({});\n    triggerReset(el => !el);\n  };\n\n  useEffect(() => {\n    onChangeFilters(selectedFilters);\n  }, [selectedFilters, onChangeFilters]);\n\n  // As material table doesn't provide a way to add a column filter tab we will make our own filter logic\n  return (\n    <Box className={classes.root}>\n      <Box className={classes.header}>\n        <Box className={classes.value}>Filters</Box>\n        <Button color=\"primary\" onClick={handleClick}>\n          Clear all\n        </Button>\n      </Box>\n      <Box className={classes.filters}>\n        {props.filters?.length &&\n          props.filters.map(filter => (\n            <Select\n              triggerReset={reset}\n              key={filter.element.label}\n              {...(filter.element as SelectProps)}\n              selected={selectedFilters[filter.element.label]}\n              onChange={el =>\n                setSelectedFilters({\n                  ...selectedFilters,\n                  [filter.element.label]: el as any,\n                })\n              }\n            />\n          ))}\n      </Box>\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { BackstageTheme } from '@backstage/theme';\nimport MTable, {\n  Column,\n  Icons,\n  MaterialTableProps,\n  MTableBody,\n  MTableHeader,\n  MTableToolbar,\n  Options,\n} from '@material-table/core';\nimport Box from '@material-ui/core/Box';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles, useTheme, withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowUpward from '@material-ui/icons/ArrowUpward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\nimport { isEqual, transform } from 'lodash';\nimport React, {\n  forwardRef,\n  MutableRefObject,\n  ReactNode,\n  useCallback,\n  useEffect,\n  useState,\n} from 'react';\n\nimport { SelectProps } from '../Select/Select';\nimport { Filter, Filters, SelectedFilters, Without } from './Filters';\n\n// Material-table is not using the standard icons available in in material-ui. https://github.com/mbrn/material-table/issues/51\nconst tableIcons: Icons = {\n  Add: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => (\n    <ChevronLeft {...props} ref={ref} />\n  )),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowUpward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />),\n};\n\n// TODO: Material table might already have such a function internally that we can use?\nfunction extractValueByField(data: any, field: string): any | undefined {\n  const path = field.split('.');\n  let value = data[path[0]];\n\n  for (let i = 1; i < path.length; ++i) {\n    if (value === undefined) {\n      return value;\n    }\n\n    const f = path[i];\n    value = value[f];\n  }\n\n  return value;\n}\n\nexport type TableHeaderClassKey = 'header';\n\nconst StyledMTableHeader = withStyles(\n  theme => ({\n    header: {\n      padding: theme.spacing(1, 2, 1, 2.5),\n      borderTop: `1px solid ${theme.palette.grey.A100}`,\n      borderBottom: `1px solid ${theme.palette.grey.A100}`,\n      // withStyles hasn't a generic overload for theme\n      color: (theme as BackstageTheme).palette.textSubtle,\n      fontWeight: theme.typography.fontWeightBold,\n      position: 'static',\n      wordBreak: 'normal',\n    },\n  }),\n  { name: 'BackstageTableHeader' },\n)(MTableHeader);\n\nexport type TableToolbarClassKey = 'root' | 'title' | 'searchField';\n\nconst StyledMTableToolbar = withStyles(\n  theme => ({\n    root: {\n      padding: theme.spacing(3, 0, 2.5, 2.5),\n    },\n    title: {\n      '& > h6': {\n        fontWeight: theme.typography.fontWeightBold,\n      },\n    },\n    searchField: {\n      paddingRight: theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageTableToolbar' },\n)(MTableToolbar);\n\n/** @public */\nexport type FiltersContainerClassKey = 'root' | 'title';\n\nconst useFilterStyles = makeStyles<BackstageTheme>(\n  theme => ({\n    root: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n    },\n    title: {\n      fontWeight: theme.typography.fontWeightBold,\n      fontSize: 18,\n      whiteSpace: 'nowrap',\n    },\n  }),\n  { name: 'BackstageTableFiltersContainer' },\n);\n\nexport type TableClassKey = 'root';\n\nconst useTableStyles = makeStyles<BackstageTheme>(\n  () => ({\n    root: {\n      display: 'flex',\n      alignItems: 'start',\n    },\n  }),\n  { name: 'BackstageTable' },\n);\n\nfunction convertColumns<T extends object>(\n  columns: TableColumn<T>[],\n  theme: BackstageTheme,\n): TableColumn<T>[] {\n  return columns.map(column => {\n    const headerStyle: React.CSSProperties = column.headerStyle ?? {};\n\n    let cellStyle = column.cellStyle || {};\n\n    if (column.highlight) {\n      headerStyle.color = theme.palette.textContrast;\n\n      if (typeof cellStyle === 'object') {\n        (cellStyle as React.CSSProperties).fontWeight =\n          theme.typography.fontWeightBold;\n      } else {\n        const cellStyleFn = cellStyle as (\n          data: any,\n          rowData: T,\n          column?: Column<T>,\n        ) => React.CSSProperties;\n        cellStyle = (data, rowData, rowColumn) => {\n          const style = cellStyleFn(data, rowData, rowColumn);\n          return { ...style, fontWeight: theme.typography.fontWeightBold };\n        };\n      }\n    }\n\n    return {\n      ...column,\n      headerStyle,\n      cellStyle,\n    };\n  });\n}\n\nfunction removeDefaultValues(state: any, defaultState: any): any {\n  return transform(state, (result, value, key) => {\n    if (!isEqual(value, defaultState[key])) {\n      result[key] = value;\n    }\n  });\n}\n\nconst defaultInitialState = {\n  search: '',\n  filtersOpen: false,\n  filters: {},\n};\n\nexport interface TableColumn<T extends object = {}> extends Column<T> {\n  highlight?: boolean;\n  width?: string;\n}\n\nexport type TableFilter = {\n  column: string;\n  type: 'select' | 'multiple-select';\n};\n\nexport type TableState = {\n  search?: string;\n  filtersOpen?: boolean;\n  filters?: SelectedFilters;\n};\n\nexport interface TableProps<T extends object = {}>\n  extends MaterialTableProps<T> {\n  columns: TableColumn<T>[];\n  subtitle?: string;\n  filters?: TableFilter[];\n  initialState?: TableState;\n  emptyContent?: ReactNode;\n  onStateChange?: (state: TableState) => any;\n}\n\nexport interface TableOptions<T extends object = {}> extends Options<T> {}\n\nexport function TableToolbar(toolbarProps: {\n  toolbarRef: MutableRefObject<any>;\n  setSearch: (value: string) => void;\n  onSearchChanged: (value: string) => void;\n  toggleFilters: () => void;\n  hasFilters: boolean;\n  selectedFiltersLength: number;\n}) {\n  const {\n    toolbarRef,\n    setSearch,\n    hasFilters,\n    selectedFiltersLength,\n    toggleFilters,\n  } = toolbarProps;\n  const filtersClasses = useFilterStyles();\n  const onSearchChanged = useCallback(\n    (searchText: string) => {\n      toolbarProps.onSearchChanged(searchText);\n      setSearch(searchText);\n    },\n    [toolbarProps, setSearch],\n  );\n\n  if (hasFilters) {\n    return (\n      <Box className={filtersClasses.root}>\n        <Box className={filtersClasses.root}>\n          <IconButton onClick={toggleFilters} aria-label=\"filter list\">\n            <FilterList />\n          </IconButton>\n          <Typography className={filtersClasses.title}>\n            Filters ({selectedFiltersLength})\n          </Typography>\n        </Box>\n        <StyledMTableToolbar\n          {...toolbarProps}\n          ref={toolbarRef}\n          onSearchChanged={onSearchChanged}\n        />\n      </Box>\n    );\n  }\n\n  return (\n    <StyledMTableToolbar\n      {...toolbarProps}\n      ref={toolbarRef}\n      onSearchChanged={onSearchChanged}\n    />\n  );\n}\n\n/**\n * @public\n */\nexport function Table<T extends object = {}>(props: TableProps<T>) {\n  const {\n    data,\n    columns,\n    options,\n    title,\n    subtitle,\n    filters,\n    initialState,\n    emptyContent,\n    onStateChange,\n    components,\n    ...restProps\n  } = props;\n  const tableClasses = useTableStyles();\n\n  const theme = useTheme<BackstageTheme>();\n\n  const calculatedInitialState = { ...defaultInitialState, ...initialState };\n\n  const [filtersOpen, setFiltersOpen] = useState(\n    calculatedInitialState.filtersOpen,\n  );\n  const toggleFilters = useCallback(\n    () => setFiltersOpen(v => !v),\n    [setFiltersOpen],\n  );\n  const [selectedFiltersLength, setSelectedFiltersLength] = useState(0);\n  const [tableData, setTableData] = useState(data as any[]);\n  const [selectedFilters, setSelectedFilters] = useState(\n    calculatedInitialState.filters,\n  );\n\n  const MTColumns = convertColumns(columns, theme);\n\n  const [search, setSearch] = useState(calculatedInitialState.search);\n\n  useEffect(() => {\n    if (onStateChange) {\n      const state = removeDefaultValues(\n        {\n          search,\n          filtersOpen,\n          filters: selectedFilters,\n        },\n        defaultInitialState,\n      );\n\n      onStateChange(state);\n    }\n  }, [search, filtersOpen, selectedFilters, onStateChange]);\n\n  const defaultOptions: Options<T> = {\n    headerStyle: {\n      textTransform: 'uppercase',\n    },\n  };\n\n  const getFieldByTitle = useCallback(\n    (titleValue: string | keyof T) =>\n      columns.find(el => el.title === titleValue)?.field,\n    [columns],\n  );\n\n  useEffect(() => {\n    if (typeof data === 'function') {\n      return;\n    }\n    if (!selectedFilters) {\n      setTableData(data as any[]);\n      return;\n    }\n\n    const selectedFiltersArray = Object.values(selectedFilters);\n    if (data && selectedFiltersArray.flat().length) {\n      const newData = (data as any[]).filter(\n        el =>\n          !!Object.entries(selectedFilters)\n            .filter(([, value]) => !!value.length)\n            .every(([key, filterValue]) => {\n              const fieldValue = extractValueByField(\n                el,\n                getFieldByTitle(key) as string,\n              );\n\n              if (Array.isArray(fieldValue) && Array.isArray(filterValue)) {\n                return fieldValue.some(v => filterValue.includes(v));\n              } else if (Array.isArray(fieldValue)) {\n                return fieldValue.includes(filterValue);\n              } else if (Array.isArray(filterValue)) {\n                return filterValue.includes(fieldValue);\n              }\n\n              return fieldValue === filterValue;\n            }),\n      );\n      setTableData(newData);\n    } else {\n      setTableData(data as any[]);\n    }\n    setSelectedFiltersLength(selectedFiltersArray.flat().length);\n  }, [data, selectedFilters, getFieldByTitle]);\n\n  const constructFilters = (\n    filterConfig: TableFilter[],\n    dataValue: any[] | undefined,\n  ): Filter[] => {\n    const extractDistinctValues = (field: string | keyof T): Set<any> => {\n      const distinctValues = new Set<any>();\n      const addValue = (value: any) => {\n        if (value !== undefined && value !== null) {\n          distinctValues.add(value);\n        }\n      };\n\n      if (dataValue) {\n        dataValue.forEach(el => {\n          const value = extractValueByField(\n            el,\n            getFieldByTitle(field) as string,\n          );\n\n          if (Array.isArray(value)) {\n            (value as []).forEach(addValue);\n          } else {\n            addValue(value);\n          }\n        });\n      }\n\n      return distinctValues;\n    };\n\n    const constructSelect = (\n      filter: TableFilter,\n    ): Without<SelectProps, 'onChange'> => {\n      return {\n        placeholder: 'All results',\n        label: filter.column,\n        multiple: filter.type === 'multiple-select',\n        items: [...extractDistinctValues(filter.column)].sort().map(value => ({\n          label: value,\n          value,\n        })),\n      };\n    };\n\n    return filterConfig.map(filter => ({\n      type: filter.type,\n      element: constructSelect(filter),\n    }));\n  };\n\n  const hasFilters = !!filters?.length;\n  const Toolbar = useCallback(\n    toolbarProps => {\n      return (\n        <TableToolbar\n          setSearch={setSearch}\n          hasFilters={hasFilters}\n          selectedFiltersLength={selectedFiltersLength}\n          toggleFilters={toggleFilters}\n          {...toolbarProps}\n        />\n      );\n    },\n    [toggleFilters, hasFilters, selectedFiltersLength, setSearch],\n  );\n\n  const hasNoRows = typeof data !== 'function' && data.length === 0;\n  const columnCount = columns.length;\n  const Body = useCallback(\n    bodyProps => {\n      if (emptyContent && hasNoRows) {\n        return (\n          <tbody>\n            <tr>\n              <td colSpan={columnCount}>{emptyContent}</td>\n            </tr>\n          </tbody>\n        );\n      }\n\n      return <MTableBody {...bodyProps} />;\n    },\n    [hasNoRows, emptyContent, columnCount],\n  );\n\n  return (\n    <Box className={tableClasses.root}>\n      {filtersOpen && data && typeof data !== 'function' && filters?.length && (\n        <Filters\n          filters={constructFilters(filters, data as any[])}\n          selectedFilters={selectedFilters}\n          onChangeFilters={setSelectedFilters}\n        />\n      )}\n      <MTable<T>\n        components={{\n          Header: StyledMTableHeader,\n          Toolbar,\n          Body,\n          ...components,\n        }}\n        options={{ ...defaultOptions, ...options }}\n        columns={MTColumns}\n        icons={tableIcons}\n        title={\n          <>\n            <Typography variant=\"h5\" component=\"h2\">\n              {title}\n            </Typography>\n            {subtitle && (\n              <Typography color=\"textSecondary\" variant=\"body1\">\n                {subtitle}\n              </Typography>\n            )}\n          </>\n        }\n        data={typeof data === 'function' ? data : tableData}\n        style={{ width: '100%' }}\n        localization={{\n          toolbar: { searchPlaceholder: 'Filter', searchTooltip: 'Filter' },\n        }}\n        {...restProps}\n      />\n    </Box>\n  );\n}\n\nTable.icons = Object.freeze(tableIcons);\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function chunkArray<T>(array: T[], chunkSize: number): T[][] {\n  if (chunkSize <= 0) {\n    return [array];\n  }\n\n  const result: T[][] = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n\n  return result;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Box from '@material-ui/core/Box';\nimport React, { PropsWithChildren } from 'react';\n\nexport interface TabPanelProps {\n  value?: any;\n  index?: number;\n}\n\nexport const TabPanel = (props: PropsWithChildren<TabPanelProps>) => {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <Box\n      role=\"tabpanel\"\n      hidden={value !== index}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box p={3}>{children}</Box>}\n    </Box>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport { BackstageTheme } from '@backstage/theme';\n\ninterface StyledIconProps {\n  ariaLabel: string;\n  children: any;\n  isNext?: boolean;\n  onClick: any;\n}\n\nexport type TabIconClassKey = 'root';\n\nconst useStyles = makeStyles<BackstageTheme, StyledIconProps>(\n  theme => ({\n    root: {\n      color: '#6E6E6E',\n      overflow: 'visible',\n      fontSize: theme.typography.h5.fontSize,\n      textAlign: 'center',\n      borderRadius: '50%',\n      backgroundColor: '#E6E6E6',\n      marginLeft: props => (props.isNext ? 'auto' : '0'),\n      marginRight: props => (props.isNext ? '0' : theme.spacing(1.25)),\n      '&:hover': {\n        backgroundColor: '#E6E6E6',\n        opacity: '1',\n      },\n    },\n  }),\n  { name: 'BackstageTabIcon' },\n);\n\nexport const StyledIcon = (props: StyledIconProps) => {\n  const classes = useStyles(props);\n  const { ariaLabel, onClick } = props;\n  return (\n    <IconButton\n      onClick={onClick}\n      className={classes.root}\n      size=\"small\"\n      disableRipple\n      disableFocusRipple\n      aria-label={ariaLabel}\n    >\n      {props.children}\n    </IconButton>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tab from '@material-ui/core/Tab';\nimport { BackstageTheme } from '@backstage/theme';\n\ninterface StyledTabProps {\n  label?: string;\n  icon?: any; // TODO: define type for material-ui icons\n  isFirstNav?: boolean;\n  isFirstIndex?: boolean;\n  value?: any;\n}\n\nconst tabMarginLeft = (isFirstNav: boolean, isFirstIndex: boolean) => {\n  if (isFirstIndex) {\n    if (isFirstNav) {\n      return '20px';\n    }\n    return '0';\n  }\n  return '40px';\n};\n\n/** @public */\nexport type TabClassKey = 'root' | 'selected';\n\nconst useStyles = makeStyles<BackstageTheme, StyledTabProps>(\n  theme => ({\n    root: {\n      textTransform: 'none',\n      height: '64px',\n      fontWeight: theme.typography.fontWeightBold,\n      fontSize: theme.typography.pxToRem(13),\n      color: theme.palette.textSubtle,\n      marginLeft: props =>\n        tabMarginLeft(\n          props.isFirstNav as boolean,\n          props.isFirstIndex as boolean,\n        ),\n      width: '130px',\n      minWidth: '130px',\n      '&:hover': {\n        outline: 'none',\n        backgroundColor: 'transparent',\n        color: theme.palette.textSubtle,\n      },\n    },\n  }),\n  { name: 'BackstageTab' },\n);\n\nexport const StyledTab = (props: StyledTabProps) => {\n  const classes = useStyles(props);\n  const { isFirstNav, isFirstIndex, ...rest } = props;\n  return <Tab classes={classes} disableRipple {...rest} />;\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tabs from '@material-ui/core/Tabs';\nimport Typography from '@material-ui/core/Typography';\nimport { BackstageTheme } from '@backstage/theme';\n\ninterface StyledTabsProps {\n  value: number | boolean;\n  selectionFollowsFocus: boolean;\n  onChange: (event: React.ChangeEvent<{}>, newValue: number) => void;\n}\n\nexport type TabBarClassKey = 'indicator' | 'flexContainer' | 'root';\n\nconst useStyles = makeStyles<BackstageTheme>(\n  theme => ({\n    indicator: {\n      display: 'flex',\n      justifyContent: 'center',\n      backgroundColor: theme.palette.tabbar.indicator,\n      height: theme.spacing(0.5),\n    },\n    flexContainer: {\n      alignItems: 'center',\n    },\n    root: {\n      '&:last-child': {\n        marginLeft: 'auto',\n      },\n    },\n  }),\n  { name: 'BackstageTabBar' },\n);\n\nexport const StyledTabs = (props: PropsWithChildren<StyledTabsProps>) => {\n  const classes = useStyles(props);\n  return (\n    <Tabs\n      classes={classes}\n      {...props}\n      TabIndicatorProps={{ children: <Typography component=\"span\" /> }}\n    />\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useRef, useEffect, MutableRefObject, useState } from 'react';\nimport { BackstageTheme } from '@backstage/theme';\nimport AppBar from '@material-ui/core/AppBar';\nimport { makeStyles } from '@material-ui/core/styles';\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\nimport { chunkArray } from './utils';\nimport useWindowSize from 'react-use/lib/useWindowSize';\n\n/* Import Components */\n\nimport { TabPanel } from './TabPanel';\nimport { StyledIcon } from './TabIcon';\nimport { StyledTab } from './Tab';\nimport { StyledTabs } from './TabBar';\nimport Box from '@material-ui/core/Box';\n\n/* Props Types */\n\nexport interface TabProps {\n  content: any;\n  label?: string;\n  icon?: any; // TODO: define type for material-ui icons\n}\n\nexport interface TabsProps {\n  tabs: TabProps[];\n}\n\nexport type TabsClassKey = 'root' | 'styledTabs' | 'appbar';\n\nconst useStyles = makeStyles<BackstageTheme>(\n  theme => ({\n    root: {\n      flexGrow: 1,\n      width: '100%',\n    },\n    styledTabs: {\n      backgroundColor: theme.palette.background.paper,\n    },\n    appbar: {\n      boxShadow: 'none',\n      backgroundColor: theme.palette.background.paper,\n      paddingLeft: theme.spacing(1.25),\n      paddingRight: theme.spacing(1.25),\n    },\n  }),\n  { name: 'BackstageTabs' },\n);\n\nexport function Tabs(props: TabsProps) {\n  const { tabs } = props;\n  const classes = useStyles();\n  const [value, setValue] = useState([0, 0]); // [selectedChunkedNavIndex, selectedIndex]\n  const [navIndex, setNavIndex] = useState(0);\n  const [numberOfChunkedElement, setNumberOfChunkedElement] = useState(0);\n  const [chunkedTabs, setChunkedTabs] = useState<TabProps[][]>([[]]);\n  const wrapper = useRef() as MutableRefObject<HTMLDivElement>;\n\n  const { width } = useWindowSize();\n\n  const handleChange = (_: React.ChangeEvent<{}>, newValue: number) => {\n    setValue([navIndex, newValue]);\n  };\n\n  const navigateToPrevChunk = () => {\n    setNavIndex(navIndex - 1);\n  };\n\n  const navigateToNextChunk = () => {\n    setNavIndex(navIndex + 1);\n  };\n\n  const hasNextNavIndex = () => navIndex + 1 < chunkedTabs.length;\n\n  useEffect(() => {\n    // Each time the window is resized we calculate how many tabs we can render given the window width\n    const padding = 20; // The AppBar padding\n\n    const numberOfTabIcons = navIndex === 0 ? 1 : 2;\n    const wrapperWidth =\n      wrapper.current.offsetWidth - padding - numberOfTabIcons * 30;\n    const flattenIndex = value[0] * numberOfChunkedElement + value[1];\n    const newChunkedElementSize = Math.floor(wrapperWidth / 170);\n\n    setNumberOfChunkedElement(newChunkedElementSize);\n    setChunkedTabs(chunkArray(tabs, newChunkedElementSize));\n    setValue([\n      Math.floor(flattenIndex / newChunkedElementSize),\n      flattenIndex % newChunkedElementSize,\n    ]);\n    // eslint-disable-next-line\n  }, [width, tabs]);\n\n  const currentIndex = navIndex === value[0] ? value[1] : false;\n\n  return (\n    <Box className={classes.root}>\n      <AppBar ref={wrapper} className={classes.appbar} position=\"static\">\n        <Box>\n          <StyledTabs\n            value={currentIndex}\n            onChange={handleChange}\n            selectionFollowsFocus\n          >\n            {navIndex !== 0 && (\n              <StyledIcon\n                onClick={navigateToPrevChunk}\n                ariaLabel=\"navigate-before\"\n              >\n                <NavigateBeforeIcon />\n              </StyledIcon>\n            )}\n            {chunkedTabs[navIndex].map((tab, index) => (\n              <StyledTab\n                value={index}\n                isFirstIndex={index === 0}\n                isFirstNav={navIndex === 0}\n                key={index}\n                icon={tab.icon || undefined}\n                label={tab.label || undefined}\n              />\n            ))}\n            {hasNextNavIndex() && (\n              <StyledIcon\n                isNext\n                onClick={navigateToNextChunk}\n                ariaLabel=\"navigate-next\"\n              >\n                <NavigateNextIcon />\n              </StyledIcon>\n            )}\n          </StyledTabs>\n        </Box>\n      </AppBar>\n      {currentIndex !== false ? (\n        chunkedTabs[navIndex].map((tab, index) => (\n          <TabPanel key={index} value={index} index={currentIndex}>\n            {tab.content}\n          </TabPanel>\n        ))\n      ) : (\n        // Render if the selected tab index is outside the current rendered chunked array\n        <TabPanel\n          key=\"panel_outside_chunked_array\"\n          value={value[1]}\n          index={value[1]}\n        >\n          {chunkedTabs[value[0]][value[1]].content}\n        </TabPanel>\n      )}\n    </Box>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport {\n  Sparklines,\n  SparklinesLine,\n  SparklinesLineProps,\n  SparklinesProps,\n} from 'react-sparklines';\nimport { useTheme } from '@material-ui/core/styles';\nimport { BackstageTheme } from '@backstage/theme';\n\nfunction color(data: number[], theme: BackstageTheme): string | undefined {\n  const lastNum = data[data.length - 1];\n  if (!lastNum) return undefined;\n  if (lastNum >= 0.9) return theme.palette.status.ok;\n  if (lastNum >= 0.5) return theme.palette.status.warning;\n  return theme.palette.status.error;\n}\n\nexport function TrendLine(\n  props: SparklinesProps &\n    Pick<SparklinesLineProps, 'color'> & { title?: string },\n) {\n  const theme = useTheme<BackstageTheme>();\n\n  if (!props.data) return null;\n  return (\n    <Sparklines width={120} height={30} min={0} max={1} {...props}>\n      {props.title && <title>{props.title}</title>}\n      <SparklinesLine color={props.color ?? color(props.data, theme)} />\n    </Sparklines>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Box from '@material-ui/core/Box';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, { PropsWithChildren, ReactNode } from 'react';\nimport { Helmet } from 'react-helmet';\n\n/**\n * TODO: favoriteable capability\n */\n\n/** @public */\nexport type ContentHeaderClassKey =\n  | 'container'\n  | 'leftItemsBox'\n  | 'rightItemsBox'\n  | 'description'\n  | 'title';\n\nconst useStyles = (props: ContentHeaderProps) =>\n  makeStyles(\n    theme => ({\n      container: {\n        width: '100%',\n        display: 'flex',\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        justifyContent: 'flex-end',\n        alignItems: 'center',\n        marginBottom: theme.spacing(2),\n        textAlign: props.textAlign,\n      },\n      leftItemsBox: {\n        flex: '1 1 auto',\n        minWidth: 0,\n        overflow: 'visible',\n      },\n      rightItemsBox: {\n        flex: '0 1 auto',\n        display: 'flex',\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        alignItems: 'center',\n        marginLeft: theme.spacing(1),\n        minWidth: 0,\n        overflow: 'visible',\n      },\n      description: {},\n      title: {\n        display: 'inline-flex',\n        marginBottom: 0,\n      },\n    }),\n    { name: 'BackstageContentHeader' },\n  );\n\ntype ContentHeaderTitleProps = {\n  title?: string;\n  className?: string;\n};\n\nconst ContentHeaderTitle = ({\n  title = 'Unknown page',\n  className,\n}: ContentHeaderTitleProps) => (\n  <Typography\n    variant=\"h4\"\n    component=\"h2\"\n    className={className}\n    data-testid=\"header-title\"\n  >\n    {title}\n  </Typography>\n);\n\ntype ContentHeaderProps = {\n  title?: ContentHeaderTitleProps['title'];\n  titleComponent?: ReactNode;\n  description?: string;\n  textAlign?: 'left' | 'right' | 'center';\n};\n\n/**\n *  A header at the top inside a {@link Content}.\n *\n * @public\n *\n */\n\nexport function ContentHeader(props: PropsWithChildren<ContentHeaderProps>) {\n  const {\n    description,\n    title,\n    titleComponent: TitleComponent = undefined,\n    children,\n    textAlign = 'left',\n  } = props;\n  const classes = useStyles({ textAlign })();\n\n  const renderedTitle = TitleComponent ? (\n    TitleComponent\n  ) : (\n    <ContentHeaderTitle title={title} className={classes.title} />\n  );\n\n  return (\n    <>\n      <Helmet title={title} />\n      <Box className={classes.container}>\n        <Box className={classes.leftItemsBox}>\n          {renderedTitle}\n          {description && (\n            <Typography className={classes.description} variant=\"body2\">\n              {description}\n            </Typography>\n          )}\n        </Box>\n        <Box className={classes.rightItemsBox}>{children}</Box>\n      </Box>\n    </>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MicDropSvgUrl from './mic-drop.svg';\n\nconst useStyles = makeStyles(\n  theme => ({\n    micDrop: {\n      maxWidth: '60%',\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      [theme.breakpoints.down('xs')]: {\n        maxWidth: '96%',\n        bottom: 'unset',\n        right: 'unset',\n        margin: `${theme.spacing(10)}px auto ${theme.spacing(4)}px`,\n      },\n    },\n  }),\n  { name: 'BackstageErrorPageMicDrop' },\n);\n\nexport type MicDropClassKey = 'micDrop';\n\nexport const MicDrop = () => {\n  const classes = useStyles();\n  return (\n    <img\n      src={MicDropSvgUrl}\n      className={classes.micDrop}\n      alt=\"Girl dropping mic from her hands\"\n    />\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BackstageTheme } from '@backstage/theme';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Link } from '../../components/Link';\nimport { useSupportConfig } from '../../hooks';\nimport { MicDrop } from './MicDrop';\n\ninterface IErrorPageProps {\n  status: string;\n  statusMessage: string;\n  additionalInfo?: React.ReactNode;\n  supportUrl?: string;\n}\n\n/** @public */\nexport type ErrorPageClassKey = 'container' | 'title' | 'subtitle';\n\nconst useStyles = makeStyles<BackstageTheme>(\n  theme => ({\n    container: {\n      padding: theme.spacing(8),\n      [theme.breakpoints.down('xs')]: {\n        padding: theme.spacing(2),\n      },\n    },\n    title: {\n      paddingBottom: theme.spacing(5),\n      [theme.breakpoints.down('xs')]: {\n        paddingBottom: theme.spacing(4),\n        fontSize: theme.typography.h3.fontSize,\n      },\n    },\n    subtitle: {\n      color: theme.palette.textSubtle,\n    },\n  }),\n  { name: 'BackstageErrorPage' },\n);\n\n/**\n * Error page with status and description\n *\n * @public\n *\n */\nexport function ErrorPage(props: IErrorPageProps) {\n  const { status, statusMessage, additionalInfo, supportUrl } = props;\n  const classes = useStyles();\n  const navigate = useNavigate();\n  const support = useSupportConfig();\n\n  return (\n    <Grid container spacing={0} className={classes.container}>\n      <Grid item xs={12} sm={8} md={4}>\n        <Typography\n          data-testid=\"error\"\n          variant=\"body1\"\n          className={classes.subtitle}\n        >\n          ERROR {status}: {statusMessage}\n        </Typography>\n        <Typography variant=\"body1\" className={classes.subtitle}>\n          {additionalInfo}\n        </Typography>\n        <Typography variant=\"h2\" className={classes.title}>\n          Looks like someone dropped the mic!\n        </Typography>\n        <Typography variant=\"h6\">\n          <Link to=\"#\" data-testid=\"go-back-link\" onClick={() => navigate(-1)}>\n            Go back\n          </Link>\n          ... or please{' '}\n          <Link to={supportUrl || support.url}>contact support</Link> if you\n          think this is a bug.\n        </Typography>\n      </Grid>\n      <MicDrop />\n    </Grid>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Box from '@material-ui/core/Box';\nimport MaterialBreadcrumbs from '@material-ui/core/Breadcrumbs';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport Popover from '@material-ui/core/Popover';\nimport { withStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React, { ComponentProps, Fragment } from 'react';\n\ntype Props = ComponentProps<typeof MaterialBreadcrumbs>;\n\n/** @public */\nexport type BreadcrumbsClickableTextClassKey = 'root';\n\nconst ClickableText = withStyles(\n  {\n    root: {\n      textDecoration: 'underline',\n      cursor: 'pointer',\n    },\n  },\n  { name: 'BackstageBreadcrumbsClickableText' },\n)(Typography);\n\n/** @public */\nexport type BreadcrumbsStyledBoxClassKey = 'root';\n\nconst StyledBox = withStyles(\n  {\n    root: {\n      textDecoration: 'underline',\n      color: 'inherit',\n    },\n  },\n  { name: 'BackstageBreadcrumbsStyledBox' },\n)(Box);\n\n/**\n * Breadcrumbs component to show navigation hierarchical structure\n *\n * @public\n *\n */\nexport function Breadcrumbs(props: Props) {\n  const { children, ...restProps } = props;\n  const [anchorEl, setAnchorEl] = React.useState<HTMLButtonElement | null>(\n    null,\n  );\n\n  const childrenArray = React.Children.toArray(children);\n\n  const [firstPage, secondPage, ...expandablePages] = childrenArray;\n  const currentPage = expandablePages.length\n    ? expandablePages.pop()\n    : childrenArray[childrenArray.length - 1];\n  const hasHiddenBreadcrumbs = childrenArray.length > 3;\n\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  return (\n    <Fragment>\n      <MaterialBreadcrumbs aria-label=\"breadcrumb\" {...restProps}>\n        {childrenArray.length > 1 && <StyledBox clone>{firstPage}</StyledBox>}\n        {childrenArray.length > 2 && <StyledBox clone>{secondPage}</StyledBox>}\n        {hasHiddenBreadcrumbs && (\n          <ClickableText onClick={handleClick}>...</ClickableText>\n        )}\n        <Box style={{ fontStyle: 'italic' }}>{currentPage}</Box>\n      </MaterialBreadcrumbs>\n      <Popover\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'left',\n        }}\n      >\n        <List>\n          {expandablePages.map((pageLink, index) => (\n            <ListItem key={index} button>\n              <StyledBox clone>{pageLink}</StyledBox>\n            </ListItem>\n          ))}\n        </List>\n      </Popover>\n    </Fragment>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\nimport { BackstageTheme } from '@backstage/theme';\nimport Box from '@material-ui/core/Box';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport React, { CSSProperties, PropsWithChildren, ReactNode } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { Link } from '../../components/Link';\nimport { Breadcrumbs } from '../Breadcrumbs';\n\n/** @public */\nexport type HeaderClassKey =\n  | 'header'\n  | 'leftItemsBox'\n  | 'rightItemsBox'\n  | 'title'\n  | 'subtitle'\n  | 'type'\n  | 'breadcrumb'\n  | 'breadcrumbType'\n  | 'breadcrumbTitle';\n\nconst useStyles = makeStyles<BackstageTheme>(\n  theme => ({\n    header: {\n      gridArea: 'pageHeader',\n      padding: theme.spacing(3),\n      width: '100%',\n      boxShadow: theme.shadows[4],\n      position: 'relative',\n      zIndex: 100,\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundImage: theme.page.backgroundImage,\n      backgroundPosition: 'center',\n      backgroundSize: 'cover',\n      [theme.breakpoints.down('sm')]: {\n        flexWrap: 'wrap',\n      },\n    },\n    leftItemsBox: {\n      maxWidth: '100%',\n      flexGrow: 1,\n    },\n    rightItemsBox: {\n      width: 'auto',\n      alignItems: 'center',\n    },\n    title: {\n      color: theme.page.fontColor,\n      wordBreak: 'break-word',\n      fontSize: theme.typography.h3.fontSize,\n      marginBottom: 0,\n    },\n    subtitle: {\n      color: theme.page.fontColor,\n      opacity: 0.8,\n      display: 'inline-block', // prevents margin collapse of adjacent siblings\n      marginTop: theme.spacing(1),\n      maxWidth: '75ch',\n    },\n    type: {\n      textTransform: 'uppercase',\n      fontSize: 11,\n      opacity: 0.8,\n      marginBottom: theme.spacing(1),\n      color: theme.page.fontColor,\n    },\n    breadcrumb: {\n      color: theme.page.fontColor,\n    },\n    breadcrumbType: {\n      fontSize: 'inherit',\n      opacity: 0.7,\n      marginRight: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3),\n    },\n    breadcrumbTitle: {\n      fontSize: 'inherit',\n      marginLeft: -theme.spacing(0.3),\n      marginBottom: theme.spacing(0.3),\n    },\n  }),\n  { name: 'BackstageHeader' },\n);\n\ntype HeaderStyles = ReturnType<typeof useStyles>;\n\ntype Props = {\n  component?: ReactNode;\n  pageTitleOverride?: string;\n  style?: CSSProperties;\n  subtitle?: ReactNode;\n  title: ReactNode;\n  tooltip?: string;\n  type?: string;\n  typeLink?: string;\n};\n\ntype TypeFragmentProps = {\n  classes: HeaderStyles;\n  pageTitle: string | ReactNode;\n  type?: Props['type'];\n  typeLink?: Props['typeLink'];\n};\n\ntype TitleFragmentProps = {\n  classes: HeaderStyles;\n  pageTitle: string | ReactNode;\n  tooltip?: Props['tooltip'];\n};\n\ntype SubtitleFragmentProps = {\n  classes: HeaderStyles;\n  subtitle?: Props['subtitle'];\n};\n\nconst TypeFragment = ({\n  type,\n  typeLink,\n  classes,\n  pageTitle,\n}: TypeFragmentProps) => {\n  if (!type) {\n    return null;\n  }\n\n  if (!typeLink) {\n    return <Typography className={classes.type}>{type}</Typography>;\n  }\n\n  return (\n    <Breadcrumbs className={classes.breadcrumb}>\n      <Link to={typeLink}>{type}</Link>\n      <Typography>{pageTitle}</Typography>\n    </Breadcrumbs>\n  );\n};\n\nconst TitleFragment = ({ pageTitle, classes, tooltip }: TitleFragmentProps) => {\n  const FinalTitle = (\n    <Typography className={classes.title} variant=\"h1\">\n      {pageTitle}\n    </Typography>\n  );\n\n  if (!tooltip) {\n    return FinalTitle;\n  }\n\n  return (\n    <Tooltip title={tooltip} placement=\"top-start\">\n      {FinalTitle}\n    </Tooltip>\n  );\n};\n\nconst SubtitleFragment = ({ classes, subtitle }: SubtitleFragmentProps) => {\n  if (!subtitle) {\n    return null;\n  }\n\n  if (typeof subtitle !== 'string') {\n    return <>{subtitle}</>;\n  }\n\n  return (\n    <Typography\n      className={classes.subtitle}\n      variant=\"subtitle2\"\n      component=\"span\"\n    >\n      {subtitle}\n    </Typography>\n  );\n};\n/**\n * Backstage main header with abstract color background in multiple variants\n *\n * @public\n *\n */\nexport function Header(props: PropsWithChildren<Props>) {\n  const {\n    children,\n    pageTitleOverride,\n    style,\n    subtitle,\n    title,\n    tooltip,\n    type,\n    typeLink,\n  } = props;\n  const classes = useStyles();\n  const configApi = useApi(configApiRef);\n  const appTitle = configApi.getOptionalString('app.title') || 'Backstage';\n  const documentTitle = pageTitleOverride || title;\n  const pageTitle = title || pageTitleOverride;\n  const titleTemplate = `${documentTitle} | %s | ${appTitle}`;\n  const defaultTitle = `${documentTitle} | ${appTitle}`;\n\n  return (\n    <>\n      <Helmet titleTemplate={titleTemplate} defaultTitle={defaultTitle} />\n      <header style={style} className={classes.header}>\n        <Box className={classes.leftItemsBox}>\n          <TypeFragment\n            classes={classes}\n            type={type}\n            typeLink={typeLink}\n            pageTitle={pageTitle}\n          />\n          <TitleFragment\n            classes={classes}\n            pageTitle={pageTitle}\n            tooltip={tooltip}\n          />\n          <SubtitleFragment classes={classes} subtitle={subtitle} />\n        </Box>\n        <Grid container className={classes.rightItemsBox} spacing={4}>\n          {children}\n        </Grid>\n      </header>\n    </>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { Fragment, ReactElement } from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText, {\n  ListItemTextProps,\n} from '@material-ui/core/ListItemText';\nimport Popover from '@material-ui/core/Popover';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport { useTheme } from '@material-ui/core/styles';\n\n/**\n * @public\n */\nexport type HeaderActionMenuItem = {\n  label?: ListItemTextProps['primary'];\n  secondaryLabel?: ListItemTextProps['secondary'];\n  icon?: ReactElement;\n  disabled?: boolean;\n  onClick?: (event: React.MouseEvent<HTMLElement>) => void;\n};\n\nconst ActionItem = ({\n  label,\n  secondaryLabel,\n  icon,\n  disabled = false,\n  onClick,\n}: HeaderActionMenuItem) => {\n  return (\n    <Fragment>\n      <ListItem\n        data-testid=\"header-action-item\"\n        disabled={disabled}\n        button\n        onClick={event => {\n          if (onClick) {\n            onClick(event);\n          }\n        }}\n      >\n        {icon && <ListItemIcon>{icon}</ListItemIcon>}\n        <ListItemText primary={label} secondary={secondaryLabel} />\n      </ListItem>\n    </Fragment>\n  );\n};\n\n/**\n * @public\n */\nexport type HeaderActionMenuProps = {\n  actionItems: HeaderActionMenuItem[];\n};\n\n/**\n * @public\n */\nexport function HeaderActionMenu(props: HeaderActionMenuProps) {\n  const {\n    palette: {\n      common: { white },\n    },\n  } = useTheme();\n  const { actionItems } = props;\n  const [open, setOpen] = React.useState(false);\n  const anchorElRef = React.useRef(null);\n\n  return (\n    <Fragment>\n      <IconButton\n        onClick={() => setOpen(true)}\n        data-testid=\"header-action-menu\"\n        ref={anchorElRef}\n        style={{\n          color: white,\n          height: 56,\n          width: 56,\n          marginRight: -4,\n          padding: 0,\n        }}\n      >\n        <MoreVert />\n      </IconButton>\n      <Popover\n        open={open}\n        anchorEl={anchorElRef.current}\n        anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\n        transformOrigin={{ horizontal: 'right', vertical: 'top' }}\n        onClose={() => setOpen(false)}\n      >\n        <List>\n          {actionItems.map((actionItem, i) => {\n            return (\n              <ActionItem key={`header-action-menu-${i}`} {...actionItem} />\n            );\n          })}\n        </List>\n      </Popover>\n    </Fragment>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\nimport { Link } from '../../components/Link';\n\n/** @public */\nexport type HeaderLabelClassKey = 'root' | 'label' | 'value';\n\nconst useStyles = makeStyles(\n  theme => ({\n    root: {\n      textAlign: 'left',\n    },\n    label: {\n      color: theme.palette.common.white,\n      fontWeight: theme.typography.fontWeightBold,\n      letterSpacing: 0,\n      fontSize: theme.typography.fontSize,\n      marginBottom: theme.spacing(1) / 2,\n      lineHeight: 1,\n    },\n    value: {\n      color: 'rgba(255, 255, 255, 0.8)',\n      fontSize: theme.typography.fontSize,\n      lineHeight: 1,\n    },\n  }),\n  { name: 'BackstageHeaderLabel' },\n);\n\ntype HeaderLabelContentProps = {\n  value: React.ReactNode;\n  className: string;\n};\n\nconst HeaderLabelContent = ({ value, className }: HeaderLabelContentProps) => (\n  <Typography className={className}>{value}</Typography>\n);\n\ntype HeaderLabelProps = {\n  label: string;\n  value?: HeaderLabelContentProps['value'];\n  url?: string;\n};\n\n/**\n * Additional label to main {@link Header}\n *\n * @public\n *\n */\nexport function HeaderLabel(props: HeaderLabelProps) {\n  const { label, value, url } = props;\n  const classes = useStyles();\n  const content = (\n    <HeaderLabelContent\n      className={classes.value}\n      value={value || '<Unknown>'}\n    />\n  );\n  return (\n    <Grid item>\n      <Typography component=\"span\" className={classes.root}>\n        <Typography className={classes.label}>{label}</Typography>\n        {url ? <Link to={url}>{content}</Link> : content}\n      </Typography>\n    </Grid>\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { BackstageTheme } from '@backstage/theme';\nimport Box from '@material-ui/core/Box';\nimport { createStyles, makeStyles, WithStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport React from 'react';\n\n/** @public */\nexport type ItemCardHeaderClassKey = 'root';\n\nconst styles = (theme: BackstageTheme) =>\n  createStyles({\n    root: {\n      color: theme.palette.common.white,\n      padding: theme.spacing(2, 2, 3),\n      backgroundImage: theme.getPageTheme({ themeId: 'card' }).backgroundImage,\n      backgroundPosition: 0,\n      backgroundSize: 'inherit',\n    },\n  });\n\nconst useStyles = makeStyles(styles, { name: 'BackstageItemCardHeader' });\n\n/** @public */\nexport type ItemCardHeaderProps = Partial<WithStyles<typeof styles>> & {\n  /**\n   * A large title to show in the header, providing the main heading.\n   *\n   * Use this if you want to have the default styling and placement of a title.\n   */\n  title?: React.ReactNode;\n  /**\n   * A slightly smaller title to show in the header, providing additional\n   * details.\n   *\n   * Use this if you want to have the default styling and placement of a\n   * subtitle.\n   */\n  subtitle?: React.ReactNode;\n  /**\n   * Custom children to draw in the header.\n   *\n   * If the title and/or subtitle were specified, the children are drawn below\n   * those.\n   */\n  children?: React.ReactNode;\n};\n\n/**\n * A simple card header, rendering a default look for \"item cards\" - cards that\n * are arranged in a grid for users to select among several options.\n *\n * @remarks\n * This component expects to be placed within a MUI `<CardMedia>`.\n *\n * Styles for the header can be overridden using the `classes` prop, e.g.:\n *\n * `<ItemCardHeader title=\"Hello\" classes={{ root: myClassName }} />`\n *\n * @public\n */\nexport function ItemCardHeader(props: ItemCardHeaderProps) {\n  const { title, subtitle, children } = props;\n  const classes = useStyles(props);\n  return (\n    <Box className={classes.root}>\n      {subtitle && (\n        <Typography variant=\"subtitle2\" component=\"h3\">\n          {subtitle}\n        </Typography>\n      )}\n      {title && (\n        <Typography variant=\"h6\" component=\"h4\">\n          {title}\n        </Typography>\n      )}\n      {children}\n    </Box>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Box from '@material-ui/core/Box';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Chip from '@material-ui/core/Chip';\nimport React, { ReactNode } from 'react';\nimport { LinkButton } from '../../components';\nimport { ItemCardHeader } from './ItemCardHeader';\n\ntype ItemCardProps = {\n  description?: string;\n  tags?: string[];\n  title: string;\n  /** @deprecated Use subtitle instead */\n  type?: string;\n  subtitle?: ReactNode;\n  label: string;\n  onClick?: () => void;\n  href?: string;\n};\n\n/**\n * This card type has been deprecated. Instead use plain MUI Card and helpers\n * where appropriate.\n *\n *  @example\n * ```\n *   <Card>\n *     <CardMedia>\n *       <ItemCardHeader title=\"My Card\" subtitle=\"neat!\" />\n *     </CardMedia>\n *     <CardContent>\n *        Some text\n *     </CardContent>\n *     <CardActions>\n *       <Button color=\"primary\" to=\"https://backstage.io\">\n *         Get Started\n *       </Button>\n *     </CardActions>\n *   </Card>\n * ```\n *\n * @deprecated Use plain MUI `<Card>` and composable helpers instead.\n * @see https://material-ui.com/components/cards/\n */\nexport function ItemCard(props: ItemCardProps) {\n  const { description, tags, title, type, subtitle, label, onClick, href } =\n    props;\n  return (\n    <Card>\n      <CardMedia>\n        <ItemCardHeader title={title} subtitle={subtitle || type} />\n      </CardMedia>\n      <CardContent>\n        {tags?.length ? (\n          <Box>\n            {tags.map((tag, i) => (\n              <Chip size=\"small\" label={tag} key={i} />\n            ))}\n          </Box>\n        ) : null}\n        {description}\n      </CardContent>\n      <CardActions>\n        {!href && (\n          <LinkButton to=\"#\" onClick={onClick} color=\"primary\">\n            {label}\n          </LinkButton>\n        )}\n        {href && (\n          <LinkButton to={href} color=\"primary\">\n            {label}\n          </LinkButton>\n        )}\n      </CardActions>\n    </Card>\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport Box from '@material-ui/core/Box';\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  WithStyles,\n} from '@material-ui/core/styles';\nimport React from 'react';\n\n/** @public */\nexport type ItemCardGridClassKey = 'root';\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(auto-fill, minmax(22em, 1fr))',\n      gridAutoRows: '1fr',\n      gridGap: theme.spacing(2),\n    },\n  });\n\nconst useStyles = makeStyles(styles, { name: 'BackstageItemCardGrid' });\n\n/** @public */\nexport type ItemCardGridProps = Partial<WithStyles<typeof styles>> & {\n  /**\n   * The Card items of the grid.\n   */\n  children?: React.ReactNode;\n};\n\n/**\n * A default grid to use when arranging \"item cards\" - cards that let users\n * select among several options.\n *\n * @remarks\n * The immediate children are expected to be MUI Card components.\n *\n * Styles for the grid can be overridden using the `classes` prop, e.g.:\n *\n * `<ItemCardGrid title=\"Hello\" classes={{ root: myClassName }} />`\n *\n * This can be useful for e.g. overriding gridTemplateColumns to adapt the\n * minimum size of the cells to fit the content better.\n *\n * @public\n */\nexport function ItemCardGrid(props: ItemCardGridProps) {\n  const { children, ...otherProps } = props;\n  const classes = useStyles(otherProps);\n  return (\n    <Box className={classes.root} {...otherProps}>\n      {children}\n    </Box>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { BackstageTheme } from '@backstage/theme';\nimport { makeStyles, ThemeProvider } from '@material-ui/core/styles';\n\nexport type PageClassKey = 'root';\n\nconst useStyles = makeStyles<BackstageTheme>(\n  theme => ({\n    root: {\n      display: 'grid',\n      gridTemplateAreas:\n        \"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'\",\n      gridTemplateRows: 'max-content auto 1fr',\n      gridTemplateColumns: 'auto 1fr auto',\n      overflowY: 'auto',\n      height: '100vh',\n      [theme.breakpoints.down('xs')]: {\n        height: '100%',\n      },\n    },\n  }),\n  { name: 'BackstagePage' },\n);\n\ntype Props = {\n  themeId: string;\n  children?: React.ReactNode;\n};\n\nexport function Page(props: Props) {\n  const { themeId, children } = props;\n  const classes = useStyles();\n  return (\n    <ThemeProvider\n      theme={(baseTheme: BackstageTheme) => ({\n        ...baseTheme,\n        page: baseTheme.getPageTheme({ themeId }),\n      })}\n    >\n      <main className={classes.root}>{children}</main>\n    </ThemeProvider>\n  );\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren, ComponentProps } from 'react';\n\nimport { Header } from '../Header';\nimport { Page } from './Page';\n\ntype PageWithHeaderProps = ComponentProps<typeof Header> & {\n  themeId: string;\n};\n\nexport function PageWithHeader(props: PropsWithChildren<PageWithHeaderProps>) {\n  const { themeId, children, ...restProps } = props;\n  return (\n    <Page themeId={themeId}>\n      <Header {...restProps} />\n      {children}\n    </Page>\n  );\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BackstageIdentityResponse,\n  ProfileInfo,\n} from '@backstage/core-plugin-api';\nimport { z } from 'zod';\n\nexport const proxiedSessionSchema = z.object({\n  providerInfo: z.object({}).catchall(z.unknown()).optional(),\n  profile: z.object({\n    email: z.string().optional(),\n    displayName: z.string().optional(),\n    picture: z.string().optional(),\n  }),\n  backstageIdentity: z.object({\n    token: z.string(),\n    identity: z.object({\n      type: z.literal('user'),\n      userEntityRef: z.string(),\n      ownershipEntityRefs: z.array(z.string()),\n    }),\n  }),\n});\n\n/**\n * Generic session information for proxied sign-in providers, e.g. common\n * reverse authenticating proxy implementations.\n *\n * @public\n */\nexport type ProxiedSession = {\n  providerInfo?: { [key: string]: unknown };\n  profile: ProfileInfo;\n  backstageIdentity: Omit<BackstageIdentityResponse, 'id'>;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BackstageUserIdentity,\n  discoveryApiRef,\n  IdentityApi,\n  ProfileInfo,\n} from '@backstage/core-plugin-api';\nimport { ResponseError } from '@backstage/errors';\nimport { ProxiedSession, proxiedSessionSchema } from './types';\n\nexport const DEFAULTS = {\n  // The amount of time between token refreshes, if we fail to get an actual\n  // value out of the exp claim\n  defaultTokenExpiryMillis: 5 * 60 * 1000,\n  // The amount of time before the actual expiry of the Backstage token, that we\n  // shall start trying to get a new one\n  tokenExpiryMarginMillis: 5 * 60 * 1000,\n} as const;\n\n// When the token expires, with some margin\nexport function tokenToExpiry(jwtToken: string | undefined): Date {\n  const fallback = new Date(Date.now() + DEFAULTS.defaultTokenExpiryMillis);\n  if (!jwtToken) {\n    return fallback;\n  }\n\n  const [_header, rawPayload, _signature] = jwtToken.split('.');\n  const payload = JSON.parse(window.atob(rawPayload));\n  if (typeof payload.exp !== 'number') {\n    return fallback;\n  }\n\n  return new Date(payload.exp * 1000 - DEFAULTS.tokenExpiryMarginMillis);\n}\n\ntype ProxiedSignInIdentityOptions = {\n  provider: string;\n  discoveryApi: typeof discoveryApiRef.T;\n  headers?: HeadersInit | (() => HeadersInit) | (() => Promise<HeadersInit>);\n};\n\ntype State =\n  | {\n      type: 'empty';\n    }\n  | {\n      type: 'fetching';\n      promise: Promise<ProxiedSession>;\n      previous: ProxiedSession | undefined;\n    }\n  | {\n      type: 'active';\n      session: ProxiedSession;\n      expiresAt: Date;\n    }\n  | {\n      type: 'failed';\n      error: Error;\n    };\n\n/**\n * An identity API that gets the user auth information solely based on a\n * provider's `/refresh` endpoint.\n */\nexport class ProxiedSignInIdentity implements IdentityApi {\n  private readonly options: ProxiedSignInIdentityOptions;\n  private readonly abortController: AbortController;\n  private state: State;\n\n  constructor(options: ProxiedSignInIdentityOptions) {\n    this.options = options;\n    this.abortController = new AbortController();\n    this.state = { type: 'empty' };\n  }\n\n  async start() {\n    // Try to make a first fetch, bubble up any errors to the caller\n    await this.getSessionAsync();\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getUserId} */\n  getUserId(): string {\n    const { backstageIdentity } = this.getSessionSync();\n    const ref = backstageIdentity.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n\n    return match[3];\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getIdToken} */\n  async getIdToken(): Promise<string | undefined> {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.token;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfile} */\n  getProfile(): ProfileInfo {\n    const session = this.getSessionSync();\n    return session.profile;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfileInfo} */\n  async getProfileInfo(): Promise<ProfileInfo> {\n    const session = await this.getSessionAsync();\n    return session.profile;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getBackstageIdentity} */\n  async getBackstageIdentity(): Promise<BackstageUserIdentity> {\n    const session = await this.getSessionAsync();\n    return session.backstageIdentity.identity;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getCredentials} */\n  async getCredentials(): Promise<{ token?: string | undefined }> {\n    const session = await this.getSessionAsync();\n    return {\n      token: session.backstageIdentity.token,\n    };\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.signOut} */\n  async signOut(): Promise<void> {\n    this.abortController.abort();\n  }\n\n  getSessionSync(): ProxiedSession {\n    if (this.state.type === 'active') {\n      return this.state.session;\n    } else if (this.state.type === 'fetching' && this.state.previous) {\n      return this.state.previous;\n    }\n    throw new Error('No session available. Try reloading your browser page.');\n  }\n\n  async getSessionAsync(): Promise<ProxiedSession> {\n    if (this.state.type === 'fetching') {\n      return this.state.promise;\n    } else if (\n      this.state.type === 'active' &&\n      new Date() < this.state.expiresAt\n    ) {\n      return this.state.session;\n    }\n\n    const previous =\n      this.state.type === 'active' ? this.state.session : undefined;\n\n    const promise = this.fetchSession().then(\n      session => {\n        this.state = {\n          type: 'active',\n          session,\n          expiresAt: tokenToExpiry(session.backstageIdentity.token),\n        };\n        return session;\n      },\n      error => {\n        this.state = {\n          type: 'failed',\n          error,\n        };\n        throw error;\n      },\n    );\n\n    this.state = {\n      type: 'fetching',\n      promise,\n      previous,\n    };\n\n    return promise;\n  }\n\n  async fetchSession(): Promise<ProxiedSession> {\n    const baseUrl = await this.options.discoveryApi.getBaseUrl('auth');\n\n    const headers =\n      typeof this.options.headers === 'function'\n        ? await this.options.headers()\n        : this.options.headers;\n    const mergedHeaders = new Headers(headers);\n    mergedHeaders.set('X-Requested-With', 'XMLHttpRequest');\n\n    // Note that we do not use the fetchApi here, since this all happens before\n    // sign-in completes so there can be no automatic token injection and\n    // similar.\n    const response = await fetch(\n      `${baseUrl}/${this.options.provider}/refresh`,\n      {\n        signal: this.abortController.signal,\n        headers: mergedHeaders,\n        credentials: 'include',\n      },\n    );\n\n    if (!response.ok) {\n      throw await ResponseError.fromResponse(response);\n    }\n\n    return proxiedSessionSchema.parse(await response.json());\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  discoveryApiRef,\n  SignInPageProps,\n  useApi,\n} from '@backstage/core-plugin-api';\nimport React from 'react';\nimport { useAsync, useMountEffect } from '@react-hookz/web';\nimport { ErrorPanel } from '../../components/ErrorPanel';\nimport { Progress } from '../../components/Progress';\nimport { ProxiedSignInIdentity } from './ProxiedSignInIdentity';\n\n/**\n * Props for {@link ProxiedSignInPage}.\n *\n * @public\n */\nexport type ProxiedSignInPageProps = SignInPageProps & {\n  /**\n   * The provider to use, e.g. \"gcp-iap\" or \"awsalb\". This must correspond to\n   * a properly configured auth provider ID in the auth backend.\n   */\n  provider: string;\n\n  /**\n   * Optional headers which are passed along with the request to the\n   * underlying provider\n   */\n  headers?: HeadersInit | (() => HeadersInit) | (() => Promise<HeadersInit>);\n};\n\n/**\n * A sign-in page that has no user interface of its own. Instead, it relies on\n * sign-in being performed by a reverse authenticating proxy that Backstage is\n * deployed behind, and leverages its session handling.\n *\n * @remarks\n *\n * This sign-in page is useful when you are using products such as Google\n * Identity-Aware Proxy or AWS Application Load Balancer or similar, to front\n * your Backstage installation. This sign-in page implementation will silently\n * and regularly punch through the proxy to the auth backend to refresh your\n * frontend session information, without requiring user interaction.\n *\n * @public\n */\nexport const ProxiedSignInPage = (props: ProxiedSignInPageProps) => {\n  const discoveryApi = useApi(discoveryApiRef);\n\n  const [{ status, error }, { execute }] = useAsync(async () => {\n    const identity = new ProxiedSignInIdentity({\n      provider: props.provider,\n      discoveryApi,\n      headers: props.headers,\n    });\n\n    await identity.start();\n\n    props.onSignInSuccess(identity);\n  });\n\n  useMountEffect(execute);\n\n  if (status === 'loading') {\n    return <Progress />;\n  } else if (error) {\n    return (\n      <ErrorPanel\n        title=\"You do not appear to be signed in. Please try reloading the browser page.\"\n        error={error}\n      />\n    );\n  }\n\n  return null;\n};\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  IdentityApi,\n  ProfileInfo,\n  BackstageUserIdentity,\n} from '@backstage/core-plugin-api';\n\nexport class GuestUserIdentity implements IdentityApi {\n  getUserId(): string {\n    return 'guest';\n  }\n\n  async getIdToken(): Promise<string | undefined> {\n    return undefined;\n  }\n\n  getProfile(): ProfileInfo {\n    return {\n      email: 'guest@example.com',\n      displayName: 'Guest',\n    };\n  }\n\n  async getProfileInfo(): Promise<ProfileInfo> {\n    return {\n      email: 'guest@example.com',\n      displayName: 'Guest',\n    };\n  }\n\n  async getBackstageIdentity(): Promise<BackstageUserIdentity> {\n    const userEntityRef = `user:default/guest`;\n    return {\n      type: 'user',\n      userEntityRef,\n      ownershipEntityRefs: [userEntityRef],\n    };\n  }\n\n  async getCredentials(): Promise<{ token?: string | undefined }> {\n    return {};\n  }\n\n  async signOut(): Promise<void> {}\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  IdentityApi,\n  ProfileInfo,\n  BackstageUserIdentity,\n} from '@backstage/core-plugin-api';\n\nfunction parseJwtPayload(token: string) {\n  const [_header, payload, _signature] = token.split('.');\n  return JSON.parse(window.atob(payload));\n}\n\ntype LegacySignInResult = {\n  userId: string;\n  profile: ProfileInfo;\n  getIdToken?: () => Promise<string>;\n  signOut?: () => Promise<void>;\n};\n\n/** @internal */\nexport class LegacyUserIdentity implements IdentityApi {\n  private constructor(private readonly result: LegacySignInResult) {}\n\n  getUserId(): string {\n    return this.result.userId;\n  }\n\n  static fromResult(result: LegacySignInResult): LegacyUserIdentity {\n    return new LegacyUserIdentity(result);\n  }\n\n  async getIdToken(): Promise<string | undefined> {\n    return this.result.getIdToken?.();\n  }\n\n  getProfile(): ProfileInfo {\n    return this.result.profile;\n  }\n\n  async getProfileInfo(): Promise<ProfileInfo> {\n    return this.result.profile;\n  }\n\n  async getBackstageIdentity(): Promise<BackstageUserIdentity> {\n    const token = await this.getIdToken();\n\n    if (!token) {\n      const userEntityRef = `user:default/${this.getUserId()}`;\n      return {\n        type: 'user',\n        userEntityRef,\n        ownershipEntityRefs: [userEntityRef],\n      };\n    }\n\n    const { sub, ent } = parseJwtPayload(token);\n    return {\n      type: 'user',\n      userEntityRef: sub,\n      ownershipEntityRefs: ent ?? [],\n    };\n  }\n\n  async getCredentials(): Promise<{ token?: string | undefined }> {\n    const token = await this.result.getIdToken?.();\n    return { token };\n  }\n\n  async signOut(): Promise<void> {\n    return this.result.signOut?.();\n  }\n}\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  IdentityApi,\n  ProfileInfo,\n  ProfileInfoApi,\n  BackstageUserIdentity,\n  BackstageIdentityApi,\n  SessionApi,\n} from '@backstage/core-plugin-api';\n\nimport { GuestUserIdentity } from './GuestUserIdentity';\nimport { LegacyUserIdentity } from './LegacyUserIdentity';\n\n// TODO(Rugvip): This and the other IdentityApi implementations still implement\n//               the old removed methods. This is to allow for backwards compatibility\n//               with old plugins that still consume this API. We will leave these in\n//               place as a hidden compatibility for a couple of months.\n//               The AppIdentityProxy warns in case any of these methods are called.\n\n/**\n * An implementation of the IdentityApi that is constructed using\n * various backstage user identity representations.\n *\n * @public\n */\nexport class UserIdentity implements IdentityApi {\n  private profilePromise?: Promise<ProfileInfo>;\n  /**\n   * Creates a new IdentityApi that acts as a Guest User.\n   *\n   * @public\n   */\n  static createGuest(): IdentityApi {\n    return new GuestUserIdentity();\n  }\n\n  /**\n   * Creates a new IdentityApi using a legacy SignInResult object.\n   *\n   * @public\n   */\n  static fromLegacy(result: {\n    /**\n     * User ID that will be returned by the IdentityApi\n     */\n    userId: string;\n\n    profile: ProfileInfo;\n\n    /**\n     * Function used to retrieve an ID token for the signed in user.\n     */\n    getIdToken?: () => Promise<string>;\n\n    /**\n     * Sign out handler that will be called if the user requests to sign out.\n     */\n    signOut?: () => Promise<void>;\n  }): IdentityApi {\n    return LegacyUserIdentity.fromResult(result);\n  }\n\n  /**\n   * Creates a new IdentityApi implementation using a user identity\n   * and an auth API that will be used to request backstage tokens.\n   *\n   * @public\n   */\n  static create(options: {\n    identity: BackstageUserIdentity;\n    authApi: ProfileInfoApi & BackstageIdentityApi & SessionApi;\n    /**\n     * Passing a profile synchronously allows the deprecated `getProfile` method to be\n     * called by consumers of the {@link @backstage/core-plugin-api#IdentityApi}. If you\n     * do not have any consumers of that method then this is safe to leave out.\n     *\n     * @deprecated Only provide this if you have plugins that call the synchronous `getProfile` method, which is also deprecated.\n     */\n    profile?: ProfileInfo;\n  }): IdentityApi {\n    return new UserIdentity(options.identity, options.authApi, options.profile);\n  }\n\n  private constructor(\n    private readonly identity: BackstageUserIdentity,\n    private readonly authApi: ProfileInfoApi &\n      BackstageIdentityApi &\n      SessionApi,\n    private readonly profile?: ProfileInfo,\n  ) {}\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getUserId} */\n  getUserId(): string {\n    const ref = this.identity.userEntityRef;\n    const match = /^([^:/]+:)?([^:/]+\\/)?([^:/]+)$/.exec(ref);\n    if (!match) {\n      throw new TypeError(`Invalid user entity reference \"${ref}\"`);\n    }\n\n    return match[3];\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getIdToken} */\n  async getIdToken(): Promise<string | undefined> {\n    const identity = await this.authApi.getBackstageIdentity();\n    return identity!.token;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfile} */\n  getProfile(): ProfileInfo {\n    if (!this.profile) {\n      throw new Error(\n        'The identity API does not implement synchronous profile fetching, use getProfileInfo() instead',\n      );\n    }\n    return this.profile;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getProfileInfo} */\n  async getProfileInfo(): Promise<ProfileInfo> {\n    if (this.profilePromise) {\n      return await this.profilePromise;\n    }\n\n    try {\n      this.profilePromise = this.authApi.getProfile() as Promise<ProfileInfo>;\n      return await this.profilePromise;\n    } catch (ex) {\n      this.profilePromise = undefined;\n      throw ex;\n    }\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getBackstageIdentity} */\n  async getBackstageIdentity(): Promise<BackstageUserIdentity> {\n    return this.identity;\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.getCredentials} */\n  async getCredentials(): Promise<{ token?: string | undefined }> {\n    const identity = await this.authApi.getBackstageIdentity();\n    return { token: identity!.token };\n  }\n\n  /** {@inheritdoc @backstage/core-plugin-api#IdentityApi.signOut} */\n  async signOut(): Promise<void> {\n    return this.authApi.signOut();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\n\nexport type SignInPageClassKey = 'container' | 'item';\n\nexport const useStyles = makeStyles(\n  {\n    container: {\n      padding: 0,\n      listStyle: 'none',\n    },\n    item: {\n      display: 'flex',\n      flexDirection: 'column',\n      width: '100%',\n      maxWidth: '400px',\n      margin: 0,\n      padding: 0,\n    },\n  },\n  { name: 'BackstageSignInPage' },\n);\n\nexport const GridItem = ({ children }: { children: JSX.Element }) => {\n  const classes = useStyles();\n\n  return (\n    <Grid component=\"li\" item classes={classes}>\n      {children}\n    </Grid>\n  );\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { InfoCard } from '../InfoCard/InfoCard';\nimport {\n  ProviderComponent,\n  ProviderLoader,\n  SignInProvider,\n  SignInProviderConfig,\n} from './types';\nimport { useApi, errorApiRef } from '@backstage/core-plugin-api';\nimport { GridItem } from './styles';\nimport { ForwardedError } from '@backstage/errors';\nimport { UserIdentity } from './UserIdentity';\n\nconst Component: ProviderComponent = ({ config, onSignInSuccess }) => {\n  const { apiRef, title, message } = config as SignInProviderConfig;\n  const authApi = useApi(apiRef);\n  const errorApi = useApi(errorApiRef);\n\n  const handleLogin = async () => {\n    try {\n      const identityResponse = await authApi.getBackstageIdentity({\n        instantPopup: true,\n      });\n      if (!identityResponse) {\n        throw new Error(\n          `The ${title} provider is not configured to support sign-in`,\n        );\n      }\n\n      const profile = await authApi.getProfile();\n\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          profile,\n          authApi,\n        }),\n      );\n    } catch (error) {\n      errorApi.post(new ForwardedError('Login failed', error));\n    }\n  };\n\n  return (\n    <GridItem>\n      <InfoCard\n        variant=\"fullHeight\"\n        title={title}\n        actions={\n          <Button color=\"primary\" variant=\"outlined\" onClick={handleLogin}>\n            Sign In\n          </Button>\n        }\n      >\n        <Typography variant=\"body1\">{message}</Typography>\n      </InfoCard>\n    </GridItem>\n  );\n};\n\nconst loader: ProviderLoader = async (apis, apiRef) => {\n  const authApi = apis.get(apiRef)!;\n\n  const identityResponse = await authApi.getBackstageIdentity({\n    optional: true,\n  });\n\n  if (!identityResponse) {\n    return undefined;\n  }\n\n  const profile = await authApi.getProfile();\n\n  return UserIdentity.create({\n    identity: identityResponse.identity,\n    profile,\n    authApi,\n  });\n};\n\nexport const commonProvider: SignInProvider = { Component, loader };\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { InfoCard } from '../InfoCard/InfoCard';\nimport { GridItem } from './styles';\nimport { ProviderComponent, ProviderLoader, SignInProvider } from './types';\nimport { GuestUserIdentity } from './GuestUserIdentity';\n\nconst Component: ProviderComponent = ({ onSignInSuccess }) => (\n  <GridItem>\n    <InfoCard\n      title=\"Guest\"\n      variant=\"fullHeight\"\n      actions={\n        <Button\n          color=\"primary\"\n          variant=\"outlined\"\n          onClick={() => onSignInSuccess(new GuestUserIdentity())}\n        >\n          Enter\n        </Button>\n      }\n    >\n      <Typography variant=\"body1\">\n        Enter as a Guest User.\n        <br />\n        You will not have a verified identity,\n        <br />\n        meaning some features might be unavailable.\n      </Typography>\n    </InfoCard>\n  </GridItem>\n);\n\nconst loader: ProviderLoader = async () => {\n  return new GuestUserIdentity();\n};\n\nexport const guestProvider: SignInProvider = { Component, loader };\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport { useForm, UseFormRegisterReturn } from 'react-hook-form';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport FormControl from '@material-ui/core/FormControl';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport isEmpty from 'lodash/isEmpty';\nimport { InfoCard } from '../InfoCard/InfoCard';\nimport { ProviderComponent, ProviderLoader, SignInProvider } from './types';\nimport { GridItem } from './styles';\nimport { UserIdentity } from './UserIdentity';\n\n// accept base64url format according to RFC7515 (https://tools.ietf.org/html/rfc7515#section-3)\nconst ID_TOKEN_REGEX = /^[a-z0-9_\\-]+\\.[a-z0-9_\\-]+\\.[a-z0-9_\\-]+$/i;\n\n/** @public */\nexport type CustomProviderClassKey = 'form' | 'button';\n\nconst useFormStyles = makeStyles(\n  theme => ({\n    form: {\n      display: 'flex',\n      flexFlow: 'column nowrap',\n    },\n    button: {\n      alignSelf: 'center',\n      marginTop: theme.spacing(2),\n    },\n  }),\n  { name: 'BackstageCustomProvider' },\n);\n\ntype Data = {\n  userId: string;\n  idToken?: string;\n};\n\nconst asInputRef = (renderResult: UseFormRegisterReturn) => {\n  const { ref, ...rest } = renderResult;\n  return {\n    inputRef: ref,\n    ...rest,\n  };\n};\n\nconst Component: ProviderComponent = ({ onSignInSuccess }) => {\n  const classes = useFormStyles();\n  const { register, handleSubmit, formState } = useForm<Data>({\n    mode: 'onChange',\n  });\n\n  const { errors } = formState;\n\n  const handleResult = ({ userId, idToken }: Data) => {\n    onSignInSuccess(\n      UserIdentity.fromLegacy({\n        userId,\n        getIdToken: idToken !== undefined ? async () => idToken : undefined,\n        profile: {\n          email: `${userId}@example.com`,\n        },\n      }),\n    );\n  };\n\n  return (\n    <GridItem>\n      <InfoCard title=\"Custom User\" variant=\"fullHeight\">\n        <Typography variant=\"body1\">\n          Enter your own User ID and credentials.\n          <br />\n          This selection will not be stored.\n        </Typography>\n\n        <form className={classes.form} onSubmit={handleSubmit(handleResult)}>\n          <FormControl>\n            <TextField\n              {...asInputRef(register('userId', { required: true }))}\n              label=\"User ID\"\n              margin=\"normal\"\n              error={Boolean(errors.userId)}\n            />\n            {errors.userId && (\n              <FormHelperText error>{errors.userId.message}</FormHelperText>\n            )}\n          </FormControl>\n          <FormControl>\n            <TextField\n              {...asInputRef(\n                register('idToken', {\n                  required: false,\n                  validate: token =>\n                    !token ||\n                    ID_TOKEN_REGEX.test(token) ||\n                    'Token is not a valid OpenID Connect JWT Token',\n                }),\n              )}\n              label=\"ID Token (optional)\"\n              margin=\"normal\"\n              autoComplete=\"off\"\n              error={Boolean(errors.idToken)}\n            />\n            {errors.idToken && (\n              <FormHelperText error>{errors.idToken.message}</FormHelperText>\n            )}\n          </FormControl>\n          <Button\n            type=\"submit\"\n            color=\"primary\"\n            variant=\"outlined\"\n            className={classes.button}\n            disabled={!formState?.isDirty || !isEmpty(errors)}\n          >\n            Continue\n          </Button>\n        </form>\n      </InfoCard>\n    </GridItem>\n  );\n};\n\n// Custom provider doesn't store credentials\nconst loader: ProviderLoader = async () => undefined;\n\nexport const customProvider: SignInProvider = { Component, loader };\n","/*\n * Copyright 2021 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BackstageUserIdentity,\n  IdentityApi,\n  ProfileInfo,\n} from '@backstage/core-plugin-api';\n\n// Similar to the AppIdentityApi we provide backwards compatibility for a limited time\ntype CompatibilityIdentityApi = IdentityApi & {\n  getUserId?(): string;\n  getIdToken?(): Promise<string | undefined>;\n  getProfile?(): ProfileInfo;\n};\n\nexport class IdentityApiSignOutProxy implements IdentityApi {\n  private constructor(\n    private readonly config: {\n      identityApi: CompatibilityIdentityApi;\n      signOut: IdentityApi['signOut'];\n    },\n  ) {}\n\n  static from(config: {\n    identityApi: CompatibilityIdentityApi;\n    signOut: IdentityApi['signOut'];\n  }): IdentityApi {\n    return new IdentityApiSignOutProxy(config);\n  }\n\n  getUserId(): string {\n    if (!this.config.identityApi.getUserId) {\n      throw new Error(`SignOutProxy IdentityApi.getUserId is not implemented`);\n    }\n    return this.config.identityApi.getUserId();\n  }\n\n  getIdToken(): Promise<string | undefined> {\n    if (!this.config.identityApi.getIdToken) {\n      throw new Error(`SignOutProxy IdentityApi.getIdToken is not implemented`);\n    }\n    return this.config.identityApi.getIdToken();\n  }\n\n  getProfile(): ProfileInfo {\n    if (!this.config.identityApi.getProfile) {\n      throw new Error(`SignOutProxy IdentityApi.getProfile is not implemented`);\n    }\n    return this.config.identityApi.getProfile();\n  }\n\n  getProfileInfo(): Promise<ProfileInfo> {\n    return this.config.identityApi.getProfileInfo();\n  }\n\n  getBackstageIdentity(): Promise<BackstageUserIdentity> {\n    return this.config.identityApi.getBackstageIdentity();\n  }\n\n  getCredentials(): Promise<{ token?: string | undefined }> {\n    return this.config.identityApi.getCredentials();\n  }\n\n  signOut(): Promise<void> {\n    return this.config.signOut();\n  }\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useLayoutEffect, useState, useMemo, useCallback } from 'react';\nimport {\n  SignInPageProps,\n  useApi,\n  useApiHolder,\n  errorApiRef,\n  IdentityApi,\n} from '@backstage/core-plugin-api';\nimport {\n  IdentityProviders,\n  SignInProvider,\n  SignInProviderConfig,\n} from './types';\nimport { commonProvider } from './commonProvider';\nimport { guestProvider } from './guestProvider';\nimport { customProvider } from './customProvider';\nimport { IdentityApiSignOutProxy } from './IdentityApiSignOutProxy';\n\nconst PROVIDER_STORAGE_KEY = '@backstage/core:SignInPage:provider';\n\nexport type SignInProviderType = {\n  [key: string]: {\n    components: SignInProvider;\n    id: string;\n    config?: SignInProviderConfig;\n  };\n};\n\nconst signInProviders: { [key: string]: SignInProvider } = {\n  guest: guestProvider,\n  custom: customProvider,\n  common: commonProvider,\n};\n\nfunction validateIDs(id: string, providers: SignInProviderType): void {\n  if (id in providers)\n    throw new Error(\n      `\"${id}\" ID is duplicated. IDs of identity providers have to be unique.`,\n    );\n}\n\nexport function getSignInProviders(\n  identityProviders: IdentityProviders,\n): SignInProviderType {\n  const providers = identityProviders.reduce(\n    (acc: SignInProviderType, config) => {\n      if (typeof config === 'string') {\n        validateIDs(config, acc);\n        acc[config] = { components: signInProviders[config], id: config };\n\n        return acc;\n      }\n\n      const { id } = config as SignInProviderConfig;\n      validateIDs(id, acc);\n\n      acc[id] = { components: signInProviders.common, id, config };\n\n      return acc;\n    },\n    {},\n  );\n\n  return providers;\n}\n\nexport const useSignInProviders = (\n  providers: SignInProviderType,\n  onSignInSuccess: SignInPageProps['onSignInSuccess'],\n) => {\n  const errorApi = useApi(errorApiRef);\n  const apiHolder = useApiHolder();\n  const [loading, setLoading] = useState(true);\n\n  // This decorates the result with sign out logic from this hook\n  const handleWrappedResult = useCallback(\n    (identityApi: IdentityApi) => {\n      onSignInSuccess(\n        IdentityApiSignOutProxy.from({\n          identityApi,\n          signOut: async () => {\n            localStorage.removeItem(PROVIDER_STORAGE_KEY);\n            await identityApi.signOut?.();\n          },\n        }),\n      );\n    },\n    [onSignInSuccess],\n  );\n\n  // In this effect we check if the user has already selected an existing login\n  // provider, and in that case try to load an existing session for the provider.\n  useLayoutEffect(() => {\n    if (!loading) {\n      return undefined;\n    }\n\n    // We can't use storageApi here, as it might have a dependency on the IdentityApi\n    const selectedProviderId = localStorage.getItem(\n      PROVIDER_STORAGE_KEY,\n    ) as string;\n\n    // No provider selected, let the user pick one\n    if (selectedProviderId === null) {\n      setLoading(false);\n      return undefined;\n    }\n\n    const provider = providers[selectedProviderId];\n    if (!provider) {\n      setLoading(false);\n      return undefined;\n    }\n\n    let didCancel = false;\n\n    provider.components\n      .loader(apiHolder, provider.config?.apiRef!)\n      .then(result => {\n        if (didCancel) {\n          return;\n        }\n        if (result) {\n          handleWrappedResult(result);\n        } else {\n          setLoading(false);\n        }\n      })\n      .catch(error => {\n        if (didCancel) {\n          return;\n        }\n        localStorage.removeItem(PROVIDER_STORAGE_KEY);\n        errorApi.post(error);\n        setLoading(false);\n      });\n\n    return () => {\n      didCancel = true;\n    };\n  }, [\n    loading,\n    errorApi,\n    onSignInSuccess,\n    apiHolder,\n    providers,\n    handleWrappedResult,\n  ]);\n\n  // This renders all available sign-in providers\n  const elements = useMemo(\n    () =>\n      Object.keys(providers).map(key => {\n        const provider = providers[key];\n\n        const { Component } = provider.components;\n\n        const handleSignInSuccess = (result: IdentityApi) => {\n          localStorage.setItem(PROVIDER_STORAGE_KEY, provider.id);\n\n          handleWrappedResult(result);\n        };\n\n        return (\n          <Component\n            key={provider.id}\n            config={provider.config!}\n            onSignInSuccess={handleSignInSuccess}\n          />\n        );\n      }),\n    [providers, handleWrappedResult],\n  );\n\n  return [loading, elements];\n};\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BackstageIdentityResponse,\n  configApiRef,\n  SignInPageProps,\n  useApi,\n} from '@backstage/core-plugin-api';\nimport { UserIdentity } from './UserIdentity';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport React, { useState } from 'react';\nimport { useMountEffect } from '@react-hookz/web';\nimport { Progress } from '../../components/Progress';\nimport { Content } from '../Content/Content';\nimport { ContentHeader } from '../ContentHeader/ContentHeader';\nimport { Header } from '../Header';\nimport { InfoCard } from '../InfoCard';\nimport { Page } from '../Page';\nimport { getSignInProviders, useSignInProviders } from './providers';\nimport { GridItem, useStyles } from './styles';\nimport { IdentityProviders, SignInProviderConfig } from './types';\n\ntype MultiSignInPageProps = SignInPageProps & {\n  providers: IdentityProviders;\n  title?: string;\n  align?: 'center' | 'left';\n};\n\ntype SingleSignInPageProps = SignInPageProps & {\n  provider: SignInProviderConfig;\n  auto?: boolean;\n};\n\nexport type Props = MultiSignInPageProps | SingleSignInPageProps;\n\nexport const MultiSignInPage = ({\n  onSignInSuccess,\n  providers = [],\n  title,\n  align = 'left',\n}: MultiSignInPageProps) => {\n  const configApi = useApi(configApiRef);\n  const classes = useStyles();\n\n  const signInProviders = getSignInProviders(providers);\n  const [loading, providerElements] = useSignInProviders(\n    signInProviders,\n    onSignInSuccess,\n  );\n\n  if (loading) {\n    return <Progress />;\n  }\n\n  return (\n    <Page themeId=\"home\">\n      <Header title={configApi.getString('app.title')} />\n      <Content>\n        {title && <ContentHeader title={title} textAlign={align} />}\n        <Grid\n          container\n          justifyContent={align === 'center' ? align : 'flex-start'}\n          spacing={2}\n          component=\"ul\"\n          classes={classes}\n        >\n          {providerElements}\n        </Grid>\n      </Content>\n    </Page>\n  );\n};\n\nexport const SingleSignInPage = ({\n  provider,\n  auto,\n  onSignInSuccess,\n}: SingleSignInPageProps) => {\n  const classes = useStyles();\n  const authApi = useApi(provider.apiRef);\n  const configApi = useApi(configApiRef);\n\n  const [error, setError] = useState<Error>();\n\n  // The SignIn component takes some time to decide whether the user is logged-in or not.\n  // showLoginPage is used to prevent a glitch-like experience where the sign-in page is\n  // displayed for a split second when the user is already logged-in.\n  const [showLoginPage, setShowLoginPage] = useState<boolean>(false);\n\n  type LoginOpts = { checkExisting?: boolean; showPopup?: boolean };\n  const login = async ({ checkExisting, showPopup }: LoginOpts) => {\n    try {\n      let identityResponse: BackstageIdentityResponse | undefined;\n      if (checkExisting) {\n        // Do an initial check if any logged-in session exists\n        identityResponse = await authApi.getBackstageIdentity({\n          optional: true,\n        });\n      }\n\n      // If no session exists, show the sign-in page\n      if (!identityResponse && (showPopup || auto)) {\n        // Unless auto is set to true, this step should not happen.\n        // When user intentionally clicks the Sign In button, autoShowPopup is set to true\n        setShowLoginPage(true);\n        identityResponse = await authApi.getBackstageIdentity({\n          instantPopup: true,\n        });\n        if (!identityResponse) {\n          throw new Error(\n            `The ${provider.title} provider is not configured to support sign-in`,\n          );\n        }\n      }\n\n      if (!identityResponse) {\n        setShowLoginPage(true);\n        return;\n      }\n\n      const profile = await authApi.getProfile();\n      onSignInSuccess(\n        UserIdentity.create({\n          identity: identityResponse.identity,\n          authApi,\n          profile,\n        }),\n      );\n    } catch (err: any) {\n      // User closed the sign-in modal\n      setError(err);\n      setShowLoginPage(true);\n    }\n  };\n\n  useMountEffect(() => login({ checkExisting: true }));\n\n  return showLoginPage ? (\n    <Page themeId=\"home\">\n      <Header title={configApi.getString('app.title')} />\n      <Content>\n        <Grid\n          container\n          justifyContent=\"center\"\n          spacing={2}\n          component=\"ul\"\n          classes={classes}\n        >\n          <GridItem>\n            <InfoCard\n              variant=\"fullHeight\"\n              title={provider.title}\n              actions={\n                <Button\n                  color=\"primary\"\n                  variant=\"outlined\"\n                  onClick={() => {\n                    login({ showPopup: true });\n                  }}\n                >\n                  Sign In\n                </Button>\n              }\n            >\n              <Typography variant=\"body1\">{provider.message}</Typography>\n              {error && error.name !== 'PopupRejectedError' && (\n                <Typography variant=\"body1\" color=\"error\">\n                  {error.message}\n                </Typography>\n              )}\n            </InfoCard>\n          </GridItem>\n        </Grid>\n      </Content>\n    </Page>\n  ) : (\n    <Progress />\n  );\n};\n\nexport function SignInPage(props: Props) {\n  if ('provider' in props) {\n    return <SingleSignInPage {...props} />;\n  }\n\n  return <MultiSignInPage {...props} />;\n}\n","/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport Tab, { TabProps } from '@material-ui/core/Tab';\nimport Tabs from '@material-ui/core/Tabs';\nimport React, {\n  PropsWithChildren,\n  ReactElement,\n  ReactNode,\n  useState,\n} from 'react';\nimport { BottomLink, BottomLinkProps } from '../BottomLink';\nimport { ErrorBoundary, ErrorBoundaryProps } from '../ErrorBoundary';\n\nexport type TabbedCardClassKey = 'root' | 'indicator';\n\nconst useTabsStyles = makeStyles(\n  theme => ({\n    root: {\n      padding: theme.spacing(0, 2, 0, 2.5),\n      minHeight: theme.spacing(3),\n    },\n    indicator: {\n      backgroundColor: theme.palette.info.main,\n      height: theme.spacing(0.3),\n    },\n  }),\n  { name: 'BackstageTabbedCard' },\n);\n\n/** @public */\nexport type BoldHeaderClassKey = 'root' | 'title' | 'subheader';\n\nconst BoldHeader = withStyles(\n  theme => ({\n    root: { padding: theme.spacing(2, 2, 2, 2.5), display: 'inline-block' },\n    title: { fontWeight: 700 },\n    subheader: { paddingTop: theme.spacing(1) },\n  }),\n  { name: 'BackstageTabbedCardBoldHeader' },\n)(CardHeader);\n\ntype Props = {\n  /** @deprecated Use errorBoundaryProps instead */\n  slackChannel?: string;\n  errorBoundaryProps?: ErrorBoundaryProps;\n  children?: ReactElement<TabProps>[];\n  onChange?: (event: React.ChangeEvent<{}>, value: number | string) => void;\n  title?: string;\n  value?: number | string;\n  deepLink?: BottomLinkProps;\n};\n\nexport function TabbedCard(props: PropsWithChildren<Props>) {\n  const {\n    slackChannel,\n    errorBoundaryProps,\n    children,\n    title,\n    deepLink,\n    value,\n    onChange,\n  } = props;\n  const tabsClasses = useTabsStyles();\n  const [selectedIndex, selectIndex] = useState(0);\n\n  const handleChange = onChange\n    ? onChange\n    : (_ev: unknown, newSelectedIndex: number) => selectIndex(newSelectedIndex);\n\n  let selectedTabContent: ReactNode;\n  if (!value) {\n    React.Children.map(children, (child, index) => {\n      if (React.isValidElement(child) && index === selectedIndex) {\n        selectedTabContent = child?.props.children;\n      }\n    });\n  } else {\n    React.Children.map(children, child => {\n      if (React.isValidElement(child) && child?.props.value === value) {\n        selectedTabContent = child?.props?.children;\n      }\n    });\n  }\n\n  const errProps: ErrorBoundaryProps =\n    errorBoundaryProps || (slackChannel ? { slackChannel } : {});\n\n  return (\n    <Card>\n      <ErrorBoundary {...errProps}>\n        {title && <BoldHeader title={title} />}\n        <Tabs\n          selectionFollowsFocus\n          classes={tabsClasses}\n          value={value || selectedIndex}\n          onChange={handleChange}\n        >\n          {children}\n        </Tabs>\n        <Divider />\n        <CardContent>{selectedTabContent}</CardContent>\n        {deepLink && <BottomLink {...deepLink} />}\n      </ErrorBoundary>\n    </Card>\n  );\n}\n\n/** @public */\nexport type CardTabClassKey = 'root' | 'selected';\n\nconst useCardTabStyles = makeStyles(\n  theme => ({\n    root: {\n      minWidth: theme.spacing(6),\n      minHeight: theme.spacing(3),\n      margin: theme.spacing(0, 2, 0, 0),\n      padding: theme.spacing(0.5, 0, 0.5, 0),\n      textTransform: 'none',\n      '&:hover': {\n        opacity: 1,\n        backgroundColor: 'transparent',\n        color: theme.palette.text.primary,\n      },\n    },\n    selected: {\n      fontWeight: theme.typography.fontWeightBold,\n    },\n  }),\n  { name: 'BackstageCardTab' },\n);\n\ntype CardTabProps = TabProps & {\n  children: ReactNode;\n};\n\n/**\n * Card tab component used in {@link TabbedCard}\n *\n * @public\n *\n */\nexport function CardTab(props: PropsWithChildren<CardTabProps>) {\n  const { children, ...restProps } = props;\n  const classes = useCardTabStyles();\n\n  return <Tab disableRipple classes={classes} {...restProps} />;\n}\n"],"names":["useStyles","Route","classnames","RouterLink","MaterialButton","Button","Direction","Alignment","Ranker","LabelPosition","makeStyles","renderDefault","useTheme","_a","Close","ChevronRightIcon","ErrorBoundary","Component","Table","value","useResolvedPath","Link","ArrowDropUp","ArrowDropDown","Tabs","TabUI","useFilterStyles","Select","ChevronLeft","styles","loader"],"mappings":"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"}